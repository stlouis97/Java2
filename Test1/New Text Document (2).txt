USE [master]
GO
/****** Object:  Database [VAPCODB]    Script Date: 5/30/2025 11:33:13 AM ******/
CREATE DATABASE [VAPCODB]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'VAPCODB', FILENAME = N'F:\EDoc\VAPCODB.mdf' , SIZE = 139264KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'VAPCODB_log', FILENAME = N'F:\EDoc\VAPCODB.ldf' , SIZE = 73728KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT, LEDGER = OFF
GO
ALTER DATABASE [VAPCODB] SET COMPATIBILITY_LEVEL = 130
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [VAPCODB].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [VAPCODB] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [VAPCODB] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [VAPCODB] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [VAPCODB] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [VAPCODB] SET ARITHABORT OFF 
GO
ALTER DATABASE [VAPCODB] SET AUTO_CLOSE ON 
GO
ALTER DATABASE [VAPCODB] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [VAPCODB] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [VAPCODB] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [VAPCODB] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [VAPCODB] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [VAPCODB] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [VAPCODB] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [VAPCODB] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [VAPCODB] SET  DISABLE_BROKER 
GO
ALTER DATABASE [VAPCODB] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [VAPCODB] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [VAPCODB] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [VAPCODB] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [VAPCODB] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [VAPCODB] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [VAPCODB] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [VAPCODB] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [VAPCODB] SET  MULTI_USER 
GO
ALTER DATABASE [VAPCODB] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [VAPCODB] SET DB_CHAINING OFF 
GO
ALTER DATABASE [VAPCODB] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [VAPCODB] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [VAPCODB] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [VAPCODB] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
ALTER DATABASE [VAPCODB] SET QUERY_STORE = OFF
GO
USE [VAPCODB]
GO
/****** Object:  Table [dbo].[P00Department]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Department](
	[DeptId] [int] IDENTITY(1,1) NOT NULL,
	[SiteId] [int] NOT NULL,
	[DeptName] [nvarchar](64) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00Department] PRIMARY KEY CLUSTERED 
(
	[DeptId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Site]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Site](
	[SiteId] [int] IDENTITY(1,1) NOT NULL,
	[SiteName] [nvarchar](64) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P00Site_IdSite] PRIMARY KEY CLUSTERED 
(
	[SiteId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP00Department]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP00Department]
AS
SELECT dept.DeptId
      ,dept.SiteId, site.SiteName
      ,dept.DeptName
      ,dept.IsActive
      ,dept.CreatedBy
      ,dept.CreatedAt
      ,dept.ModifiedBy
      ,dept.ModifiedAt
FROM P00Department dept
INNER JOIN P00Site site ON dept.SiteId = site.SiteId
GO
/****** Object:  Table [dbo].[P01LevelApproveWD]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveWD](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveWD] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00JobTitle]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00JobTitle](
	[JobTitleId] [int] IDENTITY(1,1) NOT NULL,
	[JobTitleName] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00JobTitle_IdJobTitle] PRIMARY KEY CLUSTERED 
(
	[JobTitleId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Gender]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Gender](
	[GenderId] [int] IDENTITY(1,1) NOT NULL,
	[GenderName] [nvarchar](50) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P00Gender] PRIMARY KEY NONCLUSTERED 
(
	[GenderId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00EmployeeType]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00EmployeeType](
	[EmployeeTypeId] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeTypeName] [nvarchar](255) NOT NULL,
	[EmployeeTypeName2] [nvarchar](255) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00EmployeeType_IdEmployeeType] PRIMARY KEY CLUSTERED 
(
	[EmployeeTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Position]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Position](
	[PositionId] [int] IDENTITY(1,1) NOT NULL,
	[PositionName] [nvarchar](255) NOT NULL,
	[IsReviewer] [bit] NULL,
	[IsApprover] [bit] NULL,
	[Prioritize] [int] NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00Position_IdPosition] PRIMARY KEY CLUSTERED 
(
	[PositionId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Team]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Team](
	[TeamId] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[TeamName] [nvarchar](64) NOT NULL,
	[LeaderEmployeeId] [int] NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00Team] PRIMARY KEY CLUSTERED 
(
	[TeamId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Employee]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Employee](
	[EmployeeId] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeCode] [nvarchar](30) NOT NULL,
	[FirstName] [nvarchar](50) NULL,
	[LastName] [nvarchar](50) NULL,
	[EmployeeName] [nvarchar](100) NOT NULL,
	[DeptId] [int] NOT NULL,
	[TeamId] [int] NULL,
	[PositionId] [int] NULL,
	[JobTitleId] [int] NULL,
	[BirthDate] [datetime] NULL,
	[GenderId] [int] NULL,
	[EmailAddress] [nvarchar](100) NOT NULL,
	[PhoneNumber] [nvarchar](50) NULL,
	[Address] [nvarchar](50) NULL,
	[FirstWorkingDate] [datetime] NULL,
	[ProbationaryEndDate] [datetime] NULL,
	[EndWorkingDate] [datetime] NULL,
	[AnnualLeave] [numeric](18, 2) NOT NULL,
	[EmployeeNo] [int] NULL,
	[EmployeeTypeId] [int] NULL,
	[SignPath] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P00Employee] PRIMARY KEY NONCLUSTERED 
(
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [IX_P00Employee_Code] UNIQUE CLUSTERED 
(
	[EmployeeCode] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP00Team]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP00Team]  
AS  
SELECT t.TeamId  
      ,t.DeptId  
      ,t.TeamName  
      ,d.DeptName  
      ,d.SiteId  
      ,d.SiteName  
      ,t.LeaderEmployeeId  
      ,e.EmployeeCode as LeaderEmployeeCode  
      ,e.EmployeeName as LeaderEmployeeName  
      ,t.IsActive  
      ,t.CreatedBy  
      ,t.CreatedAt  
      ,t.ModifiedBy  
      ,t.ModifiedAt  
FROM P00Team t  
INNER JOIN vP00Department d ON t.DeptId = d.DeptId  
LEFT JOIN  P00Employee e ON t.LeaderEmployeeId = e.EmployeeId  
  
GO
/****** Object:  View [dbo].[vP00Employee]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
        
        
CREATE VIEW [dbo].[vP00Employee]        
AS        
SELECT emp.EmployeeId        
      ,emp.EmployeeCode  
   ,emp.FirstName  
   ,emp.LastName  
      ,emp.EmployeeName        
      ,CONCAT(emp.FirstName,', ',emp.LastName) as EmployeeName2      
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName    
   ,emp.TeamId, tm.TeamName, tm.LeaderEmployeeId, tm.LeaderEmployeeName    
      ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize        
      ,emp.JobTitleId, job.JobTitleName        
      ,emp.BirthDate        
      ,emp.GenderId, gd.GenderName        
      ,emp.EmailAddress        
      ,emp.PhoneNumber        
      ,emp.FirstWorkingDate        
      ,emp.ProbationaryEndDate        
      ,emp.EndWorkingDate        
      ,emp.AnnualLeave        
      ,emp.EmployeeNo        
      ,emp.SignPath        
      ,emp.EmployeeTypeId, et.EmployeeTypeName        
      ,emp.IsActive        
      ,emp.CreatedBy        
      ,emp.CreatedAt        
      ,emp.ModifiedBy        
      ,emp.ModifiedAt        
FROM P00Employee emp        
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId        
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId        
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId        
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId        
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId        
LEFT JOIN P00EmployeeType et ON emp.EmployeeTypeId = et.EmployeeTypeId        
LEFT JOIN vP00Team tm ON emp.TeamId = tm.TeamId        
GO
/****** Object:  Table [dbo].[P01ApproverListWD]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListWD](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListWD_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListWD]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ApproverListWD]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
	  ,emp.EmailAddress
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListWD ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveWD lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01WFHDailyReportListApprover]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01WFHDailyReportListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWD
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01WFHDailyReportListReviewer1]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01WFHDailyReportListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWD
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  Table [dbo].[P01LevelApproveBT]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveBT](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveBT] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproverListBT]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListBT](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListBT] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListBT]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ApproverListBT]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListBT ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveBT lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01WFHDailyReportListReviewer2]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01WFHDailyReportListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWD
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  Table [dbo].[P01LevelApproveBTC]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveBTC](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveBTC] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproverListBTC]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListBTC](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListBTC] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListBTC]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01ApproverListBTC]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListBTC ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveBTC lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01WFHDailyReportListReviewer3]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01WFHDailyReportListReviewer3]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWD
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01BusinessTravelListEndorsement]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01BusinessTravelListEndorsement]
AS
SELECT * 
FROM vP01ApproverListBT
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  Table [dbo].[P01ExpenseSettlement]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseSettlement](
	[ESId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[ReferenceNumber] [nvarchar](2000) NULL,
	[PayTo] [nvarchar](2000) NULL,
	[DueDate] [smalldatetime] NOT NULL,
	[PaymentMethod] [nvarchar](2000) NULL,
	[PaymentCurrency] [nvarchar](2000) NULL,
	[CostCode] [nvarchar](2000) NULL,
	[Description] [nvarchar](2000) NULL,
	[Total] [numeric](18, 2) NULL,
	[PaidAmountInAdvance] [numeric](18, 2) NULL,
	[InWords] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Review1Checked] [bit] NULL,
	[Review1EmployeeId] [int] NULL,
	[Review1Action] [nvarchar](50) NULL,
	[Review1ApproveTime] [datetime] NULL,
	[Review1Comment] [nvarchar](500) NULL,
	[Review2Checked] [bit] NULL,
	[Review2EmployeeId] [int] NULL,
	[Review2Action] [nvarchar](50) NULL,
	[Review2ApproveTime] [datetime] NULL,
	[Review2Comment] [nvarchar](2000) NULL,
	[Review3Checked] [bit] NULL,
	[Review3EmployeeId] [int] NULL,
	[Review3Action] [nvarchar](50) NULL,
	[Review3ApproveTime] [datetime] NULL,
	[Review3Comment] [nvarchar](500) NULL,
	[Review4Checked] [bit] NULL,
	[Review4EmployeeId] [int] NULL,
	[Review4Action] [nvarchar](50) NULL,
	[Review4ApproveTime] [datetime] NULL,
	[Review4Comment] [nvarchar](2000) NULL,
	[VerifierChecked] [bit] NULL,
	[VerifierEmployeeId] [int] NULL,
	[VerifierAction] [nvarchar](50) NULL,
	[VerifierApproveTime] [datetime] NULL,
	[VerifierComment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Review1CancelChecked] [bit] NULL,
	[Review1CancelEmployeeId] [int] NULL,
	[Review1CancelAction] [nvarchar](50) NULL,
	[Review1CancelApproveTime] [datetime] NULL,
	[Review1CancelComment] [nvarchar](500) NULL,
	[Review2CancelChecked] [bit] NULL,
	[Review2CancelEmployeeId] [int] NULL,
	[Review2CancelAction] [nvarchar](50) NULL,
	[Review2CancelApproveTime] [datetime] NULL,
	[Review2CancelComment] [nvarchar](500) NULL,
	[Review3CancelChecked] [bit] NULL,
	[Review3CancelEmployeeId] [int] NULL,
	[Review3CancelAction] [nvarchar](50) NULL,
	[Review3CancelApproveTime] [datetime] NULL,
	[Review3CancelComment] [nvarchar](500) NULL,
	[Review4CancelChecked] [bit] NULL,
	[Review4CancelEmployeeId] [int] NULL,
	[Review4CancelAction] [nvarchar](50) NULL,
	[Review4CancelApproveTime] [datetime] NULL,
	[Review4CancelComment] [nvarchar](500) NULL,
	[VerifierCancelChecked] [bit] NULL,
	[VerifierCancelEmployeeId] [int] NULL,
	[VerifierCancelAction] [nvarchar](50) NULL,
	[VerifierCancelApproveTime] [datetime] NULL,
	[VerifierCancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](200) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Paid] [bit] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ExpenseSettlement_Id] PRIMARY KEY CLUSTERED 
(
	[ESId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Users]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Users](
	[UserId] [int] IDENTITY(1,1) NOT NULL,
	[UserName] [nvarchar](50) NOT NULL,
	[Password] [nvarchar](50) NOT NULL,
	[Avatar] [nvarchar](255) NULL,
	[EmployeeId] [int] NOT NULL,
	[PermissionId] [int] NOT NULL,
	[FunctionId] [int] NOT NULL,
	[LastLogin] [datetime] NULL,
	[LockoutEnable] [bit] NULL,
	[LockoutEndDate] [datetime] NULL,
	[NumLoginFailed] [int] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00Admins] PRIMARY KEY CLUSTERED 
(
	[UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[UserName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00UserFunction]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00UserFunction](
	[FunctionId] [int] IDENTITY(1,1) NOT NULL,
	[FunctionCode] [int] NOT NULL,
	[FunctionName] [nvarchar](50) NOT NULL,
	[timestamps] [datetime] NULL,
	[Detail] [nvarchar](50) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00UserFunction] PRIMARY KEY CLUSTERED 
(
	[FunctionId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[FunctionCode] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Permissions]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Permissions](
	[PermissionId] [int] IDENTITY(1,1) NOT NULL,
	[PermissionCode] [int] NOT NULL,
	[PermissionName] [nvarchar](50) NOT NULL,
	[timestamps] [datetime] NULL,
	[Detail] [nvarchar](50) NOT NULL,
	[IsActive] [bit] NULL,
 CONSTRAINT [PK_P00Permissions_IdPermission] PRIMARY KEY CLUSTERED 
(
	[PermissionId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[PermissionCode] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP00Users]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO







CREATE VIEW [dbo].[vP00Users]
AS
SELECT u.UserId
      ,u.UserName
      ,u.Password
      --,u.Email
      ,u.Avatar
      --,u.FullName
      ,u.EmployeeId,em.EmployeeCode, em.EmployeeName, em.DeptId, em.DeptName,em.PositionName, em.JobTitleName, 
	  em.GenderId, em.GenderName, em.BirthDate, em.EmailAddress, em.PhoneNumber, em.SignPath
      ,u.PermissionId, per.PermissionName
      ,u.FunctionId, func.FunctionName
      ,u.LastLogin
      ,u.LockoutEnable
      ,u.LockoutEndDate
      ,u.NumLoginFailed
      ,u.IsActive
      ,u.CreatedBy
      ,u.CreatedAt
      ,u.ModifiedBy
      ,u.ModifiedAt
FROM P00Users u 
LEFT JOIN vP00Employee em ON u.EmployeeId = em.EmployeeId
LEFT JOIN P00Permissions per ON u.PermissionId = per.PermissionCode
LEFT JOIN P00UserFunction func ON u.FunctionId = func.FunctionCode


GO
/****** Object:  View [dbo].[vP01ExpenseSettlement]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
      
        
CREATE VIEW [dbo].[vP01ExpenseSettlement]        
AS        
SELECT bt.ESId        
      ,bt.RequestStatus        
      ,bt.IssueDate        
      ,bt.Number        
      ,bt.NumberCode        
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress        
   ,emp.SignPath as EmployeeSign        
  ,bt.ReferenceNumber        
  ,bt.PayTo        
  ,bt.DueDate        
  ,bt.PaymentMethod        
  ,bt.PaymentCurrency        
  ,bt.CostCode        
  ,bt.Description        
  ,bt.Total        
  ,bt.PaidAmountInAdvance        
  ,Isnull(bt.Total,0) - Isnull(bt.PaidAmountInAdvance,0) as TheRemainingAmount        
  ,bt.InWords        
   ,bt.CurrentApprover        
   ,bt.CurrentLevel        
      --        
    ,curApr.EmployeeName as CurrentApproverEmployeeName        
    ,curApr.PositionName as CurrentApproverPositionName        
    ,curApr.EmailAddress as CurrentApproverEmailAddress        
   --approve        
   ,bt.Review1Checked        
   ,bt.Review1EmployeeId,rv1.EmployeeName as Review1EmployeeName, rv1.PositionName as Review1PositionName, rv1.EmailAddress as Review1EmailAddress        
      ,bt.Review1Action        
      ,bt.Review1ApproveTime        
      ,bt.Review1Comment        
   ,IIF(bt.Review1Checked = 1,rv1.SignPath,'') as Review1Sign        
        
   ,bt.Review2Checked        
   ,bt.Review2EmployeeId,rv2.EmployeeName as Review2EmployeeName, rv2.PositionName as Review2PositionName, rv2.EmailAddress as Review2EmailAddress        
      ,bt.Review2Action        
      ,bt.Review2ApproveTime        
      ,bt.Review2Comment        
   ,IIF(bt.Review2Checked = 1,rv2.SignPath,'') as Review2Sign        
        
   ,bt.Review3Checked        
   ,bt.Review3EmployeeId,rv3.EmployeeName as Review3EmployeeName, rv3.PositionName as Review3PositionName, rv3.EmailAddress as Review3EmailAddress        
      ,bt.Review3Action        
      ,bt.Review3ApproveTime        
      ,bt.Review3Comment        
   ,IIF(bt.Review3Checked = 1,rv3.SignPath,'') as Review3Sign        
        
   ,bt.Review4Checked        
   ,bt.Review4EmployeeId,rv4.EmployeeName as Review4EmployeeName, rv4.PositionName as Review4PositionName, rv4.EmailAddress as Review4EmailAddress        
      ,bt.Review4Action        
      ,bt.Review4ApproveTime        
      ,bt.Review4Comment        
   ,IIF(bt.Review4Checked = 1,rv4.SignPath,'') as Review4Sign        
        
   ,bt.VerifierChecked        
   ,bt.VerifierEmployeeId,vrf.EmployeeName as VerifierEmployeeName, vrf.PositionName as VerifierPositionName, vrf.EmailAddress as VerifierEmailAddress        
   ,bt.VerifierAction        
      ,bt.VerifierApproveTime        
      ,bt.VerifierComment        
   ,IIF(bt.VerifierChecked = 1,vrf.SignPath,'') as VerifierSign        
          
   ,bt.EndorsementChecked        
   ,bt.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress        
   ,bt.EndorsementAction        
      ,bt.EndorsementApproveTime        
      ,bt.EndorsementComment        
   ,IIF(bt.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign        
        
  --2025-03-07 add Endorse 2      
     ,bt.ConfirmChecked        
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,bt.ConfirmAction        
      ,bt.ConfirmApproveTime        
      ,bt.ConfirmComment        
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign        
      
   ,bt.ApproverChecked        
   ,bt.ApproverEmployeeId,apr.EmployeeName as ApproverEmployeeName, apr.PositionName as ApproverPositionName, apr.EmailAddress as ApproverEmailAddress        
   ,bt.ApproverAction        
      ,bt.ApproverApproveTime        
      ,bt.ApproverComment        
   ,IIF(bt.ApproverChecked = 1,apr.SignPath,'') as ApproverSign        
        
   --cancel        
   ,bt.Review1CancelChecked        
   ,bt.Review1CancelEmployeeId,clrv1.EmployeeName as Review1CancelEmployeeName, clrv1.PositionName as Review1CancelPositionName, clrv1.EmailAddress as Review1CancelEmailAddress        
      ,bt.Review1CancelAction        
      ,bt.Review1CancelApproveTime        
      ,bt.Review1CancelComment        
   ,IIF(bt.Review1CancelChecked = 1,clrv1.SignPath,'') as Review1CancelSign        
        
   ,bt.Review2CancelChecked        
   ,bt.Review2CancelEmployeeId,clrv2.EmployeeName as Review2CancelEmployeeName, clrv2.PositionName as Review2CancelPositionName, clrv2.EmailAddress as Review2CancelEmailAddress        
      ,bt.Review2CancelAction        
      ,bt.Review2CancelApproveTime        
      ,bt.Review2CancelComment        
   ,IIF(bt.Review2CancelChecked = 1,clrv2.SignPath,'') as Review2CancelSign        
        
   ,bt.Review3CancelChecked        
   ,bt.Review3CancelEmployeeId,clrv3.EmployeeName as Review3CancelEmployeeName, clrv3.PositionName as Review3CancelPositionName, clrv3.EmailAddress as Review3CancelEmailAddress        
      ,bt.Review3CancelAction        
      ,bt.Review3CancelApproveTime        
      ,bt.Review3CancelComment        
   ,IIF(bt.Review3CancelChecked = 1,clrv3.SignPath,'') as Review3CancelSign        
        
   ,bt.Review4CancelChecked        
   ,bt.Review4CancelEmployeeId,clrv4.EmployeeName as Review4CancelEmployeeName, clrv4.PositionName as Review4CancelPositionName, clrv4.EmailAddress as Review4CancelEmailAddress        
      ,bt.Review4CancelAction        
      ,bt.Review4CancelApproveTime        
      ,bt.Review4CancelComment        
   ,IIF(bt.Review4CancelChecked = 1,clrv4.SignPath,'') as Review4CancelSign        
        
   ,bt.VerifierCancelChecked        
   ,bt.VerifierCancelEmployeeId,clvrf.EmployeeName as VerifierCancelEmployeeName, clvrf.PositionName as VerifierCancelPositionName, clvrf.EmailAddress as VerifierCancelEmailAddress        
   ,bt.VerifierCancelAction        
      ,bt.VerifierCancelApproveTime        
      ,bt.VerifierCancelComment        
   ,IIF(bt.VerifierCancelChecked = 1,clvrf.SignPath,'') as VerifierCancelSign        
        
   ,bt.EndorsementCancelChecked        
   ,bt.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress        
   ,bt.EndorsementCancelAction        
      ,bt.EndorsementCancelApproveTime        
      ,bt.EndorsementCancelComment        
   ,IIF(bt.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign        
        
  --20250307 add endorse 2      
     ,bt.ConfirmCancelChecked        
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,bt.ConfirmCancelAction        
      ,bt.ConfirmCancelApproveTime        
      ,bt.ConfirmCancelComment        
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign        
      
   ,bt.ApproverCancelChecked        
   ,bt.ApproverCancelEmployeeId,clapr.EmployeeName as ApproverCancelEmployeeName, clapr.PositionName as ApproverCancelPositionName, clapr.EmailAddress as ApproverCancelEmailAddress        
   ,bt.ApproverCancelAction        
      ,bt.ApproverCancelApproveTime        
      ,bt.ApproverCancelComment        
   ,IIF(bt.ApproverCancelChecked = 1,clapr.SignPath,'') as ApproverCancelSign        
           
   ,bt.CancelReason        
   ,bt.CancelTime        
        
   ,bt.ManualApprovalFileName        
   ,bt.ManualApprovalFilePath        
   ,bt.ManualApprovalBy        
   ,bt.ManualApprovalAt        
        
   ,bt.Paid        
        
   ,ApplicationName        
   ,CONCAT('/expense-settlement-approval-',ESId) as approvalURL,        
  CONCAT('/expense-settlement-cancel-request-',ESId) as cancelURL,        
  CONCAT('/expense-settlement-approve-view-',ESId) as viewURL        
      ,bt.Sync        
      ,bt.LastSync        
     ,bt.IsActive        
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode        
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName        
   ,ucr.SignPath as CreatedBySignPath        
      ,bt.CreatedAt        
      ,bt.ModifiedBy        
      ,bt.ModifiedAt        
   --new2        
         
FROM P01ExpenseSettlement bt        
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId        
LEFT JOIN vP00Employee rv1 ON bt.Review1EmployeeId= rv1.EmployeeId        
LEFT JOIN vP00Employee rv2 ON bt.Review2EmployeeId = rv2.EmployeeId        
LEFT JOIN vP00Employee rv3 ON bt.Review3EmployeeId= rv3.EmployeeId        
LEFT JOIN vP00Employee rv4 ON bt.Review4EmployeeId = rv4.EmployeeId        
LEFT JOIN vP00Employee vrf ON bt.VerifierEmployeeId = vrf.EmployeeId        
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId    
LEFT JOIN vP00Employee endo ON bt.EndorsementEmployeeId = endo.EmployeeId        
INNER JOIN vP00Employee apr ON bt.ApproverEmployeeId = apr.EmployeeId        
--cancel        
LEFT JOIN vP00Employee clrv1 ON bt.Review1CancelEmployeeId= clrv1.EmployeeId        
LEFT JOIN vP00Employee clrv2 ON bt.Review2CancelEmployeeId = clrv2.EmployeeId        
LEFT JOIN vP00Employee clrv3 ON bt.Review3CancelEmployeeId= clrv3.EmployeeId        
LEFT JOIN vP00Employee clrv4 ON bt.Review4CancelEmployeeId = clrv4.EmployeeId        
LEFT JOIN vP00Employee clvrf ON bt.VerifierCancelEmployeeId = clvrf.EmployeeId     
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId   
LEFT JOIN vP00Employee cendo ON bt.EndorsementCancelEmployeeId = cendo.EmployeeId        
LEFT JOIN vP00Employee clapr ON bt.ApproverCancelEmployeeId = clapr.EmployeeId        
        
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId        
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01LeaveDaysApprover]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01LeaveDaysApprover]
AS
SELECT ap.LeaveDayApproverId
      ,ap.DeptId, dept.DeptName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01LeaveDaysApprover ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN P00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApprove lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  Table [dbo].[P01OvertimeConfirmation]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeConfirmation](
	[OTCId] [int] IDENTITY(1,1) NOT NULL,
	[OTId] [int] NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeConfirmation] PRIMARY KEY CLUSTERED 
(
	[OTCId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmation]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01OvertimeConfirmation]    
AS    
SELECT ld.OTCId    
   ,ld.OTId    
      ,ld.RequestStatus    
      ,ld.WorkYear    
      ,ld.IssueDate    
      ,ld.Number    
      ,ld.NumberCode    
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
      ,emp.SignPath as EmployeeSign    
   ,ld.Remark    
   ,ld.CurrentApprover    
   ,ld.CurrentLevel    
       --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
   --approve    
   ,ld.Level1Checked    
   ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress    
      ,ld.Level1Action    
      ,ld.Level1ApproveTime    
      ,ld.Level1Comment    
   ,lv1.SignPath as Level1Sign    
    
   ,ld.Level2Checked    
   ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress    
      ,ld.Level2Action    
      ,ld.Level2ApproveTime    
      ,ld.Level2Comment    
   ,lv2.SignPath as Level2Sign    
    
   ,ld.Level3Checked    
   ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress    
   ,ld.Level3Action    
      ,ld.Level3ApproveTime    
      ,ld.Level3Comment    
   ,lv3.SignPath as Level3Sign    
    
     ,ld.ConfirmChecked        
   ,ld.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,ld.ConfirmAction        
      ,ld.ConfirmApproveTime        
      ,ld.ConfirmComment        
   ,IIF(ld.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
  
   ,ld.EndorsementChecked    
   ,ld.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress    
   ,ld.EndorsementAction    
      ,ld.EndorsementApproveTime    
      ,ld.EndorsementComment    
   ,IIF(ld.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign    
    
   ,ld.Level4Checked    
   ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress    
   ,ld.Level4Action    
      ,ld.Level4ApproveTime    
      ,ld.Level4Comment    
   ,lv4.SignPath as Level4Sign    
     
 --cancel    
   ,ld.Level1CancelChecked    
   ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress    
      ,ld.Level1CancelAction    
      ,ld.Level1CancelApproveTime    
      ,ld.Level1CancelComment    
   ,clv1.SignPath as Level1CancelSign    
    
   ,ld.Level2CancelChecked    
   ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress    
      ,ld.Level2CancelAction    
      ,ld.Level2CancelApproveTime    
      ,ld.Level2CancelComment    
   ,clv2.SignPath as Level2CancelSign    
    
   ,ld.Level3CancelChecked    
   ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress    
   ,ld.Level3CancelAction    
      ,ld.Level3CancelApproveTime    
      ,ld.Level3CancelComment    
   ,clv3.SignPath as Level3CancelSign    
    
  ,ld.ConfirmCancelChecked        
   ,ld.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,ld.ConfirmCancelAction        
      ,ld.ConfirmCancelApproveTime        
      ,ld.ConfirmCancelComment        
   ,IIF(ld.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign  
  
   ,ld.EndorsementCancelChecked    
   ,ld.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress    
   ,ld.EndorsementCancelAction    
      ,ld.EndorsementCancelApproveTime    
      ,ld.EndorsementCancelComment    
   ,IIF(ld.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign    
    
   ,ld.Level4CancelChecked    
   ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress    
   ,ld.Level4CancelAction    
      ,ld.Level4CancelApproveTime    
      ,ld.Level4CancelComment    
   ,clv4.SignPath as Level4CancelSign    
       
   ,ld.CancelReason    
   ,ld.CancelTime    
    
   ,ApplicationName    
   ,CONCAT('/over-time-confirmation-approval-',ld.OTCId) as approvalURL    
   ,CONCAT('/over-time-confirmation-cancel-request-',ld.OTCId) as cancelURL    
   ,CONCAT('/over-time-confirmation-approve-view-',ld.OTCId) as viewURL    
          
   ,ld.ManualApprovalFileName    
   ,ld.ManualApprovalFilePath    
   ,ld.ManualApprovalBy    
   ,ld.ManualApprovalAt    
    
      ,ld.Sync    
      ,ld.LastSync    
      ,ld.IsActive    
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,ld.CreatedAt    
      ,ld.ModifiedBy    
      ,ld.ModifiedAt    
FROM P01OvertimeConfirmation ld    
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId    
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId    
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId    
LEFT JOIN vP00Employee cfm ON ld.ConfirmEmployeeId = cfm.EmployeeId    
LEFT JOIN vP00Employee endo ON ld.EndorsementEmployeeId = endo.EmployeeId    
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId    
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId    
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId    
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId    
LEFT JOIN vP00Employee ccfm ON ld.ConfirmCancelEmployeeId = ccfm.EmployeeId   
LEFT JOIN vP00Employee cendo ON ld.EndorsementCancelEmployeeId = cendo.EmployeeId    
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId    
    
GO
/****** Object:  Table [dbo].[P00WorkType]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00WorkType](
	[WorkTypeId] [int] IDENTITY(1,1) NOT NULL,
	[WorkTypeName] [nvarchar](255) NOT NULL,
	[WorkTypeName2] [nvarchar](255) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00WorkType_IdWorkType] PRIMARY KEY CLUSTERED 
(
	[WorkTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00WorkShift]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00WorkShift](
	[WorkShiftId] [int] IDENTITY(1,1) NOT NULL,
	[WorkTypeId] [int] NULL,
	[WorkShiftName] [nvarchar](255) NOT NULL,
	[WorkShiftName2] [nvarchar](255) NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00WorkShift_IdWorkShift] PRIMARY KEY CLUSTERED 
(
	[WorkShiftId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP00WorkShift]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP00WorkShift]  
AS  
SELECT s.WorkShiftId  
      ,s.WorkTypeId  
   ,t.WorkTypeName  
   ,t.WorkTypeName2  
      ,s.WorkShiftName  
      ,s.WorkShiftName2  
      ,s.StartTime  
      ,s.EndTime  
      ,s.Remark  
      ,s.IsActive  
      ,s.CreatedBy  
      ,s.CreatedAt  
      ,s.ModifiedBy  
      ,s.ModifiedAt  
FROM P00WorkShift s  
LEFT JOIN P00WorkType t ON s.WorkTypeId = t.WorkTypeId  
  
  
GO
/****** Object:  Table [dbo].[P01OvertimeConfirmationDetail]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeConfirmationDetail](
	[OTCDId] [int] IDENTITY(1,1) NOT NULL,
	[OTCId] [int] NOT NULL,
	[OTDId] [int] NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[WorkShiftId] [int] NULL,
	[EmployeeId] [int] NOT NULL,
	[LeaderName] [nvarchar](500) NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[BreakTime] [nvarchar](50) NULL,
	[WorkingHours] [nvarchar](50) NULL,
	[Reason] [nvarchar](500) NULL,
	[ApplicantRequest] [nvarchar](500) NULL,
	[WorkingHoursForCL] [nvarchar](50) NULL,
	[NumberOfCL] [numeric](18, 2) NULL,
	[NumberOfCLHours] [nvarchar](50) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeDetailConfirmation] PRIMARY KEY CLUSTERED 
(
	[OTCDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01OvertimeDetail]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeDetail](
	[OTDId] [int] IDENTITY(1,1) NOT NULL,
	[OTId] [int] NOT NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[WorkShiftId] [int] NULL,
	[EmployeeId] [int] NOT NULL,
	[LeaderName] [nvarchar](500) NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[BreakTime] [nvarchar](50) NULL,
	[WorkingHours] [nvarchar](50) NULL,
	[Reason] [nvarchar](500) NULL,
	[ApplicantRequest] [nvarchar](500) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeDetail] PRIMARY KEY CLUSTERED 
(
	[OTDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationDetail]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
          
CREATE VIEW [dbo].[vP01OvertimeConfirmationDetail]                
AS                  
SELECT dt.OTCDId                  
      ,dt.OTCId, r.EmployeeId, r.WorkYear, r.RequestStatus  ,r.NumberCode                
      ,dt.WorkDate                 
   ,dt.EmployeeId as WorkerEmployeeId                    
   ,emp.EmployeeName as WorkerEmployeeName,emp.DeptName as WorkerDeptName                  
   ,emp.PositionName as WorkerPositionName                  
   ,emp.JobTitleName as WorkerJobTitleName                  
   ,dt.WorkShiftId                      
   ,ws.WorkShiftName, ws.WorkTypeId, ws.WorkTypeName                      
   ,dt.LeaderName                 
             
   ,otd.OTDId      
   ,otd.StartTime as PlanStartTime                  
   ,otd.EndTime as PlanEndTime                  
   ,otd.BreakTime as PlanBreakTime             
   ,otd.WorkingHours as PlanWorkingHours          
          
   ,dt.StartTime                  
   ,dt.EndTime                  
   ,dt.BreakTime                  
   ,dt.WorkingHours             
             
   ,dt.Reason                  
   ,dt.ApplicantRequest        
   ,dt.WorkingHoursForCL  
   ,dt.NumberOfCL         
   ,dt.NumberOfCLHours  
   ,dt.Remark                  
      ,dt.IsActive                  
      ,dt.CreatedBy                  
      ,dt.CreatedAt                  
      ,dt.ModifiedBy                  
      ,dt.ModifiedAt                 
         ,ROW_NUMBER() OVER(PARTITION BY dt.OTCId ORDER BY dt.OTCDId) as rowIndex                      
FROM P01OvertimeConfirmationDetail dt                  
INNER JOIN P01OvertimeConfirmation r ON dt.OTCId = r.OTCId                
INNER JOIN vP00Employee emp ON dt.EmployeeId = emp.EmployeeId                     
LEFT JOIN vP00WorkShift ws ON dt.WorkShiftId = ws.WorkShiftId           
LEFT JOIN P01OvertimeDetail otd ON dt.OTDId = otd.OTDId          
WHERE r.IsActive = 1 AND dt.IsActive = 1 
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListOT]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
      
CREATE VIEW [dbo].[vP01OvertimeConfirmationListOT]        
AS        
SELECT         
    cad.OTCDId        
      ,cad.OTCId        
      ,cad.WorkDate        
      ,cad.StartTime        
      ,cad.EndTime        
   ,cad.BreakTime        
   ,cad.WorkingHours        
      ,cad.Reason        
      ,cad.ApplicantRequest        
   ,cad.NumberOfCL      
   ,cad.Remark        
      ---Employee-----------------        
   --,CONCAT(cad.OTCId,'-',cad.OTCDId,'-', btt.Id) as OTCode        
   --,btt.Id as WorkerId        
   --,btt.rowIndexConfirm as WorkerNo        
   --,btt.EmployeeId as WorkerEmployeeId        
   --,btt.EmployeeName as WorkerEmployeeName        
   --,btt.DeptName as WorkerDeptName        
   --,btt.PositionName as WorkerPositionName        
   --,btt.JobTitleName as WorkerJobTitleName        

   ,CONCAT(cad.OTCId,'-',cad.OTCDId) as OTCode      
   ,cad.OTCDId as WorkerId      
   ,cad.rowIndex as WorkerNo      
   ,cad.EmployeeId as WorkerEmployeeId      
   ,cad.WorkerEmployeeName      
   ,cad.WorkerDeptName      
   ,cad.WorkerPositionName      
   ,cad.WorkerJobTitleName      
   ------------------------------------------        
      ,ca.RequestStatus        
      ,ca.WorkYear        
      ,ca.IssueDate        
      ,ca.Number        
      ,ca.NumberCode        
        
           
FROM  vP01OvertimeConfirmationDetail cad         
INNER JOIN vP01OvertimeConfirmation ca ON cad.OTCId = ca.OTCId        
--INNER JOIN         
--(        
--SELECT OTCId,Id,rowIndexConfirm,EmployeeId,EmployeeName,DeptName ,PositionName, JobTitleName        
--FROM vP01OvertimeConfirmationListWorker WHERE IsActive = 1 AND IsConfirm = 1         
--)        
--btt ON btt.OTCId = ca.OTCId        
WHERE ca.IsActive = 1 AND ca.RequestStatus = 'Approved' AND cad.IsActive = 1    
AND cad.CreatedAt >= CONCAT(FORMAT(DATEADD(MONTH,-1,GETDATE()),'yyyy-MM'),'-01 00:00:00')  
  
GO
/****** Object:  Table [dbo].[P01LeaveDaysDetail]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LeaveDaysDetail](
	[LeaveDayDetailId] [int] IDENTITY(1,1) NOT NULL,
	[LeaveDayId] [int] NOT NULL,
	[LeaveDate] [smalldatetime] NOT NULL,
	[WorkShiftId] [int] NULL,
	[LeaveTypeId] [int] NOT NULL,
	[LeaveTimeId] [int] NOT NULL,
	[OTCode] [nvarchar](500) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LeaveDaysDetail_IdSD] PRIMARY KEY CLUSTERED 
(
	[LeaveDayDetailId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01MealWorkShift]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealWorkShift](
	[WorkShiftId] [int] IDENTITY(1,1) NOT NULL,
	[MealPlaceName] [nvarchar](255) NOT NULL,
	[WorkShiftName] [nvarchar](255) NOT NULL,
	[WorkShiftName2] [nvarchar](255) NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealWorkShift_IdWorkShift] PRIMARY KEY CLUSTERED 
(
	[WorkShiftId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LeaveType]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LeaveType](
	[LeaveTypeId] [int] IDENTITY(1,1) NOT NULL,
	[LeaveTypeName] [nvarchar](200) NOT NULL,
	[LeaveTypeName2] [nvarchar](200) NOT NULL,
	[IsAnnualLeave] [bit] NULL,
	[IsAttachRequired] [bit] NULL,
	[IsHRVerify] [bit] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00LeaveType] PRIMARY KEY CLUSTERED 
(
	[LeaveTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01Leave__3D175AD7C66720DF] UNIQUE NONCLUSTERED 
(
	[LeaveTypeName2] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01Leave__E6D8DFAB6583A517] UNIQUE NONCLUSTERED 
(
	[LeaveTypeName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LeaveTimeType]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LeaveTimeType](
	[LeaveTimeId] [int] IDENTITY(1,1) NOT NULL,
	[LeaveTimeName] [nvarchar](200) NOT NULL,
	[NumberOfDay] [numeric](18, 2) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LeaveTimeType_LeaveTimeId] PRIMARY KEY CLUSTERED 
(
	[LeaveTimeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LeaveDays]    Script Date: 5/30/2025 11:33:13 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LeaveDays](
	[LeaveDayId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[ContactAddressDuringLeave] [nvarchar](2000) NULL,
	[PhoneNumber] [nvarchar](500) NULL,
	[CarSupport] [bit] NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[CheckByChecked] [bit] NULL,
	[CheckByEmployeeId] [int] NULL,
	[CheckByAction] [nvarchar](50) NULL,
	[CheckByApproveTime] [datetime] NULL,
	[CheckByComment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[CheckByCancelChecked] [bit] NULL,
	[CheckByCancelEmployeeId] [int] NULL,
	[CheckByCancelAction] [nvarchar](50) NULL,
	[CheckByCancelApproveTime] [datetime] NULL,
	[CheckByCancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[UploadAttach] [bit] NULL,
	[UploadTime] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LeaveDays_Id] PRIMARY KEY CLUSTERED 
(
	[LeaveDayId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01LeaveDaysDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01LeaveDaysDetail]    
AS    
SELECT ldd.LeaveDayDetailId    
      ,ldd.LeaveDayId, ld.EmployeeId, ld.WorkYear, ld.RequestStatus    
      ,ldd.LeaveDate    
   ,ldd.WorkShiftId,ISNULL(ws.WorkShiftName,'') as WorkShiftName  
      ,ldd.LeaveTypeId, lt.LeaveTypeName,lt.LeaveTypeName2, lt.IsAnnualLeave    
   ,IIF(ltt.NumberOfDay = 1, lt.LeaveTypeName2,CONCAT(lt.LeaveTypeName2,'/2')) AS LeaveTypeCode, lt.IsAttachRequired    
      ,ldd.LeaveTimeId, ltt.LeaveTimeName, ltt.NumberOfDay    
   ,ldd.OTCode,otc.OTCId, otc.NumberCode    
   ,ldd.Remark    
      ,ldd.IsActive    
      ,ldd.CreatedBy    
      ,ldd.CreatedAt    
      ,ldd.ModifiedBy    
      ,ldd.ModifiedAt    
FROM P01LeaveDaysDetail ldd    
INNER JOIN P01LeaveDays ld ON ldd.LeaveDayId = ld.LeaveDayId    
LEFT JOIN P01MealWorkShift ws ON ldd.WorkShiftId = ws.WorkShiftId    
INNER JOIN P01LeaveType lt ON ldd.LeaveTypeId = lt.LeaveTypeId    
INNER JOIN P01LeaveTimeType ltt ON ldd.LeaveTimeId = ltt.LeaveTimeId    
LEFT JOIN vP01OvertimeConfirmationListOT otc ON ldd.OTCode = otc.OTCode    
WHERE ld.IsActive = 1 AND ldd.IsActive = 1    
    
GO
/****** Object:  Table [dbo].[P01LeaveDaysAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LeaveDaysAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[LeaveDayId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LeaveDaysAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01LeaveDaysTotalDay]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01LeaveDaysTotalDay]
AS
SELECT LeaveDayId,
SUM(NumberOfDay) as TotalDay, SUM(IIF(IsAnnualLeave = 1,NumberOfDay,0)) as TotalAnnualLeave
FROM vP01LeaveDaysDetail 
WHERE IsActive =1
GROUP BY LeaveDayId
GO
/****** Object:  View [dbo].[vP01LeaveDays]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
        
CREATE VIEW [dbo].[vP01LeaveDays]        
AS        
SELECT ld.LeaveDayId        
      ,ld.RequestStatus        
      ,ld.WorkYear        
      ,ld.IssueDate        
      ,ld.Number        
      ,ld.NumberCode        
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName,emp.DeptId, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress        
      ,ISNULL(ttd.TotalDay,0) as TotalDay, ISNULL(ttd.TotalAnnualLeave,0) as TotalAnnualLeave        
      ,emp.SignPath as EmployeeSign, emp.EmployeeTypeId, emp.EmployeeTypeName        
      ,ld.PhoneNumber        
   ,ld.CarSupport        
   ,IIF(ISNULL(ld.CarSupport,0) = 1,'Yes','No') as CarSupportText        
      ,ld.Remark        
   ,ld.CurrentApprover        
   ,ld.CurrentLevel        
     --        
    ,curApr.EmployeeName as CurrentApproverEmployeeName        
    ,curApr.PositionName as CurrentApproverPositionName        
    ,curApr.EmailAddress as CurrentApproverEmailAddress        
   --approve        
   ,ld.Level1Checked        
   ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress        
      ,ld.Level1Action        
      ,ld.Level1ApproveTime        
      ,ld.Level1Comment        
   ,lv1.SignPath as Level1Sign        
        
   ,ld.Level2Checked        
   ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress        
      ,ld.Level2Action        
      ,ld.Level2ApproveTime        
      ,ld.Level2Comment        
   ,lv2.SignPath as Level2Sign        
        
     ,ld.CheckByChecked        
   ,ld.CheckByEmployeeId,cb.EmployeeName as CheckByEmployeeName, cb.PositionName as CheckByPositionName, cb.EmailAddress as CheckByEmailAddress        
      ,ld.CheckByAction        
      ,ld.CheckByApproveTime        
      ,ld.CheckByComment        
   ,cb.SignPath as CheckBySign        
      
   ,ld.Level3Checked        
   ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress        
   ,ld.Level3Action        
      ,ld.Level3ApproveTime        
      ,ld.Level3Comment        
   ,lv3.SignPath as Level3Sign        
  
   ,ld.ConfirmChecked        
   ,ld.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,ld.ConfirmAction        
      ,ld.ConfirmApproveTime        
      ,ld.ConfirmComment        
   ,IIF(ld.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
  
   ,ld.EndorsementChecked        
   ,ld.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress        
   ,ld.EndorsementAction        
      ,ld.EndorsementApproveTime        
      ,ld.EndorsementComment        
   ,IIF(ld.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign        
        
   ,ld.Level4Checked        
   ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress        
   ,ld.Level4Action        
      ,ld.Level4ApproveTime        
      ,ld.Level4Comment        
   ,lv4.SignPath as Level4Sign        
   ,ld.RemainingAnnualLeave        
   ,ISNULL(ld.RemainingAnnualLeave,0) - ISNULL(ttd.TotalAnnualLeave,0) as Balance        
         
 --cancel        
   ,ld.Level1CancelChecked        
   ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress        
      ,ld.Level1CancelAction        
      ,ld.Level1CancelApproveTime        
      ,ld.Level1CancelComment        
   ,clv1.SignPath as Level1CancelSign        
        
   ,ld.Level2CancelChecked        
   ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress        
      ,ld.Level2CancelAction        
      ,ld.Level2CancelApproveTime        
      ,ld.Level2CancelComment        
   ,clv2.SignPath as Level2CancelSign        
        
   ,ld.CheckByCancelChecked        
   ,ld.CheckByCancelEmployeeId,ccb.EmployeeName as CheckByCancelEmployeeName, ccb.PositionName as CheckByCancelPositionName, ccb.EmailAddress as CheckByCancelEmailAddress        
   ,ld.CheckByCancelAction        
   ,ld.CheckByCancelApproveTime        
   ,ld.CheckByCancelComment        
   ,ccb.SignPath as CheckByCancelSign         
      
   ,ld.Level3CancelChecked        
   ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress        
   ,ld.Level3CancelAction        
      ,ld.Level3CancelApproveTime        
      ,ld.Level3CancelComment        
   ,clv3.SignPath as Level3CancelSign        
  
   ,ld.ConfirmCancelChecked        
   ,ld.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,ld.ConfirmCancelAction        
      ,ld.ConfirmCancelApproveTime        
      ,ld.ConfirmCancelComment        
   ,IIF(ld.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign     
  
   ,ld.EndorsementCancelChecked        
   ,ld.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress        
   ,ld.EndorsementCancelAction        
      ,ld.EndorsementCancelApproveTime        
      ,ld.EndorsementCancelComment        
   ,IIF(ld.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign        
        
   ,ld.Level4CancelChecked        
   ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress        
   ,ld.Level4CancelAction        
      ,ld.Level4CancelApproveTime        
      ,ld.Level4CancelComment        
   ,clv4.SignPath as Level4CancelSign        
           
   ,ld.CancelReason        
   ,ld.CancelTime        
        
   ,ApplicationName        
   ,CONCAT('/leave-day-approval-',ld.LeaveDayId) as approvalURL        
   ,CONCAT('/leave-day-cancel-request-',ld.LeaveDayId) as cancelURL        
   ,CONCAT('/leave-day-approve-view-',ld.LeaveDayId) as viewURL        
           
   ,ld.ManualApprovalFileName        
   ,ld.ManualApprovalFilePath        
   ,ld.ManualApprovalBy        
   ,ld.ManualApprovalAt        
        
   ,ld.UploadAttach        
   ,ld.UploadTime        
      ,ld.Sync        
      ,ld.LastSync        
      ,ld.IsActive        
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode        
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName        
   ,ucr.SignPath as CreatedBySignPath        
      ,ld.CreatedAt        
      ,ld.ModifiedBy        
      ,ld.ModifiedAt        
FROM P01LeaveDays ld        
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId        
LEFT JOIN vP01LeaveDaysTotalDay ttd ON ld.LeaveDayId = ttd.LeaveDayId        
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId        
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId        
LEFT JOIN vP00Employee cb ON ld.CheckByEmployeeId = cb.EmployeeId        
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId        
LEFT JOIN vP00Employee cfm ON ld.ConfirmEmployeeId = cfm.EmployeeId     
LEFT JOIN vP00Employee endo ON ld.EndorsementEmployeeId = endo.EmployeeId   
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId        
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId        
--cancel        
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId        
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId        
LEFT JOIN vP00Employee ccb ON ld.CheckByCancelEmployeeId = ccb.EmployeeId        
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId        
LEFT JOIN vP00Employee ccfm ON ld.ConfirmCancelEmployeeId = ccfm.EmployeeId     
LEFT JOIN vP00Employee cendo ON ld.EndorsementCancelEmployeeId = cendo.EmployeeId        
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId        
LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01LeaveDaysListNotEvidence]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01LeaveDaysListNotEvidence]
AS
(
SELECT ld.LeaveDayId,ld.IssueDate,ld.NumberCode,ld.EmployeeCode,ld.EmployeeName,ld.DeptId,
ld.DeptName,ld.PositionName,ld.JobTitleName,ld.EmailAddress, '' as Status, '' as Time 
FROM vP01LeaveDays ld INNER JOIN (select LeaveDayId from vP01LeaveDaysDetail where IsActive = 1 AND IsAttachRequired = 1 GROUP BY LeaveDayId) dt ON ld.LeaveDayId = dt.LeaveDayId 
WHERE ld.RequestStatus = 'Approved' AND ld.IssueDate < DATEADD(day,-5, GETDATE()) AND ld.UploadAttach = 0 AND ld.IssueDate > '2024-12-01' 
AND ld.LeaveDayId NOT IN (select LeaveDayId from P01LeaveDaysAttachments where IsActive = 1 GROUP BY LeaveDayId)

)
GO
/****** Object:  Table [dbo].[P01ApproverListAL]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListAL](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListAL] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveAL]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveAL](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveAL] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListAL]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01ApproverListAL]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
	  ,emp.EmailAddress
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListAL ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveAL lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01LeaveDayListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01LeaveDayListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListAL
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  Table [dbo].[P01AnnualLeave]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01AnnualLeave](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[WorkYear] [int] NOT NULL,
	[EntitledAL] [numeric](18, 2) NOT NULL,
	[RemainLastYear] [numeric](18, 2) NOT NULL,
	[ReviseALdays] [numeric](18, 2) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01TongPhep] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01Annua__48900467ADC4C8A9] UNIQUE NONCLUSTERED 
(
	[EmployeeId] ASC,
	[WorkYear] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01AnnualLeave]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO






CREATE VIEW [dbo].[vP01AnnualLeave]
AS
SELECT u.Id
      ,u.WorkYear
      ,u.EmployeeId,em.EmployeeCode, em.EmployeeName, em.DeptId, em.DeptName,em.PositionName, em.JobTitleName, 
	  em.GenderId, em.GenderName, em.BirthDate, em.EmailAddress, em.PhoneNumber, em.EmployeeNo
	  ,u.EntitledAL
	  ,u.RemainLastYear
	  ,u.ReviseALdays
	  ,(u.EntitledAL + u.RemainLastYear - u.ReviseALdays) as TotalEntitledAL
	  ,u.Remark
      ,u.IsActive
      ,u.CreatedBy
      ,u.CreatedAt
      ,u.ModifiedBy
      ,u.ModifiedAt
FROM P01AnnualLeave u 
INNER JOIN vP00Employee em ON u.EmployeeId = em.EmployeeId


GO
/****** Object:  View [dbo].[vP01LeaveDaysRemainingAnnual]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO








CREATE VIEW [dbo].[vP01LeaveDaysRemainingAnnual]
AS
SELECT tp.Id
      ,tp.EmployeeId,emp.EmployeeCode, emp.EmployeeName, emp.DeptId, emp.DeptName, emp.GenderId, emp.GenderName
      ,tp.WorkYear
      ,tp.EntitledAL
	  ,tp.RemainLastYear
	  ,tp.TotalEntitledAL
	  ,ISNULL(al.TotalDay,0) AS TotalDay
	   ,ISNULL(al.TotalAnnualLeave,0) AS TotalAnnualLeave
	  ,(tp.TotalEntitledAL - ISNULL(al.TotalAnnualLeave,0)) AS Balance
      ,tp.IsActive
      ,tp.CreatedBy
      ,tp.CreatedAt
      ,tp.ModifiedBy
      ,tp.ModifiedAt
FROM vP01AnnualLeave tp
LEFT JOIN vP00Employee emp ON tp.EmployeeId = emp.EmployeeId
LEFT JOIN 
(
	SELECT EmployeeId,FORMAT(LeaveDate,'yyyy') as WorkYear,
	SUM(NumberOfDay) as TotalDay, SUM(IIF(IsAnnualLeave = 1,NumberOfDay,0)) as TotalAnnualLeave
	FROM vP01LeaveDaysDetail 
	WHERE IsActive =1 and RequestStatus != 'Rejected' and RequestStatus != 'Canceled'
	GROUP BY EmployeeId,FORMAT(LeaveDate,'yyyy')

) al ON tp.EmployeeId = al.EmployeeId AND tp.WorkYear = al.WorkYear

GO
/****** Object:  View [dbo].[vP01LeaveDayListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01LeaveDayListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListAL
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01LeaveDayListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01LeaveDayListVerifier]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListAL
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  Table [dbo].[P01ApproverListWA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListWA](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListWA_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveWA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveWA](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveWA] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListWA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ApproverListWA]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
	  ,emp.EmailAddress
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListWA ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveWA lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01ListEmployeeEditPaid]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ListEmployeeEditPaid]
AS
SELECT emp.EmployeeId
      ,emp.EmployeeCode
      ,emp.EmployeeName
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName
	  ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize
	  ,emp.JobTitleId, job.JobTitleName
      ,emp.BirthDate
      ,emp.GenderId, gd.GenderName
      ,emp.EmailAddress
	  ,emp.PhoneNumber
      ,emp.FirstWorkingDate
	  ,emp.ProbationaryEndDate
      ,emp.EndWorkingDate
	  ,emp.AnnualLeave
      ,emp.EmployeeNo
	  ,emp.SignPath
      ,emp.IsActive
      ,emp.CreatedBy
      ,emp.CreatedAt
      ,emp.ModifiedBy
      ,emp.ModifiedAt
FROM P00Employee emp
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId
where emp.EmployeeId IN (4)


GO
/****** Object:  View [dbo].[vP01LeaveDayListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01LeaveDayListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
FROM vP01ApproverListAL
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01WFHAttendanceListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01WFHAttendanceListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWA
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01WFHAttendanceListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01WFHAttendanceListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWA
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  Table [dbo].[P01ApproverListES]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListES](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListES] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveES]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveES](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveES] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListES]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ApproverListES]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListES ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveES lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01WFHAttendanceListReviewer3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01WFHAttendanceListReviewer3]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWA
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  Table [dbo].[P01ApproverListOT]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListOT](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListOT] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveOT]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveOT](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveCL] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListOT]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ApproverListOT]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
	  ,emp.EmailAddress
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListOT ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveOT lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01OvertimeListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
    
    
    
CREATE VIEW [dbo].[vP01OvertimeListVerifier]    
AS    
SELECT [Id]    
      ,[DeptId]    
      ,[DeptName]    
      ,[SiteId]    
      ,[SiteName]    
      ,[LevelId]    
      ,[LevelName]    
      ,[EmployeeId]    
      ,[EmployeeName]    
      ,[PositionName]    
      ,[JobTitleName]    
      ,[EmailAddress]    
      ,[IsActive]    
      ,[CreatedBy]    
      ,[CreatedAt]    
      ,[ModifiedBy]    
      ,[ModifiedAt]     
FROM vP01ApproverListOT    
WHERE IsActive =1 AND LevelId = 3    
  
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseSettlementListApprover]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01WFHAttendanceListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01WFHAttendanceListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListWA
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  Table [dbo].[P01CarArrangementType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CarArrangementType](
	[CarTypeId] [int] IDENTITY(1,1) NOT NULL,
	[CarTypeName] [nvarchar](200) NOT NULL,
	[CarTypeName2] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01CarArrangementType] PRIMARY KEY CLUSTERED 
(
	[CarTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01CarAr__B26395EF42E673C0] UNIQUE NONCLUSTERED 
(
	[CarTypeName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01CarArrangement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CarArrangement](
	[CAId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Purpose] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[VerifyChecked] [bit] NULL,
	[VerifyEmployeeId] [int] NULL,
	[VerifyAction] [nvarchar](50) NULL,
	[VerifyApproveTime] [datetime] NULL,
	[VerifyComment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[VerifyCancelChecked] [bit] NULL,
	[VerifyCancelEmployeeId] [int] NULL,
	[VerifyCancelAction] [nvarchar](50) NULL,
	[VerifyCancelApproveTime] [datetime] NULL,
	[VerifyCancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[UploadAttach] [bit] NULL,
	[UploadTime] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01CarArrangement] PRIMARY KEY CLUSTERED 
(
	[CAId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01CarArrangementDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CarArrangementDetail](
	[CADId] [int] IDENTITY(1,1) NOT NULL,
	[CAId] [int] NOT NULL,
	[RequestDate] [smalldatetime] NOT NULL,
	[CarTypeId] [int] NOT NULL,
	[FromTime] [nvarchar](50) NULL,
	[ToTime] [nvarchar](50) NULL,
	[UsingTime] [nvarchar](50) NULL,
	[Departure] [nvarchar](500) NULL,
	[Destination] [nvarchar](500) NULL,
	[ReturnPlace] [nvarchar](500) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01CarArrangementDetail] PRIMARY KEY CLUSTERED 
(
	[CADId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01CarArrangementDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


    
    
CREATE VIEW [dbo].[vP01CarArrangementDetail]    
AS    
SELECT cad.CADId    
      ,cad.CAId, ca.EmployeeId, ca.WorkYear, ca.RequestStatus    
      ,cad.RequestDate    
   ,cad.FromTime    
      ,cad.ToTime    
   ,cad.UsingTime    
   ,cad.CarTypeId, tp.CarTypeName, tp.CarTypeName2    
   ,cad.Departure    
   ,cad.Destination    
   ,cad.ReturnPlace  
   ,cad.Remark    
      ,cad.IsActive    
      ,cad.CreatedBy    
      ,cad.CreatedAt    
      ,cad.ModifiedBy    
      ,cad.ModifiedAt    
FROM P01CarArrangementDetail cad    
INNER JOIN P01CarArrangement ca ON cad.CAId = ca.CAId    
INNER JOIN P01CarArrangementType tp ON cad.CarTypeId = tp.CarTypeId    
WHERE ca.IsActive = 1 AND cad.IsActive = 1    
    
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01ExpenseSettlementListEndorsement]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01CarArrangement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01CarArrangement]        
AS        
SELECT ld.CAId        
      ,ld.RequestStatus        
      ,ld.WorkYear        
      ,ld.IssueDate        
      ,ld.Number        
      ,ld.NumberCode        
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress        
      ,emp.SignPath as EmployeeSign        
   ,ld.Purpose        
   ,ld.CurrentApprover        
   ,ld.CurrentLevel        
       --        
    ,curApr.EmployeeName as CurrentApproverEmployeeName        
    ,curApr.PositionName as CurrentApproverPositionName        
    ,curApr.EmailAddress as CurrentApproverEmailAddress        
      
 --adv      
 ,IIF(ISNULL(evi.CAId,0) > 0, IIF(ld.UploadAttach = 1,'Yes','No'),'') as UploadEvidence      
   --approve        
   ,ld.Level1Checked        
   ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress        
      ,ld.Level1Action        
      ,ld.Level1ApproveTime        
      ,ld.Level1Comment        
   ,lv1.SignPath as Level1Sign        
        
   ,ld.Level2Checked        
   ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress        
      ,ld.Level2Action        
      ,ld.Level2ApproveTime        
      ,ld.Level2Comment        
   ,lv2.SignPath as Level2Sign        
        
   ,ld.Level3Checked        
   ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress        
   ,ld.Level3Action        
      ,ld.Level3ApproveTime        
      ,ld.Level3Comment        
   ,lv3.SignPath as Level3Sign        
        
   ,ld.VerifyChecked        
   ,ld.VerifyEmployeeId,endo.EmployeeName as VerifyEmployeeName, endo.PositionName as VerifyPositionName, endo.EmailAddress as VerifyEmailAddress        
   ,ld.VerifyAction        
      ,ld.VerifyApproveTime        
      ,ld.VerifyComment        
   ,IIF(ld.VerifyChecked = 1,endo.SignPath,'') as VerifySign        
    
     ,ld.ConfirmChecked        
   ,ld.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,ld.ConfirmAction        
      ,ld.ConfirmApproveTime        
      ,ld.ConfirmComment        
   ,IIF(ld.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign        
    
   ,ld.Level4Checked        
   ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress        
   ,ld.Level4Action        
      ,ld.Level4ApproveTime        
      ,ld.Level4Comment        
   ,lv4.SignPath as Level4Sign        
         
 --cancel        
   ,ld.Level1CancelChecked        
   ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress        
      ,ld.Level1CancelAction        
      ,ld.Level1CancelApproveTime        
      ,ld.Level1CancelComment        
   ,clv1.SignPath as Level1CancelSign        
        
   ,ld.Level2CancelChecked        
   ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress        
      ,ld.Level2CancelAction        
      ,ld.Level2CancelApproveTime        
      ,ld.Level2CancelComment        
   ,clv2.SignPath as Level2CancelSign        
        
   ,ld.Level3CancelChecked        
   ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress        
   ,ld.Level3CancelAction        
      ,ld.Level3CancelApproveTime        
      ,ld.Level3CancelComment        
   ,clv3.SignPath as Level3CancelSign        
        
   ,ld.VerifyCancelChecked        
   ,ld.VerifyCancelEmployeeId,cendo.EmployeeName as VerifyCancelEmployeeName, cendo.PositionName as VerifyCancelPositionName, cendo.EmailAddress as VerifyCancelEmailAddress        
   ,ld.VerifyCancelAction        
      ,ld.VerifyCancelApproveTime        
      ,ld.VerifyCancelComment        
   ,IIF(ld.VerifyCancelChecked = 1,cendo.SignPath,'') as VerifyCancelSign        
        
        
 ,ld.ConfirmCancelChecked        
   ,ld.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,ld.ConfirmCancelAction        
      ,ld.ConfirmCancelApproveTime        
      ,ld.ConfirmCancelComment        
   ,IIF(ld.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign       
    
   ,ld.Level4CancelChecked        
   ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress        
   ,ld.Level4CancelAction        
      ,ld.Level4CancelApproveTime        
      ,ld.Level4CancelComment        
   ,clv4.SignPath as Level4CancelSign        
        
   ,ld.CancelReason      
   ,ld.CancelTime      
      
   ,ApplicationName        
   ,CONCAT('/car-arrangement-approval-',ld.CAId) as approvalURL        
   ,CONCAT('/car-arrangement-cancel-request-',ld.CAId) as cancelURL     ,CONCAT('/car-arrangement-approve-view-',ld.CAId) as viewURL        
           
   ,ld.ManualApprovalFileName        
   ,ld.ManualApprovalFilePath        
   ,ld.ManualApprovalBy        
   ,ld.ManualApprovalAt        
        
   ,ld.UploadAttach        
   ,ld.UploadTime        
      ,ld.Sync        
      ,ld.LastSync        
      ,ld.IsActive        
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode        
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName        
   ,ucr.SignPath as CreatedBySignPath        
      ,ld.CreatedAt        
      ,ld.ModifiedBy        
      ,ld.ModifiedAt        
FROM P01CarArrangement ld        
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId        
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId        
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId        
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId        
LEFT JOIN vP00Employee endo ON ld.VerifyEmployeeId = endo.EmployeeId        
LEFT JOIN vP00Employee cfm ON ld.ConfirmEmployeeId = cfm.EmployeeId      
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId        
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId        
LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId        
--cancel        
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId        
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId        
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId        
LEFT JOIN vP00Employee cendo ON ld.VerifyCancelEmployeeId = cendo.EmployeeId        
LEFT JOIN vP00Employee ccfm ON ld.ConfirmCancelEmployeeId = ccfm.EmployeeId      
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId        
      
LEFT JOIN (      
select CAId from P01CarArrangementDetail where IsActive = 1 AND CarTypeId = 4 GROUP BY CAId      
) evi ON ld.CAId = evi.CAId 
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListFAReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01ExpenseSettlementListFAReviewer1]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 6
GO
/****** Object:  View [dbo].[vP01ListEmployeeEditMeal]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01ListEmployeeEditMeal]            
AS             
        
SELECT EmployeeId, '0' as SiteId  , IsActive        
FROM P00Employee                  
where EmployeeId IN (120,41)              
        
UNION ALL         
SELECT EmployeeId, '2' as SiteId , IsActive        
FROM P00Employee                  
where EmployeeId IN (34)    

UNION ALL         
SELECT EmployeeId, '0' as SiteId , IsActive        
FROM P00Employee                  
where EmployeeId IN (51)    

--select * from vP00Employee    
GO
/****** Object:  View [dbo].[vP01CarArrangementPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
        
        
CREATE VIEW [dbo].[vP01CarArrangementPrint]        
AS        
SELECT         
    cad.CADId        
      ,cad.CAId        
      ,cad.RequestDate        
      ,cad.FromTime        
      ,cad.ToTime        
   ,cad.UsingTime        
      ,cad.CarTypeId        
      ,cad.CarTypeName        
      ,cad.Departure        
      ,cad.Destination        
   ,cad.ReturnPlace      
   ,cad.Remark        
        
      ,ca.RequestStatus        
      ,ca.WorkYear        
      ,ca.IssueDate        
      ,ca.Number        
      ,ca.NumberCode        
      ,ca.EmployeeId        
      ,ca.EmployeeCode        
      ,ca.EmployeeName        
      ,ca.GenderName        
      ,ca.DeptName        
      ,ca.PositionName        
      ,ca.EmailAddress        
   ,ca.EmployeeSign        
      ,ca.Purpose        
      ,ca.CurrentApprover        
      ,ca.CurrentLevel        
        
      ,ca.Level1Checked        
      ,ca.Level1EmployeeId        
      ,ca.Level1EmployeeName        
      ,ca.Level1PositionName        
      ,ca.Level1EmailAddress        
      ,ca.Level1Action        
      ,ca.Level1ApproveTime        
      ,ca.Level1Comment        
   ,ca.Level1Sign        
        
      ,ca.Level2Checked        
      ,ca.Level2EmployeeId        
      ,ca.Level2EmployeeName        
      ,ca.Level2PositionName        
      ,ca.Level2EmailAddress        
      ,ca.Level2Action        
      ,ca.Level2ApproveTime        
      ,ca.Level2Comment        
   ,ca.Level2Sign        
        
      ,ca.Level3Checked        
      ,ca.Level3EmployeeId        
      ,ca.Level3EmployeeName        
      ,ca.Level3PositionName        
      ,ca.Level3EmailAddress        
      ,ca.Level3Action        
      ,ca.Level3ApproveTime        
      ,ca.Level3Comment        
   ,ca.Level3Sign        
        
   ,ca.VerifyChecked        
      ,ca.VerifyEmployeeId        
      ,ca.VerifyEmployeeName        
      ,ca.VerifyPositionName        
      ,ca.VerifyEmailAddress        
      ,ca.VerifyAction        
      ,ca.VerifyApproveTime        
      ,ca.VerifyComment        
   ,ca.VerifySign        
  
 ,ca.ConfirmChecked        
      ,ca.ConfirmEmployeeId        
      ,ca.ConfirmEmployeeName        
      ,ca.ConfirmPositionName        
      ,ca.ConfirmEmailAddress        
      ,ca.ConfirmAction        
      ,ca.ConfirmApproveTime        
      ,ca.ConfirmComment        
   ,ca.ConfirmSign        
     
   ,ca.Level4Checked        
      ,ca.Level4EmployeeId        
      ,ca.Level4EmployeeName        
      ,ca.Level4PositionName        
      ,ca.Level4EmailAddress        
      ,ca.Level4Action        
      ,ca.Level4ApproveTime        
      ,ca.Level4Comment        
   ,ca.Level4Sign        
        
      ,ca.CreatedBy        
   ,ca.CreatedByEmployeeCode        
   ,ca.CreatedByName        
   ,ca.CreatedByDeptName        
   ,ca.CreatedByPositionName        
   ,ca.CreatedByJobTitleName        
   ,ca.CreatedBySignPath        
           
FROM  vP01CarArrangementDetail cad         
INNER JOIN vP01CarArrangement ca ON cad.CAId = ca.CAId 
GO
/****** Object:  Table [dbo].[P01ApproverListIA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListIA](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListIA] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveIA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveIA](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveIA] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListIA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01ApproverListIA]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListIA ap
--INNER JOIN P01FormList fm ON ap.FormId = fm.FormId
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveIA lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01InternalApprovalApprover1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalApprovalApprover1]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListFAReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01ExpenseSettlementListFAReviewer2]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 7
GO
/****** Object:  Table [dbo].[P01WFHDailyReport]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01WFHDailyReport](
	[WDId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[PeriodOfWFH] [nvarchar](500) NULL,
	[WorkDate] [smalldatetime] NULL,
	[ReportContents] [nvarchar](max) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01WFHDailyReport_WDId] PRIMARY KEY CLUSTERED 
(
	[WDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01WFHDailyReport]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01WFHDailyReport]
AS
SELECT ld.WDId
      ,ld.RequestStatus
      ,ld.WorkYear
      ,ld.IssueDate
      ,ld.Number
      ,ld.NumberCode
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
      ,emp.SignPath as EmployeeSign
	  ,ld.PeriodOfWFH
	  ,ld.WorkDate
	  ,ld.ReportContents
	  ,ld.CurrentApprover
	  ,ld.CurrentLevel
	  	   --
	   ,curApr.EmployeeName as CurrentApproverEmployeeName
	   ,curApr.PositionName as CurrentApproverPositionName
	   ,curApr.EmailAddress as CurrentApproverEmailAddress
	  --approve
	  ,ld.Level1Checked
	  ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress
      ,ld.Level1Action
      ,ld.Level1ApproveTime
      ,ld.Level1Comment
	  ,lv1.SignPath as Level1Sign

	  ,ld.Level2Checked
	  ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress
      ,ld.Level2Action
      ,ld.Level2ApproveTime
      ,ld.Level2Comment
	  ,lv2.SignPath as Level2Sign

	  ,ld.Level3Checked
	  ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress
	  ,ld.Level3Action
      ,ld.Level3ApproveTime
      ,ld.Level3Comment
	  ,lv3.SignPath as Level3Sign

	  ,ld.EndorsementChecked
	  ,ld.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress
	  ,ld.EndorsementAction
      ,ld.EndorsementApproveTime
      ,ld.EndorsementComment
	  ,IIF(ld.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign

	  ,ld.Level4Checked
	  ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress
	  ,ld.Level4Action
      ,ld.Level4ApproveTime
      ,ld.Level4Comment
	  ,lv4.SignPath as Level4Sign
	
	--cancel
	  ,ld.Level1CancelChecked
	  ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress
      ,ld.Level1CancelAction
      ,ld.Level1CancelApproveTime
      ,ld.Level1CancelComment
	  ,clv1.SignPath as Level1CancelSign

	  ,ld.Level2CancelChecked
	  ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress
      ,ld.Level2CancelAction
      ,ld.Level2CancelApproveTime
      ,ld.Level2CancelComment
	  ,clv2.SignPath as Level2CancelSign

	  ,ld.Level3CancelChecked
	  ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress
	  ,ld.Level3CancelAction
      ,ld.Level3CancelApproveTime
      ,ld.Level3CancelComment
	  ,clv3.SignPath as Level3CancelSign

	  ,ld.EndorsementCancelChecked
	  ,ld.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress
	  ,ld.EndorsementCancelAction
      ,ld.EndorsementCancelApproveTime
      ,ld.EndorsementCancelComment
	  ,IIF(ld.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign

	  ,ld.Level4CancelChecked
	  ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress
	  ,ld.Level4CancelAction
      ,ld.Level4CancelApproveTime
      ,ld.Level4CancelComment
	  ,clv4.SignPath as Level4CancelSign
	  
	  ,ld.CancelReason
	  ,ld.CancelTime

	  ,ApplicationName
	  ,CONCAT('/wfh-daily-report-approval-',ld.WDId) as approvalURL
	  ,CONCAT('/wfh-daily-report-cancel-request-',ld.WDId) as cancelURL
	  ,CONCAT('/wfh-daily-report-approve-view-',ld.WDId) as viewURL
	  	  	  
	  ,ld.ManualApprovalFileName
	  ,ld.ManualApprovalFilePath
	  ,ld.ManualApprovalBy
	  ,ld.ManualApprovalAt

      ,ld.Sync
      ,ld.LastSync
      ,ld.IsActive
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode
	  ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName
	  ,ucr.SignPath as CreatedBySignPath
      ,ld.CreatedAt
      ,ld.ModifiedBy
      ,ld.ModifiedAt
FROM P01WFHDailyReport ld
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId
LEFT JOIN vP00Employee endo ON ld.EndorsementEmployeeId = endo.EmployeeId
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId
--cancel
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId
LEFT JOIN vP00Employee cendo ON ld.EndorsementCancelEmployeeId = cendo.EmployeeId
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId

LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId
GO
/****** Object:  Table [dbo].[P01ApproverListEA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListEA](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListEA] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveEA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveEA](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveEA] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListEA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01ApproverListEA]  
AS  
SELECT ap.Id  
--   ,ap.FormId, fm.FormName, fm.FormName2  
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName  
      ,ap.LevelId,lv.LevelName  
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName  
      ,ap.IsActive  
      ,ap.CreatedBy  
      ,ap.CreatedAt  
      ,ap.ModifiedBy  
      ,ap.ModifiedAt  
FROM P01ApproverListEA ap  
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId  
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId  
INNER JOIN P01LevelApproveEA lv ON ap.LevelId = lv.LevelId  
GO
/****** Object:  View [dbo].[vP01CarArrangementType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01CarArrangementType]
AS
SELECT CarTypeId
      ,CarTypeName
	  ,CarTypeName2
	  ,Remark
      ,IsActive
      ,CreatedBy
      ,CreatedAt
      ,ModifiedBy
      ,ModifiedAt
FROM P01CarArrangementType
GO
/****** Object:  View [dbo].[vP01InternalApprovalApprover2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalApprovalApprover2]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseSettlementListReviewer1]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  Table [dbo].[P01ApproverListIM]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListIM](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListIM] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveIM]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveIM](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveIM] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListIM]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01ApproverListIM]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListIM ap
--INNER JOIN P01FormList fm ON ap.FormId = fm.FormId
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveIM lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseApprovalListApprover]
AS
SELECT * 
FROM vP01ApproverListEA
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01InternalApprovalApprover3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01InternalApprovalApprover3]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseSettlementListReviewer2]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 2

GO
/****** Object:  Table [dbo].[P01WFHAttendance]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01WFHAttendance](
	[ATDId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[LocationAddress] [nvarchar](2000) NULL,
	[Reason] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01WFHAttendance_ATDId] PRIMARY KEY CLUSTERED 
(
	[ATDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01WFHAttendanceDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01WFHAttendanceDetail](
	[ATDDId] [int] IDENTITY(1,1) NOT NULL,
	[ATDId] [int] NOT NULL,
	[RequestDate] [smalldatetime] NOT NULL,
	[ScheduleTypeId] [int] NOT NULL,
	[TimeTypeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01WFHAttendanceDetail_ATDDId] PRIMARY KEY CLUSTERED 
(
	[ATDDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ScheduleType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ScheduleType](
	[ScheduleTypeId] [int] IDENTITY(1,1) NOT NULL,
	[ScheduleTypeName] [nvarchar](200) NOT NULL,
	[ScheduleTypeName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00ScheduleType] PRIMARY KEY CLUSTERED 
(
	[ScheduleTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[ScheduleTypeName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[ScheduleTypeName2] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01TimeType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01TimeType](
	[TimeId] [int] IDENTITY(1,1) NOT NULL,
	[TimeName] [nvarchar](200) NOT NULL,
	[NumberOfDay] [numeric](18, 2) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01TimeType_TimeId] PRIMARY KEY CLUSTERED 
(
	[TimeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01WFHAttendanceDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01WFHAttendanceDetail]
AS
SELECT ldd.ATDDId
      ,ldd.ATDId, ld.EmployeeId, ld.WorkYear, ld.RequestStatus
      ,ldd.RequestDate
      ,ldd.ScheduleTypeId, lt.ScheduleTypeName,lt.ScheduleTypeName2
      ,ldd.TimeTypeId, ltt.TimeName, ltt.NumberOfDay
      ,ldd.IsActive
      ,ldd.CreatedBy
      ,ldd.CreatedAt
      ,ldd.ModifiedBy
      ,ldd.ModifiedAt
FROM P01WFHAttendanceDetail ldd
INNER JOIN P01WFHAttendance ld ON ldd.ATDId = ld.ATDId
INNER JOIN P01ScheduleType lt ON ldd.ScheduleTypeId = lt.ScheduleTypeId
INNER JOIN P01TimeType ltt ON ldd.TimeTypeId = ltt.TimeId
WHERE ld.IsActive = 1 AND ldd.IsActive = 1


GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseApprovalListEndorsement]
AS
SELECT * 
FROM vP01ApproverListEA
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01InternalApprovalApprover4]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalApprovalApprover4]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseSettlementListVerifier]
AS
SELECT * 
FROM vP01ApproverListES
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseApprovalListReviewer1]
AS
SELECT * 
FROM vP01ApproverListEA
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01InternalApprovalApprover5]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalApprovalApprover5]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ExpenseApprovalListReviewer2]
AS
SELECT * 
FROM vP01ApproverListEA
WHERE IsActive =1 AND LevelId = 2

GO
/****** Object:  View [dbo].[vP01InternalApprovalVerifier1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalApprovalVerifier1]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 6
GO
/****** Object:  Table [dbo].[P01MealRegistrationDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealRegistrationDetail](
	[MRDId] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[MealKindId] [int] NOT NULL,
	[EBRMealTypeId] [int] NULL,
	[EBRMealPlaceId] [int] NULL,
	[BRMealTypeId] [int] NULL,
	[BRMealPlaceId] [int] NULL,
	[LUMealTypeId] [int] NULL,
	[LUMealPlaceId] [int] NULL,
	[DIMealTypeId] [int] NULL,
	[DIMealPlaceId] [int] NULL,
	[EXMealTypeId] [int] NULL,
	[EXMealPlaceId] [int] NULL,
	[NBRMealTypeId] [int] NULL,
	[NBRMealPlaceId] [int] NULL,
	[WorkShiftId] [int] NULL,
	[IsOvertime] [bit] NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealRegistrationDetail_Id] PRIMARY KEY CLUSTERED 
(
	[MRDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01MealR__237E106550E2E089] UNIQUE NONCLUSTERED 
(
	[WorkDate] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01MealMenu]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealMenu](
	[WeekId] [int] IDENTITY(1,1) NOT NULL,
	[WeekName] [nvarchar](200) NOT NULL,
	[FromDate] [smalldatetime] NOT NULL,
	[ToDate] [smalldatetime] NOT NULL,
	[MealKindId] [int] NOT NULL,
	[FileName] [nvarchar](200) NOT NULL,
	[FilePath] [nvarchar](500) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealMenu] PRIMARY KEY CLUSTERED 
(
	[WeekId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01MealMenuDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealMenuDetail](
	[MDId] [int] IDENTITY(1,1) NOT NULL,
	[WeekId] [int] NOT NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[MealKindId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealMenuDetail] PRIMARY KEY CLUSTERED 
(
	[MDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[WorkDate] ASC,
	[MealKindId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01MealMenuDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01MealMenuDetail]        
AS        
SELECT         
    mnd.MDId        
   ,mnd.WeekId        
   ,mnd.WorkDate        
      ,mn.WeekName            
      ,mn.FromDate            
      ,mn.ToDate            
      ,mnd.MealKindId    
   --, mn.EmployeeTypeName            
      ,mn.FileName            
      ,mn.FilePath            
      ,mn.Remark            
      ,mnd.IsActive            
      ,mnd.CreatedBy        
      ,mnd.CreatedAt            
      ,mnd.ModifiedBy            
      ,mnd.ModifiedAt            
FROM P01MealMenuDetail mnd         
INNER JOIN P01MealMenu mn ON mnd.WeekId = mn.WeekId 
GO
/****** Object:  Table [dbo].[P01MealPlace]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealPlace](
	[MealPlaceId] [int] IDENTITY(1,1) NOT NULL,
	[MealPlaceName] [nvarchar](255) NOT NULL,
	[MealPlaceName2] [nvarchar](255) NULL,
	[MealPlaceNameVN] [nvarchar](255) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealPlace_IdMealPlace] PRIMARY KEY CLUSTERED 
(
	[MealPlaceId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01MealType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealType](
	[MealTypeId] [int] IDENTITY(1,1) NOT NULL,
	[MealTypeName] [nvarchar](255) NOT NULL,
	[MealTypeName2] [nvarchar](255) NULL,
	[MealTypeNameVN] [nvarchar](255) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealType_IdMealType] PRIMARY KEY CLUSTERED 
(
	[MealTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01MealRegistrationDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01MealRegistrationDetail]                            
AS                                
SELECT dt.MRDId                                
      ,dt.EmployeeId, emp.EmployeeName, emp.EmployeeCode,emp.SiteId, emp.SiteName, emp.EmployeeTypeName                                
      ,dt.WorkDate                                
      ,dt.MealKindId, mt.EmployeeTypeName as MealKindName                                 
      ,dt.BRMealTypeId, brt.MealTypeName as BRMealTypeName, brt.MealTypeNameVN as BRMealTypeNameVN                                
      ,dt.BRMealPlaceId, brp.MealPlaceName as BRMealPlaceName, brp.MealPlaceNameVN as BRMealPlaceNameVN, ISNULL(brp.MealPlaceName2,'') as BRMealPlaceCode                                
      ,dt.LUMealTypeId, lut.MealTypeName as LUMealTypeName, lut.MealTypeNameVN as LUMealTypeNameVN                                
      ,dt.LUMealPlaceId, lup.MealPlaceName as LUMealPlaceName, lup.MealPlaceNameVN as LUMealPlaceNameVN, ISNULL(lup.MealPlaceName2,'') as LUMealPlaceCode                                
      ,dt.DIMealTypeId, dit.MealTypeName as DIMealTypeName, dit.MealTypeNameVN as DIMealTypeNameVN                                  
      ,dt.DIMealPlaceId, dip.MealPlaceName as DIMealPlaceName, dip.MealPlaceNameVN as DIMealPlaceNameVN , ISNULL(dip.MealPlaceName2,'') as DIMealPlaceCode                               
      ,dt.EXMealTypeId, ext.MealTypeName as EXMealTypeName, ext.MealTypeNameVN as EXMealTypeNameVN                                
      ,dt.EXMealPlaceId, expl.MealPlaceName as EXMealPlaceName, expl.MealPlaceNameVN as EXMealPlaceNameVN , ISNULL(expl.MealPlaceName2,'') as EXMealPlaceCode                   
                   
      ,dt.EBRMealTypeId, brte1.MealTypeName as EBRMealTypeName, brte1.MealTypeNameVN as EBRMealTypeNameVN                                
      ,dt.EBRMealPlaceId, brpe1.MealPlaceName as EBRMealPlaceName, brpe1.MealPlaceNameVN as EBRMealPlaceNameVN, ISNULL(brpe1.MealPlaceName2,'') as EBRMealPlaceCode                  
                    
      ,dt.NBRMealTypeId, brte2.MealTypeName as NBRMealTypeName, brte2.MealTypeNameVN as NBRMealTypeNameVN                                
      ,dt.NBRMealPlaceId, brpe2.MealPlaceName as NBRMealPlaceName, brpe2.MealPlaceNameVN as NBRMealPlaceNameVN, ISNULL(brpe2.MealPlaceName2,'') as NBRMealPlaceCode                 
                
      ,ISNULL(dt.WorkShiftId,0) as WorkShiftId, ws.WorkShiftName                               
      ,ISNULL(dt.IsOvertime,0) as IsOvertime, IIF(ISNULL(dt.IsOvertime,0) = 1,'Yes','') as IsOvertimeText                                                  
      ,dt.Remark         
   ,mmnd.FileName    
   ,mmnd.FilePath    
      ,dt.IsActive                                
      ,dt.CreatedBy                                
      ,dt.CreatedAt                                
      ,dt.ModifiedBy                                
      ,dt.ModifiedAt                                
FROM P01MealRegistrationDetail dt                                
LEFT JOIN vP00Employee emp ON dt.EmployeeId = emp.EmployeeId                                
LEFT JOIN P01MealType brt ON dt.BRMealTypeId = brt.MealTypeId                                
LEFT JOIN P01MealPlace brp ON dt.BRMealPlaceId = brp.MealPlaceId                                
LEFT JOIN P01MealType lut ON dt.LUMealTypeId = lut.MealTypeId                                
LEFT JOIN P01MealPlace lup ON dt.LUMealPlaceId = lup.MealPlaceId                                
LEFT JOIN P01MealType dit ON dt.DIMealTypeId = dit.MealTypeId                                
LEFT JOIN P01MealPlace dip ON dt.DIMealPlaceId = dip.MealPlaceId                                
LEFT JOIN P01MealType ext ON dt.EXMealTypeId = ext.MealTypeId                                
LEFT JOIN P01MealPlace expl ON dt.EXMealPlaceId = expl.MealPlaceId                                
LEFT JOIN P01MealWorkShift ws ON dt.WorkShiftId = ws.WorkShiftId                              
LEFT JOIN P00EmployeeType mt ON dt.MealKindId = mt.EmployeeTypeId                          
LEFT JOIN vP01MealMenuDetail mmnd ON dt.MealKindId = mmnd.MealKindId AND dt.WorkDate = mmnd.WorkDate                          
                    
LEFT JOIN P01MealType brte1 ON dt.EBRMealTypeId = brte1.MealTypeId                                
LEFT JOIN P01MealPlace brpe1 ON dt.EBRMealPlaceId = brpe1.MealPlaceId                
LEFT JOIN P01MealType brte2 ON dt.NBRMealTypeId = brte2.MealTypeId           
LEFT JOIN P01MealPlace brpe2 ON dt.NBRMealPlaceId = brpe2.MealPlaceId                  
                
WHERE dt.IsActive = 1 
GO
/****** Object:  View [dbo].[vP01MealRegistrationList]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01MealRegistrationList]    
AS    
select 0 as rowIndex,SiteId,SiteName,    
EmployeeId,EmployeeCode,EmployeeName,    
WorkDate , MealKindName,           
MealIndex,MealCode,MealPlaceId, '' as ActualTime, IsActive  
from vP01MealRegistrationDetail    
cross apply    
(    
values    
  ( 1, 'BR', EBRMealPlaceId),    
  ( 1, 'BR', BRMealPlaceId),    
  ( 2, 'LU', LUMealPlaceId),    
  ( 3, 'DI', DIMealPlaceId),    
  ( 4, 'EX', EXMealPlaceId)    
) c (MealIndex,MealCode, MealPlaceId);    
  
GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ExpenseApprovalListVerifier]
AS
SELECT * 
FROM vP01ApproverListEA
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01InternalApprovalVerifier2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01InternalApprovalVerifier2]
AS
SELECT * 
FROM vP01ApproverListIA
WHERE IsActive =1 AND LevelId = 7
GO
/****** Object:  Table [dbo].[P01BusinessTravel]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravel](
	[BTId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Purpose] [nvarchar](2000) NULL,
	[CarSupport] [bit] NULL,
	[Remark] [nvarchar](2000) NULL,
	[ReportToEmployeeId] [int] NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Review1Checked] [bit] NULL,
	[Review1EmployeeId] [int] NULL,
	[Review1Action] [nvarchar](50) NULL,
	[Review1ApproveTime] [datetime] NULL,
	[Review1Comment] [nvarchar](500) NULL,
	[Review2Checked] [bit] NULL,
	[Review2EmployeeId] [int] NULL,
	[Review2Action] [nvarchar](50) NULL,
	[Review2ApproveTime] [datetime] NULL,
	[Review2Comment] [nvarchar](2000) NULL,
	[Review3Checked] [bit] NULL,
	[Review3EmployeeId] [int] NULL,
	[Review3Action] [nvarchar](50) NULL,
	[Review3ApproveTime] [datetime] NULL,
	[Review3Comment] [nvarchar](500) NULL,
	[Review4Checked] [bit] NULL,
	[Review4EmployeeId] [int] NULL,
	[Review4Action] [nvarchar](50) NULL,
	[Review4ApproveTime] [datetime] NULL,
	[Review4Comment] [nvarchar](2000) NULL,
	[VerifierChecked] [bit] NULL,
	[VerifierEmployeeId] [int] NULL,
	[VerifierAction] [nvarchar](50) NULL,
	[VerifierApproveTime] [datetime] NULL,
	[VerifierComment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Review1CancelChecked] [bit] NULL,
	[Review1CancelEmployeeId] [int] NULL,
	[Review1CancelAction] [nvarchar](50) NULL,
	[Review1CancelApproveTime] [datetime] NULL,
	[Review1CancelComment] [nvarchar](500) NULL,
	[Review2CancelChecked] [bit] NULL,
	[Review2CancelEmployeeId] [int] NULL,
	[Review2CancelAction] [nvarchar](50) NULL,
	[Review2CancelApproveTime] [datetime] NULL,
	[Review2CancelComment] [nvarchar](500) NULL,
	[Review3CancelChecked] [bit] NULL,
	[Review3CancelEmployeeId] [int] NULL,
	[Review3CancelAction] [nvarchar](50) NULL,
	[Review3CancelApproveTime] [datetime] NULL,
	[Review3CancelComment] [nvarchar](500) NULL,
	[Review4CancelChecked] [bit] NULL,
	[Review4CancelEmployeeId] [int] NULL,
	[Review4CancelAction] [nvarchar](50) NULL,
	[Review4CancelApproveTime] [datetime] NULL,
	[Review4CancelComment] [nvarchar](500) NULL,
	[VerifierCancelChecked] [bit] NULL,
	[VerifierCancelEmployeeId] [int] NULL,
	[VerifierCancelAction] [nvarchar](50) NULL,
	[VerifierCancelApproveTime] [datetime] NULL,
	[VerifierCancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01BusinessTravel_Id] PRIMARY KEY CLUSTERED 
(
	[BTId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01BusinessTravel]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01BusinessTravel]    
AS    
SELECT bt.BTId    
      ,bt.RequestStatus    
      ,bt.IssueDate    
      ,bt.Number    
      ,bt.NumberCode    
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
   ,emp.SignPath as EmployeeSign    
   ,bt.Purpose    
   ,bt.Remark    
   ,bt.CarSupport    
   ,IIF(ISNULL(bt.CarSupport,0) = 1,'Yes','No') as CarSupportText    
    
   ,bt.ReportToEmployeeId    
   ,rpt.EmployeeName as ReportToEmployeeName    
   ,rpt.PositionName as ReportToPositionName    
   ,rpt.EmailAddress as ReportToEmailAddress    
    
   ,bt.CurrentApprover    
   ,bt.CurrentLevel    
   --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
   --approve    
   ,bt.Review1Checked    
   ,bt.Review1EmployeeId,rv1.EmployeeName as Review1EmployeeName, rv1.PositionName as Review1PositionName, rv1.EmailAddress as Review1EmailAddress    
      ,bt.Review1Action    
      ,bt.Review1ApproveTime    
      ,bt.Review1Comment    
   ,IIF(bt.Review1Checked = 1,rv1.SignPath,'') as Review1Sign    
    
   ,bt.Review2Checked    
   ,bt.Review2EmployeeId,rv2.EmployeeName as Review2EmployeeName, rv2.PositionName as Review2PositionName, rv2.EmailAddress as Review2EmailAddress    
      ,bt.Review2Action    
      ,bt.Review2ApproveTime    
      ,bt.Review2Comment    
   ,IIF(bt.Review2Checked = 1,rv2.SignPath,'') as Review2Sign    
    
   ,bt.Review3Checked    
   ,bt.Review3EmployeeId,rv3.EmployeeName as Review3EmployeeName, rv3.PositionName as Review3PositionName, rv3.EmailAddress as Review3EmailAddress    
      ,bt.Review3Action    
      ,bt.Review3ApproveTime    
      ,bt.Review3Comment    
   ,IIF(bt.Review3Checked = 1,rv3.SignPath,'') as Review3Sign    
    
   ,bt.Review4Checked    
   ,bt.Review4EmployeeId,rv4.EmployeeName as Review4EmployeeName, rv4.PositionName as Review4PositionName, rv4.EmailAddress as Review4EmailAddress    
      ,bt.Review4Action    
      ,bt.Review4ApproveTime    
      ,bt.Review4Comment    
   ,IIF(bt.Review4Checked = 1,rv4.SignPath,'') as Review4Sign    
    
   ,bt.VerifierChecked    
   ,bt.VerifierEmployeeId,vrf.EmployeeName as VerifierEmployeeName, vrf.PositionName as VerifierPositionName, vrf.EmailAddress as VerifierEmailAddress    
   ,bt.VerifierAction    
      ,bt.VerifierApproveTime    
      ,bt.VerifierComment    
   ,IIF(bt.VerifierChecked = 1,vrf.SignPath,'') as VerifierSign    
      
   ,bt.ConfirmChecked        
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,bt.ConfirmAction        
   ,bt.ConfirmApproveTime        
   ,bt.ConfirmComment        
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
  
   ,bt.EndorsementChecked    
   ,bt.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress    
   ,bt.EndorsementAction    
      ,bt.EndorsementApproveTime    
      ,bt.EndorsementComment    
   ,IIF(bt.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign    
    
   ,bt.ApproverChecked    
   ,bt.ApproverEmployeeId,apr.EmployeeName as ApproverEmployeeName, apr.PositionName as ApproverPositionName, apr.EmailAddress as ApproverEmailAddress    
   ,bt.ApproverAction    
      ,bt.ApproverApproveTime    
      ,bt.ApproverComment    
   ,IIF(bt.ApproverChecked = 1,apr.SignPath,'') as ApproverSign    
    
   --cancel    
   ,bt.Review1CancelChecked    
   ,bt.Review1CancelEmployeeId,clrv1.EmployeeName as Review1CancelEmployeeName, clrv1.PositionName as Review1CancelPositionName, clrv1.EmailAddress as Review1CancelEmailAddress    
      ,bt.Review1CancelAction    
      ,bt.Review1CancelApproveTime    
      ,bt.Review1CancelComment    
   ,IIF(bt.Review1CancelChecked = 1,clrv1.SignPath,'') as Review1CancelSign    
    
   ,bt.Review2CancelChecked    
   ,bt.Review2CancelEmployeeId,clrv2.EmployeeName as Review2CancelEmployeeName, clrv2.PositionName as Review2CancelPositionName, clrv2.EmailAddress as Review2CancelEmailAddress    
      ,bt.Review2CancelAction    
      ,bt.Review2CancelApproveTime    
      ,bt.Review2CancelComment    
   ,IIF(bt.Review2CancelChecked = 1,clrv2.SignPath,'') as Review2CancelSign    
    
   ,bt.Review3CancelChecked    
   ,bt.Review3CancelEmployeeId,clrv3.EmployeeName as Review3CancelEmployeeName, clrv3.PositionName as Review3CancelPositionName, clrv3.EmailAddress as Review3CancelEmailAddress    
      ,bt.Review3CancelAction    
      ,bt.Review3CancelApproveTime    
      ,bt.Review3CancelComment    
   ,IIF(bt.Review3CancelChecked = 1,clrv3.SignPath,'') as Review3CancelSign    
    
   ,bt.Review4CancelChecked    
   ,bt.Review4CancelEmployeeId,clrv4.EmployeeName as Review4CancelEmployeeName, clrv4.PositionName as Review4CancelPositionName, clrv4.EmailAddress as Review4CancelEmailAddress    
      ,bt.Review4CancelAction    
      ,bt.Review4CancelApproveTime    
      ,bt.Review4CancelComment    
   ,IIF(bt.Review4CancelChecked = 1,clrv4.SignPath,'') as Review4CancelSign    
    
   ,bt.VerifierCancelChecked    
   ,bt.VerifierCancelEmployeeId,clvrf.EmployeeName as VerifierCancelEmployeeName, clvrf.PositionName as VerifierCancelPositionName, clvrf.EmailAddress as VerifierCancelEmailAddress    
   ,bt.VerifierCancelAction    
      ,bt.VerifierCancelApproveTime    
      ,bt.VerifierCancelComment    
   ,IIF(bt.VerifierCancelChecked = 1,clvrf.SignPath,'') as VerifierCancelSign    
    
  ,bt.ConfirmCancelChecked        
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,bt.ConfirmCancelAction        
      ,bt.ConfirmCancelApproveTime        
      ,bt.ConfirmCancelComment        
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign    
  
   ,bt.EndorsementCancelChecked    
   ,bt.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress    
   ,bt.EndorsementCancelAction    
      ,bt.EndorsementCancelApproveTime    
      ,bt.EndorsementCancelComment    
   ,IIF(bt.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign    
    
   ,bt.ApproverCancelChecked    
   ,bt.ApproverCancelEmployeeId,clapr.EmployeeName as ApproverCancelEmployeeName, clapr.PositionName as ApproverCancelPositionName, clapr.EmailAddress as ApproverCancelEmailAddress    
   ,bt.ApproverCancelAction    
      ,bt.ApproverCancelApproveTime    
      ,bt.ApproverCancelComment    
   ,IIF(bt.ApproverCancelChecked = 1,clapr.SignPath,'') as ApproverCancelSign    
    
   ,bt.CancelReason    
   ,bt.CancelTime    
    
   ,bt.ManualApprovalFileName    
   ,bt.ManualApprovalFilePath    
   ,bt.ManualApprovalBy    
   ,bt.ManualApprovalAt    
    
   ,ApplicationName    
   ,CONCAT('/business-travel-approval-',BTId) as approvalURL,    
  CONCAT('/business-travel-cancel-request-',BTId) as cancelURL,    
  CONCAT('/business-travel-approve-view-',BTId) as viewURL    
      ,bt.Sync    
      ,bt.LastSync    
      ,bt.IsActive    
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,bt.CreatedAt    
      ,bt.ModifiedBy    
      ,bt.ModifiedAt    
   --new2    
     
FROM P01BusinessTravel bt    
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee rv1 ON bt.Review1EmployeeId= rv1.EmployeeId    
LEFT JOIN vP00Employee rv2 ON bt.Review2EmployeeId = rv2.EmployeeId    
LEFT JOIN vP00Employee rv3 ON bt.Review3EmployeeId= rv3.EmployeeId    
LEFT JOIN vP00Employee rv4 ON bt.Review4EmployeeId = rv4.EmployeeId    
LEFT JOIN vP00Employee vrf ON bt.VerifierEmployeeId = vrf.EmployeeId    
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId    
LEFT JOIN vP00Employee endo ON bt.EndorsementEmployeeId = endo.EmployeeId    
INNER JOIN vP00Employee apr ON bt.ApproverEmployeeId = apr.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clrv1 ON bt.Review1CancelEmployeeId= clrv1.EmployeeId    
LEFT JOIN vP00Employee clrv2 ON bt.Review2CancelEmployeeId = clrv2.EmployeeId    
LEFT JOIN vP00Employee clrv3 ON bt.Review3CancelEmployeeId= clrv3.EmployeeId    
LEFT JOIN vP00Employee clrv4 ON bt.Review4CancelEmployeeId = clrv4.EmployeeId    
LEFT JOIN vP00Employee clvrf ON bt.VerifierCancelEmployeeId = clvrf.EmployeeId    
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId     
LEFT JOIN vP00Employee cendo ON bt.EndorsementCancelEmployeeId = cendo.EmployeeId    
LEFT JOIN vP00Employee clapr ON bt.ApproverCancelEmployeeId = clapr.EmployeeId    
    
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId    
LEFT JOIN vP00Employee rpt ON bt.ReportToEmployeeId = rpt.EmployeeId 
GO
/****** Object:  Table [dbo].[P01ExpenseApproval]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseApproval](
	[EAId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Classification] [nvarchar](500) NULL,
	[Title] [nvarchar](2000) NULL,
	[Purpose] [nvarchar](2000) NULL,
	[BudgetAvailability] [bit] NOT NULL,
	[BudgetType] [nvarchar](2000) NULL,
	[ProcurementMode] [nvarchar](500) NULL,
	[TotalVND] [numeric](18, 2) NULL,
	[ExchRate] [numeric](18, 2) NULL,
	[TotalUSD] [numeric](18, 2) NULL,
	[TotalBudget] [numeric](18, 2) NULL,
	[RemainingBudget] [numeric](18, 2) NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Review1Checked] [bit] NULL,
	[Review1EmployeeId] [int] NULL,
	[Review1Action] [nvarchar](50) NULL,
	[Review1ApproveTime] [datetime] NULL,
	[Review1Comment] [nvarchar](500) NULL,
	[Review2Checked] [bit] NULL,
	[Review2EmployeeId] [int] NULL,
	[Review2Action] [nvarchar](50) NULL,
	[Review2ApproveTime] [datetime] NULL,
	[Review2Comment] [nvarchar](2000) NULL,
	[Review3Checked] [bit] NULL,
	[Review3EmployeeId] [int] NULL,
	[Review3Action] [nvarchar](50) NULL,
	[Review3ApproveTime] [datetime] NULL,
	[Review3Comment] [nvarchar](500) NULL,
	[Review4Checked] [bit] NULL,
	[Review4EmployeeId] [int] NULL,
	[Review4Action] [nvarchar](50) NULL,
	[Review4ApproveTime] [datetime] NULL,
	[Review4Comment] [nvarchar](2000) NULL,
	[VerifierChecked] [bit] NULL,
	[VerifierEmployeeId] [int] NULL,
	[VerifierAction] [nvarchar](50) NULL,
	[VerifierApproveTime] [datetime] NULL,
	[VerifierComment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Review1CancelChecked] [bit] NULL,
	[Review1CancelEmployeeId] [int] NULL,
	[Review1CancelAction] [nvarchar](50) NULL,
	[Review1CancelApproveTime] [datetime] NULL,
	[Review1CancelComment] [nvarchar](500) NULL,
	[Review2CancelChecked] [bit] NULL,
	[Review2CancelEmployeeId] [int] NULL,
	[Review2CancelAction] [nvarchar](50) NULL,
	[Review2CancelApproveTime] [datetime] NULL,
	[Review2CancelComment] [nvarchar](500) NULL,
	[Review3CancelChecked] [bit] NULL,
	[Review3CancelEmployeeId] [int] NULL,
	[Review3CancelAction] [nvarchar](50) NULL,
	[Review3CancelApproveTime] [datetime] NULL,
	[Review3CancelComment] [nvarchar](500) NULL,
	[Review4CancelChecked] [bit] NULL,
	[Review4CancelEmployeeId] [int] NULL,
	[Review4CancelAction] [nvarchar](50) NULL,
	[Review4CancelApproveTime] [datetime] NULL,
	[Review4CancelComment] [nvarchar](500) NULL,
	[VerifierCancelChecked] [bit] NULL,
	[VerifierCancelEmployeeId] [int] NULL,
	[VerifierCancelAction] [nvarchar](50) NULL,
	[VerifierCancelApproveTime] [datetime] NULL,
	[VerifierCancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](200) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Paid] [bit] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ExpenseApproval_Id] PRIMARY KEY CLUSTERED 
(
	[EAId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ExpenseApproval]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01ExpenseApproval]    
AS    
SELECT bt.EAId    
      ,bt.RequestStatus    
      ,bt.IssueDate    
      ,bt.Number    
      ,bt.NumberCode    
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
   ,emp.SignPath as EmployeeSign    
    
  ,bt.Classification    
  ,bt.Title    
  ,bt.Purpose    
  ,bt.ProcurementMode    
  ,bt.TotalVND    
  ,bt.ExchRate    
  ,bt.TotalUSD    
  ,bt.BudgetAvailability    
  ,IIF(bt.BudgetAvailability=1,'Yes','No')as BudgetAvailabilityText    
  ,bt.BudgetType    
  ,bt.TotalBudget    
  ,bt.RemainingBudget    
  ,bt.Remark    
  --,bt.b    
  --,bt.PaidAmountInAdvance    
  --,Isnull(bt.Total,0) - Isnull(bt.PaidAmountInAdvance,0) as TheRemainingAmount    
  --,bt.InWords    
    
   ,bt.CurrentApprover    
   ,bt.CurrentLevel    
      --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
   --approve    
   ,bt.Review1Checked    
   ,bt.Review1EmployeeId,rv1.EmployeeName as Review1EmployeeName, rv1.PositionName as Review1PositionName, rv1.EmailAddress as Review1EmailAddress    
      ,bt.Review1Action    
      ,bt.Review1ApproveTime    
      ,bt.Review1Comment    
   ,IIF(bt.Review1Checked = 1,rv1.SignPath,'') as Review1Sign    
    
   ,bt.Review2Checked    
   ,bt.Review2EmployeeId,rv2.EmployeeName as Review2EmployeeName, rv2.PositionName as Review2PositionName, rv2.EmailAddress as Review2EmailAddress    
      ,bt.Review2Action    
      ,bt.Review2ApproveTime    
      ,bt.Review2Comment    
   ,IIF(bt.Review2Checked = 1,rv2.SignPath,'') as Review2Sign    
    
   ,bt.Review3Checked    
   ,bt.Review3EmployeeId,rv3.EmployeeName as Review3EmployeeName, rv3.PositionName as Review3PositionName, rv3.EmailAddress as Review3EmailAddress    
      ,bt.Review3Action    
      ,bt.Review3ApproveTime    
      ,bt.Review3Comment    
   ,IIF(bt.Review3Checked = 1,rv3.SignPath,'') as Review3Sign    
    
   ,bt.Review4Checked    
   ,bt.Review4EmployeeId,rv4.EmployeeName as Review4EmployeeName, rv4.PositionName as Review4PositionName, rv4.EmailAddress as Review4EmailAddress    
      ,bt.Review4Action    
      ,bt.Review4ApproveTime    
      ,bt.Review4Comment    
   ,IIF(bt.Review4Checked = 1,rv4.SignPath,'') as Review4Sign    
    
   ,bt.VerifierChecked    
   ,bt.VerifierEmployeeId,vrf.EmployeeName as VerifierEmployeeName, vrf.PositionName as VerifierPositionName, vrf.EmailAddress as VerifierEmailAddress    
   ,bt.VerifierAction    
      ,bt.VerifierApproveTime    
      ,bt.VerifierComment    
   ,IIF(bt.VerifierChecked = 1,vrf.SignPath,'') as VerifierSign    
      
    ,bt.ConfirmChecked        
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,bt.ConfirmAction        
      ,bt.ConfirmApproveTime        
      ,bt.ConfirmComment        
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
  
   ,bt.EndorsementChecked    
   ,bt.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress    
   ,bt.EndorsementAction    
      ,bt.EndorsementApproveTime    
      ,bt.EndorsementComment    
   ,IIF(bt.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign    
    
   ,bt.ApproverChecked    
   ,bt.ApproverEmployeeId,apr.EmployeeName as ApproverEmployeeName, apr.PositionName as ApproverPositionName, apr.EmailAddress as ApproverEmailAddress    
   ,bt.ApproverAction    
      ,bt.ApproverApproveTime    
      ,bt.ApproverComment    
   ,IIF(bt.ApproverChecked = 1,apr.SignPath,'') as ApproverSign    
    
   --cancel    
   ,bt.Review1CancelChecked    
   ,bt.Review1CancelEmployeeId,clrv1.EmployeeName as Review1CancelEmployeeName, clrv1.PositionName as Review1CancelPositionName, clrv1.EmailAddress as Review1CancelEmailAddress    
      ,bt.Review1CancelAction    
      ,bt.Review1CancelApproveTime    
      ,bt.Review1CancelComment    
   ,IIF(bt.Review1CancelChecked = 1,clrv1.SignPath,'') as Review1CancelSign    
    
   ,bt.Review2CancelChecked    
   ,bt.Review2CancelEmployeeId,clrv2.EmployeeName as Review2CancelEmployeeName, clrv2.PositionName as Review2CancelPositionName, clrv2.EmailAddress as Review2CancelEmailAddress    
      ,bt.Review2CancelAction    
      ,bt.Review2CancelApproveTime    
      ,bt.Review2CancelComment    
   ,IIF(bt.Review2CancelChecked = 1,clrv2.SignPath,'') as Review2CancelSign    
    
   ,bt.Review3CancelChecked    
   ,bt.Review3CancelEmployeeId,clrv3.EmployeeName as Review3CancelEmployeeName, clrv3.PositionName as Review3CancelPositionName, clrv3.EmailAddress as Review3CancelEmailAddress    
      ,bt.Review3CancelAction    
      ,bt.Review3CancelApproveTime    
      ,bt.Review3CancelComment    
   ,IIF(bt.Review3CancelChecked = 1,clrv3.SignPath,'') as Review3CancelSign    
    
   ,bt.Review4CancelChecked    
   ,bt.Review4CancelEmployeeId,clrv4.EmployeeName as Review4CancelEmployeeName, clrv4.PositionName as Review4CancelPositionName, clrv4.EmailAddress as Review4CancelEmailAddress    
      ,bt.Review4CancelAction    
      ,bt.Review4CancelApproveTime    
      ,bt.Review4CancelComment    
   ,IIF(bt.Review4CancelChecked = 1,clrv4.SignPath,'') as Review4CancelSign    
    
   ,bt.VerifierCancelChecked    
   ,bt.VerifierCancelEmployeeId,clvrf.EmployeeName as VerifierCancelEmployeeName, clvrf.PositionName as VerifierCancelPositionName, clvrf.EmailAddress as VerifierCancelEmailAddress    
   ,bt.VerifierCancelAction    
      ,bt.VerifierCancelApproveTime    
      ,bt.VerifierCancelComment    
   ,IIF(bt.VerifierCancelChecked = 1,clvrf.SignPath,'') as VerifierCancelSign    
    
  ,bt.ConfirmCancelChecked        
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,bt.ConfirmCancelAction        
      ,bt.ConfirmCancelApproveTime        
      ,bt.ConfirmCancelComment        
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign    
  
   ,bt.EndorsementCancelChecked    
   ,bt.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress    
   ,bt.EndorsementCancelAction    
      ,bt.EndorsementCancelApproveTime    
      ,bt.EndorsementCancelComment    
   ,IIF(bt.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign    
    
   ,bt.ApproverCancelChecked    
   ,bt.ApproverCancelEmployeeId,clapr.EmployeeName as ApproverCancelEmployeeName, clapr.PositionName as ApproverCancelPositionName, clapr.EmailAddress as ApproverCancelEmailAddress    
   ,bt.ApproverCancelAction    
      ,bt.ApproverCancelApproveTime    
      ,bt.ApproverCancelComment    
   ,IIF(bt.ApproverCancelChecked = 1,clapr.SignPath,'') as ApproverCancelSign    
       
   ,bt.CancelReason    
   ,bt.CancelTime    
    
   ,bt.ManualApprovalFileName    
   ,bt.ManualApprovalFilePath    
   ,bt.ManualApprovalBy    
   ,bt.ManualApprovalAt    
    
   ,bt.Paid    
    
   ,ApplicationName    
   ,CONCAT('/expense-approval-approval-',EAId) as approvalURL,    
  CONCAT('/expense-approval-cancel-request-',EAId) as cancelURL,    
  CONCAT('/expense-approval-approve-view-',EAId) as viewURL    
      ,bt.Sync    
      ,bt.LastSync    
      ,bt.IsActive    
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,bt.CreatedAt    
      ,bt.ModifiedBy    
      ,bt.ModifiedAt    
   --new2    
     
FROM P01ExpenseApproval bt    
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee rv1 ON bt.Review1EmployeeId= rv1.EmployeeId    
LEFT JOIN vP00Employee rv2 ON bt.Review2EmployeeId = rv2.EmployeeId    
LEFT JOIN vP00Employee rv3 ON bt.Review3EmployeeId= rv3.EmployeeId    
LEFT JOIN vP00Employee rv4 ON bt.Review4EmployeeId = rv4.EmployeeId    
LEFT JOIN vP00Employee vrf ON bt.VerifierEmployeeId = vrf.EmployeeId    
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId   
LEFT JOIN vP00Employee endo ON bt.EndorsementEmployeeId = endo.EmployeeId    
INNER JOIN vP00Employee apr ON bt.ApproverEmployeeId = apr.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clrv1 ON bt.Review1CancelEmployeeId= clrv1.EmployeeId    
LEFT JOIN vP00Employee clrv2 ON bt.Review2CancelEmployeeId = clrv2.EmployeeId    
LEFT JOIN vP00Employee clrv3 ON bt.Review3CancelEmployeeId= clrv3.EmployeeId    
LEFT JOIN vP00Employee clrv4 ON bt.Review4CancelEmployeeId = clrv4.EmployeeId    
LEFT JOIN vP00Employee clvrf ON bt.VerifierCancelEmployeeId = clvrf.EmployeeId    
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId  
LEFT JOIN vP00Employee cendo ON bt.EndorsementCancelEmployeeId = cendo.EmployeeId    
LEFT JOIN vP00Employee clapr ON bt.ApproverCancelEmployeeId = clapr.EmployeeId    
    
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId    
    
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01BusinessTravelClaimListReviewer1]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  Table [dbo].[P01ExpenseApprovalCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseApprovalCost](
	[EACostId] [int] IDENTITY(1,1) NOT NULL,
	[EAId] [int] NOT NULL,
	[Description] [nvarchar](2000) NULL,
	[Qty] [numeric](18, 2) NULL,
	[UnitPrice] [numeric](18, 2) NULL,
	[ExchangeRate] [numeric](18, 2) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ExpenseApprovalCost] PRIMARY KEY CLUSTERED 
(
	[EACostId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ExpenseApprovalCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ExpenseApprovalCost]
AS
SELECT tvc.EACostId
      ,tvc.EAId, 
	   tv.EmployeeId, tv.RequestStatus
      ,tvc.Description
	  ,tvc.Qty
	  ,tvc.UnitPrice
	  ,tvc.ExchangeRate
	  ,(ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) AS Amount
	  ,((ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) / tvc.ExchangeRate) AS AmountUSD

      ,tvc.IsActive
      ,tvc.CreatedBy
      ,tvc.CreatedAt
      ,tvc.ModifiedBy
      ,tvc.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvc.EAId ORDER BY tvc.EACostId) as rowIndex
FROM P01ExpenseApprovalCost tvc
INNER JOIN P01ExpenseApproval tv ON tvc.EAId = tv.EAId
WHERE tv.IsActive = 1 AND tvc.IsActive = 1



GO
/****** Object:  View [dbo].[vP01ExpenseApprovalPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
    
CREATE VIEW [dbo].[vP01ExpenseApprovalPrint]    
AS    
SELECT     
    --cost    
    btc.rowIndex as costrowIndex    
   ,btc.EACostId as costEAId    
   ,btc.Description as costDescription    
   ,btc.Qty as costQty    
      ,btc.UnitPrice as costUnitPrice    
   ,btc.ExchangeRate as costExchangeRate    
      ,btc.Amount as costAmountVND    
   ,btc.AmountUSD as costAmountUSD    
   ,tt.TotalAmountVND as costTotalAmount    
   ,tt.TotalAmountUSD as costTotalAmountUSD    
   --------------------    
   ,bt.EAId    
      ,bt.RequestStatus    
      ,bt.IssueDate    
      ,bt.Number    
      ,bt.NumberCode    
      ,bt.EmployeeId    
      ,bt.EmployeeCode    
      ,bt.EmployeeName    
   ,bt.EmployeeSign    
      ,bt.GenderName    
      ,bt.DeptName    
      ,bt.PositionName    
   ,bt.JobTitleName    
      ,bt.EmailAddress    
    
      ,bt.Classification    
   ,bt.Title    
   ,bt.Purpose    
   ,bt.ProcurementMode    
   ,bt.TotalVND    
   ,bt.ExchRate    
   ,bt.TotalUSD    
   ,bt.BudgetAvailability    
   ,bt.BudgetAvailabilityText    
   ,bt.BudgetType    
   ,bt.TotalBudget    
   ,bt.RemainingBudget    
   ,bt.Remark    
    
      ,bt.CurrentApprover    
      ,bt.CurrentLevel    
    
      ,bt.Review1Checked    
      ,bt.Review1EmployeeId    
      ,bt.Review1EmployeeName    
      ,bt.Review1PositionName    
      ,bt.Review1EmailAddress    
      ,bt.Review1Action    
      ,bt.Review1ApproveTime    
      ,bt.Review1Comment    
   ,bt.Review1Sign    
    
      ,bt.Review2Checked    
      ,bt.Review2EmployeeId    
      ,bt.Review2EmployeeName    
      ,bt.Review2PositionName    
      ,bt.Review2EmailAddress    
      ,bt.Review2Action    
      ,bt.Review2ApproveTime    
      ,bt.Review2Comment    
   ,bt.Review2Sign    
    
      ,bt.Review3Checked    
      ,bt.Review3EmployeeId    
      ,bt.Review3EmployeeName    
      ,bt.Review3PositionName    
      ,bt.Review3EmailAddress    
      ,bt.Review3Action    
      ,bt.Review3ApproveTime    
      ,bt.Review3Comment    
   ,bt.Review3Sign    
    
   ,bt.Review4Checked    
      ,bt.Review4EmployeeId    
      ,bt.Review4EmployeeName    
      ,bt.Review4PositionName    
      ,bt.Review4EmailAddress    
      ,bt.Review4Action    
      ,bt.Review4ApproveTime    
      ,bt.Review4Comment    
   ,bt.Review4Sign    
    
   ,bt.VerifierChecked    
      ,bt.VerifierEmployeeId    
      ,bt.VerifierEmployeeName    
      ,bt.VerifierPositionName    
      ,bt.VerifierEmailAddress    
      ,bt.VerifierAction    
      ,bt.VerifierApproveTime    
      ,bt.VerifierComment    
   ,bt.VerifierSign    
    
      ,bt.ConfirmChecked    
      ,bt.ConfirmEmployeeId    
      ,bt.ConfirmEmployeeName    
      ,bt.ConfirmPositionName    
      ,bt.ConfirmEmailAddress    
      ,bt.ConfirmAction    
      ,bt.ConfirmApproveTime    
      ,bt.ConfirmComment    
   ,bt.ConfirmSign    
  
   ,bt.EndorsementChecked    
      ,bt.EndorsementEmployeeId    
      ,bt.EndorsementEmployeeName    
      ,bt.EndorsementPositionName    
      ,bt.EndorsementEmailAddress    
      ,bt.EndorsementAction    
      ,bt.EndorsementApproveTime    
      ,bt.EndorsementComment    
   ,bt.EndorsementSign    
    
   ,bt.ApproverChecked    
      ,bt.ApproverEmployeeId    
      ,bt.ApproverEmployeeName    
      ,bt.ApproverPositionName    
      ,bt.ApproverEmailAddress    
      ,bt.ApproverAction    
      ,bt.ApproverApproveTime    
      ,bt.ApproverComment    
   ,bt.ApproverSign    
    
   ,bt.CreatedBy    
   ,bt.CreatedByEmployeeCode    
   ,bt.CreatedByName    
   ,bt.CreatedByDeptName    
   ,bt.CreatedByPositionName    
   ,bt.CreatedByJobTitleName    
   ,bt.CreatedBySignPath    
FROM  vP01ExpenseApprovalCost btc     
INNER JOIN vP01ExpenseApproval bt ON btc.EAId = bt.EAId    
INNER JOIN    
(    
 SELECT EAId, SUM( Amount) as TotalAmountVND, SUM( AmountUSD) as TotalAmountUSD    
 FROM vP01ExpenseApprovalCost    
 WHERE IsActive = 1    
 GROUP BY EAId    
) tt ON btc.EAId = tt.EAId    
    
GO
/****** Object:  Table [dbo].[P01InternalApprovalListReportTo]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalApprovalListReportTo](
	[RPTId] [int] IDENTITY(1,1) NOT NULL,
	[IAId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalApprovalListReportTo] PRIMARY KEY CLUSTERED 
(
	[RPTId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01InternalApproval]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalApproval](
	[IAId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[DeptId] [int] NOT NULL,
	[ManagementDelegation] [nvarchar](500) NULL,
	[BudgetRequired] [bit] NULL,
	[EffectiveDate] [nvarchar](500) NULL,
	[Reference] [nvarchar](500) NULL,
	[PreservationPeriod] [nvarchar](500) NULL,
	[Subjects] [nvarchar](500) NULL,
	[Contents] [nvarchar](max) NULL,
	[ReportTitle] [nvarchar](500) NULL,
	[ReportedToEmployeeId] [int] NULL,
	[IsSealRequired] [bit] NULL,
	[IsConfidential] [bit] NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Reviewer1Checked] [bit] NULL,
	[Reviewer1EmployeeId] [int] NULL,
	[Reviewer1Action] [nvarchar](50) NULL,
	[Reviewer1ApproveTime] [datetime] NULL,
	[Reviewer1Comment] [nvarchar](500) NULL,
	[Reviewer2Checked] [bit] NULL,
	[Reviewer2EmployeeId] [int] NULL,
	[Reviewer2Action] [nvarchar](50) NULL,
	[Reviewer2ApproveTime] [datetime] NULL,
	[Reviewer2Comment] [nvarchar](2000) NULL,
	[Reviewer3Checked] [bit] NULL,
	[Reviewer3EmployeeId] [int] NULL,
	[Reviewer3Action] [nvarchar](50) NULL,
	[Reviewer3ApproveTime] [datetime] NULL,
	[Reviewer3Comment] [nvarchar](500) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[Reviewer4Checked] [bit] NULL,
	[Reviewer4EmployeeId] [int] NULL,
	[Reviewer4Action] [nvarchar](50) NULL,
	[Reviewer4ApproveTime] [datetime] NULL,
	[Reviewer4Comment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Verifier1Checked] [bit] NULL,
	[Verifier1EmployeeId] [int] NULL,
	[Verifier1Action] [nvarchar](50) NULL,
	[Verifier1ApproveTime] [datetime] NULL,
	[Verifier1Comment] [nvarchar](2000) NULL,
	[Reviewer1CancelChecked] [bit] NULL,
	[Reviewer1CancelEmployeeId] [int] NULL,
	[Reviewer1CancelAction] [nvarchar](50) NULL,
	[Reviewer1CancelApproveTime] [datetime] NULL,
	[Reviewer1CancelComment] [nvarchar](500) NULL,
	[Reviewer2CancelChecked] [bit] NULL,
	[Reviewer2CancelEmployeeId] [int] NULL,
	[Reviewer2CancelAction] [nvarchar](50) NULL,
	[Reviewer2CancelApproveTime] [datetime] NULL,
	[Reviewer2CancelComment] [nvarchar](500) NULL,
	[Reviewer3CancelChecked] [bit] NULL,
	[Reviewer3CancelEmployeeId] [int] NULL,
	[Reviewer3CancelAction] [nvarchar](50) NULL,
	[Reviewer3CancelApproveTime] [datetime] NULL,
	[Reviewer3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[Reviewer4CancelChecked] [bit] NULL,
	[Reviewer4CancelEmployeeId] [int] NULL,
	[Reviewer4CancelAction] [nvarchar](50) NULL,
	[Reviewer4CancelApproveTime] [datetime] NULL,
	[Reviewer4CancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[Verifier1CancelChecked] [bit] NULL,
	[Verifier1CancelEmployeeId] [int] NULL,
	[Verifier1CancelAction] [nvarchar](50) NULL,
	[Verifier1CancelApproveTime] [datetime] NULL,
	[Verifier1CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalApproval] PRIMARY KEY CLUSTERED 
(
	[IAId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01InternalApprovalListReportTo]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01InternalApprovalListReportTo]
AS
SELECT tvl.RPTId
      ,tvl.IAId
	  ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
      ,tvl.IsActive
      ,tvl.CreatedBy
      ,tvl.CreatedAt
      ,tvl.ModifiedBy
      ,tvl.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.IAId ORDER BY tvl.RPTId) as rowIndex
FROM P01InternalApprovalListReportTo tvl
INNER JOIN P01InternalApproval tv ON tvl.IAId = tv.IAId
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId
WHERE tv.IsActive = 1 AND tvl.IsActive = 1

GO
/****** Object:  Table [dbo].[P01BusinessTravelTraveler]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelTraveler](
	[BTTravelerId] [int] IDENTITY(1,1) NOT NULL,
	[BTId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01P01BusinessTravelTraveler_BTTravelerId] PRIMARY KEY CLUSTERED 
(
	[BTTravelerId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01BusinessTravelTraveler]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01BusinessTravelTraveler]
AS
SELECT tvl.BTTravelerId
      ,tvl.BTId
	  ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName
      ,tvl.IsActive
      ,tvl.CreatedBy
      ,tvl.CreatedAt
      ,tvl.ModifiedBy
      ,tvl.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.BTId ORDER BY tvl.BTTravelerId) as rowIndex
FROM P01BusinessTravelTraveler tvl
INNER JOIN P01BusinessTravel tv ON tvl.BTId = tv.BTId
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId
WHERE tv.IsActive = 1 AND tvl.IsActive = 1

GO
/****** Object:  View [dbo].[vP01InternalMemorandumApprover1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalMemorandumApprover1]
AS
SELECT * 
FROM vP01ApproverListIM
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01ListEmployeeEditCar]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
            
            
            
CREATE VIEW [dbo].[vP01ListEmployeeEditCar]         
AS           
(      
SELECT EmployeeId, '0' as SiteId  , IsActive      
FROM P00Employee                
where EmployeeId IN (62)            
      
--UNION ALL       
--SELECT EmployeeId, '2' as SiteId , IsActive      
--FROM P00Employee                
--where EmployeeId IN (34)  
  
)
GO
/****** Object:  View [dbo].[vP01InternalMemorandumApprover2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalMemorandumApprover2]
AS
SELECT * 
FROM vP01ApproverListIM
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01BusinessTravelListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01BusinessTravelListApprover]
AS
SELECT * 
FROM vP01ApproverListBT
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01LeaveDayListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01LeaveDayListEndorsement]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListAL
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01InternalMemorandumApprover3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalMemorandumApprover3]
AS
SELECT * 
FROM vP01ApproverListIM
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01BusinessTravelListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01BusinessTravelListReviewer1]
AS
SELECT * 
FROM vP01ApproverListBT
WHERE IsActive =1  AND LevelId = 1
GO
/****** Object:  Table [dbo].[P01TravelType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01TravelType](
	[TravelTypeId] [int] IDENTITY(1,1) NOT NULL,
	[TravelTypeName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00TravelType] PRIMARY KEY CLUSTERED 
(
	[TravelTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01BusinessTravelCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelCost](
	[BTCostId] [int] IDENTITY(1,1) NOT NULL,
	[BTId] [int] NOT NULL,
	[BTDate] [smalldatetime] NOT NULL,
	[LeaveTimeId] [int] NOT NULL,
	[CostTypeId] [int] NOT NULL,
	[CostDetail] [nvarchar](2000) NULL,
	[Destination] [nvarchar](2000) NULL,
	[UnitPrice] [numeric](18, 0) NULL,
	[UnitPriceUSD] [numeric](18, 0) NULL,
	[Qty] [numeric](18, 0) NULL,
	[ActualCost] [numeric](18, 0) NULL,
	[CurrencyCode] [nvarchar](50) NULL,
	[ExchangeRate] [numeric](18, 2) NULL,
	[ActualCostVND] [numeric](18, 0) NULL,
	[Reimbursement] [numeric](18, 0) NULL,
	[PaidBy] [nvarchar](500) NULL,
	[Beneficiary] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01P01BusinessTravelCost_IdSD] PRIMARY KEY CLUSTERED 
(
	[BTCostId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01CostType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CostType](
	[CostTypeId] [int] IDENTITY(1,1) NOT NULL,
	[TravelTypeId] [int] NOT NULL,
	[TravelerGroupId] [int] NULL,
	[CitiesTypeId] [int] NULL,
	[CostGroupName] [nvarchar](200) NULL,
	[CostTypeName] [nvarchar](200) NOT NULL,
	[UnitPrice] [numeric](18, 0) NULL,
	[Remark] [nvarchar](500) NULL,
	[Priority] [int] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00CostType] PRIMARY KEY CLUSTERED 
(
	[CostTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01BusinessTravelCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

/****** Object:  View [dbo].[vP01BusinessTravelCost]    Script Date: 4/5/2024 9:34:52 AM ******/

CREATE VIEW [dbo].[vP01BusinessTravelCost]
AS
SELECT tvc.BTCostId
      ,tvc.BTId, 
	   tv.EmployeeId, tv.RequestStatus
      ,tvc.BTDate
	  ,tvc.LeaveTimeId, ltt.LeaveTimeName, ltt.NumberOfDay
	  ,tvc.Destination
      ,tvc.CostTypeId,ct.CostGroupName, ct.CostTypeName,ct.Priority as CostTypePriority
	  ,tvc.CostDetail
	  ,tvt.TravelTypeId, tvt.TravelTypeName
	  ,tvc.UnitPrice
	  ,tvc.UnitPriceUSD
	  ,tvc.Qty
	  ,(ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) AS Amount
	  ,(ISNULL(tvc.UnitPriceUSD,0) * ISNULL(tvc.Qty,0)) AS AmountUSD
	  --,SUM((ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0))) OVER(PARTITION BY tvc.BTId) AS TotalAmount
	  ,tvc.ActualCost
	  ,tvc.CurrencyCode
	  ,tvc.ExchangeRate
	  ,tvc.ActualCostVND
	  ,tvc.Reimbursement
	  ,tvc.PaidBy
	  ,RTRIM(LTRIM(tvc.Beneficiary)) as Beneficiary
      ,tvc.IsActive
      ,tvc.CreatedBy
      ,tvc.CreatedAt
      ,tvc.ModifiedBy
      ,tvc.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvc.BTId ORDER BY tvc.BTDate,tvc.BTCostId) as rowIndex
	  --,ROW_NUMBER() OVER(PARTITION BY tvl.BTId ORDER BY tvl.BTTravelerId) as rowIndex
FROM P01BusinessTravelCost tvc
INNER JOIN P01BusinessTravel tv ON tvc.BTId = tv.BTId
INNER JOIN P01CostType ct ON tvc.CostTypeId = ct.CostTypeId
INNER JOIN P01TravelType tvt ON ct.TravelTypeId = tvt.TravelTypeId
INNER JOIN P01LeaveTimeType ltt ON tvc.LeaveTimeId = ltt.LeaveTimeId
WHERE tv.IsActive = 1 AND tvc.IsActive = 1



GO
/****** Object:  View [dbo].[vP01InternalMemorandumApprover4]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalMemorandumApprover4]
AS
SELECT * 
FROM vP01ApproverListIM
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01BusinessTravelListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01BusinessTravelListReviewer2]
AS
SELECT * 
FROM vP01ApproverListBT
WHERE IsActive =1  AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01BusinessTravelSummaryCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO






CREATE view [dbo].[vP01BusinessTravelSummaryCost]
AS
SELECT a.BTId, a.BTDate, a.TravelTypeName, a.LeaveTimeName, a.Destination, 
a.Transportation, a.Meal, a.Accommodation, a.Others, a.Amount, a.rowIndex,b.TotalAmount
FROM
(
select BTId,BTDate,TravelTypeName,LeaveTimeName,Destination,
SUM(IIF(CostGroupName = 'Transportation',Amount,0)) as 'Transportation',
SUM(IIF(CostGroupName = 'Meal',Amount,0)) as 'Meal',
SUM(IIF(CostGroupName = 'Accommodation',Amount,0)) as 'Accommodation',
SUM(IIF(CostGroupName = 'Others',Amount,0)) as 'Others',
SUM(Amount) as 'Amount'
,ROW_NUMBER() OVER(PARTITION BY BTId ORDER BY BTId,BTDate,TravelTypeName,LeaveTimeName,Destination) as rowIndex
from vP01BusinessTravelCost 
where IsActive =1
group by BTId,BTDate,TravelTypeName,LeaveTimeName,Destination
) a 
INNER JOIN
(
SELECT BTId, SUM( Amount) as TotalAmount
FROM vP01BusinessTravelCost
WHERE IsActive = 1
GROUP BY BTId
) b
ON a.BTId = b.BTId

GO
/****** Object:  View [dbo].[vP01InternalMemorandumApprover5]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01InternalMemorandumApprover5]
AS
SELECT * 
FROM vP01ApproverListIM
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01BusinessTravelListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01BusinessTravelListVerifier]
AS
SELECT * 
FROM vP01ApproverListBT
WHERE IsActive =1  AND LevelId = 3
GO
/****** Object:  Table [dbo].[P01ApproverListOTC]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListOTC](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListOTC] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveOTC]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveOTC](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveOTC] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListOTC]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01ApproverListOTC]  
AS  
SELECT ap.Id  
--   ,ap.FormId, fm.FormName, fm.FormName2  
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName  
      ,ap.LevelId,lv.LevelName  
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName  
   ,emp.EmailAddress  
      ,ap.IsActive  
      ,ap.CreatedBy  
      ,ap.CreatedAt  
      ,ap.ModifiedBy  
      ,ap.ModifiedAt  
FROM P01ApproverListOTC ap  
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId  
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId  
INNER JOIN P01LevelApproveOTC lv ON ap.LevelId = lv.LevelId  
GO
/****** Object:  Table [dbo].[P01BusinessTravelClaim]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelClaim](
	[BTCId] [int] IDENTITY(1,1) NOT NULL,
	[BTId] [int] NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Review1Checked] [bit] NULL,
	[Review1EmployeeId] [int] NULL,
	[Review1Action] [nvarchar](50) NULL,
	[Review1ApproveTime] [datetime] NULL,
	[Review1Comment] [nvarchar](500) NULL,
	[Review2Checked] [bit] NULL,
	[Review2EmployeeId] [int] NULL,
	[Review2Action] [nvarchar](50) NULL,
	[Review2ApproveTime] [datetime] NULL,
	[Review2Comment] [nvarchar](2000) NULL,
	[Review3Checked] [bit] NULL,
	[Review3EmployeeId] [int] NULL,
	[Review3Action] [nvarchar](50) NULL,
	[Review3ApproveTime] [datetime] NULL,
	[Review3Comment] [nvarchar](500) NULL,
	[Review4Checked] [bit] NULL,
	[Review4EmployeeId] [int] NULL,
	[Review4Action] [nvarchar](50) NULL,
	[Review4ApproveTime] [datetime] NULL,
	[Review4Comment] [nvarchar](2000) NULL,
	[Review5Checked] [bit] NULL,
	[Review5EmployeeId] [int] NULL,
	[Review5Action] [nvarchar](50) NULL,
	[Review5ApproveTime] [datetime] NULL,
	[Review5Comment] [nvarchar](500) NULL,
	[Review6Checked] [bit] NULL,
	[Review6EmployeeId] [int] NULL,
	[Review6Action] [nvarchar](50) NULL,
	[Review6ApproveTime] [datetime] NULL,
	[Review6Comment] [nvarchar](2000) NULL,
	[VerifierChecked] [bit] NULL,
	[VerifierEmployeeId] [int] NULL,
	[VerifierAction] [nvarchar](50) NULL,
	[VerifierApproveTime] [datetime] NULL,
	[VerifierComment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Review1CancelChecked] [bit] NULL,
	[Review1CancelEmployeeId] [int] NULL,
	[Review1CancelAction] [nvarchar](50) NULL,
	[Review1CancelApproveTime] [datetime] NULL,
	[Review1CancelComment] [nvarchar](500) NULL,
	[Review2CancelChecked] [bit] NULL,
	[Review2CancelEmployeeId] [int] NULL,
	[Review2CancelAction] [nvarchar](50) NULL,
	[Review2CancelApproveTime] [datetime] NULL,
	[Review2CancelComment] [nvarchar](500) NULL,
	[Review3CancelChecked] [bit] NULL,
	[Review3CancelEmployeeId] [int] NULL,
	[Review3CancelAction] [nvarchar](50) NULL,
	[Review3CancelApproveTime] [datetime] NULL,
	[Review3CancelComment] [nvarchar](500) NULL,
	[Review4CancelChecked] [bit] NULL,
	[Review4CancelEmployeeId] [int] NULL,
	[Review4CancelAction] [nvarchar](50) NULL,
	[Review4CancelApproveTime] [datetime] NULL,
	[Review4CancelComment] [nvarchar](500) NULL,
	[Review5CancelChecked] [bit] NULL,
	[Review5CancelEmployeeId] [int] NULL,
	[Review5CancelAction] [nvarchar](50) NULL,
	[Review5CancelApproveTime] [datetime] NULL,
	[Review5CancelComment] [nvarchar](500) NULL,
	[Review6CancelChecked] [bit] NULL,
	[Review6CancelEmployeeId] [int] NULL,
	[Review6CancelAction] [nvarchar](50) NULL,
	[Review6CancelApproveTime] [datetime] NULL,
	[Review6CancelComment] [nvarchar](500) NULL,
	[VerifierCancelChecked] [bit] NULL,
	[VerifierCancelEmployeeId] [int] NULL,
	[VerifierCancelAction] [nvarchar](50) NULL,
	[VerifierCancelApproveTime] [datetime] NULL,
	[VerifierCancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Paid] [bit] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01BusinessTravelClaim_Id] PRIMARY KEY CLUSTERED 
(
	[BTCId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaim]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01BusinessTravelClaim]    
AS    
SELECT btc.BTCId    
   ,btc.BTId    
      ,btc.RequestStatus    
      ,btc.IssueDate    
      ,btc.Number    
      ,btc.NumberCode    
      ,btc.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
   ,emp.SignPath as EmployeeSign    
   ,btc.Remark    
   ,btc.CurrentApprover    
   ,btc.CurrentLevel    
    --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
    --BT    
   ,bt.NumberCode as BTNumberCode    
   ,bt.Purpose as BTPurpose    
   --approve    
   ,btc.Review1Checked    
   ,btc.Review1EmployeeId,rv1.EmployeeName as Review1EmployeeName, rv1.PositionName as Review1PositionName, rv1.EmailAddress as Review1EmailAddress    
      ,btc.Review1Action    
      ,btc.Review1ApproveTime    
      ,btc.Review1Comment    
   ,IIF(btc.Review1Checked = 1,rv1.SignPath,'') as Review1Sign    
   ,btc.Review2Checked    
   ,btc.Review2EmployeeId,rv2.EmployeeName as Review2EmployeeName, rv2.PositionName as Review2PositionName, rv2.EmailAddress as Review2EmailAddress    
      ,btc.Review2Action    
      ,btc.Review2ApproveTime    
      ,btc.Review2Comment    
   ,IIF(btc.Review2Checked = 1,rv2.SignPath,'') as Review2Sign    
   ,btc.Review3Checked    
   ,btc.Review3EmployeeId,rv3.EmployeeName as Review3EmployeeName, rv3.PositionName as Review3PositionName, rv3.EmailAddress as Review3EmailAddress    
      ,btc.Review3Action    
      ,btc.Review3ApproveTime    
      ,btc.Review3Comment    
   ,IIF(btc.Review3Checked = 1,rv3.SignPath,'') as Review3Sign    
   ,btc.Review4Checked    
   ,btc.Review4EmployeeId,rv4.EmployeeName as Review4EmployeeName, rv4.PositionName as Review4PositionName, rv4.EmailAddress as Review4EmailAddress    
      ,btc.Review4Action    
      ,btc.Review4ApproveTime    
      ,btc.Review4Comment    
   ,IIF(btc.Review4Checked = 1,rv4.SignPath,'') as Review4Sign    
    
    ,btc.Review5Checked    
   ,btc.Review5EmployeeId,rv5.EmployeeName as Review5EmployeeName, rv5.PositionName as Review5PositionName, rv5.EmailAddress as Review5EmailAddress    
      ,btc.Review5Action    
      ,btc.Review5ApproveTime    
      ,btc.Review5Comment    
   ,IIF(btc.Review5Checked = 1,rv5.SignPath,'') as Review5Sign    
    ,btc.Review6Checked    
   ,btc.Review6EmployeeId,rv6.EmployeeName as Review6EmployeeName, rv6.PositionName as Review6PositionName, rv6.EmailAddress as Review6EmailAddress    
      ,btc.Review6Action    
      ,btc.Review6ApproveTime    
      ,btc.Review6Comment    
   ,IIF(btc.Review6Checked = 1,rv6.SignPath,'') as Review6Sign    
    
   ,btc.VerifierChecked    
   ,btc.VerifierEmployeeId,vrf.EmployeeName as VerifierEmployeeName, vrf.PositionName as VerifierPositionName, vrf.EmailAddress as VerifierEmailAddress    
   ,btc.VerifierAction    
      ,btc.VerifierApproveTime    
      ,btc.VerifierComment    
   ,IIF(btc.VerifierChecked = 1,vrf.SignPath,'') as VerifierSign    
    
     ,btc.ConfirmChecked        
   ,btc.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,btc.ConfirmAction        
      ,btc.ConfirmApproveTime        
      ,btc.ConfirmComment        
   ,IIF(btc.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
  
   ,btc.EndorsementChecked    
   ,btc.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress    
   ,btc.EndorsementAction    
      ,btc.EndorsementApproveTime    
      ,btc.EndorsementComment    
   ,IIF(btc.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign    
    
   ,btc.ApproverChecked    
   ,btc.ApproverEmployeeId,apr.EmployeeName as ApproverEmployeeName, apr.PositionName as ApproverPositionName, apr.EmailAddress as ApproverEmailAddress    
   ,btc.ApproverAction    
      ,btc.ApproverApproveTime    
      ,btc.ApproverComment    
   ,IIF(btc.ApproverChecked = 1,apr.SignPath,'') as ApproverSign    
    --cancel    
   ,btc.Review1CancelChecked    
   ,btc.Review1CancelEmployeeId,clrv1.EmployeeName as Review1CancelEmployeeName, clrv1.PositionName as Review1CancelPositionName, clrv1.EmailAddress as Review1CancelEmailAddress    
      ,btc.Review1CancelAction    
      ,btc.Review1CancelApproveTime    
      ,btc.Review1CancelComment    
   ,IIF(btc.Review1CancelChecked = 1,clrv1.SignPath,'') as Review1CancelSign    
   ,btc.Review2CancelChecked    
   ,btc.Review2CancelEmployeeId,clrv2.EmployeeName as Review2CancelEmployeeName, clrv2.PositionName as Review2CancelPositionName, clrv2.EmailAddress as Review2CancelEmailAddress    
      ,btc.Review2CancelAction    
      ,btc.Review2CancelApproveTime    
      ,btc.Review2CancelComment    
   ,IIF(btc.Review2CancelChecked = 1,clrv2.SignPath,'') as Review2CancelSign    
   ,btc.Review3CancelChecked    
   ,btc.Review3CancelEmployeeId,clrv3.EmployeeName as Review3CancelEmployeeName, clrv3.PositionName as Review3CancelPositionName, clrv3.EmailAddress as Review3CancelEmailAddress    
      ,btc.Review3CancelAction    
      ,btc.Review3CancelApproveTime    
      ,btc.Review3CancelComment    
   ,IIF(btc.Review3CancelChecked = 1,clrv3.SignPath,'') as Review3CancelSign    
   ,btc.Review4CancelChecked    
   ,btc.Review4CancelEmployeeId,clrv4.EmployeeName as Review4CancelEmployeeName, clrv4.PositionName as Review4CancelPositionName, clrv4.EmailAddress as Review4CancelEmailAddress    
      ,btc.Review4CancelAction    
      ,btc.Review4CancelApproveTime    
      ,btc.Review4CancelComment    
   ,IIF(btc.Review4CancelChecked = 1,clrv4.SignPath,'') as Review4CancelSign    
   ,btc.Review5CancelChecked    
   ,btc.Review5CancelEmployeeId,clrv5.EmployeeName as Review5CancelEmployeeName, clrv5.PositionName as Review5CancelPositionName, clrv5.EmailAddress as Review5CancelEmailAddress    
      ,btc.Review5CancelAction    
      ,btc.Review5CancelApproveTime    
      ,btc.Review5CancelComment    
   ,IIF(btc.Review5CancelChecked = 1,clrv5.SignPath,'') as Review5CancelSign    
   ,btc.Review6CancelChecked    
   ,btc.Review6CancelEmployeeId,clrv6.EmployeeName as Review6CancelEmployeeName, clrv6.PositionName as Review6CancelPositionName, clrv6.EmailAddress as Review6CancelEmailAddress    
      ,btc.Review6CancelAction    
      ,btc.Review6CancelApproveTime    
      ,btc.Review6CancelComment    
   ,IIF(btc.Review6CancelChecked = 1,clrv6.SignPath,'') as Review6CancelSign    
   ,btc.VerifierCancelChecked    
   ,btc.VerifierCancelEmployeeId,clvrf.EmployeeName as VerifierCancelEmployeeName, clvrf.PositionName as VerifierCancelPositionName, clvrf.EmailAddress as VerifierCancelEmailAddress    
   ,btc.VerifierCancelAction    
      ,btc.VerifierCancelApproveTime    
      ,btc.VerifierCancelComment    
   ,IIF(btc.VerifierCancelChecked = 1,clvrf.SignPath,'') as VerifierCancelSign    
    
   ,btc.EndorsementCancelChecked    
   ,btc.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress    
   ,btc.EndorsementCancelAction    
      ,btc.EndorsementCancelApproveTime    
      ,btc.EndorsementCancelComment    
   ,IIF(btc.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign    
    
  ,btc.ConfirmCancelChecked        
   ,btc.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,btc.ConfirmCancelAction        
      ,btc.ConfirmCancelApproveTime        
      ,btc.ConfirmCancelComment        
   ,IIF(btc.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign   
  
   ,btc.ApproverCancelChecked    
   ,btc.ApproverCancelEmployeeId,clapr.EmployeeName as ApproverCancelEmployeeName, clapr.PositionName as ApproverCancelPositionName, clapr.EmailAddress as ApproverCancelEmailAddress    
   ,btc.ApproverCancelAction    
      ,btc.ApproverCancelApproveTime    
      ,btc.ApproverCancelComment    
   ,IIF(btc.ApproverCancelChecked = 1,clapr.SignPath,'') as ApproverCancelSign    
       
   ,btc.CancelReason    
   ,btc.CancelTime    
    
   --    
   ,btc.ManualApprovalFileName    
   ,btc.ManualApprovalFilePath    
   ,btc.ManualApprovalBy    
   ,btc.ManualApprovalAt    
    
   ,btc.Paid    
    
   ,btc.ApplicationName    
   ,CONCAT('/business-travel-claim-approval-',BTCId) as approvalURL,    
  CONCAT('/business-travel-claim-cancel-request-',BTCId) as cancelURL,    
  CONCAT('/business-travel-claim-approve-view-',BTCId) as viewURL    
      ,btc.Sync    
      ,btc.LastSync    
      ,btc.IsActive    
      ,btc.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,btc.CreatedAt    
      ,btc.ModifiedBy    
,btc.ModifiedAt    
FROM P01BusinessTravelClaim btc    
INNER JOIN P01BusinessTravel bt ON btc.BTId = bt.BTId    
LEFT JOIN vP00Employee emp ON btc.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee rv1 ON btc.Review1EmployeeId= rv1.EmployeeId    
LEFT JOIN vP00Employee rv2 ON btc.Review2EmployeeId = rv2.EmployeeId    
LEFT JOIN vP00Employee rv3 ON btc.Review3EmployeeId= rv3.EmployeeId    
LEFT JOIN vP00Employee rv4 ON btc.Review4EmployeeId = rv4.EmployeeId    
LEFT JOIN vP00Employee rv5 ON btc.Review5EmployeeId = rv5.EmployeeId    
LEFT JOIN vP00Employee rv6 ON btc.Review6EmployeeId = rv6.EmployeeId    
INNER JOIN vP00Employee vrf ON btc.VerifierEmployeeId = vrf.EmployeeId    
LEFT JOIN vP00Employee cfm ON btc.ConfirmEmployeeId = cfm.EmployeeId    
LEFT JOIN vP00Employee endo ON btc.EndorsementEmployeeId = endo.EmployeeId    
INNER JOIN vP00Employee apr ON btc.ApproverEmployeeId = apr.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clrv1 ON btc.Review1CancelEmployeeId= clrv1.EmployeeId    
LEFT JOIN vP00Employee clrv2 ON btc.Review2CancelEmployeeId = clrv2.EmployeeId    
LEFT JOIN vP00Employee clrv3 ON btc.Review3CancelEmployeeId= clrv3.EmployeeId    
LEFT JOIN vP00Employee clrv4 ON btc.Review4CancelEmployeeId = clrv4.EmployeeId    
LEFT JOIN vP00Employee clrv5 ON btc.Review5CancelEmployeeId= clrv5.EmployeeId    
LEFT JOIN vP00Employee clrv6 ON btc.Review6CancelEmployeeId = clrv6.EmployeeId    
LEFT JOIN vP00Employee clvrf ON btc.VerifierCancelEmployeeId = clvrf.EmployeeId    
LEFT JOIN vP00Employee ccfm ON btc.ConfirmCancelEmployeeId = ccfm.EmployeeId    
LEFT JOIN vP00Employee cendo ON btc.EndorsementCancelEmployeeId = cendo.EmployeeId    
LEFT JOIN vP00Employee clapr ON btc.ApproverCancelEmployeeId = clapr.EmployeeId    
LEFT JOIN vP00Users ucr ON btc.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON btc.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  Table [dbo].[P01PurchaseRequisition]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PurchaseRequisition](
	[PRId] [int] IDENTITY(1,1) NOT NULL,
	[EAId] [int] NOT NULL,
	[ListEANumber] [nvarchar](500) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[GoodsServices] [nvarchar](2000) NULL,
	[Title] [nvarchar](2000) NULL,
	[Purpose] [nvarchar](2000) NULL,
	[ScopeOfWork] [nvarchar](2000) NULL,
	[Recommendation] [nvarchar](2000) NULL,
	[BasisOfSelection] [nvarchar](2000) NULL,
	[ProcurementMode] [nvarchar](500) NULL,
	[BudgetAvailability] [bit] NOT NULL,
	[BudgetType] [nvarchar](2000) NULL,
	[TotalBudget] [numeric](18, 2) NULL,
	[TotalVND] [numeric](18, 2) NULL,
	[ExchRate] [numeric](18, 2) NULL,
	[TotalUSD] [numeric](18, 2) NULL,
	[RemainingBudget] [numeric](18, 2) NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Review1Checked] [bit] NULL,
	[Review1EmployeeId] [int] NULL,
	[Review1Action] [nvarchar](50) NULL,
	[Review1ApproveTime] [datetime] NULL,
	[Review1Comment] [nvarchar](500) NULL,
	[Review2Checked] [bit] NULL,
	[Review2EmployeeId] [int] NULL,
	[Review2Action] [nvarchar](50) NULL,
	[Review2ApproveTime] [datetime] NULL,
	[Review2Comment] [nvarchar](2000) NULL,
	[Review3Checked] [bit] NULL,
	[Review3EmployeeId] [int] NULL,
	[Review3Action] [nvarchar](50) NULL,
	[Review3ApproveTime] [datetime] NULL,
	[Review3Comment] [nvarchar](500) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[Review4Checked] [bit] NULL,
	[Review4EmployeeId] [int] NULL,
	[Review4Action] [nvarchar](50) NULL,
	[Review4ApproveTime] [datetime] NULL,
	[Review4Comment] [nvarchar](2000) NULL,
	[VerifierChecked] [bit] NULL,
	[VerifierEmployeeId] [int] NULL,
	[VerifierAction] [nvarchar](50) NULL,
	[VerifierApproveTime] [datetime] NULL,
	[VerifierComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Review1CancelChecked] [bit] NULL,
	[Review1CancelEmployeeId] [int] NULL,
	[Review1CancelAction] [nvarchar](50) NULL,
	[Review1CancelApproveTime] [datetime] NULL,
	[Review1CancelComment] [nvarchar](500) NULL,
	[Review2CancelChecked] [bit] NULL,
	[Review2CancelEmployeeId] [int] NULL,
	[Review2CancelAction] [nvarchar](50) NULL,
	[Review2CancelApproveTime] [datetime] NULL,
	[Review2CancelComment] [nvarchar](500) NULL,
	[Review3CancelChecked] [bit] NULL,
	[Review3CancelEmployeeId] [int] NULL,
	[Review3CancelAction] [nvarchar](50) NULL,
	[Review3CancelApproveTime] [datetime] NULL,
	[Review3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[Review4CancelChecked] [bit] NULL,
	[Review4CancelEmployeeId] [int] NULL,
	[Review4CancelAction] [nvarchar](50) NULL,
	[Review4CancelApproveTime] [datetime] NULL,
	[Review4CancelComment] [nvarchar](500) NULL,
	[VerifierCancelChecked] [bit] NULL,
	[VerifierCancelEmployeeId] [int] NULL,
	[VerifierCancelAction] [nvarchar](50) NULL,
	[VerifierCancelApproveTime] [datetime] NULL,
	[VerifierCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](200) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Paid] [bit] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01PurchaseRequisition_Id] PRIMARY KEY CLUSTERED 
(
	[PRId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ListEANotYetPR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
      
CREATE VIEW [dbo].[vP01ListEANotYetPR]     
AS      
SELECT bt.EAId      
      ,bt.RequestStatus      
      ,bt.IssueDate      
      ,bt.Number      
      ,bt.NumberCode      
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress      
   ,emp.SignPath as EmployeeSign      
   --,bt.Purpose      
   ,bt.CurrentApprover      
   ,bt.CurrentLevel      
     
   ,bt.ApplicationName      
      ,bt.Sync      
      ,bt.LastSync      
      ,bt.IsActive      
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode      
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName      
      ,bt.CreatedAt      
      ,bt.ModifiedBy      
      ,bt.ModifiedAt      
FROM P01ExpenseApproval bt      
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId       
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId      
WHERE bt.IsActive = 1 AND bt.RequestStatus = 'Approved'      
AND bt.EAId NOT IN (SELECT EAId FROM P01PurchaseRequisition WHERE IsActive = 1 AND RequestStatus NOT IN ('Rejected','Canceled') GROUP BY EAId)   
  
  
GO
/****** Object:  Table [dbo].[P01DailyReportListTo]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01DailyReportListTo](
	[RPTId] [int] IDENTITY(1,1) NOT NULL,
	[DRId] [int] NOT NULL,
	[EmployeeName] [nvarchar](200) NULL,
	[EmailAddress] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01DailyReportListTo] PRIMARY KEY CLUSTERED 
(
	[RPTId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01DailyReport]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01DailyReport](
	[DRId] [int] IDENTITY(1,1) NOT NULL,
	[CId] [int] NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Subjects] [nvarchar](500) NULL,
	[Contents] [nvarchar](max) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Reviewer1Checked] [bit] NULL,
	[Reviewer1EmployeeId] [int] NULL,
	[Reviewer1Action] [nvarchar](50) NULL,
	[Reviewer1ApproveTime] [datetime] NULL,
	[Reviewer1Comment] [nvarchar](500) NULL,
	[Reviewer2Checked] [bit] NULL,
	[Reviewer2EmployeeId] [int] NULL,
	[Reviewer2Action] [nvarchar](50) NULL,
	[Reviewer2ApproveTime] [datetime] NULL,
	[Reviewer2Comment] [nvarchar](2000) NULL,
	[Reviewer3Checked] [bit] NULL,
	[Reviewer3EmployeeId] [int] NULL,
	[Reviewer3Action] [nvarchar](50) NULL,
	[Reviewer3ApproveTime] [datetime] NULL,
	[Reviewer3Comment] [nvarchar](500) NULL,
	[Reviewer4Checked] [bit] NULL,
	[Reviewer4EmployeeId] [int] NULL,
	[Reviewer4Action] [nvarchar](50) NULL,
	[Reviewer4ApproveTime] [datetime] NULL,
	[Reviewer4Comment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Reviewer1CancelChecked] [bit] NULL,
	[Reviewer1CancelEmployeeId] [int] NULL,
	[Reviewer1CancelAction] [nvarchar](50) NULL,
	[Reviewer1CancelApproveTime] [datetime] NULL,
	[Reviewer1CancelComment] [nvarchar](500) NULL,
	[Reviewer2CancelChecked] [bit] NULL,
	[Reviewer2CancelEmployeeId] [int] NULL,
	[Reviewer2CancelAction] [nvarchar](50) NULL,
	[Reviewer2CancelApproveTime] [datetime] NULL,
	[Reviewer2CancelComment] [nvarchar](500) NULL,
	[Reviewer3CancelChecked] [bit] NULL,
	[Reviewer3CancelEmployeeId] [int] NULL,
	[Reviewer3CancelAction] [nvarchar](50) NULL,
	[Reviewer3CancelApproveTime] [datetime] NULL,
	[Reviewer3CancelComment] [nvarchar](500) NULL,
	[Reviewer4CancelChecked] [bit] NULL,
	[Reviewer4CancelEmployeeId] [int] NULL,
	[Reviewer4CancelAction] [nvarchar](50) NULL,
	[Reviewer4CancelApproveTime] [datetime] NULL,
	[Reviewer4CancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01DailyReport] PRIMARY KEY CLUSTERED 
(
	[DRId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01DailyReportListTo]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01DailyReportListTo]  
AS    
SELECT tvl.RPTId    
      ,tvl.DRId    
      ,tvl.EmployeeName, tvl.EmailAddress    
      ,tvl.IsActive    
      ,tvl.CreatedBy    
      ,tvl.CreatedAt    
      ,tvl.ModifiedBy    
      ,tvl.ModifiedAt    
   ,ROW_NUMBER() OVER(PARTITION BY tvl.DRId ORDER BY tvl.RPTId) as rowIndex    
FROM P01DailyReportListTo tvl    
INNER JOIN P01DailyReport tv ON tvl.DRId = tv.DRId    
WHERE tv.IsActive = 1 AND tvl.IsActive = 1    
GO
/****** Object:  Table [dbo].[P01MealRegistrationDefault]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealRegistrationDefault](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[MealKindId] [int] NOT NULL,
	[EBRMealTypeId] [int] NULL,
	[EBRMealPlaceId] [int] NULL,
	[BRMealTypeId] [int] NULL,
	[BRMealPlaceId] [int] NULL,
	[LUMealTypeId] [int] NULL,
	[LUMealPlaceId] [int] NULL,
	[DIMealTypeId] [int] NULL,
	[DIMealPlaceId] [int] NULL,
	[EXMealTypeId] [int] NULL,
	[EXMealPlaceId] [int] NULL,
	[WorkShiftId] [int] NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealRegistrationDefault] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01MealR__7AD04F103C8DFABB] UNIQUE NONCLUSTERED 
(
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01MealRegistrationDefault]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
               
CREATE VIEW [dbo].[vP01MealRegistrationDefault]                    
AS                    
SELECT dt.Id                    
      ,dt.EmployeeId, emp.EmployeeName, emp.EmployeeCode,emp.SiteId, emp.SiteName, emp.EmployeeTypeName, emp.FirstWorkingDate                    
      ,dt.MealKindId, mt.EmployeeTypeName as MealKindName                
      ,dt.BRMealTypeId, brt.MealTypeName as BRMealTypeName                    
      ,dt.BRMealPlaceId, brp.MealPlaceName as BRMealPlaceName, ISNULL(brp.MealPlaceName2,'') as BRMealPlaceCode                    
      ,dt.LUMealTypeId, lut.MealTypeName as LUMealTypeName                    
      ,dt.LUMealPlaceId, lup.MealPlaceName as LUMealPlaceName, ISNULL(lup.MealPlaceName2,'') as LUMealPlaceCode                    
      ,dt.DIMealTypeId, dit.MealTypeName as DIMealTypeName                    
      ,dt.DIMealPlaceId, dip.MealPlaceName as DIMealPlaceName , ISNULL(dip.MealPlaceName2,'') as DIMealPlaceCode               
      ,dt.EXMealTypeId, ext.MealTypeName as EXMealTypeName                
      ,dt.EXMealPlaceId, expl.MealPlaceName as EXMealPlaceName , ISNULL(expl.MealPlaceName2,'') as EXMealPlaceCode           
           
   ,dt.EBRMealTypeId, ebrt.MealTypeName as EBRMealTypeName                    
      ,dt.EBRMealPlaceId, ebrp.MealPlaceName as EBRMealPlaceName, ISNULL(ebrp.MealPlaceName2,'') as EBRMealPlaceCode        
        
      ,dt.WorkShiftId, ws.WorkShiftName                    
      ,dt.Remark                    
      ,dt.IsActive                    
      ,dt.CreatedBy                    
      ,dt.CreatedAt                    
      ,dt.ModifiedBy                    
      ,dt.ModifiedAt                    
FROM P01MealRegistrationDefault dt                    
LEFT JOIN vP00Employee emp ON dt.EmployeeId = emp.EmployeeId                    
LEFT JOIN P01MealType brt ON dt.BRMealTypeId = brt.MealTypeId                    
LEFT JOIN P01MealPlace brp ON dt.BRMealPlaceId = brp.MealPlaceId                    
LEFT JOIN P01MealType lut ON dt.LUMealTypeId = lut.MealTypeId                    
LEFT JOIN P01MealPlace lup ON dt.LUMealPlaceId = lup.MealPlaceId                    
LEFT JOIN P01MealType dit ON dt.DIMealTypeId = dit.MealTypeId                    
LEFT JOIN P01MealPlace dip ON dt.DIMealPlaceId = dip.MealPlaceId               
LEFT JOIN P01MealType ext ON dt.EXMealTypeId = ext.MealTypeId                
LEFT JOIN P01MealPlace expl ON dt.EXMealPlaceId = expl.MealPlaceId               
LEFT JOIN P01MealWorkShift ws ON dt.WorkShiftId = ws.WorkShiftId                  
LEFT JOIN P00EmployeeType mt ON dt.MealKindId = mt.EmployeeTypeId            
LEFT JOIN P01MealType ebrt ON dt.EBRMealTypeId = ebrt.MealTypeId                    
LEFT JOIN P01MealPlace ebrp ON dt.EBRMealPlaceId = ebrp.MealPlaceId           
WHERE dt.IsActive = 1 
GO
/****** Object:  View [dbo].[vP01LeaveDaysPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
     
CREATE VIEW [dbo].[vP01LeaveDaysPrint]      
AS      
SELECT       
    ldd.LeaveDayDetailId      
      ,ldd.LeaveDayId      
      --,ldd.EmployeeId      
      --,ldd.WorkYear      
      --,ldd.RequestStatus      
      ,ldd.LeaveDate      
   ,ldd.WorkShiftName  
      ,ldd.LeaveTypeId      
      ,ldd.LeaveTypeName      
      ,ldd.IsAnnualLeave      
      ,ldd.LeaveTimeId      
      ,ldd.LeaveTimeName      
      ,ldd.NumberOfDay      
    ,ldd.OTCId      
   ,ldd.Remark as DetailRemark      
      --,ldd.IsActive      
      --,ldd.CreatedBy      
      --,ldd.CreatedAt      
      --,ldd.ModifiedBy      
      --,ldd.ModifiedAt      
   --,ld.LeaveDayId      
      ,ld.RequestStatus      
      ,ld.WorkYear      
      ,ld.IssueDate      
      ,ld.Number      
      ,ld.NumberCode      
      ,ld.EmployeeId      
      ,ld.EmployeeCode      
      ,ld.EmployeeName      
      ,ld.GenderName      
      ,ld.DeptName      
      ,ld.PositionName      
      ,ld.EmailAddress      
      ,ld.TotalDay      
      ,ld.TotalAnnualLeave      
      ,ld.EmployeeSign      
      ,ld.PhoneNumber      
   ,ld.CarSupport      
   ,IIF(ISNULL(ld.CarSupport,0) = 1,'Yes','No') as CarSupportText      
      ,ld.Remark      
      ,ld.CurrentApprover      
      ,ld.CurrentLevel      
      
      ,ld.Level1Checked      
      ,ld.Level1EmployeeId      
      ,ld.Level1EmployeeName      
      ,ld.Level1PositionName      
      ,ld.Level1EmailAddress      
      ,ld.Level1Action      
      ,ld.Level1ApproveTime      
      ,ld.Level1Comment      
   ,ld.Level1Sign      
      
      ,ld.Level2Checked      
      ,ld.Level2EmployeeId      
      ,ld.Level2EmployeeName      
      ,ld.Level2PositionName      
      ,ld.Level2EmailAddress      
      ,ld.Level2Action      
      ,ld.Level2ApproveTime      
      ,ld.Level2Comment      
   ,ld.Level2Sign      
      
      ,ld.Level3Checked      
      ,ld.Level3EmployeeId      
      ,ld.Level3EmployeeName      
      ,ld.Level3PositionName      
      ,ld.Level3EmailAddress      
      ,ld.Level3Action      
      ,ld.Level3ApproveTime      
      ,ld.Level3Comment      
   ,ld.Level3Sign      
      
   ,ld.ConfirmChecked      
      ,ld.ConfirmEmployeeId      
      ,ld.ConfirmEmployeeName      
      ,ld.ConfirmPositionName      
      ,ld.ConfirmEmailAddress      
      ,ld.ConfirmAction      
      ,ld.ConfirmApproveTime      
      ,ld.ConfirmComment      
   ,ld.ConfirmSign      
    
   ,ld.EndorsementChecked      
      ,ld.EndorsementEmployeeId      
      ,ld.EndorsementEmployeeName      
      ,ld.EndorsementPositionName      
      ,ld.EndorsementEmailAddress      
      ,ld.EndorsementAction      
      ,ld.EndorsementApproveTime      
      ,ld.EndorsementComment      
   ,ld.EndorsementSign      
      
   ,ld.Level4Checked      
      ,ld.Level4EmployeeId      
      ,ld.Level4EmployeeName      
      ,ld.Level4PositionName      
      ,ld.Level4EmailAddress      
      ,ld.Level4Action      
      ,ld.Level4ApproveTime      
      ,ld.Level4Comment      
   ,ld.Level4Sign      
   ,ld.RemainingAnnualLeave      
   ,ld.Balance      
      
      ,ld.CreatedBy      
   ,ld.CreatedByEmployeeCode      
   ,ld.CreatedByName      
   ,ld.CreatedByDeptName      
   ,ld.CreatedByPositionName      
   ,ld.CreatedByJobTitleName      
   ,ld.CreatedBySignPath      
         
FROM  vP01LeaveDaysDetail ldd       
INNER JOIN vP01LeaveDays ld ON ldd.LeaveDayId = ld.LeaveDayId 
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01OvertimeConfirmationListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
FROM vP01ApproverListOTC
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  Table [dbo].[P01Overtime]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01Overtime](
	[OTId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[CarSupport] [bit] NULL,
	[MealSupport] [bit] NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01Overtime] PRIMARY KEY CLUSTERED 
(
	[OTId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OvertimeDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01OvertimeDetail]          
AS          
SELECT dt.OTDId          
      ,dt.OTId, r.EmployeeId, r.WorkYear, r.RequestStatus          
      ,dt.WorkDate    
   ,dt.EmployeeId as WorkerEmployeeId    
   ,emp.EmployeeName as WorkerEmployeeName,emp.DeptName as WorkerDeptName  
   ,emp.PositionName as WorkerPositionName  
   ,emp.JobTitleName as WorkerJobTitleName  
   ,dt.WorkShiftId      
   ,ws.WorkShiftName, ws.WorkTypeId, ws.WorkTypeName      
   ,dt.LeaderName        
   ,dt.StartTime          
      ,dt.EndTime          
   ,dt.BreakTime          
   ,dt.WorkingHours          
   ,dt.Reason          
   ,dt.ApplicantRequest          
   ,dt.Remark          
      ,dt.IsActive          
      ,dt.CreatedBy          
      ,dt.CreatedAt          
      ,dt.ModifiedBy          
      ,dt.ModifiedAt       
      ,ROW_NUMBER() OVER(PARTITION BY dt.OTId ORDER BY dt.OTDId) as rowIndex        
FROM P01OvertimeDetail dt          
INNER JOIN P01Overtime r ON dt.OTId = r.OTId          
INNER JOIN vP00Employee emp ON dt.EmployeeId = emp.EmployeeId     
LEFT JOIN vP00WorkShift ws ON dt.WorkShiftId = ws.WorkShiftId          
WHERE r.IsActive = 1 AND dt.IsActive = 1 
GO
/****** Object:  Table [dbo].[P01OvertimeListWorker]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeListWorker](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[OTId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeListWorker_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OvertimeListWorker]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01OvertimeListWorker]  
AS  
SELECT tvl.Id  
      ,tvl.OTId  
      ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName 
	  ,tv.RequestStatus
	  ,tv.NumberCode

      ,tvl.IsActive  
      ,tvl.CreatedBy  
      ,tvl.CreatedAt  
      ,tvl.ModifiedBy  
      ,tvl.ModifiedAt  
   ,ROW_NUMBER() OVER(PARTITION BY tvl.OTId ORDER BY tvl.Id) as rowIndex  
FROM P01OvertimeListWorker tvl  
INNER JOIN P01Overtime tv ON tvl.OTId = tv.OTId  
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId  
WHERE tv.IsActive = 1 AND tvl.IsActive = 1  
  
GO
/****** Object:  View [dbo].[vP01OvertimeWorkerDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01OvertimeWorkerDetail]  
AS  
SELECT dt.OTDId  
      ,dt.OTId, r.WorkYear, r.RequestStatus  
	  ,w.EmployeeId,w.EmployeeCode,w.EmployeeName,w.DeptName,w.PositionName,w.JobTitleName
      ,dt.WorkDate  
	  ,dt.StartTime  
      ,dt.EndTime  
	  ,dt.BreakTime  
	  ,dt.WorkingHours  
	  ,dt.Reason  
	  ,dt.ApplicantRequest  
	  ,dt.Remark  
      ,dt.IsActive  
      ,dt.CreatedBy  
      ,dt.CreatedAt  
      ,dt.ModifiedBy  
      ,dt.ModifiedAt  
FROM vP01OvertimeDetail dt  
INNER JOIN P01Overtime r ON dt.OTId = r.OTId  
INNER JOIN vP01OvertimeListWorker w ON r.OTId = w.OTId
WHERE r.IsActive = 1 AND dt.IsActive = 1  
GO
/****** Object:  Table [dbo].[P01OvertimeConfirmationListWorker]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeConfirmationListWorker](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[OTCId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsConfirm] [bit] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeConfirmationListWorker_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListWorker]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01OvertimeConfirmationListWorker]
AS
SELECT tvl.Id
      ,tvl.OTCId
	  ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName
      ,tvl.IsConfirm
	  ,tvl.IsActive
      ,tvl.CreatedBy
      ,tvl.CreatedAt
      ,tvl.ModifiedBy
      ,tvl.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.OTCId ORDER BY tvl.Id) as rowIndex
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.OTCId, tvl.IsConfirm ORDER BY tvl.Id) as rowIndexConfirm
FROM P01OvertimeConfirmationListWorker tvl
INNER JOIN P01OvertimeConfirmation tv ON tvl.OTCId = tv.OTCId
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId
WHERE tv.IsActive = 1 AND tvl.IsActive = 1

GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01OvertimeConfirmationListEndorsement]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOTC
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01OvertimeConfirmationListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOTC
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  Table [dbo].[P01ITRequest]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ITRequest](
	[ITRId] [int] IDENTITY(1,1) NOT NULL,
	[CId] [int] NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Subjects] [nvarchar](500) NULL,
	[Contents] [nvarchar](max) NULL,
	[DueDate] [smalldatetime] NOT NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Reviewer1Checked] [bit] NULL,
	[Reviewer1EmployeeId] [int] NULL,
	[Reviewer1Action] [nvarchar](50) NULL,
	[Reviewer1ApproveTime] [datetime] NULL,
	[Reviewer1Comment] [nvarchar](500) NULL,
	[Reviewer2Checked] [bit] NULL,
	[Reviewer2EmployeeId] [int] NULL,
	[Reviewer2Action] [nvarchar](50) NULL,
	[Reviewer2ApproveTime] [datetime] NULL,
	[Reviewer2Comment] [nvarchar](2000) NULL,
	[Reviewer3Checked] [bit] NULL,
	[Reviewer3EmployeeId] [int] NULL,
	[Reviewer3Action] [nvarchar](50) NULL,
	[Reviewer3ApproveTime] [datetime] NULL,
	[Reviewer3Comment] [nvarchar](500) NULL,
	[Reviewer4Checked] [bit] NULL,
	[Reviewer4EmployeeId] [int] NULL,
	[Reviewer4Action] [nvarchar](50) NULL,
	[Reviewer4ApproveTime] [datetime] NULL,
	[Reviewer4Comment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Reviewer1CancelChecked] [bit] NULL,
	[Reviewer1CancelEmployeeId] [int] NULL,
	[Reviewer1CancelAction] [nvarchar](50) NULL,
	[Reviewer1CancelApproveTime] [datetime] NULL,
	[Reviewer1CancelComment] [nvarchar](500) NULL,
	[Reviewer2CancelChecked] [bit] NULL,
	[Reviewer2CancelEmployeeId] [int] NULL,
	[Reviewer2CancelAction] [nvarchar](50) NULL,
	[Reviewer2CancelApproveTime] [datetime] NULL,
	[Reviewer2CancelComment] [nvarchar](500) NULL,
	[Reviewer3CancelChecked] [bit] NULL,
	[Reviewer3CancelEmployeeId] [int] NULL,
	[Reviewer3CancelAction] [nvarchar](50) NULL,
	[Reviewer3CancelApproveTime] [datetime] NULL,
	[Reviewer3CancelComment] [nvarchar](500) NULL,
	[Reviewer4CancelChecked] [bit] NULL,
	[Reviewer4CancelEmployeeId] [int] NULL,
	[Reviewer4CancelAction] [nvarchar](50) NULL,
	[Reviewer4CancelApproveTime] [datetime] NULL,
	[Reviewer4CancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ITRequest] PRIMARY KEY CLUSTERED 
(
	[ITRId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ITRequest]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

                      
CREATE VIEW [dbo].[vP01ITRequest]              
AS              
SELECT bt.ITRId              
      ,bt.RequestStatus              
      ,bt.IssueDate              
      ,bt.Number              
      ,bt.NumberCode              
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress              
   ,emp.SignPath as EmployeeSign              
              
   ,bt.Subjects              
   ,bt.Contents              
   ,bt.DueDate        
                 
   ,bt.CurrentApprover              
   ,bt.CurrentLevel              
       --              
    ,curApr.EmployeeName as CurrentApproverEmployeeName              
    ,curApr.PositionName as CurrentApproverPositionName              
    ,curApr.EmailAddress as CurrentApproverEmailAddress              
   --approve              
   ,bt.Reviewer1Checked              
   ,bt.Reviewer1EmployeeId,rv1.EmployeeName as Reviewer1EmployeeName, rv1.PositionName as Reviewer1PositionName, rv1.EmailAddress as Reviewer1EmailAddress              
      ,bt.Reviewer1Action              
      ,bt.Reviewer1ApproveTime              
      ,bt.Reviewer1Comment              
   ,IIF(bt.Reviewer1Checked = 1,rv1.SignPath,'') as Reviewer1Sign              
                
   ,bt.Reviewer2Checked              
   ,bt.Reviewer2EmployeeId,rv2.EmployeeName as Reviewer2EmployeeName, rv2.PositionName as Reviewer2PositionName, rv2.EmailAddress as Reviewer2EmailAddress              
      ,bt.Reviewer2Action              
      ,bt.Reviewer2ApproveTime              
      ,bt.Reviewer2Comment              
   ,IIF(bt.Reviewer2Checked = 1,rv2.SignPath,'') as Reviewer2Sign              
                 
   ,bt.Reviewer3Checked              
   ,bt.Reviewer3EmployeeId,rv3.EmployeeName as Reviewer3EmployeeName, rv3.PositionName as Reviewer3PositionName, rv3.EmailAddress as Reviewer3EmailAddress              
      ,bt.Reviewer3Action              
      ,bt.Reviewer3ApproveTime              
      ,bt.Reviewer3Comment              
   ,IIF(bt.Reviewer3Checked = 1,rv3.SignPath,'') as Reviewer3Sign              
                 
   ,bt.Reviewer4Checked              
   ,bt.Reviewer4EmployeeId,rv4.EmployeeName as Reviewer4EmployeeName, rv4.PositionName as Reviewer4PositionName, rv4.EmailAddress as Reviewer4EmailAddress              
      ,bt.Reviewer4Action              
      ,bt.Reviewer4ApproveTime              
      ,bt.Reviewer4Comment              
   ,IIF(bt.Reviewer4Checked = 1,rv4.SignPath,'') as Reviewer4Sign              
                 
   ,bt.ApproverChecked              
   ,bt.ApproverEmployeeId,rv5.EmployeeName as ApproverEmployeeName, rv5.PositionName as ApproverPositionName, rv5.EmailAddress as ApproverEmailAddress              
      ,bt.ApproverAction              
      ,bt.ApproverApproveTime              
      ,bt.ApproverComment              
   ,IIF(bt.ApproverChecked = 1,rv5.SignPath,'') as ApproverSign              
                
  --,bt.Verifier1Checked              
  -- ,bt.Verifier1EmployeeId,vrf.EmployeeName as Verifier1EmployeeName, vrf.PositionName as Verifier1PositionName, vrf.EmailAddress as Verifier1EmailAddress              
  -- ,bt.Verifier1Action              
  --    ,bt.Verifier1ApproveTime              
  --    ,bt.Verifier1Comment              
  -- ,IIF(bt.Verifier1Checked = 1,vrf.SignPath,'') as Verifier1Sign              
                
                
  --cancel              
   ,bt.Reviewer1CancelChecked              
   ,bt.Reviewer1CancelEmployeeId,clrv1.EmployeeName as Reviewer1CancelEmployeeName, clrv1.PositionName as Reviewer1CancelPositionName, clrv1.EmailAddress as Reviewer1CancelEmailAddress              
      ,bt.Reviewer1CancelAction              
      ,bt.Reviewer1CancelApproveTime              
      ,bt.Reviewer1CancelComment              
   ,IIF(bt.Reviewer1CancelChecked = 1,clrv1.SignPath,'') as Reviewer1CancelSign              
                
  ,bt.Reviewer2CancelChecked              
   ,bt.Reviewer2CancelEmployeeId,clrv2.EmployeeName as Reviewer2CancelEmployeeName, clrv2.PositionName as Reviewer2CancelPositionName, clrv2.EmailAddress as Reviewer2CancelEmailAddress              
      ,bt.Reviewer2CancelAction              
      ,bt.Reviewer2CancelApproveTime              
      ,bt.Reviewer2CancelComment              
   ,IIF(bt.Reviewer2CancelChecked = 1,clrv2.SignPath,'') as Reviewer2CancelSign              
                
  ,bt.Reviewer3CancelChecked             
   ,bt.Reviewer3CancelEmployeeId,clrv3.EmployeeName as Reviewer3CancelEmployeeName, clrv3.PositionName as Reviewer3CancelPositionName, clrv3.EmailAddress as Reviewer3CancelEmailAddress              
      ,bt.Reviewer3CancelAction              
      ,bt.Reviewer3CancelApproveTime              
      ,bt.Reviewer3CancelComment              
   ,IIF(bt.Reviewer3CancelChecked = 1,clrv3.SignPath,'') as Reviewer3CancelSign              
                 
   ,bt.Reviewer4CancelChecked              
   ,bt.Reviewer4CancelEmployeeId,clrv4.EmployeeName as Reviewer4CancelEmployeeName, clrv4.PositionName as Reviewer4CancelPositionName, clrv4.EmailAddress as Reviewer4CancelEmailAddress              
      ,bt.Reviewer4CancelAction              
      ,bt.Reviewer4CancelApproveTime              
      ,bt.Reviewer4CancelComment              
   ,IIF(bt.Reviewer4CancelChecked = 1,clrv4.SignPath,'') as Reviewer4CancelSign              
                 
   ,bt.ApproverCancelChecked              
   ,bt.ApproverCancelEmployeeId,clrv5.EmployeeName as ApproverCancelEmployeeName, clrv5.PositionName as ApproverCancelPositionName, clrv5.EmailAddress as ApproverCancelEmailAddress              
      ,bt.ApproverCancelAction              
      ,bt.ApproverCancelApproveTime              
      ,bt.ApproverCancelComment              
   ,IIF(bt.ApproverCancelChecked = 1,clrv5.SignPath,'') as ApproverCancelSign              
                
   ,bt.CancelReason              
   ,bt.CancelTime              
              
                 
   ,bt.ApplicationName      
   ,CONCAT('/it-request-approval-',ITRId) as approvalURL,              
  CONCAT('/it-request-cancel-request-',ITRId) as cancelURL,              
  CONCAT('/it-request-approve-view-',ITRId) as viewURL              
                
   ,bt.ManualApprovalFileName              
   ,bt.ManualApprovalFilePath              
   ,bt.ManualApprovalBy              
   ,bt.ManualApprovalAt              
              
      ,bt.IsActive              
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode              
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName              
   ,ucr.SignPath as CreatedBySignPath              
      ,bt.CreatedAt              
      ,bt.ModifiedBy              
      ,bt.ModifiedAt              
   --new2              
               
FROM P01ITRequest bt             
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId              
            
LEFT JOIN vP00Employee rv1 ON bt.Reviewer1EmployeeId= rv1.EmployeeId              
LEFT JOIN vP00Employee rv2 ON bt.Reviewer2EmployeeId = rv2.EmployeeId              
LEFT JOIN vP00Employee rv3 ON bt.Reviewer3EmployeeId= rv3.EmployeeId              
LEFT JOIN vP00Employee rv4 ON bt.Reviewer4EmployeeId = rv4.EmployeeId              
LEFT JOIN vP00Employee rv5 ON bt.ApproverEmployeeId = rv5.EmployeeId              
           
--cancel              
LEFT JOIN vP00Employee clrv1 ON bt.Reviewer1CancelEmployeeId= clrv1.EmployeeId              
LEFT JOIN vP00Employee clrv2 ON bt.Reviewer2CancelEmployeeId = clrv2.EmployeeId              
LEFT JOIN vP00Employee clrv3 ON bt.Reviewer3CancelEmployeeId= clrv3.EmployeeId              
LEFT JOIN vP00Employee clrv4 ON bt.Reviewer4CancelEmployeeId = clrv4.EmployeeId              
LEFT JOIN vP00Employee clrv5 ON bt.ApproverCancelEmployeeId = clrv5.EmployeeId               
              
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId              
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01OvertimeConfirmationListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOTC
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  Table [dbo].[P00ExchangeRate]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00ExchangeRate](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[WorkDate] [smalldatetime] NULL,
	[CurrencyCode] [nvarchar](500) NOT NULL,
	[CurrencyName] [nvarchar](500) NOT NULL,
	[BankName] [nvarchar](500) NULL,
	[ExchangeRate] [numeric](18, 2) NOT NULL,
	[UpdateTime] [datetime] NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [UQ__P00Excha__D0DB56FF923B487B] UNIQUE NONCLUSTERED 
(
	[WorkDate] ASC,
	[CurrencyCode] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP00ListCurrencyCode]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP00ListCurrencyCode]
AS
SELECT CurrencyCode,CurrencyCode as CurrencyName 
FROM P00ExchangeRate
WHERE IsActive = 1
GROUP BY CurrencyCode 
GO
/****** Object:  View [dbo].[vP01OTListNotYetConfirmation]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01OTListNotYetConfirmation]
AS
SELECT bt.OTId
      ,bt.RequestStatus
      ,bt.IssueDate
      ,bt.Number
      ,bt.NumberCode
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
	  ,emp.SignPath as EmployeeSign
	  --,bt.Purpose
	  ,bt.CurrentApprover
	  ,bt.CurrentLevel
	  --,bt.Review1Checked
	  --,bt.Review1EmployeeId,lv1.EmployeeName as Review1EmployeeName, lv1.PositionName as Review1PositionName, lv1.EmailAddress as Review1EmailAddress
   --   ,bt.Review1Action
   --   ,bt.Review1ApproveTime
   --   ,bt.Review1Comment
	  --,IIF(bt.Review1Checked = 1,lv1.SignPath,'') as Review1Sign
	  --,bt.Review2Checked
	  --,bt.Review2EmployeeId,lv2.EmployeeName as Review2EmployeeName, lv2.PositionName as Review2PositionName, lv2.EmailAddress as Review2EmailAddress
   --   ,bt.Review2Action
   --   ,bt.Review2ApproveTime
   --   ,bt.Review2Comment
	  --,IIF(bt.Review2Checked = 1,lv2.SignPath,'') as Review2Sign
	  --,bt.Review3Checked
	  --,bt.Review3EmployeeId,lv1.EmployeeName as Review3EmployeeName, lv1.PositionName as Review3PositionName, lv1.EmailAddress as Review3EmailAddress
   --   ,bt.Review3Action
   --   ,bt.Review3ApproveTime
   --   ,bt.Review3Comment
	  --,IIF(bt.Review3Checked = 1,lv1.SignPath,'') as Review3Sign
	  --,bt.Review4Checked
	  --,bt.Review4EmployeeId,lv2.EmployeeName as Review4EmployeeName, lv2.PositionName as Review4PositionName, lv2.EmailAddress as Review4EmailAddress
   --   ,bt.Review4Action
   --   ,bt.Review4ApproveTime
   --   ,bt.Review4Comment
	  --,IIF(bt.Review4Checked = 1,lv2.SignPath,'') as Review4Sign
	  --,bt.VerifierChecked
	  --,bt.VerifierEmployeeId,lv3.EmployeeName as VerifierEmployeeName, lv3.PositionName as VerifierPositionName, lv3.EmailAddress as VerifierEmailAddress
	  --,bt.VerifierAction
   --   ,bt.VerifierApproveTime
   --   ,bt.VerifierComment
	  --,IIF(bt.VerifierChecked = 1,lv3.SignPath,'') as VerifierSign
	  --,bt.ApproverChecked
	  --,bt.ApproverEmployeeId,lv4.EmployeeName as ApproverEmployeeName, lv4.PositionName as ApproverPositionName, lv4.EmailAddress as ApproverEmailAddress
	  --,bt.ApproverAction
   --   ,bt.ApproverApproveTime
   --   ,bt.ApproverComment
	  --,IIF(bt.ApproverChecked = 1,lv4.SignPath,'') as ApproverSign
	  --,bt.Review1CancelChecked
	  --,bt.Review1CancelAction
	  --,bt.Review1CancelApproveTime
	  --,bt.Review1CancelComment
	  --,bt.Review2CancelChecked
	  --,bt.Review2CancelAction
	  --,bt.Review2CancelApproveTime
	  --,bt.Review2CancelComment
	  --,bt.Review3CancelChecked
	  --,bt.Review3CancelAction
	  --,bt.Review3CancelApproveTime
	  --,bt.Review3CancelComment
	  --,bt.Review4CancelChecked
	  --,bt.Review4CancelAction
	  --,bt.Review4CancelApproveTime
	  --,bt.Review4CancelComment
	  --,bt.VerifierCancelChecked
	  --,bt.VerifierCancelAction
	  --,bt.VerifierCancelApproveTime
	  --,bt.VerifierCancelComment
	  --,bt.ApproverCancelChecked
	  --,bt.ApproverCancelAction
	  --,bt.ApproverCancelApproveTime
	  --,bt.ApproverCancelComment
	  ,bt.ApplicationName
      ,bt.Sync
      ,bt.LastSync
      ,bt.IsActive
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode
	  ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName
      ,bt.CreatedAt
      ,bt.ModifiedBy
      ,bt.ModifiedAt
FROM P01Overtime bt
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId
--LEFT JOIN vP00Employee lv1 ON bt.Review1EmployeeId= lv1.EmployeeId
--LEFT JOIN vP00Employee lv2 ON bt.Review2EmployeeId = lv2.EmployeeId
--INNER JOIN vP00Employee lv3 ON bt.VerifierEmployeeId = lv3.EmployeeId
--INNER JOIN vP00Employee lv4 ON bt.ApproverEmployeeId = lv4.EmployeeId
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId
WHERE bt.IsActive = 1 AND bt.RequestStatus = 'Approved'
AND bt.OTId NOT IN (SELECT OTId FROM P01OvertimeConfirmation WHERE IsActive = 1 AND RequestStatus NOT IN ('Rejected','Canceled') GROUP BY OTId)
GO
/****** Object:  Table [dbo].[P01PurchaseRequisitionListEAR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PurchaseRequisitionListEAR](
	[ListId] [int] IDENTITY(1,1) NOT NULL,
	[PRId] [int] NOT NULL,
	[EAId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01P01PurchaseRequisitionListEAR_ListId] PRIMARY KEY CLUSTERED 
(
	[ListId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListEAR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
        
CREATE VIEW [dbo].[vP01PurchaseRequisitionListEAR]        
AS        
SELECT ls.ListId        
      ,ls.PRId        
   ,pr.NumberCode as PRNumberCode   
   ,pr.RequestStatus  
      ,ls.EAId        
   ,ea.NumberCode as EANumberCode        
      ,ls.IsActive        
      ,ls.CreatedBy        
      ,ls.CreatedAt        
      ,ls.ModifiedBy        
      ,ls.ModifiedAt        
   ,ROW_NUMBER() OVER(PARTITION BY ls.PRId ORDER BY ls.ListId) as rowIndex        
FROM P01PurchaseRequisitionListEAR ls        
INNER JOIN P01PurchaseRequisition pr ON ls.PRId = pr.PRId        
INNER JOIN P01ExpenseApproval ea ON ls.EAId = ea.EAId 
GO
/****** Object:  View [dbo].[vP01LeaveDaysSummary]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01LeaveDaysSummary]  
AS  
(  
 SELECT LeaveDayId,LeaveTypeName, MIN(LeaveDate) as FromDate, MAX(LeaveDate) as ToDate, SUM(NumberOfDay) as TotalDay  
 ,ROW_NUMBER() OVER(PARTITION BY LeaveDayId ORDER BY LeaveTypeName,MIN(LeaveDate)) as rowIndex     
 FROM vP01LeaveDaysDetail  
 GROUP BY LeaveDayId,LeaveTypeName  
)
GO
/****** Object:  Table [dbo].[P01LevelApproveITR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveITR](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveITR] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproverListITR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListITR](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListITR] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListITR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ApproverListITR]            
AS            
SELECT ap.Id                  
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName            
      ,ap.LevelId,lv.LevelName            
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName            
      ,ap.IsActive            
      ,ap.CreatedBy            
      ,ap.CreatedAt            
      ,ap.ModifiedBy            
      ,ap.ModifiedAt            
FROM P01ApproverListITR ap                      
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId            
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId            
INNER JOIN P01LevelApproveITR lv ON ap.LevelId = lv.LevelId 



GO
/****** Object:  View [dbo].[vP01ITRequestApprover1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ITRequestApprover1]     
AS      
SELECT *       
FROM vP01ApproverListITR     
WHERE IsActive =1 AND LevelId = 1 



GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListReviewer3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01ExpenseApprovalListReviewer3]
AS
SELECT * 
FROM vP01ApproverListEA
WHERE IsActive =1 AND LevelId = 6

GO
/****** Object:  View [dbo].[vP01ITRequestApprover2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ITRequestApprover2]     
AS      
SELECT *       
FROM vP01ApproverListITR     
WHERE IsActive =1 AND LevelId = 2 



GO
/****** Object:  Table [dbo].[P01HandoverMinutes]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01HandoverMinutes](
	[HMId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[PONumber] [nvarchar](500) NULL,
	[ReceivedBy] [int] NOT NULL,
	[HandoverDate] [smalldatetime] NOT NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[ReceivedByChecked] [bit] NULL,
	[ReceivedByEmployeeId] [int] NULL,
	[ReceivedByAction] [nvarchar](50) NULL,
	[ReceivedByApproveTime] [datetime] NULL,
	[ReceivedByComment] [nvarchar](2000) NULL,
	[Reviewer1Checked] [bit] NULL,
	[Reviewer1EmployeeId] [int] NULL,
	[Reviewer1Action] [nvarchar](50) NULL,
	[Reviewer1ApproveTime] [datetime] NULL,
	[Reviewer1Comment] [nvarchar](500) NULL,
	[Reviewer2Checked] [bit] NULL,
	[Reviewer2EmployeeId] [int] NULL,
	[Reviewer2Action] [nvarchar](50) NULL,
	[Reviewer2ApproveTime] [datetime] NULL,
	[Reviewer2Comment] [nvarchar](2000) NULL,
	[Reviewer3Checked] [bit] NULL,
	[Reviewer3EmployeeId] [int] NULL,
	[Reviewer3Action] [nvarchar](50) NULL,
	[Reviewer3ApproveTime] [datetime] NULL,
	[Reviewer3Comment] [nvarchar](500) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[Reviewer4Checked] [bit] NULL,
	[Reviewer4EmployeeId] [int] NULL,
	[Reviewer4Action] [nvarchar](50) NULL,
	[Reviewer4ApproveTime] [datetime] NULL,
	[Reviewer4Comment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Reviewer1CancelChecked] [bit] NULL,
	[Reviewer1CancelEmployeeId] [int] NULL,
	[Reviewer1CancelAction] [nvarchar](50) NULL,
	[Reviewer1CancelApproveTime] [datetime] NULL,
	[Reviewer1CancelComment] [nvarchar](500) NULL,
	[Reviewer2CancelChecked] [bit] NULL,
	[Reviewer2CancelEmployeeId] [int] NULL,
	[Reviewer2CancelAction] [nvarchar](50) NULL,
	[Reviewer2CancelApproveTime] [datetime] NULL,
	[Reviewer2CancelComment] [nvarchar](500) NULL,
	[Reviewer3CancelChecked] [bit] NULL,
	[Reviewer3CancelEmployeeId] [int] NULL,
	[Reviewer3CancelAction] [nvarchar](50) NULL,
	[Reviewer3CancelApproveTime] [datetime] NULL,
	[Reviewer3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[Reviewer4CancelChecked] [bit] NULL,
	[Reviewer4CancelEmployeeId] [int] NULL,
	[Reviewer4CancelAction] [nvarchar](50) NULL,
	[Reviewer4CancelApproveTime] [datetime] NULL,
	[Reviewer4CancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[ReceivedByCancelChecked] [bit] NULL,
	[ReceivedByCancelEmployeeId] [int] NULL,
	[ReceivedByCancelAction] [nvarchar](50) NULL,
	[ReceivedByCancelApproveTime] [datetime] NULL,
	[ReceivedByCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](200) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01HandoverMinutes_Id] PRIMARY KEY CLUSTERED 
(
	[HMId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01HandoverMinutes]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
             
CREATE VIEW [dbo].[vP01HandoverMinutes]                
AS                
SELECT bt.HMId                
      ,bt.RequestStatus                
      ,bt.IssueDate                
      ,bt.Number                
      ,bt.NumberCode                
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress                
   ,emp.SignPath as EmployeeSign                
   ,bt.PONumber                
   ,bt.Remark                
   ,bt.HandoverDate             
   ,bt.CurrentApprover                
   ,bt.CurrentLevel                
      --                
    ,curApr.EmployeeName as CurrentApproverEmployeeName                
    ,curApr.PositionName as CurrentApproverPositionName                
    ,curApr.EmailAddress as CurrentApproverEmailAddress                
   --approve                
   ,bt.ReceivedByChecked                
   ,bt.ReceivedByEmployeeId              
   ,apr.EmployeeName as ReceivedByEmployeeName              
   ,apr.PositionName as ReceivedByPositionName              
   ,apr.JobTitleName as ReceivedByJobTitleName              
   ,apr.EmailAddress as ReceivedByEmailAddress                
   ,bt.ReceivedByAction                
   ,bt.ReceivedByApproveTime                
   ,bt.ReceivedByComment                
   ,IIF(bt.ReceivedByChecked = 1,apr.SignPath,'') as ReceivedBySign                
                  
   ,bt.Reviewer1Checked        
   ,bt.Reviewer1EmployeeId,rv1.EmployeeName as Reviewer1EmployeeName, rv1.PositionName as Reviewer1PositionName, rv1.EmailAddress as Reviewer1EmailAddress        
      ,bt.Reviewer1Action        
      ,bt.Reviewer1ApproveTime        
      ,bt.Reviewer1Comment        
   ,IIF(bt.Reviewer1Checked = 1,rv1.SignPath,'') as Reviewer1Sign        
          
   ,bt.Reviewer2Checked        
   ,bt.Reviewer2EmployeeId,rv2.EmployeeName as Reviewer2EmployeeName, rv2.PositionName as Reviewer2PositionName, rv2.EmailAddress as Reviewer2EmailAddress        
      ,bt.Reviewer2Action        
      ,bt.Reviewer2ApproveTime        
      ,bt.Reviewer2Comment        
   ,IIF(bt.Reviewer2Checked = 1,rv2.SignPath,'') as Reviewer2Sign        
           
   ,bt.Reviewer3Checked        
   ,bt.Reviewer3EmployeeId,rv3.EmployeeName as Reviewer3EmployeeName, rv3.PositionName as Reviewer3PositionName, rv3.EmailAddress as Reviewer3EmailAddress        
      ,bt.Reviewer3Action        
      ,bt.Reviewer3ApproveTime        
      ,bt.Reviewer3Comment        
   ,IIF(bt.Reviewer3Checked = 1,rv3.SignPath,'') as Reviewer3Sign        
          
    ,bt.ConfirmChecked            
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress            
   ,bt.ConfirmAction            
      ,bt.ConfirmApproveTime            
      ,bt.ConfirmComment            
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign       
      
   ,bt.Reviewer4Checked        
   ,bt.Reviewer4EmployeeId,rv4.EmployeeName as Reviewer4EmployeeName, rv4.PositionName as Reviewer4PositionName, rv4.EmailAddress as Reviewer4EmailAddress        
      ,bt.Reviewer4Action        
      ,bt.Reviewer4ApproveTime        
      ,bt.Reviewer4Comment        
   ,IIF(bt.Reviewer4Checked = 1,rv4.SignPath,'') as Reviewer4Sign        
           
   ,bt.ApproverChecked        
   ,bt.ApproverEmployeeId,rv5.EmployeeName as ApproverEmployeeName, rv5.PositionName as ApproverPositionName, rv5.EmailAddress as ApproverEmailAddress        
      ,bt.ApproverAction        
      ,bt.ApproverApproveTime        
      ,bt.ApproverComment        
   ,IIF(bt.ApproverChecked = 1,rv5.SignPath,'') as ApproverSign        
          
  --cancel        
   ,bt.Reviewer1CancelChecked        
   ,bt.Reviewer1CancelEmployeeId,clrv1.EmployeeName as Reviewer1CancelEmployeeName, clrv1.PositionName as Reviewer1CancelPositionName, clrv1.EmailAddress as Reviewer1CancelEmailAddress        
      ,bt.Reviewer1CancelAction        
,bt.Reviewer1CancelApproveTime        
      ,bt.Reviewer1CancelComment        
   ,IIF(bt.Reviewer1CancelChecked = 1,clrv1.SignPath,'') as Reviewer1CancelSign        
          
  ,bt.Reviewer2CancelChecked        
   ,bt.Reviewer2CancelEmployeeId,clrv2.EmployeeName as Reviewer2CancelEmployeeName, clrv2.PositionName as Reviewer2CancelPositionName, clrv2.EmailAddress as Reviewer2CancelEmailAddress        
      ,bt.Reviewer2CancelAction        
      ,bt.Reviewer2CancelApproveTime        
      ,bt.Reviewer2CancelComment        
   ,IIF(bt.Reviewer2CancelChecked = 1,clrv2.SignPath,'') as Reviewer2CancelSign        
          
  ,bt.Reviewer3CancelChecked        
   ,bt.Reviewer3CancelEmployeeId,clrv3.EmployeeName as Reviewer3CancelEmployeeName, clrv3.PositionName as Reviewer3CancelPositionName, clrv3.EmailAddress as Reviewer3CancelEmailAddress        
      ,bt.Reviewer3CancelAction        
      ,bt.Reviewer3CancelApproveTime        
      ,bt.Reviewer3CancelComment        
   ,IIF(bt.Reviewer3CancelChecked = 1,clrv3.SignPath,'') as Reviewer3CancelSign        
           
  ,bt.ConfirmCancelChecked            
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress            
   ,bt.ConfirmCancelAction            
      ,bt.ConfirmCancelApproveTime            
      ,bt.ConfirmCancelComment            
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign       
      
   ,bt.Reviewer4CancelChecked        
   ,bt.Reviewer4CancelEmployeeId,clrv4.EmployeeName as Reviewer4CancelEmployeeName, clrv4.PositionName as Reviewer4CancelPositionName, clrv4.EmailAddress as Reviewer4CancelEmailAddress        
      ,bt.Reviewer4CancelAction        
      ,bt.Reviewer4CancelApproveTime        
      ,bt.Reviewer4CancelComment        
   ,IIF(bt.Reviewer4CancelChecked = 1,clrv4.SignPath,'') as Reviewer4CancelSign        
           
   ,bt.ApproverCancelChecked        
   ,bt.ApproverCancelEmployeeId,clrv5.EmployeeName as ApproverCancelEmployeeName, clrv5.PositionName as ApproverCancelPositionName, clrv5.EmailAddress as ApproverCancelEmailAddress        
      ,bt.ApproverCancelAction        
      ,bt.ApproverCancelApproveTime        
      ,bt.ApproverCancelComment        
   ,IIF(bt.ApproverCancelChecked = 1,clrv5.SignPath,'') as ApproverCancelSign      
       
   ,bt.ReceivedByCancelChecked                
   ,bt.ReceivedByCancelEmployeeId              
   ,clapr.EmployeeName as ReceivedByCancelEmployeeName              
   ,clapr.PositionName as ReceivedByCancelPositionName              
   ,clapr.JobTitleName as ReceivedByCancelJobTitleName              
   ,clapr.EmailAddress as ReceivedByCancelEmailAddress                
   ,bt.ReceivedByCancelAction                
   ,bt.ReceivedByCancelApproveTime                
   ,bt.ReceivedByCancelComment                
   ,IIF(bt.ReceivedByCancelChecked = 1,clapr.SignPath,'') as ReceivedByCancelSign                
                   
   ,bt.CancelReason                
   ,bt.CancelTime                
                
   ,bt.ManualApprovalFileName                
   ,bt.ManualApprovalFilePath                
   ,bt.ManualApprovalBy                
   ,bt.ManualApprovalAt                
                
   ,ApplicationName                
   ,CONCAT('/handover-minutes-approval-',HMId) as approvalURL,                
  CONCAT('/handover-minutes-cancel-request-',HMId) as cancelURL,                
  CONCAT('/handover-minutes-approve-view-',HMId) as viewURL                
                
      ,bt.IsActive                
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode                
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName                
   ,ucr.SignPath as CreatedBySignPath                
      ,bt.CreatedAt                
      ,bt.ModifiedBy                
      ,bt.ModifiedAt           
   --new2                
                 
FROM P01HandoverMinutes bt                
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId                
INNER JOIN vP00Employee apr ON bt.ReceivedByEmployeeId = apr.EmployeeId       
    
LEFT JOIN vP00Employee rv1 ON bt.Reviewer1EmployeeId= rv1.EmployeeId        
LEFT JOIN vP00Employee rv2 ON bt.Reviewer2EmployeeId = rv2.EmployeeId        
LEFT JOIN vP00Employee rv3 ON bt.Reviewer3EmployeeId= rv3.EmployeeId        
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId      
LEFT JOIN vP00Employee rv4 ON bt.Reviewer4EmployeeId = rv4.EmployeeId        
LEFT JOIN vP00Employee rv5 ON bt.ApproverEmployeeId = rv5.EmployeeId          
--cancel        
LEFT JOIN vP00Employee clrv1 ON bt.Reviewer1CancelEmployeeId= clrv1.EmployeeId        
LEFT JOIN vP00Employee clrv2 ON bt.Reviewer2CancelEmployeeId = clrv2.EmployeeId        
LEFT JOIN vP00Employee clrv3 ON bt.Reviewer3CancelEmployeeId= clrv3.EmployeeId       
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId      
LEFT JOIN vP00Employee clrv4 ON bt.Reviewer4CancelEmployeeId = clrv4.EmployeeId        
LEFT JOIN vP00Employee clrv5 ON bt.ApproverCancelEmployeeId = clrv5.EmployeeId             
    
LEFT JOIN vP00Employee clapr ON bt.ReceivedByCancelEmployeeId = clapr.EmployeeId                
                
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId                
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  Table [dbo].[P01ExpenseSettlementCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseSettlementCost](
	[ESCostId] [int] IDENTITY(1,1) NOT NULL,
	[ESId] [int] NOT NULL,
	[Description] [nvarchar](2000) NULL,
	[Qty] [numeric](18, 2) NULL,
	[UnitPrice] [numeric](18, 2) NULL,
	[ExchangeRate] [numeric](18, 2) NULL,
	[PayTo] [nvarchar](2000) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ExpenseSettlementCost] PRIMARY KEY CLUSTERED 
(
	[ESCostId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

  
  
CREATE VIEW [dbo].[vP01ExpenseSettlementCost]  
AS  
SELECT tvc.ESCostId  
      ,tvc.ESId,   
    tv.EmployeeId, tv.RequestStatus  
      ,tvc.Description  
   ,tvc.Qty  
   ,tvc.UnitPrice  
   ,tvc.ExchangeRate  
   ,(ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) AS Amount  
   ,((ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) / tvc.ExchangeRate) AS AmountUSD  
  ,tvc.PayTo
      ,tvc.IsActive  
      ,tvc.CreatedBy  
      ,tvc.CreatedAt  
      ,tvc.ModifiedBy  
      ,tvc.ModifiedAt  
   ,ROW_NUMBER() OVER(PARTITION BY tvc.ESId ORDER BY tvc.ESCostId) as rowIndex  
FROM P01ExpenseSettlementCost tvc  
INNER JOIN P01ExpenseSettlement tv ON tvc.ESId = tv.ESId  
WHERE tv.IsActive = 1 AND tvc.IsActive = 1  
  
  
  
GO
/****** Object:  View [dbo].[vP01ITRequestApprover3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ITRequestApprover3]     
AS      
SELECT *       
FROM vP01ApproverListITR     
WHERE IsActive =1 AND LevelId = 3 



GO
/****** Object:  View [dbo].[vP01ExpenseSettlementPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
       
CREATE VIEW [dbo].[vP01ExpenseSettlementPrint]          
AS          
SELECT           
    --cost          
    btc.rowIndex as costrowIndex          
   ,btc.ESCostId as costESId          
   ,btc.Description as costDescription          
   ,btc.Qty as costQty          
      ,btc.UnitPrice as costUnitPrice          
   ,btc.ExchangeRate as costExchangeRate          
      ,btc.Amount as costAmountVND          
   ,btc.AmountUSD as costAmountUSD          
   ,tt.TotalAmountVND as costTotalAmount          
   ,tt.TotalAmountUSD as costTotalAmountUSD          
   ,btc.PayTo as costPayTo        
   --------------------          
   ,bt.ESId          
      ,bt.RequestStatus          
      ,bt.IssueDate          
      ,bt.Number          
      ,bt.NumberCode          
      ,bt.EmployeeId          
      ,bt.EmployeeCode          
      ,bt.EmployeeName          
   ,bt.EmployeeSign          
      ,bt.GenderName          
      ,bt.DeptName          
      ,bt.PositionName          
   ,bt.JobTitleName          
      ,bt.EmailAddress          
          
      ,bt.ReferenceNumber          
   ,bt.PayTo          
   ,bt.DueDate          
   ,bt.PaymentMethod          
   ,bt.PaymentCurrency          
   ,bt.CostCode          
   ,bt.Description          
   ,bt.Total          
   ,bt.PaidAmountInAdvance          
   ,Isnull(bt.Total,0) - Isnull(bt.PaidAmountInAdvance,0) as TheRemainingAmount          
   ,bt.InWords          
          
      ,bt.CurrentApprover          
      ,bt.CurrentLevel          
          
      ,bt.Review1Checked          
      ,bt.Review1EmployeeId          
      ,bt.Review1EmployeeName          
      ,bt.Review1PositionName          
      ,bt.Review1EmailAddress          
      ,bt.Review1Action          
      ,bt.Review1ApproveTime          
      ,bt.Review1Comment          
   ,bt.Review1Sign          
          
      ,bt.Review2Checked          
      ,bt.Review2EmployeeId          
      ,bt.Review2EmployeeName          
      ,bt.Review2PositionName          
      ,bt.Review2EmailAddress          
      ,bt.Review2Action          
      ,bt.Review2ApproveTime          
      ,bt.Review2Comment          
   ,bt.Review2Sign          
          
      ,bt.Review3Checked          
      ,bt.Review3EmployeeId          
      ,bt.Review3EmployeeName          
      ,bt.Review3PositionName          
      ,bt.Review3EmailAddress          
      ,bt.Review3Action          
      ,bt.Review3ApproveTime          
      ,bt.Review3Comment          
   ,bt.Review3Sign          
          
   ,bt.Review4Checked          
      ,bt.Review4EmployeeId          
      ,bt.Review4EmployeeName          
      ,bt.Review4PositionName          
      ,bt.Review4EmailAddress          
      ,bt.Review4Action          
      ,bt.Review4ApproveTime          
      ,bt.Review4Comment          
   ,bt.Review4Sign          
          
   ,bt.VerifierChecked          
      ,bt.VerifierEmployeeId          
      ,bt.VerifierEmployeeName          
      ,bt.VerifierPositionName          
      ,bt.VerifierEmailAddress          
      ,bt.VerifierAction          
      ,bt.VerifierApproveTime          
      ,bt.VerifierComment          
   ,bt.VerifierSign          
          
   ,bt.EndorsementChecked          
      ,bt.EndorsementEmployeeId          
      ,bt.EndorsementEmployeeName          
      ,bt.EndorsementPositionName          
      ,bt.EndorsementEmailAddress          
      ,bt.EndorsementAction          
      ,bt.EndorsementApproveTime          
      ,bt.EndorsementComment          
   ,bt.EndorsementSign          
          
 ,bt.ConfirmChecked          
      ,bt.ConfirmEmployeeId          
      ,bt.ConfirmEmployeeName          
      ,bt.ConfirmPositionName          
      ,bt.ConfirmEmailAddress          
      ,bt.ConfirmAction          
      ,bt.ConfirmApproveTime          
      ,bt.ConfirmComment          
   ,bt.ConfirmSign          
      
   ,bt.ApproverChecked          
      ,bt.ApproverEmployeeId          
      ,bt.ApproverEmployeeName          
      ,bt.ApproverPositionName          
    ,bt.ApproverEmailAddress          
      ,bt.ApproverAction          
      ,bt.ApproverApproveTime          
      ,bt.ApproverComment          
   ,bt.ApproverSign          
          
   ,bt.CreatedBy          
   ,bt.CreatedByEmployeeCode          
   ,bt.CreatedByName          
   ,bt.CreatedByDeptName          
   ,bt.CreatedByPositionName          
   ,bt.CreatedByJobTitleName          
   ,bt.CreatedBySignPath          
FROM  vP01ExpenseSettlementCost btc           
INNER JOIN vP01ExpenseSettlement bt ON btc.ESId = bt.ESId          
INNER JOIN          
(          
 SELECT ESId, SUM( Amount) as TotalAmountVND, SUM( AmountUSD) as TotalAmountUSD          
 FROM vP01ExpenseSettlementCost          
 WHERE IsActive = 1          
 GROUP BY ESId          
) tt ON btc.ESId = tt.ESId 
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementPayToCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ExpenseSettlementPayToCost]
AS  
(  
 select ESId,PayTo,SUM(ISNULL(Amount,0)) as TotalVND,SUM(ISNULL(AmountUSD,0)) as TotalUSD,   
 ROW_NUMBER() OVER(PARTITION BY ESId ORDER BY ESId, PayTo) as rowIndex  
 from vP01ExpenseSettlementCost  
 where IsActive = 1  
 group by ESId, PayTo  

)  
GO
/****** Object:  View [dbo].[vP01ITRequestApprover4]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ITRequestApprover4]     
AS      
SELECT *       
FROM vP01ApproverListITR     
WHERE IsActive =1 AND LevelId = 4 



GO
/****** Object:  View [dbo].[vP01ITRequestApprover5]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ITRequestApprover5]     
AS      
SELECT *       
FROM vP01ApproverListITR     
WHERE IsActive =1 AND LevelId = 5 



GO
/****** Object:  Table [dbo].[P01HandoverMinutesItem]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01HandoverMinutesItem](
	[HMDId] [int] IDENTITY(1,1) NOT NULL,
	[HMId] [int] NOT NULL,
	[ItemName] [nvarchar](2000) NULL,
	[Specification] [nvarchar](500) NULL,
	[OrderQty] [numeric](18, 2) NULL,
	[DeliveryQty] [numeric](18, 2) NULL,
	[ItemStatus] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01HandoverMinutesItem] PRIMARY KEY CLUSTERED 
(
	[HMDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01HandoverMinutesItem]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01HandoverMinutesItem]
AS
SELECT tvc.HMDId
      ,tvc.HMId, 
	   tv.EmployeeId, tv.RequestStatus

      ,tvc.ItemName
	  ,tvc.Specification
	  ,tvc.OrderQty
	  ,tvc.DeliveryQty
	  ,tvc.ItemStatus

      ,tvc.IsActive
      ,tvc.CreatedBy
      ,tvc.CreatedAt
      ,tvc.ModifiedBy
      ,tvc.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvc.HMId ORDER BY tvc.HMDId) as rowIndex
FROM P01HandoverMinutesItem tvc
INNER JOIN P01HandoverMinutes tv ON tvc.HMId = tv.HMId
WHERE tv.IsActive = 1 AND tvc.IsActive = 1

GO
/****** Object:  Table [dbo].[P01BusinessTravelClaimCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelClaimCost](
	[BTCCostId] [int] IDENTITY(1,1) NOT NULL,
	[BTCId] [int] NOT NULL,
	[BTDate] [smalldatetime] NOT NULL,
	[LeaveTimeId] [int] NOT NULL,
	[CostTypeId] [int] NOT NULL,
	[CostDetail] [nvarchar](2000) NULL,
	[Destination] [nvarchar](2000) NULL,
	[UnitPrice] [numeric](18, 0) NULL,
	[UnitPriceUSD] [numeric](18, 0) NULL,
	[Qty] [numeric](18, 0) NULL,
	[ActualCost] [numeric](18, 2) NULL,
	[CurrencyCode] [nvarchar](50) NULL,
	[ExchangeRate] [numeric](18, 2) NULL,
	[ActualCostVND] [numeric](18, 0) NULL,
	[Reimbursement] [numeric](18, 0) NULL,
	[PaidBy] [nvarchar](500) NULL,
	[PaidFor] [nvarchar](500) NULL,
	[Beneficiary] [nvarchar](500) NULL,
	[IsNewRow] [bit] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01BusinessTravelClaimCost_IdSD] PRIMARY KEY CLUSTERED 
(
	[BTCCostId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01BusinessTravelClaimCost]    
AS    
SELECT tvc.BTCCostId    
      ,tvc.BTCId,     
    tv.EmployeeId, tv.RequestStatus    
      ,tvc.BTDate    
   ,tvc.LeaveTimeId, ltt.LeaveTimeName, ltt.NumberOfDay    
   ,tvc.Destination    
      ,tvc.CostTypeId,ct.CostGroupName, ct.CostTypeName,ct.Priority as CostTypePriority    
   ,tvc.CostDetail    
   ,tvt.TravelTypeId, tvt.TravelTypeName    
   ,tvc.UnitPrice    
   ,tvc.UnitPriceUSD    
   ,tvc.Qty    
   ,(ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) AS Amount    
   ,(ISNULL(tvc.UnitPriceUSD,0) * ISNULL(tvc.Qty,0)) AS AmountUSD    
   --,SUM((ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0))) OVER(PARTITION BY tvc.BTId) AS TotalAmount    
   ,tvc.ActualCost    
   ,tvc.CurrencyCode    
   ,tvc.ExchangeRate    
   ,tvc.ActualCostVND    
   ,tvc.Reimbursement    
   ,tvc.PaidBy    
   ,tvc.PaidFor
   ,RTRIM(LTRIM(tvc.Beneficiary)) as Beneficiary    
      ,tvc.IsActive    
      ,tvc.CreatedBy    
      ,tvc.CreatedAt    
      ,tvc.ModifiedBy    
      ,tvc.ModifiedAt    
   ,ROW_NUMBER() OVER(PARTITION BY tvc.BTCId ORDER BY tvc.BTDate,tvt.TravelTypeId,tvc.LeaveTimeId,tvc.CostTypeId,tvc.BTCCostId) as rowIndex    
   --,ROW_NUMBER() OVER(PARTITION BY tvl.BTId ORDER BY tvl.BTTravelerId) as rowIndex    
FROM P01BusinessTravelClaimCost tvc    
INNER JOIN P01BusinessTravelClaim tv ON tvc.BTCId = tv.BTCId    
INNER JOIN P01CostType ct ON tvc.CostTypeId = ct.CostTypeId    
INNER JOIN P01TravelType tvt ON ct.TravelTypeId = tvt.TravelTypeId    
INNER JOIN P01LeaveTimeType ltt ON tvc.LeaveTimeId = ltt.LeaveTimeId    
WHERE tv.IsActive = 1 AND tvc.IsActive = 1     
--AND ISNULL(tvc.IsNewRow,0) = 1     
    
    
GO
/****** Object:  View [dbo].[vP01HandoverMinutesPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
         
CREATE VIEW [dbo].[vP01HandoverMinutesPrint]            
AS            
SELECT          
--cost            
 btc.rowIndex as itemrowIndex            
,btc.HMDId as itemHMDId            
,btc.ItemName as itemItemName            
,btc.Specification as itemSpecification            
,btc.OrderQty as itemOrderQty            
,btc.DeliveryQty as itemDeliveryQty            
,btc.ItemStatus as itemItemStatus            
          
--------------------            
,bt.HMId            
,bt.RequestStatus            
,bt.IssueDate            
,bt.Number            
,bt.NumberCode            
,bt.EmployeeId            
,bt.EmployeeCode            
,bt.EmployeeName            
,bt.EmployeeSign            
,bt.GenderName            
,bt.DeptName            
,bt.PositionName            
,bt.JobTitleName            
,bt.EmailAddress            
        
,bt.PONumber        
,bt.Remark        
,bt.HandoverDate        
,bt.CurrentApprover            
,bt.CurrentLevel            
            
            
,bt.ReceivedByChecked            
,bt.ReceivedByEmployeeId            
,bt.ReceivedByEmployeeName            
,bt.ReceivedByPositionName            
,bt.ReceivedByJobTitleName            
,bt.ReceivedByEmailAddress            
,bt.ReceivedByAction            
,bt.ReceivedByApproveTime            
,bt.ReceivedByComment            
,bt.ReceivedBySign            
      
 ,bt.Reviewer1Checked      
      ,bt.Reviewer1EmployeeId      
      ,bt.Reviewer1EmployeeName      
      ,bt.Reviewer1PositionName      
      ,bt.Reviewer1EmailAddress      
      ,bt.Reviewer1Action      
      ,bt.Reviewer1ApproveTime      
      ,bt.Reviewer1Comment      
   ,bt.Reviewer1Sign      
      
      ,bt.Reviewer2Checked      
      ,bt.Reviewer2EmployeeId      
      ,bt.Reviewer2EmployeeName      
      ,bt.Reviewer2PositionName      
      ,bt.Reviewer2EmailAddress      
      ,bt.Reviewer2Action      
      ,bt.Reviewer2ApproveTime      
      ,bt.Reviewer2Comment      
   ,bt.Reviewer2Sign      
      
      ,bt.Reviewer3Checked      
      ,bt.Reviewer3EmployeeId      
      ,bt.Reviewer3EmployeeName      
      ,bt.Reviewer3PositionName      
      ,bt.Reviewer3EmailAddress      
      ,bt.Reviewer3Action      
      ,bt.Reviewer3ApproveTime      
      ,bt.Reviewer3Comment      
   ,bt.Reviewer3Sign      
      
      ,bt.ConfirmChecked      
      ,bt.ConfirmEmployeeId      
      ,bt.ConfirmEmployeeName      
      ,bt.ConfirmPositionName      
      ,bt.ConfirmEmailAddress      
      ,bt.ConfirmAction      
      ,bt.ConfirmApproveTime      
      ,bt.ConfirmComment      
   ,bt.ConfirmSign      
    
   ,bt.Reviewer4Checked      
      ,bt.Reviewer4EmployeeId      
      ,bt.Reviewer4EmployeeName      
      ,bt.Reviewer4PositionName      
      ,bt.Reviewer4EmailAddress      
      ,bt.Reviewer4Action      
      ,bt.Reviewer4ApproveTime      
      ,bt.Reviewer4Comment      
   ,bt.Reviewer4Sign      
      
   ,bt.ApproverChecked      
      ,bt.ApproverEmployeeId      
      ,bt.ApproverEmployeeName      
      ,bt.ApproverPositionName      
      ,bt.ApproverEmailAddress      
      ,bt.ApproverAction      
      ,bt.ApproverApproveTime      
      ,bt.ApproverComment      
   ,bt.ApproverSign    
  
,bt.CreatedBy            
,bt.CreatedByEmployeeCode            
,bt.CreatedByName            
,bt.CreatedByDeptName            
,bt.CreatedByPositionName            
,bt.CreatedByJobTitleName            
,bt.CreatedBySignPath            
FROM  vP01HandoverMinutesItem btc          
INNER JOIN vP01HandoverMinutes bt ON btc.HMId = bt.HMId 
GO
/****** Object:  Table [dbo].[P01InternalMemorandumListTo]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalMemorandumListTo](
	[ToId] [int] IDENTITY(1,1) NOT NULL,
	[IMId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalMemorandumListTo] PRIMARY KEY CLUSTERED 
(
	[ToId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01InternalMemorandum]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalMemorandum](
	[IMId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[DeptId] [int] NOT NULL,
	[ToEmployeeId] [int] NULL,
	[CcEmployeeId] [int] NULL,
	[Subjects] [nvarchar](500) NULL,
	[CheckInformation] [bit] NULL,
	[CheckReply] [bit] NULL,
	[CheckReview] [bit] NULL,
	[CheckAction] [bit] NULL,
	[CheckApproval] [bit] NULL,
	[Contents] [nvarchar](max) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Reviewer1Checked] [bit] NULL,
	[Reviewer1EmployeeId] [int] NULL,
	[Reviewer1Action] [nvarchar](50) NULL,
	[Reviewer1ApproveTime] [datetime] NULL,
	[Reviewer1Comment] [nvarchar](500) NULL,
	[Reviewer2Checked] [bit] NULL,
	[Reviewer2EmployeeId] [int] NULL,
	[Reviewer2Action] [nvarchar](50) NULL,
	[Reviewer2ApproveTime] [datetime] NULL,
	[Reviewer2Comment] [nvarchar](2000) NULL,
	[Reviewer3Checked] [bit] NULL,
	[Reviewer3EmployeeId] [int] NULL,
	[Reviewer3Action] [nvarchar](50) NULL,
	[Reviewer3ApproveTime] [datetime] NULL,
	[Reviewer3Comment] [nvarchar](500) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[Reviewer4Checked] [bit] NULL,
	[Reviewer4EmployeeId] [int] NULL,
	[Reviewer4Action] [nvarchar](50) NULL,
	[Reviewer4ApproveTime] [datetime] NULL,
	[Reviewer4Comment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Reviewer1CancelChecked] [bit] NULL,
	[Reviewer1CancelEmployeeId] [int] NULL,
	[Reviewer1CancelAction] [nvarchar](50) NULL,
	[Reviewer1CancelApproveTime] [datetime] NULL,
	[Reviewer1CancelComment] [nvarchar](500) NULL,
	[Reviewer2CancelChecked] [bit] NULL,
	[Reviewer2CancelEmployeeId] [int] NULL,
	[Reviewer2CancelAction] [nvarchar](50) NULL,
	[Reviewer2CancelApproveTime] [datetime] NULL,
	[Reviewer2CancelComment] [nvarchar](500) NULL,
	[Reviewer3CancelChecked] [bit] NULL,
	[Reviewer3CancelEmployeeId] [int] NULL,
	[Reviewer3CancelAction] [nvarchar](50) NULL,
	[Reviewer3CancelApproveTime] [datetime] NULL,
	[Reviewer3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[Reviewer4CancelChecked] [bit] NULL,
	[Reviewer4CancelEmployeeId] [int] NULL,
	[Reviewer4CancelAction] [nvarchar](50) NULL,
	[Reviewer4CancelApproveTime] [datetime] NULL,
	[Reviewer4CancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalMemorandum] PRIMARY KEY CLUSTERED 
(
	[IMId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01InternalMemorandumListTo]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01InternalMemorandumListTo]
AS
SELECT tvl.ToId
      ,tvl.IMId
	  ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
      ,tvl.IsActive
      ,tvl.CreatedBy
      ,tvl.CreatedAt
      ,tvl.ModifiedBy
      ,tvl.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.IMId ORDER BY tvl.ToId) as rowIndex
FROM P01InternalMemorandumListTo tvl
INNER JOIN P01InternalMemorandum tv ON tvl.IMId = tv.IMId
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId
WHERE tv.IsActive = 1 AND tvl.IsActive = 1

GO
/****** Object:  View [dbo].[vP01BusinessTravelBeneficiaryCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01BusinessTravelBeneficiaryCost]
AS
(
	select BTCId,Beneficiary,SUM(ISNULL(Reimbursement,0)) as Total, 
	ROW_NUMBER() OVER(PARTITION BY BTCId ORDER BY BTCId, Beneficiary) as rowIndex
	from vP01BusinessTravelClaimCost
	where IsActive = 1
	group by BTCId,Beneficiary
)
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
          
CREATE VIEW [dbo].[vP01BusinessTravelClaimPrint]          
AS          
SELECT           
    --cost          
    btc.rowIndex as costrowIndex          
   ,bt.BTId as costBTId          
   ,btc.BTDate as costBTDate          
   ,btc.TravelTypeName as costTravelTypeName          
   ,btc.LeaveTimeName as costLeaveTimeName          
      ,btc.Destination as costDestination          
      ,btc.CostTypeName as costCostTypeName          
      ,btc.CostDetail as costCostDetail          
      ,btc.UnitPrice as costUnitPrice          
   ,btc.UnitPriceUSD as costUnitPriceUSD          
      ,btc.Qty as costQty          
      ,btc.Amount as costAmount          
   ,btc.AmountUSD as costAmountUSD          
   --claim cost          
   ,btc.ActualCost as costActualCost          
   ,btc.CurrencyCode as costCurrencyCode          
   ,btc.ExchangeRate as costExchangeRate          
   ,btc.ActualCostVND as costActualCostVND          
   ,btc.Reimbursement as costReimbursement          
   ,btc.PaidBy as costPaidBy       
   ,btc.PaidFor as costPaidFor    
   ,btc.Beneficiary as costBeneficiary          
   --total          
   ,tt.TotalAmount as costTotalAmount          
   ,tt.TotalAmountUSD as costTotalAmountUSD          
   ,tt.TotalActualCostVND as costTotalActualCostVND          
   ,tt.TotalActualCostUSD as costTotalActualCostUSD          
   ,tt.TotalReimbursement as costTotalReimbursement          
   --beneficiary          
   ,ISNULL(ben.Total,0) as costTotalByBeneficiary          
   ,ISNULL(ben.rowIndex,0) as cosRowIndexByBeneficiary          
  -- ,btc. as costTotalAmount          
   ---Traveler-----------------          
   ,btt.rowIndex as TravelerNo          
   ,btt.EmployeeName as TravelerEmployeeName          
   ,btt.DeptName as TravelerDeptName          
   ,btt.PositionName as TravelerPositionName          
   ,btt.JobTitleName as TravelerJobTitleName          
   --------------------          
   ,bcl.BTCId          
   ,bcl.BTId          
      ,bcl.RequestStatus          
      ,bcl.IssueDate          
      ,bcl.Number          
      ,bcl.NumberCode          
      ,bcl.EmployeeId          
      ,bcl.EmployeeCode          
      ,bcl.EmployeeName          
   ,bcl.EmployeeSign          
      ,bcl.GenderName          
      ,bcl.DeptName          
      ,bcl.PositionName          
   ,bcl.JobTitleName          
      ,bcl.EmailAddress          
      ,bt.Purpose          
   ,bcl.Remark          
      ,bcl.CurrentApprover          
      ,bcl.CurrentLevel          
          
      ,bcl.Review1Checked          
      ,bcl.Review1EmployeeId          
      ,bcl.Review1EmployeeName          
      ,bcl.Review1PositionName          
      ,bcl.Review1EmailAddress          
      ,bcl.Review1Action          
      ,bcl.Review1ApproveTime          
      ,bcl.Review1Comment          
   ,bcl.Review1Sign          
          
      ,bcl.Review2Checked          
      ,bcl.Review2EmployeeId          
      ,bcl.Review2EmployeeName          
      ,bcl.Review2PositionName          
      ,bcl.Review2EmailAddress          
      ,bcl.Review2Action          
      ,bcl.Review2ApproveTime          
      ,bcl.Review2Comment          
   ,bcl.Review2Sign          
          
      ,bcl.Review3Checked          
      ,bcl.Review3EmployeeId          
      ,bcl.Review3EmployeeName          
      ,bcl.Review3PositionName          
      ,bcl.Review3EmailAddress          
      ,bcl.Review3Action          
      ,bcl.Review3ApproveTime          
      ,bcl.Review3Comment          
   ,bcl.Review3Sign          
          
   ,bcl.Review4Checked          
      ,bcl.Review4EmployeeId          
      ,bcl.Review4EmployeeName          
      ,bcl.Review4PositionName          
      ,bcl.Review4EmailAddress          
      ,bcl.Review4Action          
      ,bcl.Review4ApproveTime          
      ,bcl.Review4Comment          
   ,bcl.Review4Sign          
          
   ,bcl.Review5Checked          
      ,bcl.Review5EmployeeId          
      ,bcl.Review5EmployeeName          
      ,bcl.Review5PositionName          
    ,bcl.Review5EmailAddress          
      ,bcl.Review5Action          
      ,bcl.Review5ApproveTime          
      ,bcl.Review5Comment          
   ,bcl.Review5Sign          
          
   ,bcl.Review6Checked          
      ,bcl.Review6EmployeeId          
      ,bcl.Review6EmployeeName          
      ,bcl.Review6PositionName          
      ,bcl.Review6EmailAddress          
      ,bcl.Review6Action          
      ,bcl.Review6ApproveTime          
      ,bcl.Review6Comment          
   ,bcl.Review6Sign          
          
  ,bcl.VerifierChecked          
      ,bcl.VerifierEmployeeId          
      ,bcl.VerifierEmployeeName          
      ,bcl.VerifierPositionName          
      ,bcl.VerifierEmailAddress          
      ,bcl.VerifierAction          
      ,bcl.VerifierApproveTime          
      ,bcl.VerifierComment          
   ,bcl.VerifierSign          
   
     ,bcl.ConfirmChecked    
      ,bcl.ConfirmEmployeeId    
      ,bcl.ConfirmEmployeeName    
      ,bcl.ConfirmPositionName    
      ,bcl.ConfirmEmailAddress    
      ,bcl.ConfirmAction    
      ,bcl.ConfirmApproveTime    
      ,bcl.ConfirmComment    
   ,bcl.ConfirmSign    
  
   ,bcl.EndorsementChecked          
      ,bcl.EndorsementEmployeeId          
      ,bcl.EndorsementEmployeeName          
      ,bcl.EndorsementPositionName          
      ,bcl.EndorsementEmailAddress          
      ,bcl.EndorsementAction          
      ,bcl.EndorsementApproveTime          
      ,bcl.EndorsementComment          
   ,bcl.EndorsementSign          
          
   ,bcl.ApproverChecked          
      ,bcl.ApproverEmployeeId          
      ,bcl.ApproverEmployeeName          
      ,bcl.ApproverPositionName          
      ,bcl.ApproverEmailAddress          
      ,bcl.ApproverAction          
      ,bcl.ApproverApproveTime          
      ,bcl.ApproverComment          
   ,bcl.ApproverSign          
          
   ,bcl.CreatedBy          
   ,bcl.CreatedByEmployeeCode          
   ,bcl.CreatedByName          
   ,bcl.CreatedByDeptName          
   ,bcl.CreatedByPositionName          
   ,bcl.CreatedByJobTitleName          
   ,bcl.CreatedBySignPath          
FROM  vP01BusinessTravelClaimCost btc           
INNER JOIN vP01BusinessTravelClaim bcl ON btc.BTCId = bcl.BTCId          
INNER JOIN vP01BusinessTravel bt ON bt.BTId = bcl.BTId          
INNER JOIN vP01BusinessTravelTraveler btt ON btt.BTId = bcl.BTId          
INNER JOIN          
(          
 SELECT BTCId, SUM( Amount) as TotalAmount, SUM( AmountUSD) as TotalAmountUSD          
 , SUM(ActualCost) as TotalActualCostUSD, SUM(ActualCostVND) as TotalActualCostVND, SUM(Reimbursement) as TotalReimbursement          
 FROM vP01BusinessTravelClaimCost          
 WHERE IsActive = 1          
 GROUP BY BTCId          
) tt ON btc.BTCId = tt.BTCId          
LEFT JOIN vP01BusinessTravelBeneficiaryCost ben ON btc.BTCId = ben.BTCId AND btc.Beneficiary = ben.Beneficiary 
GO
/****** Object:  Table [dbo].[P01InternalMemorandumListCc]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalMemorandumListCc](
	[CcId] [int] IDENTITY(1,1) NOT NULL,
	[IMId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalMemorandumListCc] PRIMARY KEY CLUSTERED 
(
	[CcId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01InternalMemorandumListCc]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01InternalMemorandumListCc]
AS
SELECT tvl.CcId
      ,tvl.IMId
	  ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
      ,tvl.IsActive
      ,tvl.CreatedBy
      ,tvl.CreatedAt
      ,tvl.ModifiedBy
      ,tvl.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.IMId ORDER BY tvl.CcId) as rowIndex
FROM P01InternalMemorandumListCc tvl
INNER JOIN P01InternalMemorandum tv ON tvl.IMId = tv.IMId
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId
WHERE tv.IsActive = 1 AND tvl.IsActive = 1

GO
/****** Object:  View [dbo].[vP01LeaveDaysReport]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01LeaveDaysReport]
AS
SELECT ld.LeaveDayId
      ,ld.RequestStatus
      ,ld.WorkYear
      ,ld.IssueDate
      ,ld.Number
      ,ld.NumberCode
      ,ld.EmployeeId
      ,ld.EmployeeCode
      ,ld.EmployeeName
      ,ld.GenderName
      ,ld.DeptName
      ,ld.PositionName
      ,ld.EmailAddress
      ,ld.TotalDay
      ,ld.TotalAnnualLeave
      --,ld.ContactAddressDuringLeave
      ,ld.PhoneNumber
      ,ld.Remark
      ,ld.CurrentApprover
      ,ld.CurrentLevel
      ,ld.Level1Checked
      ,ld.Level1EmployeeId
      ,ld.Level1EmployeeName
      ,ld.Level1PositionName
      ,ld.Level1EmailAddress
      ,ld.Level1Action
      ,ld.Level1ApproveTime
      ,ld.Level1Comment
      ,ld.Level2Checked
      ,ld.Level2EmployeeId
      ,ld.Level2EmployeeName
      ,ld.Level2PositionName
      ,ld.Level2EmailAddress
      ,ld.Level2Action
      ,ld.Level2ApproveTime
      ,ld.Level2Comment
      ,ld.Level3Checked
      ,ld.Level3EmployeeId
      ,ld.Level3EmployeeName
      ,ld.Level3PositionName
      ,ld.Level3EmailAddress
      ,ld.Level3Action
      ,ld.Level3ApproveTime
      ,ld.Level3Comment
	  ,ld.Level4Checked
      ,ld.Level4EmployeeId
      ,ld.Level4EmployeeName
      ,ld.Level4PositionName
      ,ld.Level4EmailAddress
      ,ld.Level4Action
      ,ld.Level4ApproveTime
      ,ld.Level4Comment
	  ,ld.RemainingAnnualLeave
	  ,ld.Balance
      ,ld.Sync
      ,ld.LastSync
      ,ld.IsActive
      ,ld.CreatedBy
      ,ld.CreatedAt
      ,ld.ModifiedBy
      ,ld.ModifiedAt
	  ,ldd.LeaveDayDetailId
      --,ldd.LeaveDayId
      --,ldd.EmployeeId
      --,ldd.WorkYear
      --,ldd.RequestStatus
      ,ldd.LeaveDate
      ,ldd.LeaveTypeId
      ,ldd.LeaveTypeName
      ,ldd.IsAnnualLeave
      ,ldd.LeaveTimeId
      ,ldd.LeaveTimeName
      ,ldd.NumberOfDay
      --,ldd.IsActive
      --,ldd.CreatedBy
      --,ldd.CreatedAt
      --,ldd.ModifiedBy
      --,ldd.ModifiedAt
FROM dbo.vP01LeaveDays ld
LEFT JOIN vP01LeaveDaysDetail ldd ON ld.LeaveDayId = ldd.LeaveDayId

GO
/****** Object:  View [dbo].[vP00ListManagerUp]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP00ListManagerUp]
AS
SELECT emp.EmployeeId
      ,emp.EmployeeCode
      ,emp.EmployeeName
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName
	  ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize
	  ,emp.JobTitleId, job.JobTitleName
      ,emp.BirthDate
      ,emp.GenderId, gd.GenderName
      ,emp.EmailAddress
	  ,emp.PhoneNumber
      ,emp.FirstWorkingDate
      ,emp.EndWorkingDate
	  ,emp.AnnualLeave
      ,emp.EmployeeNo
	  ,emp.SignPath
      ,emp.IsActive
      ,emp.CreatedBy
      ,emp.CreatedAt
      ,emp.ModifiedBy
      ,emp.ModifiedAt
FROM P00Employee emp
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId
WHERE emp.PositionId IN (1,2,3,4,5,6,7)


GO
/****** Object:  Table [dbo].[P01ApproverListCA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListCA](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListCA] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveCA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveCA](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveCA] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListCA]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01ApproverListCA]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
	  ,emp.EmailAddress
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListCA ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveCA lv ON ap.LevelId = lv.LevelId


GO
/****** Object:  View [dbo].[vP01CarArrangementListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
      
CREATE VIEW [dbo].[vP01CarArrangementListConfirm]    
AS      
SELECT [Id]      
      ,[DeptId]      
      ,[DeptName]      
      ,[SiteId]      
      ,[SiteName]      
      ,[LevelId]      
      ,[LevelName]      
      ,[EmployeeId]      
      ,[EmployeeName]      
      ,[PositionName]      
      ,[JobTitleName]      
      ,[EmailAddress]      
      ,[IsActive]      
      ,[CreatedBy]      
      ,[CreatedAt]      
      ,[ModifiedBy]      
      ,[ModifiedAt]       
FROM vP01ApproverListCA      
WHERE IsActive =1 AND LevelId = 6 
GO
/****** Object:  View [dbo].[vP01WFHAttendanceListEndorse]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01WFHAttendanceListEndorse]  
AS    
SELECT [Id]    
      ,[DeptId]    
      ,[DeptName]    
      ,[SiteId]    
      ,[SiteName]    
      ,[LevelId]    
      ,[LevelName]    
      ,[EmployeeId]    
      ,[EmployeeName]    
      ,[PositionName]    
      ,[JobTitleName]    
      ,[EmailAddress]    
      ,[IsActive]    
      ,[CreatedBy]    
      ,[CreatedAt]    
      ,[ModifiedBy]    
      ,[ModifiedAt]     
FROM vP01ApproverListWA    
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01InternalMemorandum]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01InternalMemorandum]    
AS    
SELECT bt.IMId    
      ,bt.RequestStatus    
      ,bt.IssueDate    
      ,bt.Number    
      ,bt.NumberCode    
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
   ,emp.SignPath as EmployeeSign    
    
   ,bt.ToEmployeeId ,toEmp.EmployeeCode as ToEmployeeCode, toEmp.EmployeeName as ToEmployeeName, toEmp.GenderName as ToEmployeeGenderName,     
   toEmp.DeptName as ToEmployeeDeptName, toEmp.PositionName as ToEmployeePositionName, toEmp.JobTitleName as ToEmployeeJobTitleName, toEmp.EmailAddress as ToEmployeeEmailAddress    
   ,toEmp.SignPath as ToEmployeeSign    
   ,bt.CcEmployeeId,ccEmp.EmployeeCode as CcEmployeeCode, ccEmp.EmployeeName as CcEmployeeName, ccEmp.GenderName as CcEmployeeGenderName,     
    ccEmp.DeptName as CcEmployeeDeptName, ccEmp.PositionName as CcEmployeePositionName, ccEmp.JobTitleName as CcEmployeeJobTitleName, ccEmp.EmailAddress as CcEmployeeEmailAddress    
    ,toEmp.SignPath as CcEmployeeSign    
   ,bt.Subjects    
   ,bt.CheckInformation    
   ,bt.CheckReply    
   ,bt.CheckReview    
   ,bt.CheckAction    
   ,bt.CheckApproval    
   ,bt.Contents    
    
       
   ,bt.CurrentApprover    
   ,bt.CurrentLevel    
       --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
   --approve    
   ,bt.Reviewer1Checked    
   ,bt.Reviewer1EmployeeId,rv1.EmployeeName as Reviewer1EmployeeName, rv1.PositionName as Reviewer1PositionName, rv1.EmailAddress as Reviewer1EmailAddress    
      ,bt.Reviewer1Action    
      ,bt.Reviewer1ApproveTime    
      ,bt.Reviewer1Comment    
   ,IIF(bt.Reviewer1Checked = 1,rv1.SignPath,'') as Reviewer1Sign    
      
   ,bt.Reviewer2Checked    
   ,bt.Reviewer2EmployeeId,rv2.EmployeeName as Reviewer2EmployeeName, rv2.PositionName as Reviewer2PositionName, rv2.EmailAddress as Reviewer2EmailAddress    
      ,bt.Reviewer2Action    
      ,bt.Reviewer2ApproveTime    
      ,bt.Reviewer2Comment    
   ,IIF(bt.Reviewer2Checked = 1,rv2.SignPath,'') as Reviewer2Sign    
       
   ,bt.Reviewer3Checked    
   ,bt.Reviewer3EmployeeId,rv3.EmployeeName as Reviewer3EmployeeName, rv3.PositionName as Reviewer3PositionName, rv3.EmailAddress as Reviewer3EmailAddress    
      ,bt.Reviewer3Action    
      ,bt.Reviewer3ApproveTime    
      ,bt.Reviewer3Comment    
   ,IIF(bt.Reviewer3Checked = 1,rv3.SignPath,'') as Reviewer3Sign    
      
    ,bt.ConfirmChecked        
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,bt.ConfirmAction        
      ,bt.ConfirmApproveTime        
      ,bt.ConfirmComment        
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign   
  
   ,bt.Reviewer4Checked    
   ,bt.Reviewer4EmployeeId,rv4.EmployeeName as Reviewer4EmployeeName, rv4.PositionName as Reviewer4PositionName, rv4.EmailAddress as Reviewer4EmailAddress    
      ,bt.Reviewer4Action    
      ,bt.Reviewer4ApproveTime    
      ,bt.Reviewer4Comment    
   ,IIF(bt.Reviewer4Checked = 1,rv4.SignPath,'') as Reviewer4Sign    
       
   ,bt.ApproverChecked    
   ,bt.ApproverEmployeeId,rv5.EmployeeName as ApproverEmployeeName, rv5.PositionName as ApproverPositionName, rv5.EmailAddress as ApproverEmailAddress    
      ,bt.ApproverAction    
      ,bt.ApproverApproveTime    
      ,bt.ApproverComment    
   ,IIF(bt.ApproverChecked = 1,rv5.SignPath,'') as ApproverSign    
      
  --,bt.Verifier1Checked    
  -- ,bt.Verifier1EmployeeId,vrf.EmployeeName as Verifier1EmployeeName, vrf.PositionName as Verifier1PositionName, vrf.EmailAddress as Verifier1EmailAddress    
  -- ,bt.Verifier1Action    
  --    ,bt.Verifier1ApproveTime    
  --    ,bt.Verifier1Comment    
  -- ,IIF(bt.Verifier1Checked = 1,vrf.SignPath,'') as Verifier1Sign    
      
      
  --cancel    
   ,bt.Reviewer1CancelChecked    
   ,bt.Reviewer1CancelEmployeeId,clrv1.EmployeeName as Reviewer1CancelEmployeeName, clrv1.PositionName as Reviewer1CancelPositionName, clrv1.EmailAddress as Reviewer1CancelEmailAddress    
      ,bt.Reviewer1CancelAction    
      ,bt.Reviewer1CancelApproveTime    
      ,bt.Reviewer1CancelComment    
   ,IIF(bt.Reviewer1CancelChecked = 1,clrv1.SignPath,'') as Reviewer1CancelSign    
      
  ,bt.Reviewer2CancelChecked    
   ,bt.Reviewer2CancelEmployeeId,clrv2.EmployeeName as Reviewer2CancelEmployeeName, clrv2.PositionName as Reviewer2CancelPositionName, clrv2.EmailAddress as Reviewer2CancelEmailAddress    
      ,bt.Reviewer2CancelAction    
      ,bt.Reviewer2CancelApproveTime    
      ,bt.Reviewer2CancelComment    
   ,IIF(bt.Reviewer2CancelChecked = 1,clrv2.SignPath,'') as Reviewer2CancelSign    
      
  ,bt.Reviewer3CancelChecked    
   ,bt.Reviewer3CancelEmployeeId,clrv3.EmployeeName as Reviewer3CancelEmployeeName, clrv3.PositionName as Reviewer3CancelPositionName, clrv3.EmailAddress as Reviewer3CancelEmailAddress    
      ,bt.Reviewer3CancelAction    
      ,bt.Reviewer3CancelApproveTime    
      ,bt.Reviewer3CancelComment    
   ,IIF(bt.Reviewer3CancelChecked = 1,clrv3.SignPath,'') as Reviewer3CancelSign    
       
  ,bt.ConfirmCancelChecked        
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,bt.ConfirmCancelAction        
      ,bt.ConfirmCancelApproveTime        
      ,bt.ConfirmCancelComment        
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign   
  
   ,bt.Reviewer4CancelChecked    
   ,bt.Reviewer4CancelEmployeeId,clrv4.EmployeeName as Reviewer4CancelEmployeeName, clrv4.PositionName as Reviewer4CancelPositionName, clrv4.EmailAddress as Reviewer4CancelEmailAddress    
      ,bt.Reviewer4CancelAction    
      ,bt.Reviewer4CancelApproveTime    
      ,bt.Reviewer4CancelComment    
   ,IIF(bt.Reviewer4CancelChecked = 1,clrv4.SignPath,'') as Reviewer4CancelSign    
       
   ,bt.ApproverCancelChecked    
   ,bt.ApproverCancelEmployeeId,clrv5.EmployeeName as ApproverCancelEmployeeName, clrv5.PositionName as ApproverCancelPositionName, clrv5.EmailAddress as ApproverCancelEmailAddress    
      ,bt.ApproverCancelAction    
      ,bt.ApproverCancelApproveTime    
      ,bt.ApproverCancelComment    
   ,IIF(bt.ApproverCancelChecked = 1,clrv5.SignPath,'') as ApproverCancelSign    
      
   ,bt.CancelReason    
   ,bt.CancelTime    
    
       
   ,ApplicationName    
   ,CONCAT('/internal-memorandum-approval-',IMId) as approvalURL,    
  CONCAT('/internal-memorandum-cancel-request-',IMId) as cancelURL,    
  CONCAT('/internal-memorandum-approve-view-',IMId) as viewURL    
      
   ,bt.ManualApprovalFileName    
   ,bt.ManualApprovalFilePath    
   ,bt.ManualApprovalBy    
   ,bt.ManualApprovalAt    
    
      ,bt.IsActive    
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,bt.CreatedAt    
      ,bt.ModifiedBy    
      ,bt.ModifiedAt    
   --new2    
     
FROM P01InternalMemorandum bt    
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee toEmp ON bt.ToEmployeeId = toEmp.EmployeeId    
LEFT JOIN vP00Employee ccEmp ON bt.CcEmployeeId= ccEmp.EmployeeId    
    
LEFT JOIN vP00Employee rv1 ON bt.Reviewer1EmployeeId= rv1.EmployeeId    
LEFT JOIN vP00Employee rv2 ON bt.Reviewer2EmployeeId = rv2.EmployeeId    
LEFT JOIN vP00Employee rv3 ON bt.Reviewer3EmployeeId= rv3.EmployeeId    
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId  
LEFT JOIN vP00Employee rv4 ON bt.Reviewer4EmployeeId = rv4.EmployeeId    
LEFT JOIN vP00Employee rv5 ON bt.ApproverEmployeeId = rv5.EmployeeId    
--LEFT JOIN vP00Employee vrf ON bt.Verifier1EmployeeId = vrf.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clrv1 ON bt.Reviewer1CancelEmployeeId= clrv1.EmployeeId    
LEFT JOIN vP00Employee clrv2 ON bt.Reviewer2CancelEmployeeId = clrv2.EmployeeId    
LEFT JOIN vP00Employee clrv3 ON bt.Reviewer3CancelEmployeeId= clrv3.EmployeeId   
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId  
LEFT JOIN vP00Employee clrv4 ON bt.Reviewer4CancelEmployeeId = clrv4.EmployeeId    
LEFT JOIN vP00Employee clrv5 ON bt.ApproverCancelEmployeeId = clrv5.EmployeeId    
--LEFT JOIN vP00Employee clvrf ON bt.Verifier1CancelEmployeeId = clvrf.EmployeeId    
    
    
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId    
GO
/****** Object:  Table [dbo].[P02CarRegistrationDefault]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02CarRegistrationDefault](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[WorkShiftId] [int] NULL,
	[PURTId] [int] NULL,
	[PUPlaceName] [nvarchar](500) NULL,
	[DORTId] [int] NULL,
	[DOPlaceName] [nvarchar](500) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P02CarRegistrationDefault] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P02CarR__7AD04F103C8DFABB] UNIQUE NONCLUSTERED 
(
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P02Route]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02Route](
	[RTId] [int] IDENTITY(1,1) NOT NULL,
	[RouteName] [nvarchar](500) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P02Routes] PRIMARY KEY CLUSTERED 
(
	[RTId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP02CarRegistrationDefault]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP02CarRegistrationDefault]                
AS                
SELECT dt.Id                
      ,dt.EmployeeId, emp.EmployeeName, emp.EmployeeCode,emp.SiteId, emp.SiteName, emp.EmployeeTypeName, emp.FirstWorkingDate    
   ,dt.WorkShiftId, ws.WorkShiftName  
      ,dt.PURTId,rtpu.RouteName as PURouteName,dt.PUPlaceName        
   ,dt.DORTId,rtdo.RouteName as DORouteName,dt.DOPlaceName        
      ,dt.Remark                
      ,dt.IsActive                
      ,dt.CreatedBy                
      ,dt.CreatedAt                
      ,dt.ModifiedBy                
      ,dt.ModifiedAt                
FROM P02CarRegistrationDefault dt                
LEFT JOIN vP00Employee emp ON dt.EmployeeId = emp.EmployeeId                               
LEFT JOIN P00WorkShift ws ON dt.WorkShiftId = ws.WorkShiftId   
LEFT JOIN P02Route rtpu ON dt.PURTId = rtpu.RTId   
LEFT JOIN P02Route rtdo ON dt.PURTId = rtdo.RTId   
WHERE dt.IsActive = 1 
GO
/****** Object:  Table [dbo].[P02CarRegistrationDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02CarRegistrationDetail](
	[CRDId] [int] IDENTITY(1,1) NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[WorkShiftId] [int] NULL,
	[PURTId] [int] NULL,
	[PUPlaceName] [nvarchar](500) NULL,
	[DORTId] [int] NULL,
	[DOPlaceName] [nvarchar](500) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P02CarRegistrationDetail_Id] PRIMARY KEY CLUSTERED 
(
	[CRDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ_P02CarRegistrationDetail_CRDId] UNIQUE NONCLUSTERED 
(
	[WorkDate] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP02CarRegistrationDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP02CarRegistrationDetail]                  
AS                  
SELECT dt.CRDId                  
      ,dt.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.SiteName, emp.EmployeeTypeName                  
      ,dt.WorkDate      
   ,dt.WorkShiftId, ws.WorkShiftName     
      ,dt.PURTId, rt.RouteName as PURouteName,dt.PUPlaceName         
   ,dt.DORTId, rt2.RouteName as DORouteName,dt.DOPlaceName                  
      ,dt.Remark                  
      ,dt.IsActive                  
      ,dt.CreatedBy                  
      ,dt.CreatedAt                  
      ,dt.ModifiedBy                  
      ,dt.ModifiedAt                  
FROM P02CarRegistrationDetail dt                  
LEFT JOIN vP00Employee emp ON dt.EmployeeId = emp.EmployeeId                  
LEFT JOIN P02Route rt ON dt.PURTId = rt.RTId         
LEFT JOIN P02Route rt2 ON dt.DORTId = rt2.RTId     
LEFT JOIN P00WorkShift ws ON dt.WorkShiftId = ws.WorkShiftId                  
WHERE dt.IsActive = 1 
GO
/****** Object:  View [dbo].[vP01CarArrangementListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01CarArrangementListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
FROM vP01ApproverListCA
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01LeaveType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01LeaveType]
AS
SELECT LeaveTypeId
      ,LeaveTypeName
      ,IsAnnualLeave
	  ,IIF(ISNULL(IsAnnualLeave,0) =1, N'C', N'Khng') as TinhPhepText
      ,IsActive
      ,CreatedBy
      ,CreatedAt
      ,ModifiedBy
      ,ModifiedAt
FROM dbo.P01LeaveType
GO
/****** Object:  View [dbo].[vP01CarArrangementListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01CarArrangementListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListCA
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01CarArrangementListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01CarArrangementListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListCA
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01CarArrangementListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01CarArrangementListVerifier]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListCA
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  Table [dbo].[P01OfficialTrip]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OfficialTrip](
	[OFTId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Purpose] [nvarchar](2000) NULL,
	[CarSupport] [bit] NULL,
	[Remark] [nvarchar](2000) NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Review1Checked] [bit] NULL,
	[Review1EmployeeId] [int] NULL,
	[Review1Action] [nvarchar](50) NULL,
	[Review1ApproveTime] [datetime] NULL,
	[Review1Comment] [nvarchar](500) NULL,
	[Review2Checked] [bit] NULL,
	[Review2EmployeeId] [int] NULL,
	[Review2Action] [nvarchar](50) NULL,
	[Review2ApproveTime] [datetime] NULL,
	[Review2Comment] [nvarchar](2000) NULL,
	[Review3Checked] [bit] NULL,
	[Review3EmployeeId] [int] NULL,
	[Review3Action] [nvarchar](50) NULL,
	[Review3ApproveTime] [datetime] NULL,
	[Review3Comment] [nvarchar](500) NULL,
	[Review4Checked] [bit] NULL,
	[Review4EmployeeId] [int] NULL,
	[Review4Action] [nvarchar](50) NULL,
	[Review4ApproveTime] [datetime] NULL,
	[Review4Comment] [nvarchar](2000) NULL,
	[VerifierChecked] [bit] NULL,
	[VerifierEmployeeId] [int] NULL,
	[VerifierAction] [nvarchar](50) NULL,
	[VerifierApproveTime] [datetime] NULL,
	[VerifierComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[ApproverChecked] [bit] NULL,
	[ApproverEmployeeId] [int] NULL,
	[ApproverAction] [nvarchar](50) NULL,
	[ApproverApproveTime] [datetime] NULL,
	[ApproverComment] [nvarchar](2000) NULL,
	[Review1CancelChecked] [bit] NULL,
	[Review1CancelEmployeeId] [int] NULL,
	[Review1CancelAction] [nvarchar](50) NULL,
	[Review1CancelApproveTime] [datetime] NULL,
	[Review1CancelComment] [nvarchar](500) NULL,
	[Review2CancelChecked] [bit] NULL,
	[Review2CancelEmployeeId] [int] NULL,
	[Review2CancelAction] [nvarchar](50) NULL,
	[Review2CancelApproveTime] [datetime] NULL,
	[Review2CancelComment] [nvarchar](500) NULL,
	[Review3CancelChecked] [bit] NULL,
	[Review3CancelEmployeeId] [int] NULL,
	[Review3CancelAction] [nvarchar](50) NULL,
	[Review3CancelApproveTime] [datetime] NULL,
	[Review3CancelComment] [nvarchar](500) NULL,
	[Review4CancelChecked] [bit] NULL,
	[Review4CancelEmployeeId] [int] NULL,
	[Review4CancelAction] [nvarchar](50) NULL,
	[Review4CancelApproveTime] [datetime] NULL,
	[Review4CancelComment] [nvarchar](500) NULL,
	[VerifierCancelChecked] [bit] NULL,
	[VerifierCancelEmployeeId] [int] NULL,
	[VerifierCancelAction] [nvarchar](50) NULL,
	[VerifierCancelApproveTime] [datetime] NULL,
	[VerifierCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[ApproverCancelChecked] [bit] NULL,
	[ApproverCancelEmployeeId] [int] NULL,
	[ApproverCancelAction] [nvarchar](50) NULL,
	[ApproverCancelApproveTime] [datetime] NULL,
	[ApproverCancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OfficialTrip_Id] PRIMARY KEY CLUSTERED 
(
	[OFTId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OfficialTrip]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01OfficialTrip]
AS
SELECT bt.OFTId
      ,bt.RequestStatus
      ,bt.IssueDate
      ,bt.Number
      ,bt.NumberCode
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
	  ,emp.SignPath as EmployeeSign
	  ,bt.Purpose
	  ,bt.Remark
	  ,bt.CarSupport
	  ,IIF(ISNULL(bt.CarSupport,0) = 1,'Yes','No') as CarSupportText
	  ,bt.CurrentApprover
	  ,bt.CurrentLevel
	  --
	   ,curApr.EmployeeName as CurrentApproverEmployeeName
	   ,curApr.PositionName as CurrentApproverPositionName
	   ,curApr.EmailAddress as CurrentApproverEmailAddress
	  --approve
	  ,bt.Review1Checked
	  ,bt.Review1EmployeeId,rv1.EmployeeName as Review1EmployeeName, rv1.PositionName as Review1PositionName, rv1.EmailAddress as Review1EmailAddress
      ,bt.Review1Action
      ,bt.Review1ApproveTime
      ,bt.Review1Comment
	  ,IIF(bt.Review1Checked = 1,rv1.SignPath,'') as Review1Sign

	  ,bt.Review2Checked
	  ,bt.Review2EmployeeId,rv2.EmployeeName as Review2EmployeeName, rv2.PositionName as Review2PositionName, rv2.EmailAddress as Review2EmailAddress
      ,bt.Review2Action
      ,bt.Review2ApproveTime
      ,bt.Review2Comment
	  ,IIF(bt.Review2Checked = 1,rv2.SignPath,'') as Review2Sign

	  ,bt.Review3Checked
	  ,bt.Review3EmployeeId,rv3.EmployeeName as Review3EmployeeName, rv3.PositionName as Review3PositionName, rv3.EmailAddress as Review3EmailAddress
      ,bt.Review3Action
      ,bt.Review3ApproveTime
      ,bt.Review3Comment
	  ,IIF(bt.Review3Checked = 1,rv3.SignPath,'') as Review3Sign

	  ,bt.Review4Checked
	  ,bt.Review4EmployeeId,rv4.EmployeeName as Review4EmployeeName, rv4.PositionName as Review4PositionName, rv4.EmailAddress as Review4EmailAddress
      ,bt.Review4Action
      ,bt.Review4ApproveTime
      ,bt.Review4Comment
	  ,IIF(bt.Review4Checked = 1,rv4.SignPath,'') as Review4Sign

	  ,bt.VerifierChecked
	  ,bt.VerifierEmployeeId,vrf.EmployeeName as VerifierEmployeeName, vrf.PositionName as VerifierPositionName, vrf.EmailAddress as VerifierEmailAddress
	  ,bt.VerifierAction
      ,bt.VerifierApproveTime
      ,bt.VerifierComment
	  ,IIF(bt.VerifierChecked = 1,vrf.SignPath,'') as VerifierSign
	 
	  ,bt.EndorsementChecked
	  ,bt.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress
	  ,bt.EndorsementAction
      ,bt.EndorsementApproveTime
      ,bt.EndorsementComment
	  ,IIF(bt.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign

	  ,bt.ApproverChecked
	  ,bt.ApproverEmployeeId,apr.EmployeeName as ApproverEmployeeName, apr.PositionName as ApproverPositionName, apr.EmailAddress as ApproverEmailAddress
	  ,bt.ApproverAction
      ,bt.ApproverApproveTime
      ,bt.ApproverComment
	  ,IIF(bt.ApproverChecked = 1,apr.SignPath,'') as ApproverSign

	  --cancel
	  ,bt.Review1CancelChecked
	  ,bt.Review1CancelEmployeeId,clrv1.EmployeeName as Review1CancelEmployeeName, clrv1.PositionName as Review1CancelPositionName, clrv1.EmailAddress as Review1CancelEmailAddress
      ,bt.Review1CancelAction
      ,bt.Review1CancelApproveTime
      ,bt.Review1CancelComment
	  ,IIF(bt.Review1CancelChecked = 1,clrv1.SignPath,'') as Review1CancelSign

	  ,bt.Review2CancelChecked
	  ,bt.Review2CancelEmployeeId,clrv2.EmployeeName as Review2CancelEmployeeName, clrv2.PositionName as Review2CancelPositionName, clrv2.EmailAddress as Review2CancelEmailAddress
      ,bt.Review2CancelAction
      ,bt.Review2CancelApproveTime
      ,bt.Review2CancelComment
	  ,IIF(bt.Review2CancelChecked = 1,clrv2.SignPath,'') as Review2CancelSign

	  ,bt.Review3CancelChecked
	  ,bt.Review3CancelEmployeeId,clrv3.EmployeeName as Review3CancelEmployeeName, clrv3.PositionName as Review3CancelPositionName, clrv3.EmailAddress as Review3CancelEmailAddress
      ,bt.Review3CancelAction
      ,bt.Review3CancelApproveTime
      ,bt.Review3CancelComment
	  ,IIF(bt.Review3CancelChecked = 1,clrv3.SignPath,'') as Review3CancelSign

	  ,bt.Review4CancelChecked
	  ,bt.Review4CancelEmployeeId,clrv4.EmployeeName as Review4CancelEmployeeName, clrv4.PositionName as Review4CancelPositionName, clrv4.EmailAddress as Review4CancelEmailAddress
      ,bt.Review4CancelAction
      ,bt.Review4CancelApproveTime
      ,bt.Review4CancelComment
	  ,IIF(bt.Review4CancelChecked = 1,clrv4.SignPath,'') as Review4CancelSign

	  ,bt.VerifierCancelChecked
	  ,bt.VerifierCancelEmployeeId,clvrf.EmployeeName as VerifierCancelEmployeeName, clvrf.PositionName as VerifierCancelPositionName, clvrf.EmailAddress as VerifierCancelEmailAddress
	  ,bt.VerifierCancelAction
      ,bt.VerifierCancelApproveTime
      ,bt.VerifierCancelComment
	  ,IIF(bt.VerifierCancelChecked = 1,clvrf.SignPath,'') as VerifierCancelSign

	  ,bt.EndorsementCancelChecked
	  ,bt.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress
	  ,bt.EndorsementCancelAction
      ,bt.EndorsementCancelApproveTime
      ,bt.EndorsementCancelComment
	  ,IIF(bt.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign

	  ,bt.ApproverCancelChecked
	  ,bt.ApproverCancelEmployeeId,clapr.EmployeeName as ApproverCancelEmployeeName, clapr.PositionName as ApproverCancelPositionName, clapr.EmailAddress as ApproverCancelEmailAddress
	  ,bt.ApproverCancelAction
      ,bt.ApproverCancelApproveTime
      ,bt.ApproverCancelComment
	  ,IIF(bt.ApproverCancelChecked = 1,clapr.SignPath,'') as ApproverCancelSign

	  ,bt.ManualApprovalFileName
	  ,bt.ManualApprovalFilePath
	  ,bt.ManualApprovalBy
	  ,bt.ManualApprovalAt
	  
	  ,bt.CancelReason
	  ,bt.CancelTime

	  ,ApplicationName
	  ,CONCAT('/official-trip-approval-',OFTId) as approvalURL,
		CONCAT('/official-trip-cancel-request-',OFTId) as cancelURL,
		CONCAT('/official-trip-approve-view-',OFTId) as viewURL
      ,bt.Sync
      ,bt.LastSync
      ,bt.IsActive
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode
	  ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName
	  ,ucr.SignPath as CreatedBySignPath
      ,bt.CreatedAt
      ,bt.ModifiedBy
      ,bt.ModifiedAt
	  --new2
	
FROM P01OfficialTrip bt
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId
LEFT JOIN vP00Employee rv1 ON bt.Review1EmployeeId= rv1.EmployeeId
LEFT JOIN vP00Employee rv2 ON bt.Review2EmployeeId = rv2.EmployeeId
LEFT JOIN vP00Employee rv3 ON bt.Review3EmployeeId= rv3.EmployeeId
LEFT JOIN vP00Employee rv4 ON bt.Review4EmployeeId = rv4.EmployeeId
LEFT JOIN vP00Employee vrf ON bt.VerifierEmployeeId = vrf.EmployeeId
LEFT JOIN vP00Employee endo ON bt.EndorsementEmployeeId = endo.EmployeeId
INNER JOIN vP00Employee apr ON bt.ApproverEmployeeId = apr.EmployeeId
--cancel
LEFT JOIN vP00Employee clrv1 ON bt.Review1CancelEmployeeId= clrv1.EmployeeId
LEFT JOIN vP00Employee clrv2 ON bt.Review2CancelEmployeeId = clrv2.EmployeeId
LEFT JOIN vP00Employee clrv3 ON bt.Review3CancelEmployeeId= clrv3.EmployeeId
LEFT JOIN vP00Employee clrv4 ON bt.Review4CancelEmployeeId = clrv4.EmployeeId
LEFT JOIN vP00Employee clvrf ON bt.VerifierCancelEmployeeId = clvrf.EmployeeId
LEFT JOIN vP00Employee cendo ON bt.EndorsementCancelEmployeeId = cendo.EmployeeId
LEFT JOIN vP00Employee clapr ON bt.ApproverCancelEmployeeId = clapr.EmployeeId

LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId
GO
/****** Object:  Table [dbo].[P01ApproverListOFT]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListOFT](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListOFT] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveOFT]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveOFT](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveOFT] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListOFT]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ApproverListOFT]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListOFT ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveOFT lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01OfficialTripListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE   VIEW [dbo].[vP01OfficialTripListApprover]
AS
SELECT * 
FROM vP01ApproverListOFT
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01OfficialTripListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE   VIEW [dbo].[vP01OfficialTripListEndorsement]
AS
SELECT * 
FROM vP01ApproverListOFT
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01BusinessTravelPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01BusinessTravelPrint]    
AS    
SELECT     
    --cost    
    btc.rowIndex as costrowIndex    
   ,btc.BTId as costBTId    
   ,btc.BTDate as costBTDate    
   ,btc.TravelTypeName as costTravelTypeName    
   ,btc.LeaveTimeName as costLeaveTimeName    
      ,btc.Destination as costDestination    
      ,btc.CostTypeName as costCostTypeName    
      ,btc.CostDetail as costCostDetail    
      ,btc.UnitPrice as costUnitPrice    
   ,btc.UnitPriceUSD as costUnitPriceUSD    
      ,btc.Qty as costQty    
      ,btc.Amount as costAmount    
   ,btc.AmountUSD as costAmountUSD    
   ,tt.TotalAmount as costTotalAmount    
   ,tt.TotalAmountUSD as costTotalAmountUSD    
  -- ,btc. as costTotalAmount    
   ---Traveler-----------------    
   ,btt.rowIndex as TravelerNo    
   ,btt.EmployeeName as TravelerEmployeeName    
   ,btt.DeptName as TravelerDeptName    
   ,btt.PositionName as TravelerPositionName    
   ,btt.JobTitleName as TravelerJobTitleName    
   --------------------    
   ,bt.BTId    
      ,bt.RequestStatus    
      ,bt.IssueDate    
      ,bt.Number    
      ,bt.NumberCode    
      ,bt.EmployeeId    
      ,bt.EmployeeCode    
      ,bt.EmployeeName    
   ,bt.EmployeeSign    
      ,bt.GenderName    
      ,bt.DeptName    
      ,bt.PositionName    
   ,bt.JobTitleName    
      ,bt.EmailAddress    
      ,bt.Purpose    
   ,bt.Remark    
   ,bt.CarSupport    
   ,IIF(ISNULL(bt.CarSupport,0) = 1,'Yes','No') as CarSupportText    
      ,bt.CurrentApprover    
      ,bt.CurrentLevel    
    
      ,bt.Review1Checked    
      ,bt.Review1EmployeeId    
      ,bt.Review1EmployeeName    
      ,bt.Review1PositionName    
      ,bt.Review1EmailAddress    
      ,bt.Review1Action    
      ,bt.Review1ApproveTime    
      ,bt.Review1Comment    
   ,bt.Review1Sign    
    
      ,bt.Review2Checked    
      ,bt.Review2EmployeeId    
      ,bt.Review2EmployeeName    
      ,bt.Review2PositionName    
      ,bt.Review2EmailAddress    
      ,bt.Review2Action    
      ,bt.Review2ApproveTime    
      ,bt.Review2Comment    
   ,bt.Review2Sign    
    
      ,bt.Review3Checked    
      ,bt.Review3EmployeeId    
      ,bt.Review3EmployeeName    
      ,bt.Review3PositionName    
      ,bt.Review3EmailAddress    
      ,bt.Review3Action    
      ,bt.Review3ApproveTime    
      ,bt.Review3Comment    
   ,bt.Review3Sign    
    
   ,bt.Review4Checked    
      ,bt.Review4EmployeeId    
      ,bt.Review4EmployeeName    
      ,bt.Review4PositionName    
      ,bt.Review4EmailAddress    
      ,bt.Review4Action    
      ,bt.Review4ApproveTime    
      ,bt.Review4Comment    
   ,bt.Review4Sign    
    
   ,bt.VerifierChecked    
      ,bt.VerifierEmployeeId    
      ,bt.VerifierEmployeeName    
      ,bt.VerifierPositionName    
      ,bt.VerifierEmailAddress    
      ,bt.VerifierAction    
      ,bt.VerifierApproveTime    
      ,bt.VerifierComment    
   ,bt.VerifierSign    
    
      ,bt.ConfirmChecked    
      ,bt.ConfirmEmployeeId    
      ,bt.ConfirmEmployeeName    
      ,bt.ConfirmPositionName    
      ,bt.ConfirmEmailAddress    
      ,bt.ConfirmAction    
      ,bt.ConfirmApproveTime    
      ,bt.ConfirmComment    
   ,bt.ConfirmSign    
  
   ,bt.EndorsementChecked    
      ,bt.EndorsementEmployeeId    
      ,bt.EndorsementEmployeeName    
      ,bt.EndorsementPositionName    
      ,bt.EndorsementEmailAddress    
      ,bt.EndorsementAction    
      ,bt.EndorsementApproveTime    
      ,bt.EndorsementComment    
   ,bt.EndorsementSign    
    
   ,bt.ApproverChecked    
      ,bt.ApproverEmployeeId    
      ,bt.ApproverEmployeeName    
      ,bt.ApproverPositionName    
      ,bt.ApproverEmailAddress    
      ,bt.ApproverAction    
      ,bt.ApproverApproveTime    
      ,bt.ApproverComment    
   ,bt.ApproverSign    
    
   ,bt.CreatedBy    
   ,bt.CreatedByEmployeeCode    
   ,bt.CreatedByName    
   ,bt.CreatedByDeptName    
   ,bt.CreatedByPositionName    
   ,bt.CreatedByJobTitleName    
   ,bt.CreatedBySignPath    
FROM  vP01BusinessTravelCost btc     
INNER JOIN vP01BusinessTravel bt ON btc.BTId = bt.BTId    
INNER JOIN vP01BusinessTravelTraveler btt ON btt.BTId = bt.BTId    
INNER JOIN    
(    
 SELECT BTId, SUM( Amount) as TotalAmount, SUM( AmountUSD) as TotalAmountUSD    
 FROM vP01BusinessTravelCost    
 WHERE IsActive = 1    
 GROUP BY BTId    
) tt ON btc.BTId = tt.BTId    
    
GO
/****** Object:  View [dbo].[vP01OfficialTripListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01OfficialTripListReviewer1]
AS
SELECT * 
FROM vP01ApproverListOFT
WHERE IsActive =1  AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01OfficialTripListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE   VIEW [dbo].[vP01OfficialTripListReviewer2]
AS
SELECT * 
FROM vP01ApproverListOFT
WHERE IsActive =1  AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01OfficialTripListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01OfficialTripListVerifier]
AS
SELECT * 
FROM vP01ApproverListOFT
WHERE IsActive =1  AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
          
              
CREATE VIEW [dbo].[vP01OvertimeConfirmationPrint]              
AS              
SELECT               
    cad.OTCDId              
      ,cad.OTCId              
      ,cad.WorkDate            
    ,cad.rowIndex as WorkerNo                    
   ,cad.WorkerEmployeeName                    
   ,cad.WorkerDeptName                    
   ,cad.WorkerPositionName                    
   ,cad.WorkerJobTitleName                  
   ,cad.WorkTypeId                
   ,cad.WorkTypeName                
   ,cad.WorkShiftId                
   ,cad.WorkShiftName                
   ,cad.LeaderName            
           
   ,cad.PlanStartTime                
   ,cad.PlanEndTime                
   ,cad.PlanBreakTime           
   ,cad.PlanWorkingHours        
        
   ,cad.StartTime              
   ,cad.EndTime              
   ,cad.BreakTime              
   ,cad.WorkingHours              
      ,cad.Reason              
      ,cad.ApplicantRequest         
   ,cad.WorkingHoursForCL  
   ,cad.NumberOfCL     
    ,cad.NumberOfCLHours  
   ,cad.Remark              
      ---Traveler-----------------              
   --,btt.rowIndexConfirm as WorkerNo              
   --,btt.EmployeeName as WorkerEmployeeName              
   --,btt.DeptName as WorkerDeptName              
   --,btt.PositionName as WorkerPositionName              
   --,btt.JobTitleName as WorkerJobTitleName              
   ------------------------------------------              
      ,ca.RequestStatus              
      ,ca.WorkYear              
      ,ca.IssueDate              
      ,ca.Number              
      ,ca.NumberCode              
      ,ca.EmployeeId              
      ,ca.EmployeeCode              
      ,ca.EmployeeName              
      ,ca.GenderName              
      ,ca.DeptName              
      ,ca.PositionName              
      ,ca.EmailAddress              
   ,ca.EmployeeSign              
      ,ca.Remark as OTRemark              
      ,ca.CurrentApprover              
      ,ca.CurrentLevel              
              
      ,ca.Level1Checked              
      ,ca.Level1EmployeeId              
      ,ca.Level1EmployeeName              
      ,ca.Level1PositionName              
      ,ca.Level1EmailAddress              
      ,ca.Level1Action              
      ,ca.Level1ApproveTime              
      ,ca.Level1Comment              
   ,ca.Level1Sign              
              
      ,ca.Level2Checked              
      ,ca.Level2EmployeeId              
      ,ca.Level2EmployeeName              
      ,ca.Level2PositionName              
      ,ca.Level2EmailAddress              
      ,ca.Level2Action              
      ,ca.Level2ApproveTime              
      ,ca.Level2Comment              
   ,ca.Level2Sign              
              
      ,ca.Level3Checked              
      ,ca.Level3EmployeeId              
      ,ca.Level3EmployeeName              
      ,ca.Level3PositionName              
      ,ca.Level3EmailAddress              
      ,ca.Level3Action              
      ,ca.Level3ApproveTime              
      ,ca.Level3Comment              
   ,ca.Level3Sign              
      
      ,ca.ConfirmChecked      
      ,ca.ConfirmEmployeeId      
      ,ca.ConfirmEmployeeName      
      ,ca.ConfirmPositionName      
      ,ca.ConfirmEmailAddress      
      ,ca.ConfirmAction      
      ,ca.ConfirmApproveTime      
      ,ca.ConfirmComment      
   ,ca.ConfirmSign     
    
   ,ca.EndorsementChecked              
      ,ca.EndorsementEmployeeId              
      ,ca.EndorsementEmployeeName              
      ,ca.EndorsementPositionName              
      ,ca.EndorsementEmailAddress              
      ,ca.EndorsementAction              
      ,ca.EndorsementApproveTime              
      ,ca.EndorsementComment              
   ,ca.EndorsementSign              
              
   ,ca.Level4Checked              
      ,ca.Level4EmployeeId              
      ,ca.Level4EmployeeName              
      ,ca.Level4PositionName              
      ,ca.Level4EmailAddress              
      ,ca.Level4Action              
      ,ca.Level4ApproveTime              
      ,ca.Level4Comment              
   ,ca.Level4Sign              
              
      ,ca.CreatedBy              
   ,ca.CreatedByEmployeeCode              
   ,ca.CreatedByName              
   ,ca.CreatedByDeptName              
   ,ca.CreatedByPositionName              
   ,ca.CreatedByJobTitleName              
   ,ca.CreatedBySignPath              
                 
FROM  vP01OvertimeConfirmationDetail cad               
INNER JOIN vP01OvertimeConfirmation ca ON cad.OTCId = ca.OTCId              
--INNER JOIN               
--(              
--SELECT OTCId,rowIndexConfirm,EmployeeName,DeptName ,PositionName, JobTitleName              
--FROM vP01OvertimeConfirmationListWorker WHERE IsActive = 1 AND IsConfirm = 1               
--)           
--btt ON btt.OTCId = ca.OTCId 
GO
/****** Object:  View [dbo].[vP01Overtime]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01Overtime]    
AS    
SELECT ld.OTId    
      ,ld.RequestStatus    
      ,ld.WorkYear    
      ,ld.IssueDate    
      ,ld.Number    
      ,ld.NumberCode    
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
      ,emp.SignPath as EmployeeSign    
   ,ld.Remark    
   ,ld.CarSupport    
   ,IIF(ISNULL(ld.CarSupport,0) = 1,'Yes','No') as CarSupportText    
   ,ld.MealSupport    
   ,IIF(ISNULL(ld.MealSupport,0) = 1,'Yes','No') as MealSupportText    
    
   ,ld.CurrentApprover    
   ,ld.CurrentLevel    
       --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
   --approve    
   ,ld.Level1Checked    
   ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress    
      ,ld.Level1Action    
      ,ld.Level1ApproveTime    
      ,ld.Level1Comment    
   ,lv1.SignPath as Level1Sign    
    
   ,ld.Level2Checked    
   ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress    
      ,ld.Level2Action    
      ,ld.Level2ApproveTime    
      ,ld.Level2Comment    
   ,lv2.SignPath as Level2Sign    
    
   ,ld.Level3Checked    
   ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress    
   ,ld.Level3Action    
      ,ld.Level3ApproveTime    
      ,ld.Level3Comment    
   ,lv3.SignPath as Level3Sign    
    
     ,ld.ConfirmChecked        
   ,ld.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,ld.ConfirmAction        
      ,ld.ConfirmApproveTime        
      ,ld.ConfirmComment        
   ,IIF(ld.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign   
  
   ,ld.EndorsementChecked    
   ,ld.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress    
   ,ld.EndorsementAction    
      ,ld.EndorsementApproveTime    
      ,ld.EndorsementComment    
   ,IIF(ld.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign    
    
   ,ld.Level4Checked    
   ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress    
   ,ld.Level4Action    
      ,ld.Level4ApproveTime    
      ,ld.Level4Comment    
   ,lv4.SignPath as Level4Sign    
     
 --cancel    
   ,ld.Level1CancelChecked    
   ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress    
      ,ld.Level1CancelAction    
      ,ld.Level1CancelApproveTime    
      ,ld.Level1CancelComment    
   ,clv1.SignPath as Level1CancelSign    
    
   ,ld.Level2CancelChecked    
   ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress    
      ,ld.Level2CancelAction    
      ,ld.Level2CancelApproveTime    
      ,ld.Level2CancelComment    
   ,clv2.SignPath as Level2CancelSign    
    
   ,ld.Level3CancelChecked    
   ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress    
   ,ld.Level3CancelAction    
      ,ld.Level3CancelApproveTime    
      ,ld.Level3CancelComment    
   ,clv3.SignPath as Level3CancelSign    
   
 ,ld.ConfirmCancelChecked        
   ,ld.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,ld.ConfirmCancelAction        
      ,ld.ConfirmCancelApproveTime        
      ,ld.ConfirmCancelComment        
   ,IIF(ld.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign  
  
   ,ld.EndorsementCancelChecked    
   ,ld.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress    
   ,ld.EndorsementCancelAction    
      ,ld.EndorsementCancelApproveTime    
      ,ld.EndorsementCancelComment    
   ,IIF(ld.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign    
    
   ,ld.Level4CancelChecked    
   ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress    
   ,ld.Level4CancelAction    
      ,ld.Level4CancelApproveTime    
      ,ld.Level4CancelComment    
   ,clv4.SignPath as Level4CancelSign    
       
   ,ld.CancelReason    
   ,ld.CancelTime    
    
   ,ApplicationName    
   ,CONCAT('/over-time-approval-',ld.OTId) as approvalURL    
   ,CONCAT('/over-time-cancel-request-',ld.OTId) as cancelURL    
   ,CONCAT('/over-time-approve-view-',ld.OTId) as viewURL    
          
   ,ld.ManualApprovalFileName    
   ,ld.ManualApprovalFilePath    
   ,ld.ManualApprovalBy    
   ,ld.ManualApprovalAt    
    
      ,ld.Sync    
      ,ld.LastSync    
      ,ld.IsActive    
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,ld.CreatedAt    
      ,ld.ModifiedBy    
      ,ld.ModifiedAt    
FROM P01Overtime ld    
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId    
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId    
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId    
LEFT JOIN vP00Employee cfm ON ld.ConfirmEmployeeId = cfm.EmployeeId    
LEFT JOIN vP00Employee endo ON ld.EndorsementEmployeeId = endo.EmployeeId    
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId    
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId    
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId    
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId    
LEFT JOIN vP00Employee ccfm ON ld.ConfirmCancelEmployeeId = ccfm.EmployeeId   
LEFT JOIN vP00Employee cendo ON ld.EndorsementCancelEmployeeId = cendo.EmployeeId    
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId    
    
GO
/****** Object:  View [dbo].[vP01OvertimePrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
       
CREATE VIEW [dbo].[vP01OvertimePrint]          
AS          
SELECT           
    cad.OTDId          
      ,cad.OTId          
   ,cad.rowIndex as WorkerNo          
   ,cad.WorkerEmployeeName          
   ,cad.WorkerDeptName          
   ,cad.WorkerPositionName          
   ,cad.WorkerJobTitleName        
   ,cad.WorkTypeId      
   ,cad.WorkTypeName      
   ,cad.WorkShiftId      
   ,cad.WorkShiftName      
   ,cad.LeaderName        
      ,cad.WorkDate          
      ,cad.StartTime          
      ,cad.EndTime          
      ,cad.BreakTime          
      ,cad.WorkingHours          
      ,cad.Reason          
      ,cad.ApplicantRequest          
      ,cad.Remark          
          
     ---Traveler-----------------          
   --,btt.rowIndex as WorkerNo          
   --,btt.EmployeeName as WorkerEmployeeName          
   --,btt.DeptName as WorkerDeptName          
   --,btt.PositionName as WorkerPositionName          
   --,btt.JobTitleName as WorkerJobTitleName          
   --------------------          
      ,ca.RequestStatus          
      ,ca.WorkYear          
      ,ca.IssueDate          
      ,ca.Number          
      ,ca.NumberCode          
      ,ca.EmployeeId          
      ,ca.EmployeeCode          
      ,ca.EmployeeName          
      ,ca.GenderName          
      ,ca.DeptName          
      ,ca.PositionName          
      ,ca.EmailAddress          
   ,ca.EmployeeSign          
   ,ca.CarSupport          
   ,IIF(ISNULL(ca.CarSupport,0) = 1,'Yes','No') as CarSupportText          
   ,ca.MealSupport          
   ,IIF(ISNULL(ca.MealSupport,0) = 1,'Yes','No') as MealSupportText          
          
      ,ca.Remark as OTRemark          
      ,ca.CurrentApprover          
      ,ca.CurrentLevel          
          
      ,ca.Level1Checked          
      ,ca.Level1EmployeeId          
      ,ca.Level1EmployeeName          
      ,ca.Level1PositionName          
      ,ca.Level1EmailAddress          
      ,ca.Level1Action          
      ,ca.Level1ApproveTime          
      ,ca.Level1Comment          
   ,ca.Level1Sign          
          
      ,ca.Level2Checked          
      ,ca.Level2EmployeeId          
      ,ca.Level2EmployeeName          
      ,ca.Level2PositionName          
      ,ca.Level2EmailAddress          
      ,ca.Level2Action          
      ,ca.Level2ApproveTime          
      ,ca.Level2Comment          
   ,ca.Level2Sign          
          
      ,ca.Level3Checked          
      ,ca.Level3EmployeeId          
      ,ca.Level3EmployeeName          
      ,ca.Level3PositionName          
      ,ca.Level3EmailAddress          
      ,ca.Level3Action          
      ,ca.Level3ApproveTime          
      ,ca.Level3Comment          
   ,ca.Level3Sign          
        
       ,ca.ConfirmChecked    
      ,ca.ConfirmEmployeeId    
      ,ca.ConfirmEmployeeName    
      ,ca.ConfirmPositionName    
      ,ca.ConfirmEmailAddress    
      ,ca.ConfirmAction    
      ,ca.ConfirmApproveTime    
      ,ca.ConfirmComment    
   ,ca.ConfirmSign    
  
   ,ca.EndorsementChecked          
      ,ca.EndorsementEmployeeId          
      ,ca.EndorsementEmployeeName          
      ,ca.EndorsementPositionName          
      ,ca.EndorsementEmailAddress          
      ,ca.EndorsementAction          
      ,ca.EndorsementApproveTime          
      ,ca.EndorsementComment          
   ,ca.EndorsementSign          
          
   ,ca.Level4Checked          
      ,ca.Level4EmployeeId          
      ,ca.Level4EmployeeName          
      ,ca.Level4PositionName          
      ,ca.Level4EmailAddress          
      ,ca.Level4Action          
      ,ca.Level4ApproveTime          
      ,ca.Level4Comment          
   ,ca.Level4Sign          
          
      ,ca.CreatedBy          
   ,ca.CreatedByEmployeeCode          
   ,ca.CreatedByName          
   ,ca.CreatedByDeptName          
   ,ca.CreatedByPositionName          
   ,ca.CreatedByJobTitleName          
   ,ca.CreatedBySignPath          
             
FROM  vP01OvertimeDetail cad           
INNER JOIN vP01Overtime ca ON cad.OTId = ca.OTId      
--INNER JOIN vP01OvertimeListWorker btt ON btt.OTId = ca.OTId 
GO
/****** Object:  View [dbo].[vP01InternalMemorandumPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01InternalMemorandumPrint]    
AS    
SELECT     
    im.IMId    
      ,im.RequestStatus    
      ,im.IssueDate    
      ,im.Number    
      ,im.NumberCode    
      ,im.EmployeeId    
      ,im.EmployeeCode    
      ,im.EmployeeName    
   ,im.EmployeeSign    
      ,im.GenderName    
      ,im.DeptName    
      ,im.PositionName    
   ,im.JobTitleName    
      ,im.EmailAddress    
    
   ,im.Subjects    
   ,im.CheckInformation    
   ,im.CheckReply    
   ,im.CheckReview    
   ,im.CheckAction    
   ,im.CheckApproval    
   ,im.Contents    
    
      ,im.CurrentApprover    
      ,im.CurrentLevel    
    
      ,im.Reviewer1Checked    
      ,im.Reviewer1EmployeeId    
      ,im.Reviewer1EmployeeName    
      ,im.Reviewer1PositionName    
      ,im.Reviewer1EmailAddress    
      ,im.Reviewer1Action    
      ,im.Reviewer1ApproveTime    
      ,im.Reviewer1Comment    
   ,im.Reviewer1Sign    
    
      ,im.Reviewer2Checked    
      ,im.Reviewer2EmployeeId    
      ,im.Reviewer2EmployeeName    
      ,im.Reviewer2PositionName    
      ,im.Reviewer2EmailAddress    
      ,im.Reviewer2Action    
      ,im.Reviewer2ApproveTime    
      ,im.Reviewer2Comment    
   ,im.Reviewer2Sign    
    
      ,im.Reviewer3Checked    
      ,im.Reviewer3EmployeeId    
      ,im.Reviewer3EmployeeName    
      ,im.Reviewer3PositionName    
      ,im.Reviewer3EmailAddress    
      ,im.Reviewer3Action    
      ,im.Reviewer3ApproveTime    
      ,im.Reviewer3Comment    
   ,im.Reviewer3Sign    
    
      ,im.ConfirmChecked    
      ,im.ConfirmEmployeeId    
      ,im.ConfirmEmployeeName    
      ,im.ConfirmPositionName    
      ,im.ConfirmEmailAddress    
      ,im.ConfirmAction    
      ,im.ConfirmApproveTime    
      ,im.ConfirmComment    
   ,im.ConfirmSign    
  
   ,im.Reviewer4Checked    
      ,im.Reviewer4EmployeeId    
      ,im.Reviewer4EmployeeName    
      ,im.Reviewer4PositionName    
      ,im.Reviewer4EmailAddress    
      ,im.Reviewer4Action    
      ,im.Reviewer4ApproveTime    
      ,im.Reviewer4Comment    
   ,im.Reviewer4Sign    
    
   ,im.ApproverChecked    
      ,im.ApproverEmployeeId    
      ,im.ApproverEmployeeName    
      ,im.ApproverPositionName    
      ,im.ApproverEmailAddress    
      ,im.ApproverAction    
      ,im.ApproverApproveTime    
      ,im.ApproverComment    
   ,im.ApproverSign    
    
   ,im.CreatedBy    
   ,im.CreatedByEmployeeCode    
   ,im.CreatedByName    
   ,im.CreatedByDeptName    
   ,im.CreatedByPositionName    
   ,im.CreatedByJobTitleName    
   ,im.CreatedBySignPath    
    
     --List To-----------------    
   ,lto.rowIndex as ToNo    
   ,lto.EmployeeName as ToEmployeeName    
   ,lto.DeptName as ToDeptName    
   ,lto.PositionName as ToPositionName    
   ,lto.JobTitleName as ToJobTitleName    
    
    --List CC-----------------    
   ,lcc.rowIndex as CcNo    
   ,lcc.EmployeeName as CcEmployeeName    
   ,lcc.DeptName as CcDeptName    
   ,lcc.PositionName as CcPositionName    
   ,lcc.JobTitleName as CcJobTitleName    
FROM vP01InternalMemorandum im     
INNER JOIN vP01InternalMemorandumListTo lto ON lto.IMId = im.IMId    
INNER JOIN vP01InternalMemorandumListCc lcc ON lcc.IMId = im.IMId    
    
GO
/****** Object:  Table [dbo].[P01OfficialTripDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OfficialTripDetail](
	[OFTDId] [int] IDENTITY(1,1) NOT NULL,
	[OFTId] [int] NOT NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[LeaveTimeId] [int] NOT NULL,
	[Destination] [nvarchar](2000) NULL,
	[CarSupport] [bit] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01P01OfficialTripDetail_OFTDId] PRIMARY KEY CLUSTERED 
(
	[OFTDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OfficialTripDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE   VIEW [dbo].[vP01OfficialTripDetail]  
AS  
SELECT tvc.OFTDId  
      ,tvc.OFTId,   
    tv.EmployeeId, tv.RequestStatus  
      ,tvc.WorkDate  
   ,tvc.LeaveTimeId, ltt.LeaveTimeName, ltt.NumberOfDay  
   ,tvc.Destination  
   ,tvc.CarSupport  
      ,tvc.IsActive  
      ,tvc.CreatedBy  
      ,tvc.CreatedAt  
      ,tvc.ModifiedBy  
      ,tvc.ModifiedAt  
   ,ROW_NUMBER() OVER(PARTITION BY tvc.OFTId ORDER BY tvc.WorkDate,tvc.OFTId) as rowIndex  
FROM P01OfficialTripDetail tvc  
INNER JOIN P01OfficialTrip tv ON tvc.OFTId = tv.OFTId  
INNER JOIN P01LeaveTimeType ltt ON tvc.LeaveTimeId = ltt.LeaveTimeId  
WHERE tv.IsActive = 1 AND tvc.IsActive = 1  
  
GO
/****** Object:  View [dbo].[vP01BTListNotYetClaim]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01BTListNotYetClaim]  
AS  
SELECT bt.BTId  
      ,bt.RequestStatus  
      ,bt.IssueDate  
      ,bt.Number  
      ,bt.NumberCode  
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress  
   ,emp.SignPath as EmployeeSign  
   ,bt.Purpose  
   ,bt.CurrentApprover  
   ,bt.CurrentLevel  
   ,bt.Review1Checked  
   ,bt.Review1EmployeeId,lv1.EmployeeName as Review1EmployeeName, lv1.PositionName as Review1PositionName, lv1.EmailAddress as Review1EmailAddress  
      ,bt.Review1Action  
      ,bt.Review1ApproveTime  
      ,bt.Review1Comment  
   ,IIF(bt.Review1Checked = 1,lv1.SignPath,'') as Review1Sign  
   ,bt.Review2Checked  
   ,bt.Review2EmployeeId,lv2.EmployeeName as Review2EmployeeName, lv2.PositionName as Review2PositionName, lv2.EmailAddress as Review2EmailAddress  
      ,bt.Review2Action  
      ,bt.Review2ApproveTime  
      ,bt.Review2Comment  
   ,IIF(bt.Review2Checked = 1,lv2.SignPath,'') as Review2Sign  
   ,bt.Review3Checked  
   ,bt.Review3EmployeeId,lv1.EmployeeName as Review3EmployeeName, lv1.PositionName as Review3PositionName, lv1.EmailAddress as Review3EmailAddress  
      ,bt.Review3Action  
      ,bt.Review3ApproveTime  
      ,bt.Review3Comment  
   ,IIF(bt.Review3Checked = 1,lv1.SignPath,'') as Review3Sign  
   ,bt.Review4Checked  
   ,bt.Review4EmployeeId,lv2.EmployeeName as Review4EmployeeName, lv2.PositionName as Review4PositionName, lv2.EmailAddress as Review4EmailAddress  
      ,bt.Review4Action  
      ,bt.Review4ApproveTime  
      ,bt.Review4Comment  
   ,IIF(bt.Review4Checked = 1,lv2.SignPath,'') as Review4Sign  
   ,bt.VerifierChecked  
   ,bt.VerifierEmployeeId,lv3.EmployeeName as VerifierEmployeeName, lv3.PositionName as VerifierPositionName, lv3.EmailAddress as VerifierEmailAddress  
   ,bt.VerifierAction  
      ,bt.VerifierApproveTime  
      ,bt.VerifierComment  
   ,IIF(bt.VerifierChecked = 1,lv3.SignPath,'') as VerifierSign  
   ,bt.ApproverChecked  
   ,bt.ApproverEmployeeId,lv4.EmployeeName as ApproverEmployeeName, lv4.PositionName as ApproverPositionName, lv4.EmailAddress as ApproverEmailAddress  
   ,bt.ApproverAction  
      ,bt.ApproverApproveTime  
      ,bt.ApproverComment  
   ,IIF(bt.ApproverChecked = 1,lv4.SignPath,'') as ApproverSign  
   ,bt.Review1CancelChecked  
   ,bt.Review1CancelAction  
   ,bt.Review1CancelApproveTime  
   ,bt.Review1CancelComment  
   ,bt.Review2CancelChecked  
   ,bt.Review2CancelAction  
   ,bt.Review2CancelApproveTime  
   ,bt.Review2CancelComment  
   ,bt.Review3CancelChecked  
   ,bt.Review3CancelAction  
   ,bt.Review3CancelApproveTime  
   ,bt.Review3CancelComment  
   ,bt.Review4CancelChecked  
   ,bt.Review4CancelAction  
   ,bt.Review4CancelApproveTime  
   ,bt.Review4CancelComment  
   ,bt.VerifierCancelChecked  
   ,bt.VerifierCancelAction  
   ,bt.VerifierCancelApproveTime  
   ,bt.VerifierCancelComment  
   ,bt.ApproverCancelChecked  
   ,bt.ApproverCancelAction  
   ,bt.ApproverCancelApproveTime  
   ,bt.ApproverCancelComment  
   ,bt.ApplicationName  
      ,bt.Sync  
      ,bt.LastSync  
      ,bt.IsActive  
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode  
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName  
      ,bt.CreatedAt  
      ,bt.ModifiedBy  
      ,bt.ModifiedAt  
FROM P01BusinessTravel bt  
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId  
LEFT JOIN vP00Employee lv1 ON bt.Review1EmployeeId= lv1.EmployeeId  
LEFT JOIN vP00Employee lv2 ON bt.Review2EmployeeId = lv2.EmployeeId  
LEFT JOIN vP00Employee lv3 ON bt.VerifierEmployeeId = lv3.EmployeeId  
LEFT JOIN vP00Employee lv4 ON bt.ApproverEmployeeId = lv4.EmployeeId  
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId  
WHERE bt.IsActive = 1 AND bt.RequestStatus = 'Approved'  
AND bt.BTId NOT IN (SELECT BTId FROM P01BusinessTravelClaim WHERE IsActive = 1 AND RequestStatus NOT IN ('Rejected','Canceled') GROUP BY BTId)  
--OR bt.NumberCode = 'BT240208'
GO
/****** Object:  Table [dbo].[P01LevelApproveDR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveDR](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveDR] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproverListDR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListDR](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[CId] [int] NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListDR] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[CId] ASC,
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01DailyReportCategories]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01DailyReportCategories](
	[CId] [int] IDENTITY(1,1) NOT NULL,
	[CategoriesName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[PriorityNo] [int] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01DailyReportCategories] PRIMARY KEY CLUSTERED 
(
	[CId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListDR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ApproverListDR]            
AS            
SELECT ap.Id            
      ,ap.CId, dc.CategoriesName         
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName            
      ,ap.LevelId,lv.LevelName            
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName            
      ,ap.IsActive            
      ,ap.CreatedBy            
      ,ap.CreatedAt            
      ,ap.ModifiedBy            
      ,ap.ModifiedAt            
FROM P01ApproverListDR ap            
INNER JOIN P01DailyReportCategories dc ON dc.CId = ap.CId            
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId            
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId            
INNER JOIN P01LevelApproveDR lv ON ap.LevelId = lv.LevelId 
GO
/****** Object:  View [dbo].[vP01ListEmployeeProcurement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
      
CREATE VIEW [dbo].[vP01ListEmployeeProcurement]      
AS      
SELECT emp.EmployeeId      
      ,emp.EmployeeCode      
      ,emp.EmployeeName      
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName      
   ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize      
   ,emp.JobTitleId, job.JobTitleName      
      ,emp.BirthDate      
      ,emp.GenderId, gd.GenderName      
      ,emp.EmailAddress      
   ,emp.PhoneNumber      
      ,emp.FirstWorkingDate      
   ,emp.ProbationaryEndDate      
      ,emp.EndWorkingDate      
   ,emp.AnnualLeave      
      ,emp.EmployeeNo      
   ,emp.SignPath      
      ,emp.IsActive      
      ,emp.CreatedBy      
      ,emp.CreatedAt      
      ,emp.ModifiedBy      
      ,emp.ModifiedAt      
FROM P00Employee emp      
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId      
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId      
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId      
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId      
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId      
where emp.EmployeeId IN (110,111,24,230)      


--select * from vP00Employee where FirstName like 'Son'

GO
/****** Object:  View [dbo].[vP01ListEmployeeIAManualApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01ListEmployeeIAManualApprover]  
AS  
SELECT emp.EmployeeId  
      ,emp.EmployeeCode  
      ,emp.EmployeeName  
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName  
   ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize  
   ,emp.JobTitleId, job.JobTitleName  
      ,emp.BirthDate  
      ,emp.GenderId, gd.GenderName  
      ,emp.EmailAddress  
   ,emp.PhoneNumber  
      ,emp.FirstWorkingDate  
   ,emp.ProbationaryEndDate  
      ,emp.EndWorkingDate  
   ,emp.AnnualLeave  
      ,emp.EmployeeNo  
   ,emp.SignPath  
      ,emp.IsActive  
      ,emp.CreatedBy  
      ,emp.CreatedAt  
      ,emp.ModifiedBy  
      ,emp.ModifiedAt  
FROM P00Employee emp  
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId  
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId  
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId  
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId  
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId  
where emp.EmployeeId IN (6)  
  
  
GO
/****** Object:  View [dbo].[vP01ListEANotYetPRAll]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
        
            
CREATE VIEW [dbo].[vP01ListEANotYetPRAll]  
AS            
SELECT bt.EAId            
      ,bt.RequestStatus            
      ,bt.IssueDate            
      ,bt.Number            
      ,bt.NumberCode            
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress            
   ,emp.SignPath as EmployeeSign            
   --,bt.Purpose            
   ,bt.CurrentApprover            
   ,bt.CurrentLevel            
   ,ISNULL(pr.EAId,0) as PRId       
   ,bt.ApplicationName            
      ,bt.Sync            
      ,bt.LastSync            
      ,bt.IsActive            
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode            
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName            
      ,bt.CreatedAt            
      ,bt.ModifiedBy            
      ,bt.ModifiedAt            
FROM P01ExpenseApproval bt            
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId             
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId            
LEFT JOIN    
(    
 SELECT EAId     
 FROM vP01PurchaseRequisitionListEAR     
 WHERE IsActive = 1 AND RequestStatus NOT IN ('Rejected','Canceled')     
 GROUP BY EAId    
) pr ON bt.EAId = pr.EAId  
WHERE bt.IsActive = 1 AND bt.RequestStatus = 'Approved' 
GO
/****** Object:  Table [dbo].[P01FlexibleWorking]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FlexibleWorking](
	[FWId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[Remark] [nvarchar](2000) NULL,
	[CarSupport] [bit] NULL,
	[MealSupport] [bit] NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1Action] [nvarchar](50) NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](500) NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2Action] [nvarchar](50) NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3Action] [nvarchar](50) NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[ConfirmChecked] [bit] NULL,
	[ConfirmEmployeeId] [int] NULL,
	[ConfirmAction] [nvarchar](50) NULL,
	[ConfirmApproveTime] [datetime] NULL,
	[ConfirmComment] [nvarchar](2000) NULL,
	[EndorsementChecked] [bit] NULL,
	[EndorsementEmployeeId] [int] NULL,
	[EndorsementAction] [nvarchar](50) NULL,
	[EndorsementApproveTime] [datetime] NULL,
	[EndorsementComment] [nvarchar](2000) NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4Action] [nvarchar](50) NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[RemainingAnnualLeave] [decimal](18, 2) NULL,
	[Level1CancelChecked] [bit] NULL,
	[Level1CancelEmployeeId] [int] NULL,
	[Level1CancelAction] [nvarchar](50) NULL,
	[Level1CancelApproveTime] [datetime] NULL,
	[Level1CancelComment] [nvarchar](500) NULL,
	[Level2CancelChecked] [bit] NULL,
	[Level2CancelEmployeeId] [int] NULL,
	[Level2CancelAction] [nvarchar](50) NULL,
	[Level2CancelApproveTime] [datetime] NULL,
	[Level2CancelComment] [nvarchar](500) NULL,
	[Level3CancelChecked] [bit] NULL,
	[Level3CancelEmployeeId] [int] NULL,
	[Level3CancelAction] [nvarchar](50) NULL,
	[Level3CancelApproveTime] [datetime] NULL,
	[Level3CancelComment] [nvarchar](500) NULL,
	[ConfirmCancelChecked] [bit] NULL,
	[ConfirmCancelEmployeeId] [int] NULL,
	[ConfirmCancelAction] [nvarchar](50) NULL,
	[ConfirmCancelApproveTime] [datetime] NULL,
	[ConfirmCancelComment] [nvarchar](500) NULL,
	[EndorsementCancelChecked] [bit] NULL,
	[EndorsementCancelEmployeeId] [int] NULL,
	[EndorsementCancelAction] [nvarchar](50) NULL,
	[EndorsementCancelApproveTime] [datetime] NULL,
	[EndorsementCancelComment] [nvarchar](500) NULL,
	[Level4CancelChecked] [bit] NULL,
	[Level4CancelEmployeeId] [int] NULL,
	[Level4CancelAction] [nvarchar](50) NULL,
	[Level4CancelApproveTime] [datetime] NULL,
	[Level4CancelComment] [nvarchar](500) NULL,
	[CancelReason] [nvarchar](500) NULL,
	[CancelTime] [datetime] NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[ManualApprovalFileName] [nvarchar](255) NULL,
	[ManualApprovalFilePath] [nvarchar](255) NULL,
	[ManualApprovalBy] [int] NULL,
	[ManualApprovalAt] [datetime] NULL,
	[Sync] [bit] NULL,
	[LastSync] [datetime] NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01FlexibleWorking] PRIMARY KEY CLUSTERED 
(
	[FWId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01FlexibleWorking]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
    
CREATE VIEW [dbo].[vP01FlexibleWorking]    
AS    
SELECT ld.FWId    
      ,ld.RequestStatus    
      ,ld.WorkYear    
      ,ld.IssueDate    
      ,ld.Number    
      ,ld.NumberCode    
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress    
      ,emp.SignPath as EmployeeSign    
   ,ld.Remark    
   ,ld.CarSupport    
   ,IIF(ISNULL(ld.CarSupport,0) = 1,'Yes','No') as CarSupportText    
   ,ld.MealSupport    
   ,IIF(ISNULL(ld.MealSupport,0) = 1,'Yes','No') as MealSupportText    
    
   ,ld.CurrentApprover    
   ,ld.CurrentLevel    
       --    
    ,curApr.EmployeeName as CurrentApproverEmployeeName    
    ,curApr.PositionName as CurrentApproverPositionName    
    ,curApr.EmailAddress as CurrentApproverEmailAddress    
   --approve    
   ,ld.Level1Checked    
   ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress    
      ,ld.Level1Action    
      ,ld.Level1ApproveTime    
      ,ld.Level1Comment    
   ,lv1.SignPath as Level1Sign    
    
   ,ld.Level2Checked    
   ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress    
      ,ld.Level2Action    
      ,ld.Level2ApproveTime    
      ,ld.Level2Comment    
   ,lv2.SignPath as Level2Sign    
    
   ,ld.Level3Checked    
   ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress    
   ,ld.Level3Action    
      ,ld.Level3ApproveTime    
      ,ld.Level3Comment    
   ,lv3.SignPath as Level3Sign    
    
     ,ld.ConfirmChecked        
   ,ld.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,ld.ConfirmAction        
      ,ld.ConfirmApproveTime        
      ,ld.ConfirmComment        
   ,IIF(ld.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
  
   ,ld.EndorsementChecked    
   ,ld.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress    
   ,ld.EndorsementAction    
      ,ld.EndorsementApproveTime    
      ,ld.EndorsementComment    
   ,IIF(ld.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign    
    
   ,ld.Level4Checked    
   ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress    
   ,ld.Level4Action    
      ,ld.Level4ApproveTime    
      ,ld.Level4Comment    
   ,lv4.SignPath as Level4Sign    
     
 --cancel    
   ,ld.Level1CancelChecked    
   ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress    
      ,ld.Level1CancelAction    
      ,ld.Level1CancelApproveTime    
      ,ld.Level1CancelComment    
   ,clv1.SignPath as Level1CancelSign    
    
   ,ld.Level2CancelChecked    
   ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress    
      ,ld.Level2CancelAction    
      ,ld.Level2CancelApproveTime    
      ,ld.Level2CancelComment    
   ,clv2.SignPath as Level2CancelSign    
    
   ,ld.Level3CancelChecked    
   ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress    
   ,ld.Level3CancelAction    
      ,ld.Level3CancelApproveTime    
      ,ld.Level3CancelComment    
   ,clv3.SignPath as Level3CancelSign    
    
  ,ld.ConfirmCancelChecked        
   ,ld.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,ld.ConfirmCancelAction        
      ,ld.ConfirmCancelApproveTime        
      ,ld.ConfirmCancelComment        
   ,IIF(ld.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign    
  
   ,ld.EndorsementCancelChecked    
   ,ld.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress    
   ,ld.EndorsementCancelAction    
      ,ld.EndorsementCancelApproveTime    
      ,ld.EndorsementCancelComment    
   ,IIF(ld.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign    
    
   ,ld.Level4CancelChecked    
   ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress    
   ,ld.Level4CancelAction    
      ,ld.Level4CancelApproveTime    
      ,ld.Level4CancelComment    
   ,clv4.SignPath as Level4CancelSign    
       
   ,ld.CancelReason    
   ,ld.CancelTime    
    
   ,ApplicationName    
   ,CONCAT('/flexible-working-approval-',ld.FWId) as approvalURL    
   ,CONCAT('/flexible-working-cancel-request-',ld.FWId) as cancelURL    
   ,CONCAT('/flexible-working-approve-view-',ld.FWId) as viewURL    
             
   ,ld.ManualApprovalFileName    
   ,ld.ManualApprovalFilePath    
   ,ld.ManualApprovalBy    
   ,ld.ManualApprovalAt    
    
      ,ld.Sync    
      ,ld.LastSync    
      ,ld.IsActive    
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode    
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName    
   ,ucr.SignPath as CreatedBySignPath    
      ,ld.CreatedAt    
      ,ld.ModifiedBy    
      ,ld.ModifiedAt    
FROM P01FlexibleWorking ld    
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId    
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId    
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId    
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId    
LEFT JOIN vP00Employee cfm ON ld.ConfirmEmployeeId = cfm.EmployeeId   
LEFT JOIN vP00Employee endo ON ld.EndorsementEmployeeId = endo.EmployeeId    
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId    
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId    
LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId    
--cancel    
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId    
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId    
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId    
LEFT JOIN vP00Employee ccfm ON ld.ConfirmCancelEmployeeId = ccfm.EmployeeId   
LEFT JOIN vP00Employee cendo ON ld.EndorsementCancelEmployeeId = cendo.EmployeeId    
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId    
    
GO
/****** Object:  Table [dbo].[P01ApproverListPR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListPR](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListPR] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApprovePR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApprovePR](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApprovePR] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListPR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

  
CREATE VIEW [dbo].[vP01ApproverListPR]  
AS  
SELECT ap.Id  
--   ,ap.FormId, fm.FormName, fm.FormName2  
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName  
      ,ap.LevelId,lv.LevelName  
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName  
      ,ap.IsActive  
      ,ap.CreatedBy  
      ,ap.CreatedAt  
      ,ap.ModifiedBy  
      ,ap.ModifiedAt  
FROM P01ApproverListPR ap  
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId  
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId  
INNER JOIN P01LevelApprovePR lv ON ap.LevelId = lv.LevelId  
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01PurchaseRequisitionListReviewer1]
AS
SELECT * 
FROM vP01ApproverListPR
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01PurchaseRequisitionListReviewer2]
AS
SELECT * 
FROM vP01ApproverListPR
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  Table [dbo].[P01FlexibleWorkingDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FlexibleWorkingDetail](
	[FWDId] [int] IDENTITY(1,1) NOT NULL,
	[FWId] [int] NOT NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[BreakTime] [nvarchar](50) NULL,
	[WorkingHours] [nvarchar](50) NULL,
	[Purpose] [nvarchar](500) NULL,
	[Reason] [nvarchar](500) NULL,
	[ApplicantRequest] [nvarchar](500) NULL,
	[RequestDetail] [nvarchar](500) NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01FlexibleWorkingDetail] PRIMARY KEY CLUSTERED 
(
	[FWDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
      
CREATE VIEW [dbo].[vP01FlexibleWorkingDetail]      
AS      
SELECT dt.FWDId      
   ,dt.FWId, r.EmployeeId, r.WorkYear, r.RequestStatus      
   ,dt.WorkDate      
   ,dt.StartTime      
   ,dt.EndTime      
   ,dt.BreakTime      
   ,dt.WorkingHours      
   ,dt.Purpose    
       
   ,dt.Reason      
   ,dt.ApplicantRequest      
   ,dt.Remark      
    
   ,dt.RequestDetail        
    
   ,dt.IsActive      
   ,dt.CreatedBy      
   ,dt.CreatedAt      
   ,dt.ModifiedBy      
   ,dt.ModifiedAt      
FROM P01FlexibleWorkingDetail dt      
INNER JOIN P01FlexibleWorking r ON dt.FWId = r.FWId      
WHERE r.IsActive = 1 AND dt.IsActive = 1 
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListReviewer3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01PurchaseRequisitionListReviewer3]
AS
SELECT * 
FROM vP01ApproverListPR
WHERE IsActive =1 AND LevelId = 6

GO
/****** Object:  View [dbo].[vP01LeaveDayListCheckBy]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01LeaveDayListCheckBy]      
AS      
SELECT [Id]      
      ,[DeptId]      
      ,[DeptName]      
      ,[SiteId]      
      ,[SiteName]      
      ,[LevelId]      
      ,[LevelName]      
      ,[EmployeeId]      
      ,[EmployeeName]      
      ,[PositionName]      
      ,[JobTitleName]      
      ,[EmailAddress]        
      ,[IsActive]      
      ,[CreatedBy]      
      ,[CreatedAt]      
      ,[ModifiedBy]      
      ,[ModifiedAt]       
FROM vP01ApproverListAL      
WHERE IsActive =1 AND LevelId = 6   
  
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01PurchaseRequisitionListVerifier]
AS
SELECT * 
FROM vP01ApproverListPR
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01PurchaseRequisitionListEndorsement]
AS
SELECT * 
FROM vP01ApproverListPR
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01ListEmployeeEditHR]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP01ListEmployeeEditHR]        
AS        
SELECT emp.EmployeeId        
      ,emp.EmployeeCode        
      ,emp.EmployeeName        
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName        
   ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize        
   ,emp.JobTitleId, job.JobTitleName        
      ,emp.BirthDate        
      ,emp.GenderId, gd.GenderName        
      ,emp.EmailAddress        
   ,emp.PhoneNumber        
      ,emp.FirstWorkingDate        
   ,emp.ProbationaryEndDate        
      ,emp.EndWorkingDate        
   ,emp.AnnualLeave        
      ,emp.EmployeeNo        
   ,emp.SignPath        
      ,emp.IsActive        
      ,emp.CreatedBy        
      ,emp.CreatedAt        
      ,emp.ModifiedBy        
      ,emp.ModifiedAt        
FROM P00Employee emp        
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId        
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId        
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId        
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId        
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId        
where emp.EmployeeId IN (15,40)        
  
  
  
GO
/****** Object:  Table [dbo].[P01FlexibleWorkingListWorker]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FlexibleWorkingListWorker](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[FWId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01FlexibleWorkingListWorker_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListWorker]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01FlexibleWorkingListWorker]  
AS  
SELECT tvl.Id  
      ,tvl.FWId  
      ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName 
	  ,tv.RequestStatus
	  ,tv.NumberCode

      ,tvl.IsActive  
      ,tvl.CreatedBy  
      ,tvl.CreatedAt  
      ,tvl.ModifiedBy  
      ,tvl.ModifiedAt  
   ,ROW_NUMBER() OVER(PARTITION BY tvl.FWId ORDER BY tvl.Id) as rowIndex  
FROM P01FlexibleWorkingListWorker tvl  
INNER JOIN P01FlexibleWorking tv ON tvl.FWId = tv.FWId  
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId  
WHERE tv.IsActive = 1 AND tvl.IsActive = 1  
  
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01PurchaseRequisitionListApprover]
AS
SELECT * 
FROM vP01ApproverListPR
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
        
        
CREATE VIEW [dbo].[vP01FlexibleWorkingPrint]        
AS        
SELECT         
    cad.FWDId        
   ,cad.FWId        
   ,cad.WorkDate        
   ,cad.StartTime        
   ,cad.EndTime        
   ,cad.BreakTime        
   ,cad.WorkingHours        
   ,cad.Purpose      
   ,cad.Reason        
   ,cad.ApplicantRequest        
   ,cad.RequestDetail      
   ,cad.Remark        
        
     ---Traveler-----------------        
   ,btt.rowIndex as WorkerNo        
   ,btt.EmployeeName as WorkerEmployeeName        
   ,btt.DeptName as WorkerDeptName        
   ,btt.PositionName as WorkerPositionName        
   ,btt.JobTitleName as WorkerJobTitleName        
   --------------------        
   ,ca.RequestStatus        
   ,ca.WorkYear        
   ,ca.IssueDate        
   ,ca.Number        
   ,ca.NumberCode        
   ,ca.EmployeeId        
   ,ca.EmployeeCode        
   ,ca.EmployeeName        
   ,ca.GenderName        
   ,ca.DeptName        
   ,ca.PositionName        
   ,ca.EmailAddress        
   ,ca.EmployeeSign        
   ,ca.CarSupport        
   ,IIF(ISNULL(ca.CarSupport,0) = 1,'Yes','No') as CarSupportText        
   ,ca.MealSupport        
   ,IIF(ISNULL(ca.MealSupport,0) = 1,'Yes','No') as MealSupportText        
        
   ,ca.Remark as OTRemark        
   ,ca.CurrentApprover        
   ,ca.CurrentLevel        
        
   ,ca.Level1Checked        
   ,ca.Level1EmployeeId        
   ,ca.Level1EmployeeName        
   ,ca.Level1PositionName        
   ,ca.Level1EmailAddress        
   ,ca.Level1Action        
   ,ca.Level1ApproveTime        
   ,ca.Level1Comment        
   ,ca.Level1Sign        
        
   ,ca.Level2Checked        
   ,ca.Level2EmployeeId        
   ,ca.Level2EmployeeName        
   ,ca.Level2PositionName        
   ,ca.Level2EmailAddress        
   ,ca.Level2Action        
   ,ca.Level2ApproveTime        
   ,ca.Level2Comment        
   ,ca.Level2Sign        
        
   ,ca.Level3Checked        
   ,ca.Level3EmployeeId        
   ,ca.Level3EmployeeName        
   ,ca.Level3PositionName        
   ,ca.Level3EmailAddress        
   ,ca.Level3Action        
   ,ca.Level3ApproveTime        
   ,ca.Level3Comment        
   ,ca.Level3Sign        
     
    ,ca.ConfirmChecked    
      ,ca.ConfirmEmployeeId    
      ,ca.ConfirmEmployeeName    
      ,ca.ConfirmPositionName    
      ,ca.ConfirmEmailAddress    
      ,ca.ConfirmAction    
      ,ca.ConfirmApproveTime    
      ,ca.ConfirmComment    
   ,ca.ConfirmSign      
  
   ,ca.EndorsementChecked        
   ,ca.EndorsementEmployeeId        
   ,ca.EndorsementEmployeeName        
   ,ca.EndorsementPositionName        
   ,ca.EndorsementEmailAddress        
   ,ca.EndorsementAction        
   ,ca.EndorsementApproveTime        
   ,ca.EndorsementComment        
   ,ca.EndorsementSign        
        
   ,ca.Level4Checked        
   ,ca.Level4EmployeeId        
   ,ca.Level4EmployeeName        
   ,ca.Level4PositionName        
   ,ca.Level4EmailAddress        
   ,ca.Level4Action        
   ,ca.Level4ApproveTime        
   ,ca.Level4Comment        
   ,ca.Level4Sign        
        
   ,ca.CreatedBy        
   ,ca.CreatedByEmployeeCode        
   ,ca.CreatedByName        
   ,ca.CreatedByDeptName        
   ,ca.CreatedByPositionName        
   ,ca.CreatedByJobTitleName        
   ,ca.CreatedBySignPath        
           
FROM  vP01FlexibleWorkingDetail cad         
INNER JOIN vP01FlexibleWorking ca ON cad.FWId = ca.FWId        
INNER JOIN vP01FlexibleWorkingListWorker btt ON btt.FWId = ca.FWId 
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01BusinessTravelClaimListReviewer2]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 2

GO
/****** Object:  View [dbo].[vP01WFHAttendance]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO





CREATE VIEW [dbo].[vP01WFHAttendance]
AS
SELECT ld.ATDId
      ,ld.RequestStatus
      ,ld.WorkYear
      ,ld.IssueDate
      ,ld.Number
      ,ld.NumberCode
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress
      ,emp.SignPath as EmployeeSign
	  ,ld.LocationAddress
	  ,ld.Reason
	  ,ld.CurrentApprover
	  ,ld.CurrentLevel
	  	   --
	   ,curApr.EmployeeName as CurrentApproverEmployeeName
	   ,curApr.PositionName as CurrentApproverPositionName
	   ,curApr.EmailAddress as CurrentApproverEmailAddress
	  --approve
	  ,ld.Level1Checked
	  ,ld.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress
      ,ld.Level1Action
      ,ld.Level1ApproveTime
      ,ld.Level1Comment
	  ,lv1.SignPath as Level1Sign

	  ,ld.Level2Checked
	  ,ld.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress
      ,ld.Level2Action
      ,ld.Level2ApproveTime
      ,ld.Level2Comment
	  ,lv2.SignPath as Level2Sign

	  ,ld.Level3Checked
	  ,ld.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress
	  ,ld.Level3Action
      ,ld.Level3ApproveTime
      ,ld.Level3Comment
	  ,lv3.SignPath as Level3Sign

	  ,ld.EndorsementChecked
	  ,ld.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress
	  ,ld.EndorsementAction
      ,ld.EndorsementApproveTime
      ,ld.EndorsementComment
	  ,IIF(ld.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign

	  ,ld.Level4Checked
	  ,ld.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress
	  ,ld.Level4Action
      ,ld.Level4ApproveTime
      ,ld.Level4Comment
	  ,lv4.SignPath as Level4Sign
	
	--cancel
	  ,ld.Level1CancelChecked
	  ,ld.Level1CancelEmployeeId,clv1.EmployeeName as Level1CancelEmployeeName, clv1.PositionName as Level1CancelPositionName, clv1.EmailAddress as Level1CancelEmailAddress
      ,ld.Level1CancelAction
      ,ld.Level1CancelApproveTime
      ,ld.Level1CancelComment
	  ,clv1.SignPath as Level1CancelSign

	  ,ld.Level2CancelChecked
	  ,ld.Level2CancelEmployeeId,clv2.EmployeeName as Level2CancelEmployeeName, clv2.PositionName as Level2CancelPositionName, clv2.EmailAddress as Level2CancelEmailAddress
      ,ld.Level2CancelAction
      ,ld.Level2CancelApproveTime
      ,ld.Level2CancelComment
	  ,clv2.SignPath as Level2CancelSign

	  ,ld.Level3CancelChecked
	  ,ld.Level3CancelEmployeeId,clv3.EmployeeName as Level3CancelEmployeeName, clv3.PositionName as Level3CancelPositionName, clv3.EmailAddress as Level3CancelEmailAddress
	  ,ld.Level3CancelAction
      ,ld.Level3CancelApproveTime
      ,ld.Level3CancelComment
	  ,clv3.SignPath as Level3CancelSign

	  ,ld.EndorsementCancelChecked
	  ,ld.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress
	  ,ld.EndorsementCancelAction
      ,ld.EndorsementCancelApproveTime
      ,ld.EndorsementCancelComment
	  ,IIF(ld.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign

	  ,ld.Level4CancelChecked
	  ,ld.Level4CancelEmployeeId,clv4.EmployeeName as Level4CancelEmployeeName, clv4.PositionName as Level4CancelPositionName, clv4.EmailAddress as Level4CancelEmailAddress
	  ,ld.Level4CancelAction
      ,ld.Level4CancelApproveTime
      ,ld.Level4CancelComment
	  ,clv4.SignPath as Level4CancelSign
	  
	  ,ld.CancelReason
	  ,ld.CancelTime

	  ,ApplicationName
	  ,CONCAT('/wfh-attendance-approval-',ld.ATDId) as approvalURL
	  ,CONCAT('/wfh-attendance-cancel-request-',ld.ATDId) as cancelURL
	  ,CONCAT('/wfh-attendance-approve-view-',ld.ATDId) as viewURL
	  	  	  
	  ,ld.ManualApprovalFileName
	  ,ld.ManualApprovalFilePath
	  ,ld.ManualApprovalBy
	  ,ld.ManualApprovalAt

      ,ld.Sync
      ,ld.LastSync
      ,ld.IsActive
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode
	  ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName
	  ,ucr.SignPath as CreatedBySignPath
      ,ld.CreatedAt
      ,ld.ModifiedBy
      ,ld.ModifiedAt
FROM P01WFHAttendance ld
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId
LEFT JOIN vP00Employee lv1 ON ld.Level1EmployeeId= lv1.EmployeeId
LEFT JOIN vP00Employee lv2 ON ld.Level2EmployeeId = lv2.EmployeeId
LEFT JOIN vP00Employee lv3 ON ld.Level3EmployeeId = lv3.EmployeeId
LEFT JOIN vP00Employee endo ON ld.EndorsementEmployeeId = endo.EmployeeId
INNER JOIN vP00Employee lv4 ON ld.Level4EmployeeId = lv4.EmployeeId
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId
--cancel
LEFT JOIN vP00Employee clv1 ON ld.Level1CancelEmployeeId= clv1.EmployeeId
LEFT JOIN vP00Employee clv2 ON ld.Level2CancelEmployeeId = clv2.EmployeeId
LEFT JOIN vP00Employee clv3 ON ld.Level3CancelEmployeeId = clv3.EmployeeId
LEFT JOIN vP00Employee cendo ON ld.EndorsementCancelEmployeeId = cendo.EmployeeId
LEFT JOIN vP00Employee clv4 ON ld.Level4CancelEmployeeId = clv4.EmployeeId

LEFT JOIN vP00Employee curApr ON ld.CurrentApprover = curApr.EmployeeId
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListReviewer3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01BusinessTravelClaimListReviewer3]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 3

GO
/****** Object:  View [dbo].[vP01PurchaseRequisition]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
            
            
            
CREATE VIEW [dbo].[vP01PurchaseRequisition]            
AS            
SELECT bt.PRId        
   ,bt.ListEANumber      
   --,bt.EAId, ea.NumberCode as EANumberCode            
      ,bt.RequestStatus            
      ,bt.IssueDate            
      ,bt.Number            
      ,bt.NumberCode            
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress            
   ,emp.SignPath as EmployeeSign            
            
  ,bt.GoodsServices            
  ,bt.Title            
  ,bt.Purpose            
  ,bt.ScopeOfWork            
  ,bt.Recommendation            
  ,bt.BasisOfSelection            
  ,bt.ProcurementMode          
  ,bt.BudgetAvailability            
  ,IIF(bt.BudgetAvailability=1,'Yes','No')as BudgetAvailabilityText            
  ,bt.BudgetType            
  ,bt.TotalBudget            
  ,bt.TotalVND            
  ,bt.ExchRate            
  ,bt.TotalUSD            
  ,bt.RemainingBudget            
  ,bt.Remark            
            
   ,bt.CurrentApprover            
   ,bt.CurrentLevel            
      --            
    ,curApr.EmployeeName as CurrentApproverEmployeeName            
    ,curApr.PositionName as CurrentApproverPositionName            
    ,curApr.EmailAddress as CurrentApproverEmailAddress            
   --approve            
   ,bt.Review1Checked            
   ,bt.Review1EmployeeId,rv1.EmployeeName as Review1EmployeeName, rv1.PositionName as Review1PositionName, rv1.EmailAddress as Review1EmailAddress            
      ,bt.Review1Action            
      ,bt.Review1ApproveTime            
      ,bt.Review1Comment            
   ,IIF(bt.Review1Checked = 1,rv1.SignPath,'') as Review1Sign            
            
   ,bt.Review2Checked            
   ,bt.Review2EmployeeId,rv2.EmployeeName as Review2EmployeeName, rv2.PositionName as Review2PositionName, rv2.EmailAddress as Review2EmailAddress            
      ,bt.Review2Action            
      ,bt.Review2ApproveTime            
      ,bt.Review2Comment            
   ,IIF(bt.Review2Checked = 1,rv2.SignPath,'') as Review2Sign            
            
   ,bt.Review3Checked            
   ,bt.Review3EmployeeId,rv3.EmployeeName as Review3EmployeeName, rv3.PositionName as Review3PositionName, rv3.EmailAddress as Review3EmailAddress            
      ,bt.Review3Action            
      ,bt.Review3ApproveTime            
      ,bt.Review3Comment            
   ,IIF(bt.Review3Checked = 1,rv3.SignPath,'') as Review3Sign            
            
   ,bt.Review4Checked            
   ,bt.Review4EmployeeId,rv4.EmployeeName as Review4EmployeeName, rv4.PositionName as Review4PositionName, rv4.EmailAddress as Review4EmailAddress            
      ,bt.Review4Action            
      ,bt.Review4ApproveTime            
      ,bt.Review4Comment            
   ,IIF(bt.Review4Checked = 1,rv4.SignPath,'') as Review4Sign            
            
   ,bt.VerifierChecked            
   ,bt.VerifierEmployeeId,vrf.EmployeeName as VerifierEmployeeName, vrf.PositionName as VerifierPositionName, vrf.EmailAddress as VerifierEmailAddress            
   ,bt.VerifierAction            
      ,bt.VerifierApproveTime            
      ,bt.VerifierComment            
   ,IIF(bt.VerifierChecked = 1,vrf.SignPath,'') as VerifierSign            
  
   ,bt.ConfirmChecked        
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress        
   ,bt.ConfirmAction        
      ,bt.ConfirmApproveTime        
      ,bt.ConfirmComment        
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign    
     
   ,bt.EndorsementChecked            
   ,bt.EndorsementEmployeeId,endo.EmployeeName as EndorsementEmployeeName, endo.PositionName as EndorsementPositionName, endo.EmailAddress as EndorsementEmailAddress            
   ,bt.EndorsementAction            
      ,bt.EndorsementApproveTime            
      ,bt.EndorsementComment            
   ,IIF(bt.EndorsementChecked = 1,endo.SignPath,'') as EndorsementSign            
            
   ,bt.ApproverChecked            
   ,bt.ApproverEmployeeId,apr.EmployeeName as ApproverEmployeeName, apr.PositionName as ApproverPositionName, apr.EmailAddress as ApproverEmailAddress            
   ,bt.ApproverAction            
      ,bt.ApproverApproveTime            
      ,bt.ApproverComment            
   ,IIF(bt.ApproverChecked = 1,apr.SignPath,'') as ApproverSign            
            
   --cancel            
   ,bt.Review1CancelChecked            
   ,bt.Review1CancelEmployeeId,clrv1.EmployeeName as Review1CancelEmployeeName, clrv1.PositionName as Review1CancelPositionName, clrv1.EmailAddress as Review1CancelEmailAddress            
      ,bt.Review1CancelAction            
      ,bt.Review1CancelApproveTime            
      ,bt.Review1CancelComment            
   ,IIF(bt.Review1CancelChecked = 1,clrv1.SignPath,'') as Review1CancelSign            
            
   ,bt.Review2CancelChecked            
   ,bt.Review2CancelEmployeeId,clrv2.EmployeeName as Review2CancelEmployeeName, clrv2.PositionName as Review2CancelPositionName, clrv2.EmailAddress as Review2CancelEmailAddress            
      ,bt.Review2CancelAction            
      ,bt.Review2CancelApproveTime            
      ,bt.Review2CancelComment            
   ,IIF(bt.Review2CancelChecked = 1,clrv2.SignPath,'') as Review2CancelSign            
            
   ,bt.Review3CancelChecked            
   ,bt.Review3CancelEmployeeId,clrv3.EmployeeName as Review3CancelEmployeeName, clrv3.PositionName as Review3CancelPositionName, clrv3.EmailAddress as Review3CancelEmailAddress            
      ,bt.Review3CancelAction            
      ,bt.Review3CancelApproveTime            
      ,bt.Review3CancelComment            
   ,IIF(bt.Review3CancelChecked = 1,clrv3.SignPath,'') as Review3CancelSign            
            
   ,bt.Review4CancelChecked            
   ,bt.Review4CancelEmployeeId,clrv4.EmployeeName as Review4CancelEmployeeName, clrv4.PositionName as Review4CancelPositionName, clrv4.EmailAddress as Review4CancelEmailAddress            
      ,bt.Review4CancelAction            
      ,bt.Review4CancelApproveTime            
      ,bt.Review4CancelComment            
   ,IIF(bt.Review4CancelChecked = 1,clrv4.SignPath,'') as Review4CancelSign            
            
   ,bt.VerifierCancelChecked            
   ,bt.VerifierCancelEmployeeId,clvrf.EmployeeName as VerifierCancelEmployeeName, clvrf.PositionName as VerifierCancelPositionName, clvrf.EmailAddress as VerifierCancelEmailAddress            
   ,bt.VerifierCancelAction            
      ,bt.VerifierCancelApproveTime            
      ,bt.VerifierCancelComment            
   ,IIF(bt.VerifierCancelChecked = 1,clvrf.SignPath,'') as VerifierCancelSign            
    
  ,bt.ConfirmCancelChecked        
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress        
   ,bt.ConfirmCancelAction        
      ,bt.ConfirmCancelApproveTime        
      ,bt.ConfirmCancelComment        
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign   
  
   ,bt.EndorsementCancelChecked            
   ,bt.EndorsementCancelEmployeeId,cendo.EmployeeName as EndorsementCancelEmployeeName, cendo.PositionName as EndorsementCancelPositionName, cendo.EmailAddress as EndorsementCancelEmailAddress            
   ,bt.EndorsementCancelAction            
      ,bt.EndorsementCancelApproveTime            
      ,bt.EndorsementCancelComment            
   ,IIF(bt.EndorsementCancelChecked = 1,cendo.SignPath,'') as EndorsementCancelSign            
            
   ,bt.ApproverCancelChecked            
   ,bt.ApproverCancelEmployeeId,clapr.EmployeeName as ApproverCancelEmployeeName, clapr.PositionName as ApproverCancelPositionName, clapr.EmailAddress as ApproverCancelEmailAddress            
   ,bt.ApproverCancelAction            
      ,bt.ApproverCancelApproveTime            
      ,bt.ApproverCancelComment            
   ,IIF(bt.ApproverCancelChecked = 1,clapr.SignPath,'') as ApproverCancelSign            
               
   ,bt.CancelReason            
   ,bt.CancelTime            
            
   ,bt.ManualApprovalFileName            
   ,bt.ManualApprovalFilePath            
   ,bt.ManualApprovalBy            
   ,bt.ManualApprovalAt            
            
   ,bt.Paid            
            
   ,bt.ApplicationName            
   ,CONCAT('/purchase-requisition-approval-',bt.PRId) as approvalURL,            
  CONCAT('/purchase-requisition-cancel-request-',bt.PRId) as cancelURL,            
  CONCAT('/purchase-requisition-approve-view-',bt.PRId) as viewURL            
      ,bt.Sync            
      ,bt.LastSync            
      ,bt.IsActive            
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode            
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName            
   ,ucr.SignPath as CreatedBySignPath           
      ,bt.CreatedAt            
      ,bt.ModifiedBy            
      ,bt.ModifiedAt            
   --new2            
             
FROM P01PurchaseRequisition bt            
--INNER JOIN P01ExpenseApproval ea ON bt.EAId = ea.EAId            
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId            
LEFT JOIN vP00Employee rv1 ON bt.Review1EmployeeId= rv1.EmployeeId            
LEFT JOIN vP00Employee rv2 ON bt.Review2EmployeeId = rv2.EmployeeId            
LEFT JOIN vP00Employee rv3 ON bt.Review3EmployeeId= rv3.EmployeeId            
LEFT JOIN vP00Employee rv4 ON bt.Review4EmployeeId = rv4.EmployeeId            
LEFT JOIN vP00Employee vrf ON bt.VerifierEmployeeId = vrf.EmployeeId         
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId    
LEFT JOIN vP00Employee endo ON bt.EndorsementEmployeeId = endo.EmployeeId            
INNER JOIN vP00Employee apr ON bt.ApproverEmployeeId = apr.EmployeeId            
--cancel            
LEFT JOIN vP00Employee clrv1 ON bt.Review1CancelEmployeeId= clrv1.EmployeeId            
LEFT JOIN vP00Employee clrv2 ON bt.Review2CancelEmployeeId = clrv2.EmployeeId            
LEFT JOIN vP00Employee clrv3 ON bt.Review3CancelEmployeeId= clrv3.EmployeeId            
LEFT JOIN vP00Employee clrv4 ON bt.Review4CancelEmployeeId = clrv4.EmployeeId            
LEFT JOIN vP00Employee clvrf ON bt.VerifierCancelEmployeeId = clvrf.EmployeeId     
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId   
LEFT JOIN vP00Employee cendo ON bt.EndorsementCancelEmployeeId = cendo.EmployeeId            
LEFT JOIN vP00Employee clapr ON bt.ApproverCancelEmployeeId = clapr.EmployeeId            
            
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId            
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListReviewer4]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01BusinessTravelClaimListReviewer4]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 4

GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListReviewer5]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01BusinessTravelClaimListReviewer5]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 5

GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListReviewer6]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01BusinessTravelClaimListReviewer6]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 6

GO
/****** Object:  View [dbo].[vP01LeaveDayListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


    
    
CREATE VIEW [dbo].[vP01LeaveDayListConfirm]  
AS    
SELECT *  
FROM vP01ApproverListAL    
WHERE IsActive =1 AND LevelId = 7 
GO
/****** Object:  View [dbo].[vP01OTCListNotYetCL]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

  
      
CREATE VIEW [dbo].[vP01OTCListNotYetCL]      
AS      
SELECT ot.OTCDId      
      ,ot.OTCId      
      ,ot.WorkDate      
      ,ot.StartTime      
      ,ot.EndTime      
	  ,ot.BreakTime      
	  ,ot.WorkingHours      
      ,ot.Reason      
      ,ot.ApplicantRequest   
	  ,ot.NumberOfCL
	  ,ot.Remark 
	  ,ISNULL(ld.TotalLeaveDay,0) as UsedCL
     ,(ot.NumberOfCL - ISNULL(ld.TotalLeaveDay,0)) as RemainCL
	---Employee-----------------      
	   ,ot.OTCode      
	   ,ot.WorkerId      
	   ,ot.WorkerNo      
	   ,ot.WorkerEmployeeId      
	   ,ot.WorkerEmployeeName      
	   ,ot.WorkerDeptName      
	   ,ot.WorkerPositionName      
	   ,ot.WorkerJobTitleName      
   ------------------------------------------      
      ,ot.RequestStatus      
      ,ot.WorkYear      
      ,ot.IssueDate      
      ,ot.Number      
      ,ot.NumberCode          
FROM vP01OvertimeConfirmationListOT ot      
LEFT JOIN 
(      
SELECT ISNULL(OTCode,'') as OTCode, SUM(NumberOfDay) as TotalLeaveDay      
FROM vP01LeaveDaysDetail       
WHERE IsActive = 1 AND LeaveTypeId = 20 AND RequestStatus NOT IN ('Rejected','Canceled')      
GROUP BY OTCode    
) ld ON ot.OTCode = ld.OTCode
WHERE (ot.NumberOfCL - ISNULL(ld.TotalLeaveDay,0)) > 0

GO
/****** Object:  Table [dbo].[P01PurchaseRequisitionCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PurchaseRequisitionCost](
	[PRCostId] [int] IDENTITY(1,1) NOT NULL,
	[PRId] [int] NOT NULL,
	[EAId] [int] NOT NULL,
	[Description] [nvarchar](2000) NULL,
	[Qty] [numeric](18, 2) NULL,
	[UnitPrice] [numeric](18, 2) NULL,
	[ExchangeRate] [numeric](18, 2) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01PurchaseRequisitionCost] PRIMARY KEY CLUSTERED 
(
	[PRCostId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionCost]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01PurchaseRequisitionCost]    
AS    
SELECT tvc.PRCostId    
      ,tvc.PRId    
      ,pr.EmployeeId, pr.RequestStatus, pr.NumberCode as PRNumberCode   
   ,tvc.EAId  
   ,ea.NumberCode as EANumberCode  
      ,tvc.Description    
   ,tvc.Qty    
   ,tvc.UnitPrice    
   ,tvc.ExchangeRate    
   ,(ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) AS Amount    
   ,((ISNULL(tvc.UnitPrice,0) * ISNULL(tvc.Qty,0)) / tvc.ExchangeRate) AS AmountUSD    
    
      ,tvc.IsActive    
      ,tvc.CreatedBy    
      ,tvc.CreatedAt    
      ,tvc.ModifiedBy    
      ,tvc.ModifiedAt    
   ,ROW_NUMBER() OVER(PARTITION BY tvc.PRId ORDER BY tvc.PRCostId) as rowIndex    
FROM P01PurchaseRequisitionCost tvc    
INNER JOIN P01PurchaseRequisition pr ON tvc.PRId = pr.PRId   
INNER JOIN P01ExpenseApproval ea ON tvc.EAId = ea.EAId   
WHERE pr.IsActive = 1 AND tvc.IsActive = 1    
    
    
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01BusinessTravelClaimListVerifier]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 7
GO
/****** Object:  View [dbo].[vP01BusinessTravelListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01BusinessTravelListConfirm]  
AS    
SELECT *     
FROM vP01ApproverListBT    
WHERE IsActive =1 AND LevelId = 6
GO
/****** Object:  Table [dbo].[P01ApproverListFW]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListFW](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListFW] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LevelApproveFW]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveFW](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveFW_LevelId] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListFW]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ApproverListFW]
AS
SELECT ap.Id
--	  ,ap.FormId, fm.FormName, fm.FormName2
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName
      ,ap.LevelId,lv.LevelName
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName
	  ,emp.EmailAddress
      ,ap.IsActive
      ,ap.CreatedBy
      ,ap.CreatedAt
      ,ap.ModifiedBy
      ,ap.ModifiedAt
FROM P01ApproverListFW ap
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId
INNER JOIN P01LevelApproveFW lv ON ap.LevelId = lv.LevelId
GO
/****** Object:  View [dbo].[vP01ListEmployeeGDAssign]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01ListEmployeeGDAssign]    
AS    
SELECT emp.EmployeeId    
      ,emp.EmployeeCode    
      ,emp.EmployeeName    
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName    
   ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize    
   ,emp.JobTitleId, job.JobTitleName    
      ,emp.BirthDate    
      ,emp.GenderId, gd.GenderName    
      ,emp.EmailAddress    
   ,emp.PhoneNumber    
      ,emp.FirstWorkingDate    
   ,emp.ProbationaryEndDate    
      ,emp.EndWorkingDate    
   ,emp.AnnualLeave    
      ,emp.EmployeeNo    
   ,emp.SignPath    
      ,emp.IsActive    
      ,emp.CreatedBy    
      ,emp.CreatedAt    
      ,emp.ModifiedBy    
      ,emp.ModifiedAt    
FROM P00Employee emp    
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId    
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId    
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId    
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId    
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId    
where emp.EmployeeId IN (6)    
    
GO
/****** Object:  Table [dbo].[P01PurchaseRequisitionEvalue]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PurchaseRequisitionEvalue](
	[PREvalueId] [int] IDENTITY(1,1) NOT NULL,
	[PRId] [int] NOT NULL,
	[Suppliers] [nvarchar](2000) NULL,
	[Price] [numeric](18, 2) NULL,
	[ExchangeRate] [numeric](18, 2) NULL,
	[Percen] [numeric](18, 2) NULL,
	[ProcuredAmount] [numeric](18, 2) NULL,
	[IsChoose] [bit] NULL,
	[ProcuredItems] [nvarchar](2000) NULL,
	[Note] [nvarchar](2000) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01PurchaseRequisitionEvalue] PRIMARY KEY CLUSTERED 
(
	[PREvalueId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionEvalue]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01PurchaseRequisitionEvalue]
AS
SELECT tvc.PREvalueId
      ,tvc.PRId, 
	   tv.EmployeeId, tv.RequestStatus
      ,tvc.Suppliers
	  ,tvc.Price
	  ,tvc.Percen
	  ,tvc.ProcuredAmount
	  ,tvc.IsChoose
	  ,IIF(ISNULL(tvc.IsChoose,0) = 1,'Yes','No') as IsChooseText
	  ,tvc.ProcuredItems
	  ,tvc.Note
      ,tvc.IsActive
      ,tvc.CreatedBy
      ,tvc.CreatedAt
      ,tvc.ModifiedBy
      ,tvc.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvc.PRId ORDER BY tvc.PREvalueId) as rowIndex
FROM P01PurchaseRequisitionEvalue tvc
INNER JOIN P01PurchaseRequisition tv ON tvc.PRId = tv.PRId
WHERE tv.IsActive = 1 AND tvc.IsActive = 1

GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
            
CREATE VIEW [dbo].[vP01PurchaseRequisitionPrint]              
AS              
SELECT               
    --cost              
    btc.rowIndex as costrowIndex              
   ,btc.PRCostId as costPRId              
   ,btc.Description as costDescription              
   ,btc.Qty as costQty              
   ,btc.UnitPrice as costUnitPrice              
   ,btc.ExchangeRate as costExchangeRate              
   ,btc.Amount as costAmountVND              
   ,btc.AmountUSD as costAmountUSD              
   ,tt.TotalAmountVND as costTotalAmount              
   ,tt.TotalAmountUSD as costTotalAmountUSD              
                 
   --Evalue              
   ,evl.PREvalueId              
   ,evl.rowIndex as evalueRowIndex                
   ,evl.Suppliers as evalueSuppliers                
   ,evl.Price as evaluePrice                
   ,evl.Percen as evaluePercen                
   ,evl.ProcuredAmount as evalueProcuredAmount              
   ,evl.IsChoose as evalueIsChoose              
   ,evl.IsChooseText as evalueIsChooseText             
   ,evl.ProcuredItems as evalueProcuredItems              
   ,evl.Note as evalueNote               
              
   ---EA-----------------              
   --,bt.EAId              
   --,bt.EANumberCode              
     ,bt.ListEANumber         
   -------              
   ,bt.PRId              
   ,bt.RequestStatus              
   ,bt.IssueDate              
   ,bt.Number              
   ,bt.NumberCode              
   ,bt.EmployeeId              
   ,bt.EmployeeCode              
   ,bt.EmployeeName              
   ,bt.EmployeeSign              
   ,bt.GenderName              
   ,bt.DeptName              
   ,bt.PositionName              
   ,bt.JobTitleName              
   ,bt.EmailAddress              
              
              
   ,bt.GoodsServices              
   ,bt.Title              
   ,bt.Purpose              
   ,bt.ScopeOfWork              
   ,bt.Recommendation              
   ,bt.BasisOfSelection           
   ,bt.ProcurementMode        
   ,bt.BudgetAvailability              
   ,bt.BudgetAvailabilityText              
   ,bt.BudgetType              
   ,bt.TotalBudget              
   ,bt.TotalVND              
   ,bt.ExchRate              
   ,bt.TotalUSD              
   ,bt.RemainingBudget              
   ,bt.Remark              
              
   ,bt.CurrentApprover              
   ,bt.CurrentLevel              
              
   ,bt.Review1Checked              
   ,bt.Review1EmployeeId              
   ,bt.Review1EmployeeName              
   ,bt.Review1PositionName              
   ,bt.Review1EmailAddress              
   ,bt.Review1Action              
   ,bt.Review1ApproveTime              
   ,bt.Review1Comment              
   ,bt.Review1Sign              
              
   ,bt.Review2Checked              
   ,bt.Review2EmployeeId              
   ,bt.Review2EmployeeName              
   ,bt.Review2PositionName              
   ,bt.Review2EmailAddress              
   ,bt.Review2Action              
   ,bt.Review2ApproveTime              
   ,bt.Review2Comment              
   ,bt.Review2Sign              
              
   ,bt.Review3Checked              
   ,bt.Review3EmployeeId              
   ,bt.Review3EmployeeName              
   ,bt.Review3PositionName              
   ,bt.Review3EmailAddress              
   ,bt.Review3Action              
   ,bt.Review3ApproveTime              
   ,bt.Review3Comment              
   ,bt.Review3Sign              
              
   ,bt.Review4Checked              
   ,bt.Review4EmployeeId              
   ,bt.Review4EmployeeName              
   ,bt.Review4PositionName              
   ,bt.Review4EmailAddress              
   ,bt.Review4Action              
   ,bt.Review4ApproveTime              
   ,bt.Review4Comment              
   ,bt.Review4Sign              
              
   ,bt.VerifierChecked              
   ,bt.VerifierEmployeeId              
   ,bt.VerifierEmployeeName              
   ,bt.VerifierPositionName              
   ,bt.VerifierEmailAddress              
   ,bt.VerifierAction           
   ,bt.VerifierApproveTime              
   ,bt.VerifierComment              
   ,bt.VerifierSign              
      
     ,bt.ConfirmChecked    
      ,bt.ConfirmEmployeeId    
      ,bt.ConfirmEmployeeName    
      ,bt.ConfirmPositionName    
      ,bt.ConfirmEmailAddress    
      ,bt.ConfirmAction    
      ,bt.ConfirmApproveTime    
      ,bt.ConfirmComment    
   ,bt.ConfirmSign    
  
   ,bt.EndorsementChecked              
   ,bt.EndorsementEmployeeId           
   ,bt.EndorsementEmployeeName              
   ,bt.EndorsementPositionName              
   ,bt.EndorsementEmailAddress              
   ,bt.EndorsementAction              
   ,bt.EndorsementApproveTime              
   ,bt.EndorsementComment              
   ,bt.EndorsementSign              
              
   ,bt.ApproverChecked              
   ,bt.ApproverEmployeeId              
   ,bt.ApproverEmployeeName              
   ,bt.ApproverPositionName              
   ,bt.ApproverEmailAddress              
   ,bt.ApproverAction              
   ,bt.ApproverApproveTime              
   ,bt.ApproverComment              
   ,bt.ApproverSign              
              
   ,bt.CreatedBy              
   ,bt.CreatedByEmployeeCode              
   ,bt.CreatedByName              
   ,bt.CreatedByDeptName              
   ,bt.CreatedByPositionName              
   ,bt.CreatedByJobTitleName              
   ,bt.CreatedBySignPath              
FROM  vP01PurchaseRequisitionCost btc               
INNER JOIN vP01PurchaseRequisition bt ON btc.PRId = bt.PRId              
INNER JOIN              
(              
 SELECT PRId, SUM( Amount) as TotalAmountVND, SUM( AmountUSD) as TotalAmountUSD              
 FROM vP01PurchaseRequisitionCost              
 WHERE IsActive = 1              
 GROUP BY PRId              
) tt ON btc.PRId = tt.PRId              
INNER JOIN vP01PurchaseRequisitionEvalue evl ON btc.PRId = evl.PRId 
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01BusinessTravelClaimListEndorsement]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 8
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01BusinessTravelClaimListConfirm]   
AS    
SELECT *     
FROM vP01ApproverListBTC    
WHERE IsActive =1 AND LevelId = 10
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE VIEW [dbo].[vP01FlexibleWorkingListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListFW
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01BusinessTravelClaimListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01BusinessTravelClaimListApprover]
AS
SELECT * 
FROM vP01ApproverListBTC
WHERE IsActive =1 AND LevelId = 9
GO
/****** Object:  View [dbo].[vP01ExpenseApprovalListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01ExpenseApprovalListConfirm]   
AS    
SELECT *     
FROM vP01ApproverListEA    
WHERE IsActive =1 AND LevelId = 7 
GO
/****** Object:  Table [dbo].[P03PerformanceEvaluation]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P03PerformanceEvaluation](
	[PEId] [int] IDENTITY(1,1) NOT NULL,
	[ApplicationStatus] [nvarchar](50) NOT NULL,
	[WorkYear] [int] NOT NULL,
	[IssueDate] [smalldatetime] NOT NULL,
	[Number] [int] NULL,
	[NumberCode] [nvarchar](50) NULL,
	[EmployeeId] [int] NOT NULL,
	[EvaluationName] [nvarchar](500) NULL,
	[InformDate] [smalldatetime] NULL,
	[Deadline1] [smalldatetime] NULL,
	[Deadline2] [smalldatetime] NULL,
	[Deadline3] [smalldatetime] NULL,
	[Deadline4] [smalldatetime] NULL,
	[CollectDate] [smalldatetime] NULL,
	[Remark] [nvarchar](500) NULL,
	[ApplicationName] [nvarchar](50) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P03PerformanceEvaluation] PRIMARY KEY CLUSTERED 
(
	[PEId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluation]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
   
CREATE VIEW [dbo].[vP03PerformanceEvaluation]     
AS      
SELECT ld.PEId      
      ,ld.ApplicationStatus      
      ,ld.WorkYear      
      ,ld.IssueDate      
      ,ld.Number      
      ,ld.NumberCode      
      ,ld.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress      
      ,emp.SignPath as EmployeeSign      
      ,EvaluationName  
      ,InformDate  
      ,Deadline1  
      ,Deadline2  
      ,Deadline3  
      ,Deadline4  
      ,CollectDate  
      ,Remark     
    
   ,ApplicationName      
   ,CONCAT('/performance-evaluation-approval-',ld.PEId) as approvalURL      
   ,CONCAT('/performance-evaluation-cancel-request-',ld.PEId) as cancelURL     
   ,CONCAT('/performance-evaluation-approve-view-',ld.PEId) as viewURL          
  
      ,ld.IsActive      
      ,ld.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode      
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName      
   ,ucr.SignPath as CreatedBySignPath      
      ,ld.CreatedAt      
      ,ld.ModifiedBy      
      ,ld.ModifiedAt      
FROM P03PerformanceEvaluation ld      
LEFT JOIN vP00Employee emp ON ld.EmployeeId = emp.EmployeeId          
LEFT JOIN vP00Users ucr ON ld.CreatedBy = ucr.UserId      
      
GO
/****** Object:  View [dbo].[vP01MealMenu]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01MealMenu]        
AS        
SELECT mn.WeekId        
      ,mn.WeekName        
      ,mn.FromDate        
      ,mn.ToDate        
      ,mn.MealKindId, mt.EmployeeTypeName        
      ,mn.FileName        
      ,mn.FilePath        
      ,mn.Remark        
      ,mn.IsActive        
      ,mn.CreatedBy,ucr.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress        
      ,emp.SignPath as EmployeeSign , emp.SiteId, emp.SiteName       
      ,mn.CreatedAt        
      ,mn.ModifiedBy        
      ,mn.ModifiedAt        
FROM dbo.P01MealMenu mn        
INNER JOIN P00EmployeeType mt ON mn.MealKindId = mt.EmployeeTypeId        
LEFT JOIN P00Users ucr ON mn.CreatedBy = ucr.UserId         
LEFT JOIN vP00Employee emp ON ucr.EmployeeId = emp.EmployeeId      
      
      
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01FlexibleWorkingListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListFW
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01OvertimeListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01OvertimeListEndorsement]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOT
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01ExpenseSettlementListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

  
CREATE VIEW [dbo].[vP01ExpenseSettlementListConfirm]    
AS    
SELECT *     
FROM vP01ApproverListES    
WHERE IsActive =1 AND LevelId = 8 
GO
/****** Object:  Table [dbo].[P03PerformanceEvaluationCriteria]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P03PerformanceEvaluationCriteria](
	[PECId] [int] IDENTITY(1,1) NOT NULL,
	[PEEId] [int] NOT NULL,
	[Criteria] [nvarchar](2000) NULL,
	[Level1Score] [float] NULL,
	[Level2Score] [float] NULL,
	[Level3Score] [float] NULL,
	[Level4Score] [float] NULL,
	[Remark] [nvarchar](2000) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P03PerformanceEvaluationCriteria] PRIMARY KEY CLUSTERED 
(
	[PECId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationCriteria]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP03PerformanceEvaluationCriteria]
AS
SELECT [PECId]
      ,[PEEId]
      ,[Criteria]
      ,[Level1Score]
      ,[Level2Score]
      ,[Level3Score]
      ,[Level4Score]
      ,[Remark]
	  ,ROW_NUMBER() OVER(PARTITION BY PEEId ORDER BY PECId) as CrirowIndex 
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
  FROM [dbo].[P03PerformanceEvaluationCriteria]

GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
 
    
    
CREATE VIEW [dbo].[vP01FlexibleWorkingListVerifier]    
AS    
SELECT [Id]    
      ,[DeptId]    
      ,[DeptName]    
      ,[SiteId]    
      ,[SiteName]    
      ,[LevelId]    
      ,[LevelName]    
      ,[EmployeeId]    
      ,[EmployeeName]    
      ,[PositionName]    
      ,[JobTitleName]    
      ,[EmailAddress]    
      ,[IsActive]    
      ,[CreatedBy]    
      ,[CreatedAt]    
      ,[ModifiedBy]    
      ,[ModifiedAt]     
FROM vP01ApproverListFW    
WHERE IsActive =1 AND LevelId = 3    
  
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01FlexibleWorkingListConfirm]    
AS    
SELECT *   
FROM vP01ApproverListFW    
WHERE IsActive =1 AND LevelId = 6 
GO
/****** Object:  Table [dbo].[P03PerformanceEvaluationEmployee]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P03PerformanceEvaluationEmployee](
	[PEEId] [int] IDENTITY(1,1) NOT NULL,
	[PEId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[HiredDate] [smalldatetime] NULL,
	[WorkYear] [int] NULL,
	[LeaderName] [nvarchar](500) NULL,
	[RequestStatus] [nvarchar](50) NOT NULL,
	[CurrentApprover] [int] NULL,
	[CurrentLevel] [int] NOT NULL,
	[InformDate] [smalldatetime] NULL,
	[Deadline1] [smalldatetime] NULL,
	[Level1Checked] [bit] NULL,
	[Level1EmployeeId] [int] NULL,
	[Level1ApproveTime] [datetime] NULL,
	[Level1Comment] [nvarchar](2000) NULL,
	[Deadline2] [smalldatetime] NULL,
	[Level2Checked] [bit] NULL,
	[Level2EmployeeId] [int] NULL,
	[Level2ApproveTime] [datetime] NULL,
	[Level2Comment] [nvarchar](2000) NULL,
	[Level2FinalComment] [nvarchar](2000) NULL,
	[Deadline3] [smalldatetime] NULL,
	[Level3Checked] [bit] NULL,
	[Level3EmployeeId] [int] NULL,
	[Level3ApproveTime] [datetime] NULL,
	[Level3Comment] [nvarchar](2000) NULL,
	[Level3FinalComment] [nvarchar](2000) NULL,
	[Deadline4] [smalldatetime] NULL,
	[Level4Checked] [bit] NULL,
	[Level4EmployeeId] [int] NULL,
	[Level4ApproveTime] [datetime] NULL,
	[Level4Comment] [nvarchar](2000) NULL,
	[Level4FinalComment] [nvarchar](2000) NULL,
	[CollectDate] [smalldatetime] NULL,
	[Remark] [nvarchar](500) NULL,
	[AverageScore] [numeric](18, 2) NULL,
	[Ranking] [nvarchar](50) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P03PerformanceEvaluationEmployee] PRIMARY KEY CLUSTERED 
(
	[PEEId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationEmployee]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
              
CREATE VIEW [dbo].[vP03PerformanceEvaluationEmployee]              
AS              
SELECT pee.PEEId              
      ,pee.PEId              
   --              
   ,pe.EvaluationName              
   ,pe.ApplicationStatus              
   ,pe.NumberCode              
   --     
   ,pee.RequestStatus
   ,pee.EmployeeId              
   ,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.SiteId, emp.SiteName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress            
   ,emp.SignPath as EmployeeSign          
   ,pee.HiredDate    
   ,pee.WorkYear    
   ,pee.LeaderName    
      ,pee.InformDate              
      ,pee.Deadline1                     
      ,pee.Deadline2                  
      ,pee.Deadline3                
      ,pee.Deadline4                 
      ,pee.CollectDate           
   ,pee.AverageScore      
   ,pee.Ranking      
      ,pee.Remark              
    ,pee.CurrentApprover            
    ,pee.CurrentLevel         
        
 ,curApr.EmployeeName as CurrentApproverEmployeeName            
    ,curApr.PositionName as CurrentApproverPositionName            
    ,curApr.EmailAddress as CurrentApproverEmailAddress            
       
	   --final comment
    ,pee.Level2FinalComment
	,pee.Level3FinalComment
	,pee.Level4FinalComment
   --approve            
   ,pee.Level1Checked            
   ,pee.Level1EmployeeId,lv1.EmployeeName as Level1EmployeeName, lv1.PositionName as Level1PositionName, lv1.EmailAddress as Level1EmailAddress            
      --,pee.Level1Action            
      ,pee.Level1ApproveTime            
      ,pee.Level1Comment            
   ,lv1.SignPath as Level1Sign            
            
   ,pee.Level2Checked            
   ,pee.Level2EmployeeId,lv2.EmployeeName as Level2EmployeeName, lv2.PositionName as Level2PositionName, lv2.EmailAddress as Level2EmailAddress            
      --,pee.Level2Action            
      ,pee.Level2ApproveTime            
      ,pee.Level2Comment            
   ,lv2.SignPath as Level2Sign            
            
   ,pee.Level3Checked            
   ,pee.Level3EmployeeId,lv3.EmployeeName as Level3EmployeeName, lv3.PositionName as Level3PositionName, lv3.EmailAddress as Level3EmailAddress            
   --,pee.Level3Action            
      ,pee.Level3ApproveTime            
      ,pee.Level3Comment            
   ,lv3.SignPath as Level3Sign            
               
   ,pee.Level4Checked            
   ,pee.Level4EmployeeId,lv4.EmployeeName as Level4EmployeeName, lv4.PositionName as Level4PositionName, lv4.EmailAddress as Level4EmailAddress            
   --,pee.Level4Action            
      ,pee.Level4ApproveTime            
      ,pee.Level4Comment            
   ,lv4.SignPath as Level4Sign          
        
      ,pee.IsActive              
      ,pee.CreatedBy              
   ,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode            
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName            
   ,ucr.SignPath as CreatedBySignPath          
      ,pee.CreatedAt              
      ,pee.ModifiedBy              
      ,pee.ModifiedAt             
           
FROM P03PerformanceEvaluationEmployee pee              
INNER JOIN P03PerformanceEvaluation pe  ON pee.PEId = pe.PEId              
INNER JOIN vP00Employee emp ON pee.EmployeeId = emp.EmployeeId            
LEFT JOIN vP00Employee lv1 ON pee.Level1EmployeeId= lv1.EmployeeId            
LEFT JOIN vP00Employee lv2 ON pee.Level2EmployeeId = lv2.EmployeeId            
LEFT JOIN vP00Employee lv3 ON pee.Level3EmployeeId = lv3.EmployeeId             
INNER JOIN vP00Employee lv4 ON pee.Level4EmployeeId = lv4.EmployeeId            
LEFT JOIN vP00Users ucr ON pee.CreatedBy = ucr.UserId            
LEFT JOIN vP00Employee curApr ON pee.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListEndorsement]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01FlexibleWorkingListEndorsement]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListFW
WHERE IsActive =1 AND LevelId = 4
GO
/****** Object:  View [dbo].[vP01InternalApprovalConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01InternalApprovalConfirm]    
AS    
SELECT *     
FROM vP01ApproverListIA    
WHERE IsActive =1 AND LevelId = 8 
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationListLeader]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP03PerformanceEvaluationListLeader]      
AS      
SELECT *       
FROM vP00Employee      
WHERE IsActive =1  AND (PositionId = 8 OR EmployeeId IN (15,73,74,75,118,174,176,177))  
GO
/****** Object:  View [dbo].[vP01FlexibleWorkingListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01FlexibleWorkingListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
FROM vP01ApproverListFW
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01InternalMemorandumConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
CREATE VIEW [dbo].[vP01InternalMemorandumConfirm]    
AS    
SELECT *     
FROM vP01ApproverListIM    
WHERE IsActive =1 AND LevelId = 6 
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationListManager]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP03PerformanceEvaluationListManager]      
AS      
SELECT *       
FROM vP00Employee      
WHERE IsActive =1  AND (PositionId = 6 OR EmployeeId IN (15,12))  

GO
/****** Object:  View [dbo].[vP01FlexibleWorkingWorkerDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01FlexibleWorkingWorkerDetail]  
AS  
SELECT dt.FWDId  
      ,dt.FWId, r.WorkYear, r.RequestStatus  
	  ,w.EmployeeId,w.EmployeeCode,w.EmployeeName,w.DeptName,w.PositionName,w.JobTitleName
      ,dt.WorkDate  
	  ,dt.StartTime  
      ,dt.EndTime  
	  ,dt.BreakTime  
	  ,dt.WorkingHours  
	  ,dt.Reason  
	  ,dt.ApplicantRequest  
	  ,dt.Remark  
      ,dt.IsActive  
      ,dt.CreatedBy  
      ,dt.CreatedAt  
      ,dt.ModifiedBy  
      ,dt.ModifiedAt  
FROM vP01FlexibleWorkingDetail dt  
INNER JOIN P01FlexibleWorking r ON dt.FWId = r.FWId  
INNER JOIN vP01FlexibleWorkingListWorker w ON r.FWId = w.FWId
WHERE r.IsActive = 1 AND dt.IsActive = 1  
GO
/****** Object:  View [dbo].[vP01DailyReport]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
                      
CREATE VIEW [dbo].[vP01DailyReport]              
AS              
SELECT bt.DRId              
      ,bt.CId, dc.CategoriesName          
      ,bt.RequestStatus              
      ,bt.IssueDate              
      ,bt.Number              
      ,bt.NumberCode              
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress              
   ,emp.SignPath as EmployeeSign              
              
   ,bt.Subjects              
   ,bt.Contents              
              
                 
   ,bt.CurrentApprover              
   ,bt.CurrentLevel              
       --              
    ,curApr.EmployeeName as CurrentApproverEmployeeName              
    ,curApr.PositionName as CurrentApproverPositionName              
    ,curApr.EmailAddress as CurrentApproverEmailAddress              
   --approve              
   ,bt.Reviewer1Checked              
   ,bt.Reviewer1EmployeeId,rv1.EmployeeName as Reviewer1EmployeeName, rv1.PositionName as Reviewer1PositionName, rv1.EmailAddress as Reviewer1EmailAddress              
      ,bt.Reviewer1Action              
      ,bt.Reviewer1ApproveTime              
      ,bt.Reviewer1Comment              
   ,IIF(bt.Reviewer1Checked = 1,rv1.SignPath,'') as Reviewer1Sign              
                
   ,bt.Reviewer2Checked              
   ,bt.Reviewer2EmployeeId,rv2.EmployeeName as Reviewer2EmployeeName, rv2.PositionName as Reviewer2PositionName, rv2.EmailAddress as Reviewer2EmailAddress              
      ,bt.Reviewer2Action              
      ,bt.Reviewer2ApproveTime              
      ,bt.Reviewer2Comment              
   ,IIF(bt.Reviewer2Checked = 1,rv2.SignPath,'') as Reviewer2Sign              
                 
   ,bt.Reviewer3Checked              
   ,bt.Reviewer3EmployeeId,rv3.EmployeeName as Reviewer3EmployeeName, rv3.PositionName as Reviewer3PositionName, rv3.EmailAddress as Reviewer3EmailAddress              
      ,bt.Reviewer3Action              
      ,bt.Reviewer3ApproveTime              
      ,bt.Reviewer3Comment              
   ,IIF(bt.Reviewer3Checked = 1,rv3.SignPath,'') as Reviewer3Sign              
                 
   ,bt.Reviewer4Checked              
   ,bt.Reviewer4EmployeeId,rv4.EmployeeName as Reviewer4EmployeeName, rv4.PositionName as Reviewer4PositionName, rv4.EmailAddress as Reviewer4EmailAddress              
      ,bt.Reviewer4Action              
      ,bt.Reviewer4ApproveTime              
      ,bt.Reviewer4Comment              
   ,IIF(bt.Reviewer4Checked = 1,rv4.SignPath,'') as Reviewer4Sign              
                 
   ,bt.ApproverChecked              
   ,bt.ApproverEmployeeId,rv5.EmployeeName as ApproverEmployeeName, rv5.PositionName as ApproverPositionName, rv5.EmailAddress as ApproverEmailAddress              
      ,bt.ApproverAction              
      ,bt.ApproverApproveTime              
      ,bt.ApproverComment              
   ,IIF(bt.ApproverChecked = 1,rv5.SignPath,'') as ApproverSign              
                
  --,bt.Verifier1Checked              
  -- ,bt.Verifier1EmployeeId,vrf.EmployeeName as Verifier1EmployeeName, vrf.PositionName as Verifier1PositionName, vrf.EmailAddress as Verifier1EmailAddress              
  -- ,bt.Verifier1Action              
  --    ,bt.Verifier1ApproveTime              
  --    ,bt.Verifier1Comment              
  -- ,IIF(bt.Verifier1Checked = 1,vrf.SignPath,'') as Verifier1Sign              
                
                
  --cancel              
   ,bt.Reviewer1CancelChecked              
   ,bt.Reviewer1CancelEmployeeId,clrv1.EmployeeName as Reviewer1CancelEmployeeName, clrv1.PositionName as Reviewer1CancelPositionName, clrv1.EmailAddress as Reviewer1CancelEmailAddress              
      ,bt.Reviewer1CancelAction              
      ,bt.Reviewer1CancelApproveTime              
      ,bt.Reviewer1CancelComment              
   ,IIF(bt.Reviewer1CancelChecked = 1,clrv1.SignPath,'') as Reviewer1CancelSign              
                
  ,bt.Reviewer2CancelChecked              
   ,bt.Reviewer2CancelEmployeeId,clrv2.EmployeeName as Reviewer2CancelEmployeeName, clrv2.PositionName as Reviewer2CancelPositionName, clrv2.EmailAddress as Reviewer2CancelEmailAddress              
      ,bt.Reviewer2CancelAction              
      ,bt.Reviewer2CancelApproveTime              
      ,bt.Reviewer2CancelComment              
   ,IIF(bt.Reviewer2CancelChecked = 1,clrv2.SignPath,'') as Reviewer2CancelSign              
                
  ,bt.Reviewer3CancelChecked             
   ,bt.Reviewer3CancelEmployeeId,clrv3.EmployeeName as Reviewer3CancelEmployeeName, clrv3.PositionName as Reviewer3CancelPositionName, clrv3.EmailAddress as Reviewer3CancelEmailAddress              
      ,bt.Reviewer3CancelAction              
      ,bt.Reviewer3CancelApproveTime              
      ,bt.Reviewer3CancelComment              
   ,IIF(bt.Reviewer3CancelChecked = 1,clrv3.SignPath,'') as Reviewer3CancelSign              
                 
   ,bt.Reviewer4CancelChecked              
   ,bt.Reviewer4CancelEmployeeId,clrv4.EmployeeName as Reviewer4CancelEmployeeName, clrv4.PositionName as Reviewer4CancelPositionName, clrv4.EmailAddress as Reviewer4CancelEmailAddress              
      ,bt.Reviewer4CancelAction              
      ,bt.Reviewer4CancelApproveTime              
      ,bt.Reviewer4CancelComment              
   ,IIF(bt.Reviewer4CancelChecked = 1,clrv4.SignPath,'') as Reviewer4CancelSign              
                 
   ,bt.ApproverCancelChecked              
   ,bt.ApproverCancelEmployeeId,clrv5.EmployeeName as ApproverCancelEmployeeName, clrv5.PositionName as ApproverCancelPositionName, clrv5.EmailAddress as ApproverCancelEmailAddress              
      ,bt.ApproverCancelAction              
      ,bt.ApproverCancelApproveTime              
      ,bt.ApproverCancelComment              
   ,IIF(bt.ApproverCancelChecked = 1,clrv5.SignPath,'') as ApproverCancelSign              
                
   ,bt.CancelReason              
   ,bt.CancelTime              
              
                 
   ,CONCAT(bt.ApplicationName,' (',dc.CategoriesName, ')') as ApplicationName             
   ,CONCAT('/daily-report-approval-',DRId) as approvalURL,              
  CONCAT('/daily-report-cancel-request-',DRId) as cancelURL,              
  CONCAT('/daily-report-approve-view-',DRId) as viewURL              
                
   ,bt.ManualApprovalFileName              
   ,bt.ManualApprovalFilePath              
   ,bt.ManualApprovalBy              
   ,bt.ManualApprovalAt              
              
      ,bt.IsActive              
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode              
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName              
   ,ucr.SignPath as CreatedBySignPath              
      ,bt.CreatedAt              
      ,bt.ModifiedBy              
      ,bt.ModifiedAt              
   --new2              
               
FROM P01DailyReport bt            
INNER JOIN P01DailyReportCategories dc ON bt.CId = dc.CId    
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId              
            
LEFT JOIN vP00Employee rv1 ON bt.Reviewer1EmployeeId= rv1.EmployeeId              
LEFT JOIN vP00Employee rv2 ON bt.Reviewer2EmployeeId = rv2.EmployeeId              
LEFT JOIN vP00Employee rv3 ON bt.Reviewer3EmployeeId= rv3.EmployeeId              
LEFT JOIN vP00Employee rv4 ON bt.Reviewer4EmployeeId = rv4.EmployeeId              
LEFT JOIN vP00Employee rv5 ON bt.ApproverEmployeeId = rv5.EmployeeId              
           
--cancel              
LEFT JOIN vP00Employee clrv1 ON bt.Reviewer1CancelEmployeeId= clrv1.EmployeeId              
LEFT JOIN vP00Employee clrv2 ON bt.Reviewer2CancelEmployeeId = clrv2.EmployeeId              
LEFT JOIN vP00Employee clrv3 ON bt.Reviewer3CancelEmployeeId= clrv3.EmployeeId              
LEFT JOIN vP00Employee clrv4 ON bt.Reviewer4CancelEmployeeId = clrv4.EmployeeId              
LEFT JOIN vP00Employee clrv5 ON bt.ApproverCancelEmployeeId = clrv5.EmployeeId               
              
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId              
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01OvertimeListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
    
    
CREATE VIEW [dbo].[vP01OvertimeListConfirm]    
AS    
SELECT *     
FROM vP01ApproverListOT    
WHERE IsActive =1 AND LevelId = 6 
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationListReviewer]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP03PerformanceEvaluationListReviewer]    
AS    
SELECT *     
FROM vP00Employee    
WHERE IsActive =1  AND (PositionId IN (4,5) OR EmployeeId IN (15))
GO
/****** Object:  View [dbo].[vP01DailyReportPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
          
CREATE VIEW [dbo].[vP01DailyReportPrint]          
AS          
SELECT           
    im.DRId          
   ,im.CId    
   ,im.CategoriesName  
      ,im.RequestStatus          
      ,im.IssueDate          
      ,im.Number          
      ,im.NumberCode          
      ,im.EmployeeId          
      ,im.EmployeeCode          
      ,im.EmployeeName          
   ,im.EmployeeSign          
      ,im.GenderName          
      ,im.DeptName          
      ,im.PositionName          
   ,im.JobTitleName          
      ,im.EmailAddress          
          
   ,im.Subjects          
   --,im.CheckInformation          
   --,im.CheckReply          
   --,im.CheckReview          
   --,im.CheckAction          
   --,im.CheckApproval          
   ,im.Contents          
          
      ,im.CurrentApprover          
      ,im.CurrentLevel          
          
      ,im.Reviewer1Checked          
      ,im.Reviewer1EmployeeId          
      ,im.Reviewer1EmployeeName          
      ,im.Reviewer1PositionName          
      ,im.Reviewer1EmailAddress          
      ,im.Reviewer1Action          
      ,im.Reviewer1ApproveTime          
      ,im.Reviewer1Comment          
   ,im.Reviewer1Sign          
          
      ,im.Reviewer2Checked          
      ,im.Reviewer2EmployeeId          
      ,im.Reviewer2EmployeeName          
      ,im.Reviewer2PositionName          
      ,im.Reviewer2EmailAddress          
      ,im.Reviewer2Action          
      ,im.Reviewer2ApproveTime          
      ,im.Reviewer2Comment          
   ,im.Reviewer2Sign          
          
      ,im.Reviewer3Checked          
      ,im.Reviewer3EmployeeId          
      ,im.Reviewer3EmployeeName          
      ,im.Reviewer3PositionName          
      ,im.Reviewer3EmailAddress          
      ,im.Reviewer3Action          
      ,im.Reviewer3ApproveTime          
      ,im.Reviewer3Comment          
   ,im.Reviewer3Sign          
          
   ,im.Reviewer4Checked          
      ,im.Reviewer4EmployeeId          
      ,im.Reviewer4EmployeeName          
      ,im.Reviewer4PositionName          
      ,im.Reviewer4EmailAddress          
      ,im.Reviewer4Action          
      ,im.Reviewer4ApproveTime          
      ,im.Reviewer4Comment          
   ,im.Reviewer4Sign          
          
   ,im.ApproverChecked          
      ,im.ApproverEmployeeId          
      ,im.ApproverEmployeeName          
      ,im.ApproverPositionName          
      ,im.ApproverEmailAddress          
      ,im.ApproverAction          
      ,im.ApproverApproveTime          
      ,im.ApproverComment          
   ,im.ApproverSign          
          
   ,im.CreatedBy          
   ,im.CreatedByEmployeeCode          
   ,im.CreatedByName          
   ,im.CreatedByDeptName          
   ,im.CreatedByPositionName          
   ,im.CreatedByJobTitleName          
   ,im.CreatedBySignPath          
            
FROM vP01DailyReport im 
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01OvertimeConfirmationListConfirm]    
AS    
SELECT *  
FROM vP01ApproverListOTC    
WHERE IsActive =1 AND LevelId = 6 
GO
/****** Object:  Table [dbo].[P03PerformanceEvaluationTask]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P03PerformanceEvaluationTask](
	[PETId] [int] IDENTITY(1,1) NOT NULL,
	[PEEId] [int] NOT NULL,
	[KeyJob] [nvarchar](2000) NULL,
	[Level1Score] [float] NULL,
	[Level2Score] [float] NULL,
	[Level3Score] [float] NULL,
	[Level4Score] [float] NULL,
	[Remark] [nvarchar](2000) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P03PerformanceEvaluationTask] PRIMARY KEY CLUSTERED 
(
	[PETId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationSummary]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP03PerformanceEvaluationSummary]        
AS        
SELECT emp.PEEId        
      ,emp.PEId        
      ,emp.EvaluationName        
        
      ,emp.EmployeeCode        
      ,emp.EmployeeName        
      ,emp.GenderName        
      ,emp.SiteName        
      ,emp.DeptName        
      ,emp.PositionName        
      ,emp.JobTitleName        
        
      ,emp.HiredDate        
      ,emp.WorkYear        
      ,emp.LeaderName        
      ,emp.InformDate        
      ,emp.Deadline1        
      ,emp.Deadline2        
      ,emp.Deadline3        
      ,emp.Deadline4        
      ,emp.CollectDate        
        
   ,st.JobLevel1Avg        
   ,st.JobLevel2Avg        
   ,st.JobLevel3Avg        
   ,st.JobLevel4Avg        
        
   ,sc.CriteriaLevel1Avg        
   ,sc.CriteriaLevel2Avg        
   ,sc.CriteriaLevel3Avg        
   ,sc.CriteriaLevel4Avg        
        
      ,emp.Level2FinalComment        
      ,emp.Level3FinalComment        
      ,emp.Level4FinalComment        
       
 --,ROW_NUMBER() OVER(ORDER BY SiteId, DeptId,  EmployeeNo) as rowIndex        
   ,ROW_NUMBER() OVER(PARTITION BY emp.PEId ORDER BY emp.PEEId) as rowIndex       
FROM dbo.vP03PerformanceEvaluationEmployee emp        
        
LEFT JOIN (        
  select PEEId, CAST(AVG(CAST(Level1Score AS FLOAT)) as NUMERIC(10,2)) as JobLevel1Avg,        
  CAST(AVG(CAST(Level2Score AS FLOAT)) as NUMERIC(10,2)) as JobLevel2Avg,        
  CAST(AVG(CAST(Level3Score AS FLOAT)) as NUMERIC(10,2)) as JobLevel3Avg,        
  CAST(AVG(CAST(Level4Score AS FLOAT)) as NUMERIC(10,2)) as JobLevel4Avg        
 from P03PerformanceEvaluationTask    
 GROUP BY PEEId) st ON emp.PEEId = st.PEEId        
LEFT JOIN (        
 select PEEId, CAST(AVG(CAST(Level1Score AS FLOAT)) as NUMERIC(10,2)) as CriteriaLevel1Avg,        
  CAST(AVG(CAST(Level2Score AS FLOAT)) as NUMERIC(10,2)) as CriteriaLevel2Avg,        
  CAST(AVG(CAST(Level3Score AS FLOAT)) as NUMERIC(10,2)) as CriteriaLevel3Avg,        
  CAST(AVG(CAST(Level4Score AS FLOAT)) as NUMERIC(10,2)) as CriteriaLevel4Avg        
 from   P03PerformanceEvaluationCriteria      
 GROUP BY PEEId        
 ) sc ON emp.PEEId = sc.PEEId        
        
GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationTask]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP03PerformanceEvaluationTask]
AS
SELECT [PETId]
      ,[PEEId]
      ,[KeyJob]
      ,[Level1Score]
      ,[Level2Score]
      ,[Level3Score]
      ,[Level4Score]
      ,[Remark]
	  ,ROW_NUMBER() OVER(PARTITION BY PEEId ORDER BY PETId) as JobrowIndex 
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
  FROM [dbo].[P03PerformanceEvaluationTask]

GO
/****** Object:  View [dbo].[vP03PerformanceEvaluationPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE VIEW [dbo].[vP03PerformanceEvaluationPrint]  
AS  
SELECT emp.PEEId  
      ,emp.PEId  
      ,emp.EvaluationName  
      ,emp.ApplicationStatus  
      ,emp.NumberCode  
      ,emp.RequestStatus  
      ,emp.EmployeeId  
      ,emp.EmployeeCode  
      ,emp.EmployeeName  
      ,emp.GenderName  
      ,emp.SiteId  
      ,emp.SiteName  
      ,emp.DeptName  
      ,emp.PositionName  
      ,emp.JobTitleName  
      ,emp.EmailAddress  
      ,emp.EmployeeSign  
      ,emp.HiredDate  
      ,emp.WorkYear  
      ,emp.LeaderName  
      ,emp.InformDate  
      ,emp.Deadline1  
      ,emp.Deadline2  
      ,emp.Deadline3  
      ,emp.Deadline4  
      ,emp.CollectDate  
      ,emp.AverageScore  
      ,emp.Ranking  
      ,emp.Remark  
  
   ,t.JobrowIndex    
   ,t.PETId as PETId  
   ,t.KeyJob as JobKeyJob  
   ,t.Level1Score as JobLevel1Score  
   ,t.Level2Score as JobLevel2Score  
   ,t.Level3Score as JobLevel3Score  
   ,t.Level4Score as JobLevel4Score  
   ,t.Remark as JobRemark  
  
   ,c.CrirowIndex   
   ,c.PECId as PECId  
   ,c.Criteria as CriCriteria  
   ,c.Level1Score as CriLevel1Score  
   ,c.Level2Score as CriLevel2Score  
   ,c.Level3Score as CriLevel3Score  
   ,c.Level4Score as CriLevel4Score  
   ,c.Remark as CriRemark  
  
  ,s.JobLevel1Avg
  ,s.JobLevel2Avg
  ,s.JobLevel3Avg
  ,s.JobLevel4Avg

  ,s.CriteriaLevel1Avg
  ,s.CriteriaLevel2Avg
  ,s.CriteriaLevel3Avg
  ,s.CriteriaLevel4Avg


      ,emp.CurrentApprover  
      ,emp.CurrentLevel  
      ,emp.CurrentApproverEmployeeName  
      ,emp.CurrentApproverPositionName  
      ,emp.CurrentApproverEmailAddress  
      ,emp.Level2FinalComment  
      ,emp.Level3FinalComment  
      ,emp.Level4FinalComment  
      ,emp.Level1Checked  
      ,emp.Level1EmployeeId  
      ,emp.Level1EmployeeName  
      ,emp.Level1PositionName  
      ,emp.Level1EmailAddress  
      ,emp.Level1ApproveTime  
      ,emp.Level1Comment  
      ,emp.Level1Sign  
      ,emp.Level2Checked  
      ,emp.Level2EmployeeId  
      ,emp.Level2EmployeeName  
      ,emp.Level2PositionName  
      ,emp.Level2EmailAddress  
      ,emp.Level2ApproveTime  
      ,emp.Level2Comment  
      ,emp.Level2Sign  
      ,emp.Level3Checked  
      ,emp.Level3EmployeeId  
      ,emp.Level3EmployeeName  
      ,emp.Level3PositionName  
      ,emp.Level3EmailAddress  
      ,emp.Level3ApproveTime  
      ,emp.Level3Comment  
      ,emp.Level3Sign  
      ,emp.Level4Checked  
      ,emp.Level4EmployeeId  
      ,emp.Level4EmployeeName  
      ,emp.Level4PositionName  
      ,emp.Level4EmailAddress  
      ,emp.Level4ApproveTime  
      ,emp.Level4Comment  
      ,emp.Level4Sign  
      ,emp.IsActive  
      ,emp.CreatedBy  
      ,emp.CreatedByName  
      ,emp.CreatedByEmployeeCode  
      ,emp.CreatedByDeptName  
      ,emp.CreatedByPositionName  
      ,emp.CreatedByJobTitleName  
      ,emp.CreatedBySignPath  
      ,emp.CreatedAt  
      ,emp.ModifiedBy  
      ,emp.ModifiedAt  
  
    
  
 FROM vP03PerformanceEvaluationEmployee emp  
 LEFT JOIN vP03PerformanceEvaluationTask t ON emp.PEEId = t.PEEId  
 LEFT JOIN vP03PerformanceEvaluationCriteria c ON emp.PEEId = c.PEEId  
 LEFT JOIN vP03PerformanceEvaluationSummary s ON emp.PEEId = s.PEEId   
  
  
GO
/****** Object:  View [dbo].[vP01OvertimeConfirmationListVerifier]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01OvertimeConfirmationListVerifier]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOTC
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01CarArrangementListReviewer3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01CarArrangementListReviewer3]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListCA
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  View [dbo].[vP01DailyReportApprover1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01DailyReportApprover1]     
AS      
SELECT *       
FROM vP01ApproverListDR      
WHERE IsActive =1 AND LevelId = 1 

GO
/****** Object:  View [dbo].[vP01PurchaseRequisitionListConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01PurchaseRequisitionListConfirm]    
AS    
SELECT *     
FROM vP01ApproverListPR    
WHERE IsActive =1 AND LevelId = 7
GO
/****** Object:  View [dbo].[vP01DailyReportApprover2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01DailyReportApprover2]     
AS      
SELECT *       
FROM vP01ApproverListDR      
WHERE IsActive =1 AND LevelId = 2

GO
/****** Object:  View [dbo].[vP01OvertimeListApprover]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01OvertimeListApprover]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt]
FROM vP01ApproverListOT
WHERE IsActive =1 AND LevelId = 5
GO
/****** Object:  View [dbo].[vP01DailyReportApprover3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01DailyReportApprover3]     
AS      
SELECT *       
FROM vP01ApproverListDR      
WHERE IsActive =1 AND LevelId = 3
GO
/****** Object:  Table [dbo].[P02Driver]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02Driver](
	[DriverId] [int] IDENTITY(1,1) NOT NULL,
	[DriverCode] [nvarchar](30) NOT NULL,
	[DriverName] [nvarchar](100) NOT NULL,
	[BirthDate] [datetime] NULL,
	[GenderId] [int] NULL,
	[EmailAddress] [nvarchar](100) NOT NULL,
	[PhoneNumber] [nvarchar](50) NULL,
	[Address] [nvarchar](50) NULL,
	[FirstWorkingDate] [datetime] NULL,
	[ProbationaryEndDate] [datetime] NULL,
	[EndWorkingDate] [datetime] NULL,
	[Remark] [nvarchar](500) NULL,
	[DriverNo] [int] NULL,
	[SignPath] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P02Driver] PRIMARY KEY CLUSTERED 
(
	[DriverId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P02Drive__0BF84B47550D916F] UNIQUE NONCLUSTERED 
(
	[DriverCode] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P02Car]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02Car](
	[CarId] [int] IDENTITY(1,1) NOT NULL,
	[CarCode] [nvarchar](30) NOT NULL,
	[BKS] [nvarchar](100) NOT NULL,
	[DriverId] [int] NULL,
	[CarTypeId] [int] NULL,
	[MaxCapacity] [int] NULL,
	[UseCapacity] [int] NULL,
	[StartUseDate] [datetime] NULL,
	[EndUseDate] [datetime] NULL,
	[Remark] [nvarchar](500) NULL,
	[CarNo] [int] NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P02Cars] PRIMARY KEY CLUSTERED 
(
	[CarId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P02Cars__9B9A686AB36D4601] UNIQUE NONCLUSTERED 
(
	[CarCode] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP02Car]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP02Car] 
AS
SELECT ca.CarId
      ,ca.CarCode
      ,ca.BKS
      ,ca.DriverId

	  ,drv.DriverCode
	  ,drv.DriverName
	  ,drv.PhoneNumber as DriverPhoneNumber
	  ,drv.EmailAddress as DriverEmailAddress
	  ,drv.Address as DriverAddress
	  ,drv.Remark as DriverRemark

      ,ca.CarTypeId
	  ,emtp.EmployeeTypeName as CarTypeName
	  ,emtp.EmployeeTypeName2 as CarTypeName2
	  ,emtp.Remark as CarTypeRemark

      ,ca.MaxCapacity
      ,ca.UseCapacity
      ,ca.StartUseDate
      ,ca.EndUseDate
      ,ca.Remark
      ,ca.CarNo
      ,ca.IsActive
      ,ca.CreatedBy
      ,ca.CreatedAt
      ,ca.ModifiedBy
      ,ca.ModifiedAt
FROM dbo.P02Car ca
INNER JOIN P02Driver drv ON ca.DriverId = drv.DriverId  
INNER JOIN P00EmployeeType emtp ON ca.CarTypeId = emtp.EmployeeTypeId
GO
/****** Object:  View [dbo].[vP01OvertimeListReviewer1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01OvertimeListReviewer1]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOT
WHERE IsActive =1 AND LevelId = 1
GO
/****** Object:  View [dbo].[vP01DailyReportApprover4]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01DailyReportApprover4]     
AS      
SELECT *       
FROM vP01ApproverListDR      
WHERE IsActive =1 AND LevelId = 4

GO
/****** Object:  View [dbo].[vP00ListLeader]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP00ListLeader]  
AS  
SELECT emp.EmployeeId  
      ,emp.EmployeeCode  
      ,emp.EmployeeName  
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName  
   ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize  
   ,emp.JobTitleId, job.JobTitleName  
      ,emp.BirthDate  
      ,emp.GenderId, gd.GenderName  
      ,emp.EmailAddress  
   ,emp.PhoneNumber  
      ,emp.FirstWorkingDate  
      ,emp.EndWorkingDate  
   ,emp.AnnualLeave  
      ,emp.EmployeeNo  
   ,emp.SignPath  
      ,emp.IsActive  
      ,emp.CreatedBy  
      ,emp.CreatedAt  
      ,emp.ModifiedBy  
      ,emp.ModifiedAt  
FROM P00Employee emp  
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId  
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId  
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId  
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId  
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId  
WHERE emp.PositionId IN (8)  
  
  
GO
/****** Object:  View [dbo].[vP01OvertimeListReviewer2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01OvertimeListReviewer2]
AS
SELECT [Id]
      ,[DeptId]
      ,[DeptName]
      ,[SiteId]
      ,[SiteName]
      ,[LevelId]
      ,[LevelName]
      ,[EmployeeId]
      ,[EmployeeName]
      ,[PositionName]
      ,[JobTitleName]
      ,[EmailAddress]
      ,[IsActive]
      ,[CreatedBy]
      ,[CreatedAt]
      ,[ModifiedBy]
      ,[ModifiedAt] 
FROM vP01ApproverListOT
WHERE IsActive =1 AND LevelId = 2
GO
/****** Object:  View [dbo].[vP01DailyReportApprover5]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01DailyReportApprover5]     
AS      
SELECT *       
FROM vP01ApproverListDR      
WHERE IsActive =1 AND LevelId = 5

GO
/****** Object:  Table [dbo].[P01OfficialTripTraveler]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OfficialTripTraveler](
	[TravelerId] [int] IDENTITY(1,1) NOT NULL,
	[OFTId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01P01OfficialTripTraveler_BTTravelerId] PRIMARY KEY CLUSTERED 
(
	[TravelerId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01OfficialTripTraveler]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE   VIEW [dbo].[vP01OfficialTripTraveler]
AS
SELECT tvl.TravelerId
      ,tvl.OFTId
	  ,tvl.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.DeptName, emp.PositionName, emp.JobTitleName
      ,tvl.IsActive
      ,tvl.CreatedBy
      ,tvl.CreatedAt
      ,tvl.ModifiedBy
      ,tvl.ModifiedAt
	  ,ROW_NUMBER() OVER(PARTITION BY tvl.OFTId ORDER BY tvl.TravelerId) as rowIndex
FROM P01OfficialTripTraveler tvl
INNER JOIN P01OfficialTrip tv ON tvl.OFTId = tv.OFTId
INNER JOIN vP00Employee emp ON tvl.EmployeeId = emp.EmployeeId
WHERE tv.IsActive = 1 AND tvl.IsActive = 1

GO
/****** Object:  Table [dbo].[P01MealRegistrationAdd]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealRegistrationAdd](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[SiteId] [int] NULL,
	[WorkDate] [smalldatetime] NOT NULL,
	[MealKindId] [int] NOT NULL,
	[EBRMealTypeId] [int] NULL,
	[EBRMealPlaceId] [int] NULL,
	[EBRMealQty] [int] NULL,
	[BRMealTypeId] [int] NULL,
	[BRMealPlaceId] [int] NULL,
	[BRMealQty] [int] NULL,
	[LUMealTypeId] [int] NULL,
	[LUMealPlaceId] [int] NULL,
	[LUMealQty] [int] NULL,
	[DIMealTypeId] [int] NULL,
	[DIMealPlaceId] [int] NULL,
	[DIMealQty] [int] NULL,
	[EXMealTypeId] [int] NULL,
	[EXMealPlaceId] [int] NULL,
	[EXMealQty] [int] NULL,
	[WorkShiftId] [int] NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealRegistrationAdd] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01MealR__2A0A75319CC889CC] UNIQUE NONCLUSTERED 
(
	[WorkDate] ASC,
	[MealKindId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01MealRegistrationAdd]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
             
CREATE VIEW [dbo].[vP01MealRegistrationAdd]                    
AS                    
SELECT dt.Id                  
  ,dt.SiteId, emp.SiteName            
    --  ,dt.EmployeeId, emp.EmployeeName, emp.EmployeeCode, emp.SiteName, emp.EmployeeTypeName                    
      ,dt.WorkDate                    
   ,dt.MealKindId, mt.EmployeeTypeName as MealKindName                
      ,dt.BRMealTypeId, brt.MealTypeName as BRMealTypeName, brt.MealTypeNameVN as BRMealTypeNameVN                    
      ,dt.BRMealPlaceId, brp.MealPlaceName as BRMealPlaceName, brp.MealPlaceNameVN as BRMealPlaceNameVN, ISNULL(brp.MealPlaceName2,'') as BRMealPlaceCode                    
   ,dt.BRMealQty              
      ,dt.LUMealTypeId, lut.MealTypeName as LUMealTypeName , lut.MealTypeNameVN as LUMealTypeNameVN                    
      ,dt.LUMealPlaceId, lup.MealPlaceName as LUMealPlaceName, lup.MealPlaceNameVN as LUMealPlaceNameVN, ISNULL(lup.MealPlaceName2,'') as LUMealPlaceCode                   
   ,dt.LUMealQty              
      ,dt.DIMealTypeId, dit.MealTypeName as DIMealTypeName , dit.MealTypeNameVN as DIMealTypeNameVN                    
      ,dt.DIMealPlaceId, dip.MealPlaceName as DIMealPlaceName, dip.MealPlaceNameVN as DIMealPlaceNameVN , ISNULL(dip.MealPlaceName2,'') as DIMealPlaceCode                  
   ,dt.DIMealQty              
      ,dt.EXMealTypeId, ext.MealTypeName as EXMealTypeName, ext.MealTypeNameVN as EXMealTypeNameVN                        
      ,dt.EXMealPlaceId, expl.MealPlaceName as EXMealPlaceName, expl.MealPlaceNameVN as EXMealPlaceNameVN , ISNULL(expl.MealPlaceName2,'') as EXMealPlaceCode                   
   ,dt.EXMealQty              
   ,(dt.BRMealQty + dt.LUMealQty + dt.DIMealQty + dt.EXMealQty) as TotalQty              
        
      ,dt.EBRMealTypeId, brte1.MealTypeName as EBRMealTypeName, brte1.MealTypeNameVN as EBRMealTypeNameVN                          
      ,dt.EBRMealPlaceId, brpe1.MealPlaceName as EBRMealPlaceName, brpe1.MealPlaceNameVN as EBRMealPlaceNameVN, ISNULL(brpe1.MealPlaceName2,'') as EBRMealPlaceCode            
      ,dt.EBRMealQty              
       
  ,dt.WorkShiftId, ws.WorkShiftName                    
      ,dt.Remark                    
      ,dt.IsActive                    
      ,dt.CreatedBy                    
      ,dt.CreatedAt                    
      ,dt.ModifiedBy                    
      ,dt.ModifiedAt                    
FROM P01MealRegistrationAdd dt                    
LEFT JOIN P00Site emp ON dt.SiteId = emp.SiteId                    
LEFT JOIN P01MealType brt ON dt.BRMealTypeId = brt.MealTypeId                    
LEFT JOIN P01MealPlace brp ON dt.BRMealPlaceId = brp.MealPlaceId                    
LEFT JOIN P01MealType lut ON dt.LUMealTypeId = lut.MealTypeId                    
LEFT JOIN P01MealPlace lup ON dt.LUMealPlaceId = lup.MealPlaceId                    
LEFT JOIN P01MealType dit ON dt.DIMealTypeId = dit.MealTypeId                    
LEFT JOIN P01MealPlace dip ON dt.DIMealPlaceId = dip.MealPlaceId                    
LEFT JOIN P01MealType ext ON dt.EXMealTypeId = ext.MealTypeId                    
LEFT JOIN P01MealPlace expl ON dt.EXMealPlaceId = expl.MealPlaceId                    
LEFT JOIN P00WorkShift ws ON dt.WorkShiftId = ws.WorkShiftId                  
LEFT JOIN P00EmployeeType mt ON dt.MealKindId = mt.EmployeeTypeId             
        
LEFT JOIN P01MealType brte1 ON dt.EBRMealTypeId = brte1.MealTypeId                          
LEFT JOIN P01MealPlace brpe1 ON dt.EBRMealPlaceId = brpe1.MealPlaceId            
            
WHERE dt.IsActive = 1 
GO
/****** Object:  View [dbo].[vP01MothlyAttendanceRecord]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01MothlyAttendanceRecord]
AS
(
SELECT EmployeeId,YearMonth
,MAX(IIF(FORMAT(LeaveDate,'dd') = '01',LeaveTypeName,'')) AS D01
,MAX(IIF(FORMAT(LeaveDate,'dd') = '02',LeaveTypeName,'')) AS D02
,MAX(IIF(FORMAT(LeaveDate,'dd') = '03',LeaveTypeName,'')) AS D03
,MAX(IIF(FORMAT(LeaveDate,'dd') = '04',LeaveTypeName,'')) AS D04
,MAX(IIF(FORMAT(LeaveDate,'dd') = '05',LeaveTypeName,'')) AS D05
,MAX(IIF(FORMAT(LeaveDate,'dd') = '06',LeaveTypeName,'')) AS D06
,MAX(IIF(FORMAT(LeaveDate,'dd') = '07',LeaveTypeName,'')) AS D07
,MAX(IIF(FORMAT(LeaveDate,'dd') = '08',LeaveTypeName,'')) AS D08
,MAX(IIF(FORMAT(LeaveDate,'dd') = '09',LeaveTypeName,'')) AS D09
,MAX(IIF(FORMAT(LeaveDate,'dd') = '10',LeaveTypeName,'')) AS D10
,MAX(IIF(FORMAT(LeaveDate,'dd') = '11',LeaveTypeName,'')) AS D11
,MAX(IIF(FORMAT(LeaveDate,'dd') = '12',LeaveTypeName,'')) AS D12
,MAX(IIF(FORMAT(LeaveDate,'dd') = '13',LeaveTypeName,'')) AS D13
,MAX(IIF(FORMAT(LeaveDate,'dd') = '14',LeaveTypeName,'')) AS D14
,MAX(IIF(FORMAT(LeaveDate,'dd') = '15',LeaveTypeName,'')) AS D15
,MAX(IIF(FORMAT(LeaveDate,'dd') = '16',LeaveTypeName,'')) AS D16
,MAX(IIF(FORMAT(LeaveDate,'dd') = '17',LeaveTypeName,'')) AS D17
,MAX(IIF(FORMAT(LeaveDate,'dd') = '18',LeaveTypeName,'')) AS D18
,MAX(IIF(FORMAT(LeaveDate,'dd') = '19',LeaveTypeName,'')) AS D19
,MAX(IIF(FORMAT(LeaveDate,'dd') = '20',LeaveTypeName,'')) AS D20
,MAX(IIF(FORMAT(LeaveDate,'dd') = '21',LeaveTypeName,'')) AS D21
,MAX(IIF(FORMAT(LeaveDate,'dd') = '22',LeaveTypeName,'')) AS D22
,MAX(IIF(FORMAT(LeaveDate,'dd') = '23',LeaveTypeName,'')) AS D23
,MAX(IIF(FORMAT(LeaveDate,'dd') = '24',LeaveTypeName,'')) AS D24
,MAX(IIF(FORMAT(LeaveDate,'dd') = '25',LeaveTypeName,'')) AS D25
,MAX(IIF(FORMAT(LeaveDate,'dd') = '26',LeaveTypeName,'')) AS D26
,MAX(IIF(FORMAT(LeaveDate,'dd') = '27',LeaveTypeName,'')) AS D27
,MAX(IIF(FORMAT(LeaveDate,'dd') = '28',LeaveTypeName,'')) AS D28
,MAX(IIF(FORMAT(LeaveDate,'dd') = '29',LeaveTypeName,'')) AS D29
,MAX(IIF(FORMAT(LeaveDate,'dd') = '30',LeaveTypeName,'')) AS D30
,MAX(IIF(FORMAT(LeaveDate,'dd') = '31',LeaveTypeName,'')) AS D31
FROM
(
	select distinct t1.EmployeeId,FORMAT(t1.LeaveDate,'yyyy-MM') as YearMonth,LeaveDate,
	  STUFF(
			 (SELECT ', ' + convert(nvarchar(50), t2.LeaveTypeName, 120)
			  FROM vP01LeaveDaysDetail t2
			  where t2.IsActive = 1 and t2.RequestStatus = 'Approved' AND t1.EmployeeId = t2.EmployeeId AND t1.LeaveDate = t2.LeaveDate
			  FOR XML PATH (''))
			  , 1, 1, '')  AS LeaveTypeName
	from vP01LeaveDaysDetail t1
	where t1.IsActive = 1 and t1.RequestStatus = 'Approved'
	--order by EmployeeId, LeaveDate
) a
GROUP BY EmployeeId,YearMonth

)



GO
/****** Object:  View [dbo].[vP01OfficialTripPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE   VIEW [dbo].[vP01OfficialTripPrint]
AS
SELECT 
	   --date
	   btc.rowIndex as daterowIndex
	  ,btc.OFTId as dateOFTId
	  ,btc.WorkDate as dateWorkDate
	  ,btc.LeaveTimeName as dateLeaveTimeName
      ,btc.Destination as dateDestination

	  ---Traveler-----------------
	  ,btt.rowIndex as TravelerNo
	  ,btt.EmployeeName as TravelerEmployeeName
	  ,btt.DeptName as TravelerDeptName
	  ,btt.PositionName as TravelerPositionName
	  ,btt.JobTitleName as TravelerJobTitleName

	  --------------------
	  ,bt.OFTId
      ,bt.RequestStatus
      ,bt.IssueDate
      ,bt.Number
      ,bt.NumberCode
      ,bt.EmployeeId
      ,bt.EmployeeCode
      ,bt.EmployeeName
	  ,bt.EmployeeSign
      ,bt.GenderName
      ,bt.DeptName
      ,bt.PositionName
	  ,bt.JobTitleName
      ,bt.EmailAddress
      ,bt.Purpose
	  ,bt.Remark
	  ,bt.CarSupport
	  ,IIF(ISNULL(bt.CarSupport,0) = 1,'Yes','No') as CarSupportText
      ,bt.CurrentApprover
      ,bt.CurrentLevel

      ,bt.Review1Checked
      ,bt.Review1EmployeeId
      ,bt.Review1EmployeeName
      ,bt.Review1PositionName
      ,bt.Review1EmailAddress
      ,bt.Review1Action
      ,bt.Review1ApproveTime
      ,bt.Review1Comment
	  ,bt.Review1Sign

      ,bt.Review2Checked
      ,bt.Review2EmployeeId
      ,bt.Review2EmployeeName
      ,bt.Review2PositionName
      ,bt.Review2EmailAddress
      ,bt.Review2Action
      ,bt.Review2ApproveTime
      ,bt.Review2Comment
	  ,bt.Review2Sign

      ,bt.Review3Checked
      ,bt.Review3EmployeeId
      ,bt.Review3EmployeeName
      ,bt.Review3PositionName
      ,bt.Review3EmailAddress
      ,bt.Review3Action
      ,bt.Review3ApproveTime
      ,bt.Review3Comment
	  ,bt.Review3Sign

	  ,bt.Review4Checked
      ,bt.Review4EmployeeId
      ,bt.Review4EmployeeName
      ,bt.Review4PositionName
      ,bt.Review4EmailAddress
      ,bt.Review4Action
      ,bt.Review4ApproveTime
      ,bt.Review4Comment
	  ,bt.Review4Sign

	  ,bt.VerifierChecked
      ,bt.VerifierEmployeeId
      ,bt.VerifierEmployeeName
      ,bt.VerifierPositionName
      ,bt.VerifierEmailAddress
      ,bt.VerifierAction
      ,bt.VerifierApproveTime
      ,bt.VerifierComment
	  ,bt.VerifierSign

	  ,bt.EndorsementChecked
      ,bt.EndorsementEmployeeId
      ,bt.EndorsementEmployeeName
      ,bt.EndorsementPositionName
      ,bt.EndorsementEmailAddress
      ,bt.EndorsementAction
      ,bt.EndorsementApproveTime
      ,bt.EndorsementComment
	  ,bt.EndorsementSign

	  ,bt.ApproverChecked
      ,bt.ApproverEmployeeId
      ,bt.ApproverEmployeeName
      ,bt.ApproverPositionName
      ,bt.ApproverEmailAddress
      ,bt.ApproverAction
      ,bt.ApproverApproveTime
      ,bt.ApproverComment
	  ,bt.ApproverSign

	  ,bt.CreatedBy
	  ,bt.CreatedByEmployeeCode
	  ,bt.CreatedByName
	  ,bt.CreatedByDeptName
	  ,bt.CreatedByPositionName
	  ,bt.CreatedByJobTitleName
	  ,bt.CreatedBySignPath
FROM  vP01OfficialTripDetail btc 
INNER JOIN vP01OfficialTrip bt ON btc.OFTId = bt.OFTId
INNER JOIN vP01OfficialTripTraveler btt ON btt.OFTId = bt.OFTId


GO
/****** Object:  Table [dbo].[P02Place]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02Place](
	[PlaceId] [int] IDENTITY(1,1) NOT NULL,
	[PlaceName] [nvarchar](500) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P02Places] PRIMARY KEY CLUSTERED 
(
	[PlaceId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P02RouteDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02RouteDetail](
	[RTDId] [int] IDENTITY(1,1) NOT NULL,
	[RTId] [int] NOT NULL,
	[PlaceId] [int] NOT NULL,
	[TotalKm] [int] NOT NULL,
	[TotalMinute] [int] NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[OrderNo] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P02RouteDetail] PRIMARY KEY CLUSTERED 
(
	[RTDId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP02RouteDetail]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP02RouteDetail]
AS
SELECT rtd.RTDId
      ,rtd.RTId
	  ,rt.RouteName
      ,rtd.PlaceId
	  ,pl.PlaceName
      ,rtd.TotalKm
	  ,rtd.TotalMinute
      ,rtd.Remark
      ,rtd.OrderNo
      ,rtd.IsActive
      ,rtd.CreatedBy
      ,rtd.CreatedAt
      ,rtd.ModifiedBy
      ,rtd.ModifiedAt
FROM P02RouteDetail rtd
INNER JOIN P02Route rt ON rtd.RTId = rt.RTId
INNER JOIN P02Place pl ON rtd.PlaceId = pl.PlaceId

GO
/****** Object:  View [dbo].[vP01WFHAttendancePrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01WFHAttendancePrint]
AS
SELECT 
	   wad.ATDDId
      ,wad.ATDId
      ,wad.RequestDate
      ,wad.TimeTypeId
	  ,wad.TimeName
      ,wad.ScheduleTypeId
      ,wad.ScheduleTypeName

      ,wa.RequestStatus
      ,wa.WorkYear
      ,wa.IssueDate
      ,wa.Number
      ,wa.NumberCode
      ,wa.EmployeeId
      ,wa.EmployeeCode
      ,wa.EmployeeName
      ,wa.GenderName
      ,wa.DeptName
      ,wa.PositionName
      ,wa.EmailAddress
	  ,wa.EmployeeSign

      ,wa.LocationAddress
	  ,wa.Reason

      ,wa.CurrentApprover
      ,wa.CurrentLevel

      ,wa.Level1Checked
      ,wa.Level1EmployeeId
      ,wa.Level1EmployeeName
      ,wa.Level1PositionName
      ,wa.Level1EmailAddress
      ,wa.Level1Action
      ,wa.Level1ApproveTime
      ,wa.Level1Comment
	  ,wa.Level1Sign

      ,wa.Level2Checked
      ,wa.Level2EmployeeId
      ,wa.Level2EmployeeName
      ,wa.Level2PositionName
      ,wa.Level2EmailAddress
      ,wa.Level2Action
      ,wa.Level2ApproveTime
      ,wa.Level2Comment
	  ,wa.Level2Sign

      ,wa.Level3Checked
      ,wa.Level3EmployeeId
      ,wa.Level3EmployeeName
      ,wa.Level3PositionName
      ,wa.Level3EmailAddress
      ,wa.Level3Action
      ,wa.Level3ApproveTime
      ,wa.Level3Comment
	  ,wa.Level3Sign

	  ,wa.EndorsementChecked
      ,wa.EndorsementEmployeeId
      ,wa.EndorsementEmployeeName
      ,wa.EndorsementPositionName
      ,wa.EndorsementEmailAddress
      ,wa.EndorsementAction
      ,wa.EndorsementApproveTime
      ,wa.EndorsementComment
	  ,wa.EndorsementSign

	  ,wa.Level4Checked
      ,wa.Level4EmployeeId
      ,wa.Level4EmployeeName
      ,wa.Level4PositionName
      ,wa.Level4EmailAddress
      ,wa.Level4Action
      ,wa.Level4ApproveTime
      ,wa.Level4Comment
	  ,wa.Level4Sign

      ,wa.CreatedBy
	  ,wa.CreatedByEmployeeCode
	  ,wa.CreatedByName
	  ,wa.CreatedByDeptName
	  ,wa.CreatedByPositionName
	  ,wa.CreatedByJobTitleName
	  ,wa.CreatedBySignPath
	  
FROM  vP01WFHAttendanceDetail wad 
INNER JOIN vP01WFHAttendance wa ON wad.ATDId = wa.ATDId

GO
/****** Object:  View [dbo].[vP01WFHDailyReportPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[vP01WFHDailyReportPrint]
AS
SELECT 
	  -- wad.ATDDId
   --   ,wad.ATDId
   --   ,wad.RequestDate
   --   ,wad.TimeTypeId
	  --,wad.TimeName
   --   ,wad.ScheduleTypeId
   --   ,wad.ScheduleTypeName
	   wd.WDId
      ,wd.RequestStatus
      ,wd.WorkYear
      ,wd.IssueDate
      ,wd.Number
      ,wd.NumberCode
      ,wd.EmployeeId
      ,wd.EmployeeCode
      ,wd.EmployeeName
      ,wd.GenderName
      ,wd.DeptName
      ,wd.PositionName
      ,wd.EmailAddress
	  ,wd.EmployeeSign

      ,wd.PeriodOfWFH
	  ,wd.WorkDate
	  ,wd.ReportContents

      ,wd.CurrentApprover
      ,wd.CurrentLevel

      ,wd.Level1Checked
      ,wd.Level1EmployeeId
      ,wd.Level1EmployeeName
      ,wd.Level1PositionName
      ,wd.Level1EmailAddress
      ,wd.Level1Action
      ,wd.Level1ApproveTime
      ,wd.Level1Comment
	  ,wd.Level1Sign

      ,wd.Level2Checked
      ,wd.Level2EmployeeId
      ,wd.Level2EmployeeName
      ,wd.Level2PositionName
      ,wd.Level2EmailAddress
      ,wd.Level2Action
      ,wd.Level2ApproveTime
      ,wd.Level2Comment
	  ,wd.Level2Sign

      ,wd.Level3Checked
      ,wd.Level3EmployeeId
      ,wd.Level3EmployeeName
      ,wd.Level3PositionName
      ,wd.Level3EmailAddress
      ,wd.Level3Action
      ,wd.Level3ApproveTime
      ,wd.Level3Comment
	  ,wd.Level3Sign

	  ,wd.EndorsementChecked
      ,wd.EndorsementEmployeeId
      ,wd.EndorsementEmployeeName
      ,wd.EndorsementPositionName
      ,wd.EndorsementEmailAddress
      ,wd.EndorsementAction
      ,wd.EndorsementApproveTime
      ,wd.EndorsementComment
	  ,wd.EndorsementSign

	  ,wd.Level4Checked
      ,wd.Level4EmployeeId
      ,wd.Level4EmployeeName
      ,wd.Level4PositionName
      ,wd.Level4EmailAddress
      ,wd.Level4Action
      ,wd.Level4ApproveTime
      ,wd.Level4Comment
	  ,wd.Level4Sign

      ,wd.CreatedBy
	  ,wd.CreatedByEmployeeCode
	  ,wd.CreatedByName
	  ,wd.CreatedByDeptName
	  ,wd.CreatedByPositionName
	  ,wd.CreatedByJobTitleName
	  ,wd.CreatedBySignPath
	  
FROM  vP01WFHDailyReport wd

GO
/****** Object:  Table [dbo].[P01LevelApproveHM]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LevelApproveHM](
	[LevelId] [int] IDENTITY(1,1) NOT NULL,
	[LevelName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LevelApproveHM] PRIMARY KEY CLUSTERED 
(
	[LevelId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproverListHM]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListHM](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListHM] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01ApproverListHM]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
  
CREATE VIEW [dbo].[vP01ApproverListHM]  
AS  
SELECT ap.Id  
      ,ap.DeptId, dept.DeptName, dept.SiteId,dept.SiteName  
      ,ap.LevelId,lv.LevelName  
      ,ap.EmployeeId,emp.EmployeeName, PositionName, JobTitleName  
      ,ap.IsActive  
      ,ap.CreatedBy  
      ,ap.CreatedAt  
      ,ap.ModifiedBy  
      ,ap.ModifiedAt  
FROM P01ApproverListHM ap   
INNER JOIN vP00Employee emp ON ap.EmployeeId = emp.EmployeeId  
INNER JOIN vP00Department dept ON ap.DeptId = dept.DeptId  
INNER JOIN P01LevelApproveHM lv ON ap.LevelId = lv.LevelId  
GO
/****** Object:  View [dbo].[vP01ListEmployeeRegisterAL]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vP01ListEmployeeRegisterAL]       
AS        
SELECT emp.EmployeeId        
      ,emp.EmployeeCode        
      ,emp.EmployeeName        
      ,emp.DeptId, dept.DeptName, wl.SiteId, wl.SiteName        
   ,emp.PositionId, pos.PositionName, pos.IsReviewer, pos.IsApprover, pos.Prioritize        
   ,emp.JobTitleId, job.JobTitleName        
      ,emp.BirthDate        
      ,emp.GenderId, gd.GenderName        
      ,emp.EmailAddress        
   ,emp.PhoneNumber        
      ,emp.FirstWorkingDate        
   ,emp.ProbationaryEndDate        
      ,emp.EndWorkingDate        
   ,emp.AnnualLeave        
      ,emp.EmployeeNo        
   ,emp.SignPath        
      ,emp.IsActive        
      ,emp.CreatedBy        
      ,emp.CreatedAt        
      ,emp.ModifiedBy        
      ,emp.ModifiedAt        
FROM P00Employee emp        
LEFT JOIN P00Department dept ON emp.DeptId = dept.DeptId        
LEFT JOIN P00Site wl ON dept.SiteId = wl.SiteId        
LEFT JOIN P00Position pos ON emp.PositionId = pos.PositionId        
LEFT JOIN P00JobTitle job ON emp.JobTitleId = job.JobTitleId        
LEFT JOIN P00Gender gd ON emp.GenderId = gd.GenderId        
where emp.EmployeeId IN (33,47)        
  

GO
/****** Object:  View [dbo].[vP01HandoverMinutesApprover1]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01HandoverMinutesApprover1]  
AS  
SELECT *   
FROM vP01ApproverListHM  
WHERE IsActive =1 AND LevelId = 1  
GO
/****** Object:  View [dbo].[vP01ITRequestPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
         
CREATE VIEW [dbo].[vP01ITRequestPrint]            
AS            
SELECT             
       t1.ITRId            
      ,t1.RequestStatus            
      ,t1.IssueDate            
      ,t1.Number            
      ,t1.NumberCode            
      ,t1.EmployeeId            
      ,t1.EmployeeCode            
      ,t1.EmployeeName            
   ,t1.EmployeeSign            
      ,t1.GenderName            
      ,t1.DeptName            
      ,t1.PositionName            
   ,t1.JobTitleName            
      ,t1.EmailAddress            
            
   ,t1.Subjects                      
   ,t1.Contents            
            
      ,t1.CurrentApprover            
      ,t1.CurrentLevel            
            
      ,t1.Reviewer1Checked            
      ,t1.Reviewer1EmployeeId            
      ,t1.Reviewer1EmployeeName            
      ,t1.Reviewer1PositionName            
      ,t1.Reviewer1EmailAddress            
      ,t1.Reviewer1Action            
      ,t1.Reviewer1ApproveTime            
      ,t1.Reviewer1Comment            
   ,t1.Reviewer1Sign            
            
      ,t1.Reviewer2Checked            
      ,t1.Reviewer2EmployeeId            
      ,t1.Reviewer2EmployeeName            
      ,t1.Reviewer2PositionName            
      ,t1.Reviewer2EmailAddress            
      ,t1.Reviewer2Action            
      ,t1.Reviewer2ApproveTime            
      ,t1.Reviewer2Comment            
   ,t1.Reviewer2Sign            
            
      ,t1.Reviewer3Checked            
      ,t1.Reviewer3EmployeeId            
      ,t1.Reviewer3EmployeeName            
      ,t1.Reviewer3PositionName            
      ,t1.Reviewer3EmailAddress            
      ,t1.Reviewer3Action            
      ,t1.Reviewer3ApproveTime            
      ,t1.Reviewer3Comment            
   ,t1.Reviewer3Sign            
            
   ,t1.Reviewer4Checked            
      ,t1.Reviewer4EmployeeId            
      ,t1.Reviewer4EmployeeName            
      ,t1.Reviewer4PositionName            
      ,t1.Reviewer4EmailAddress            
      ,t1.Reviewer4Action            
      ,t1.Reviewer4ApproveTime            
      ,t1.Reviewer4Comment            
   ,t1.Reviewer4Sign            
            
   ,t1.ApproverChecked            
      ,t1.ApproverEmployeeId            
      ,t1.ApproverEmployeeName            
      ,t1.ApproverPositionName            
      ,t1.ApproverEmailAddress            
      ,t1.ApproverAction            
      ,t1.ApproverApproveTime            
      ,t1.ApproverComment            
   ,t1.ApproverSign            
            
   ,t1.CreatedBy            
   ,t1.CreatedByEmployeeCode            
   ,t1.CreatedByName            
   ,t1.CreatedByDeptName            
   ,t1.CreatedByPositionName            
   ,t1.CreatedByJobTitleName            
   ,t1.CreatedBySignPath            
              
FROM vP01ITRequest t1   
GO
/****** Object:  View [dbo].[vP01HandoverMinutesApprover2]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01HandoverMinutesApprover2] 
AS  
SELECT *   
FROM vP01ApproverListHM  
WHERE IsActive =1 AND LevelId = 2  
GO
/****** Object:  View [dbo].[vP01HandoverMinutesApprover3]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01HandoverMinutesApprover3]
AS  
SELECT *   
FROM vP01ApproverListHM  
WHERE IsActive =1 AND LevelId = 3 
GO
/****** Object:  View [dbo].[vP01HandoverMinutesApprover4]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vP01HandoverMinutesApprover4]
AS  
SELECT *   
FROM vP01ApproverListHM  
WHERE IsActive =1 AND LevelId = 4 
GO
/****** Object:  View [dbo].[vP01HandoverMinutesConfirm]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01HandoverMinutesConfirm]
AS  
SELECT *   
FROM vP01ApproverListHM  
WHERE IsActive =1 AND LevelId =6
GO
/****** Object:  View [dbo].[vP01HandoverMinutesApprover5]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01HandoverMinutesApprover5]
AS  
SELECT *   
FROM vP01ApproverListHM  
WHERE IsActive =1 AND LevelId =5
GO
/****** Object:  Table [dbo].[P01TravelerGroup]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01TravelerGroup](
	[TravelerGroupId] [int] IDENTITY(1,1) NOT NULL,
	[TravelerGroupName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00TravelerGroup] PRIMARY KEY CLUSTERED 
(
	[TravelerGroupId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01CitiesType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CitiesType](
	[CitiesTypeId] [int] IDENTITY(1,1) NOT NULL,
	[TravelTypeId] [int] NOT NULL,
	[CitiesTypeName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00CitiesType] PRIMARY KEY CLUSTERED 
(
	[CitiesTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[vP01CostType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE VIEW [dbo].[vP01CostType]
AS
SELECT ct.CostTypeId
      ,ct.TravelTypeId,tt.TravelTypeName
      ,ct.TravelerGroupId, tg.TravelerGroupName
      ,ct.CitiesTypeId, ctt.CitiesTypeName
      ,ct.CostGroupName
      ,ct.CostTypeName
      ,ct.UnitPrice
      ,ct.Remark
      ,ct.Priority
      ,ct.IsActive
      ,ct.CreatedBy
      ,ct.CreatedAt
      ,ct.ModifiedBy
      ,ct.ModifiedAt
FROM dbo.P01CostType ct
LEFT JOIN P01TravelType tt ON ct.TravelTypeId = tt.TravelTypeId
LEFT JOIN P01TravelerGroup tg ON ct.TravelerGroupId = tg.TravelerGroupId
LEFT JOIN P01CitiesType ctt ON ct.CitiesTypeId = ctt.CitiesTypeId

GO
/****** Object:  View [dbo].[vP01InternalApproval]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
CREATE VIEW [dbo].[vP01InternalApproval]                
AS                
SELECT bt.IAId                
      ,bt.RequestStatus                
      ,bt.IssueDate                
      ,bt.Number                
      ,bt.NumberCode                
      ,bt.EmployeeId,emp.EmployeeCode, emp.EmployeeName,emp.GenderName, emp.DeptName, emp.PositionName, emp.JobTitleName, emp.EmailAddress                
   ,ISNULL(emp.SignPath,'') as EmployeeSign                
                
   ,CONCAT('Based on ',bt.ManagementDelegation, ' approval shall be made by the ', rv5.PositionName) as Authorisation                
   ,bt.ManagementDelegation                
   --,bt.MadeByEmployeeId                
   --,made.EmployeeCode as MadeByEmployeeCode, made.EmployeeName as MadeByEmployeeName,made.GenderName as MadeByGenderName, made.DeptName as MadeByDeptName,                
   --made.PositionName as MadeByPositionName, made.JobTitleName as MadeByJobTitleName, made.EmailAddress as MadeByEmailAddress                
   --,made.SignPath as MadeByEmployeeSign                
   ,bt.BudgetRequired            
   ,IIF(ISNULL(bt.BudgetRequired,0) = 1,'Yes','No') as BudgetRequiredText              
            
   ,bt.EffectiveDate                
      ,bt.Reference                
   ,bt.PreservationPeriod                
   ,bt.Subjects                
   ,bt.Contents                
   ,bt.ReportTitle                
   ,bt.ReportedToEmployeeId, rpt.EmployeeName as ReportedToEmployeeName,rpt.GenderName as ReportedToGenderName, rpt.DeptName as ReportedToDeptName,                
   rpt.PositionName as ReportedToPositionName, rpt.JobTitleName as ReportedToJobTitleName, rpt.EmailAddress as ReportedToEmailAddress                
                
   ,bt.IsSealRequired     
   ,IIF(ISNULL(bt.IsSealRequired,0) = 1,'Yes','No') as SealRequiredText              
   ,bt.IsConfidential        
   ,IIF(ISNULL(bt.IsConfidential,0) = 1,'Yes','No') as ConfidentialText  
  
   ,bt.CurrentApprover                
   ,bt.CurrentLevel                
    --                
    ,curApr.EmployeeName as CurrentApproverEmployeeName                
    ,curApr.PositionName as CurrentApproverPositionName                
    ,curApr.EmailAddress as CurrentApproverEmailAddress                
   --approve                
   ,bt.Reviewer1Checked                
   ,bt.Reviewer1EmployeeId,rv1.EmployeeName as Reviewer1EmployeeName, rv1.PositionName as Reviewer1PositionName, rv1.EmailAddress as Reviewer1EmailAddress                
      ,bt.Reviewer1Action                
      ,bt.Reviewer1ApproveTime                
      ,bt.Reviewer1Comment                
   ,IIF(bt.Reviewer1Checked = 1,rv1.SignPath,'') as Reviewer1Sign                
                  
   ,bt.Reviewer2Checked                
   ,bt.Reviewer2EmployeeId,rv2.EmployeeName as Reviewer2EmployeeName, rv2.PositionName as Reviewer2PositionName, rv2.EmailAddress as Reviewer2EmailAddress                
      ,bt.Reviewer2Action                
      ,bt.Reviewer2ApproveTime                
      ,bt.Reviewer2Comment                
   ,IIF(bt.Reviewer2Checked = 1,rv2.SignPath,'') as Reviewer2Sign                
                   
   ,bt.Reviewer3Checked                
   ,bt.Reviewer3EmployeeId,rv3.EmployeeName as Reviewer3EmployeeName, rv3.PositionName as Reviewer3PositionName, rv3.EmailAddress as Reviewer3EmailAddress                
      ,bt.Reviewer3Action                
      ,bt.Reviewer3ApproveTime                
      ,bt.Reviewer3Comment                
   ,IIF(bt.Reviewer3Checked = 1,rv3.SignPath,'') as Reviewer3Sign                
           
     ,bt.ConfirmChecked            
   ,bt.ConfirmEmployeeId,cfm.EmployeeName as ConfirmEmployeeName, cfm.PositionName as ConfirmPositionName, cfm.EmailAddress as ConfirmEmailAddress            
   ,bt.ConfirmAction            
      ,bt.ConfirmApproveTime            
      ,bt.ConfirmComment            
   ,IIF(bt.ConfirmChecked = 1,cfm.SignPath,'') as ConfirmSign        
      
   ,bt.Reviewer4Checked       
   ,bt.Reviewer4EmployeeId,rv4.EmployeeName as Reviewer4EmployeeName, rv4.PositionName as Reviewer4PositionName, rv4.EmailAddress as Reviewer4EmailAddress                
      ,bt.Reviewer4Action           
      ,bt.Reviewer4ApproveTime                
      ,bt.Reviewer4Comment                
   ,IIF(bt.Reviewer4Checked = 1,rv4.SignPath,'') as Reviewer4Sign                
                   
   ,bt.ApproverChecked                
   ,bt.ApproverEmployeeId,rv5.EmployeeName as ApproverEmployeeName, rv5.PositionName as ApproverPositionName, rv5.EmailAddress as ApproverEmailAddress                
      ,bt.ApproverAction                
      ,bt.ApproverApproveTime                
      ,bt.ApproverComment                
   ,IIF(bt.ApproverChecked = 1,rv5.SignPath,'') as ApproverSign                
                  
  ,bt.Verifier1Checked                
   ,bt.Verifier1EmployeeId,vrf.EmployeeName as Verifier1EmployeeName, vrf.PositionName as Verifier1PositionName, vrf.EmailAddress as Verifier1EmailAddress                
   ,bt.Verifier1Action                
      ,bt.Verifier1ApproveTime                
      ,bt.Verifier1Comment                
   ,IIF(bt.Verifier1Checked = 1,vrf.SignPath,'') as Verifier1Sign                
                  
                  
  --cancel                
   ,bt.Reviewer1CancelChecked                
 ,bt.Reviewer1CancelEmployeeId,clrv1.EmployeeName as Reviewer1CancelEmployeeName, clrv1.PositionName as Reviewer1CancelPositionName, clrv1.EmailAddress as Reviewer1CancelEmailAddress                
      ,bt.Reviewer1CancelAction                
      ,bt.Reviewer1CancelApproveTime                
      ,bt.Reviewer1CancelComment                
   ,IIF(bt.Reviewer1CancelChecked = 1,clrv1.SignPath,'') as Reviewer1CancelSign                
                  
  ,bt.Reviewer2CancelChecked                
   ,bt.Reviewer2CancelEmployeeId,clrv2.EmployeeName as Reviewer2CancelEmployeeName, clrv2.PositionName as Reviewer2CancelPositionName, clrv2.EmailAddress as Reviewer2CancelEmailAddress                
      ,bt.Reviewer2CancelAction                
      ,bt.Reviewer2CancelApproveTime                
      ,bt.Reviewer2CancelComment                
   ,IIF(bt.Reviewer2CancelChecked = 1,clrv2.SignPath,'') as Reviewer2CancelSign                
                  
  ,bt.Reviewer3CancelChecked                
   ,bt.Reviewer3CancelEmployeeId,clrv3.EmployeeName as Reviewer3CancelEmployeeName, clrv3.PositionName as Reviewer3CancelPositionName, clrv3.EmailAddress as Reviewer3CancelEmailAddress                
      ,bt.Reviewer3CancelAction                
      ,bt.Reviewer3CancelApproveTime                
      ,bt.Reviewer3CancelComment                
   ,IIF(bt.Reviewer3CancelChecked = 1,clrv3.SignPath,'') as Reviewer3CancelSign                
           
  ,bt.ConfirmCancelChecked            
   ,bt.ConfirmCancelEmployeeId,ccfm.EmployeeName as ConfirmCancelEmployeeName, ccfm.PositionName as ConfirmCancelPositionName, ccfm.EmailAddress as ConfirmCancelEmailAddress            
   ,bt.ConfirmCancelAction            
      ,bt.ConfirmCancelApproveTime            
      ,bt.ConfirmCancelComment            
   ,IIF(bt.ConfirmCancelChecked = 1,ccfm.SignPath,'') as ConfirmCancelSign         
      
   ,bt.Reviewer4CancelChecked                
   ,bt.Reviewer4CancelEmployeeId,clrv4.EmployeeName as Reviewer4CancelEmployeeName, clrv4.PositionName as Reviewer4CancelPositionName, clrv4.EmailAddress as Reviewer4CancelEmailAddress                
      ,bt.Reviewer4CancelAction                
      ,bt.Reviewer4CancelApproveTime                
      ,bt.Reviewer4CancelComment                
   ,IIF(bt.Reviewer4CancelChecked = 1,clrv4.SignPath,'') as Reviewer4CancelSign                
                   
   ,bt.ApproverCancelChecked                
   ,bt.ApproverCancelEmployeeId,clrv5.EmployeeName as ApproverCancelEmployeeName, clrv5.PositionName as ApproverCancelPositionName, clrv5.EmailAddress as ApproverCancelEmailAddress                
      ,bt.ApproverCancelAction                
      ,bt.ApproverCancelApproveTime                
      ,bt.ApproverCancelComment                
   ,IIF(bt.ApproverCancelChecked = 1,clrv5.SignPath,'') as ApproverCancelSign                
                   
   ,bt.Verifier1CancelChecked                
   ,bt.Verifier1CancelEmployeeId,clvrf.EmployeeName as Verifier1CancelEmployeeName, clvrf.PositionName as Verifier1CancelPositionName, clvrf.EmailAddress as Verifier1CancelEmailAddress                
   ,bt.Verifier1CancelAction                
      ,bt.Verifier1CancelApproveTime                
      ,bt.Verifier1CancelComment                
   ,IIF(bt.Verifier1CancelChecked = 1,clvrf.SignPath,'') as Verifier1CancelSign                
                   
   ,bt.CancelReason                
   ,bt.CancelTime                
                
   ,ApplicationName                
   ,CONCAT('/internal-approval-approval-',IAId) as approvalURL,                
  CONCAT('/internal-approval-cancel-request-',IAId) as cancelURL,                
  CONCAT('/internal-approval-approve-view-',IAId) as viewURL                
                     
   ,bt.ManualApprovalFileName                
   ,bt.ManualApprovalFilePath                
   ,bt.ManualApprovalBy                
   ,bt.ManualApprovalAt                
                
      ,bt.Sync                
      ,bt.LastSync                
      ,bt.IsActive                
      ,bt.CreatedBy,ucr.EmployeeName as CreatedByName,ucr.EmployeeCode as CreatedByEmployeeCode                
   ,ucr.DeptName as CreatedByDeptName,ucr.PositionName as CreatedByPositionName,ucr.JobTitleName as CreatedByJobTitleName                
    ,ISNULL(ucr.SignPath,'') as CreatedBySignPath                
      ,bt.CreatedAt                
      ,bt.ModifiedBy                
      ,bt.ModifiedAt                
   --new2                
                 
FROM P01InternalApproval bt                
LEFT JOIN vP00Employee emp ON bt.EmployeeId = emp.EmployeeId                
--LEFT JOIN vP00Employee made ON bt.MadeByEmployeeId = made.EmployeeId                
LEFT JOIN vP00Employee rpt ON bt.ReportedToEmployeeId = rpt.EmployeeId                
LEFT JOIN vP00Employee rv1 ON bt.Reviewer1EmployeeId= rv1.EmployeeId                
LEFT JOIN vP00Employee rv2 ON bt.Reviewer2EmployeeId = rv2.EmployeeId                
LEFT JOIN vP00Employee rv3 ON bt.Reviewer3EmployeeId= rv3.EmployeeId         
LEFT JOIN vP00Employee cfm ON bt.ConfirmEmployeeId = cfm.EmployeeId       
LEFT JOIN vP00Employee rv4 ON bt.Reviewer4EmployeeId = rv4.EmployeeId                
LEFT JOIN vP00Employee rv5 ON bt.ApproverEmployeeId = rv5.EmployeeId                
LEFT JOIN vP00Employee vrf ON bt.Verifier1EmployeeId = vrf.EmployeeId                
--cancel                
LEFT JOIN vP00Employee clrv1 ON bt.Reviewer1CancelEmployeeId= clrv1.EmployeeId                
LEFT JOIN vP00Employee clrv2 ON bt.Reviewer2CancelEmployeeId = clrv2.EmployeeId                
LEFT JOIN vP00Employee clrv3 ON bt.Reviewer3CancelEmployeeId= clrv3.EmployeeId         
LEFT JOIN vP00Employee ccfm ON bt.ConfirmCancelEmployeeId = ccfm.EmployeeId       
LEFT JOIN vP00Employee clrv4 ON bt.Reviewer4CancelEmployeeId = clrv4.EmployeeId                
LEFT JOIN vP00Employee clrv5 ON bt.ApproverCancelEmployeeId = clrv5.EmployeeId                
LEFT JOIN vP00Employee clvrf ON bt.Verifier1CancelEmployeeId = clvrf.EmployeeId                
                
LEFT JOIN vP00Users ucr ON bt.CreatedBy = ucr.UserId                
LEFT JOIN vP00Employee curApr ON bt.CurrentApprover = curApr.EmployeeId 
GO
/****** Object:  View [dbo].[vP01InternalApprovalPrint]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
CREATE VIEW [dbo].[vP01InternalApprovalPrint]              
AS              
              
SELECT               
   ---List Report To-----------------              
    lrp.rowIndex as ReportToNo              
   ,lrp.EmployeeName as ReportToEmployeeName              
   ,lrp.DeptName as ReportToDeptName              
   ,lrp.PositionName as ReportToPositionName              
   ,lrp.JobTitleName as ReportToJobTitleName              
   --------------------              
   ,ia.IAId              
      ,ia.RequestStatus              
      ,ia.IssueDate              
      ,ia.Number              
      ,ia.NumberCode              
      ,ia.EmployeeId              
      ,ia.EmployeeCode              
      ,ia.EmployeeName              
   ,ia.EmployeeSign              
      ,ia.GenderName              
      ,ia.DeptName              
      ,ia.PositionName              
   ,ia.JobTitleName              
      ,ia.EmailAddress              
   ,ia.Authorisation              
   ,ia.BudgetRequired         
   ,ia.BudgetRequiredText        
   ,ia.EffectiveDate              
   ,ia.Reference              
   ,ia.PreservationPeriod              
   ,ia.Subjects              
   ,ia.Contents              
   ,ia.ReportTitle              
   ,ia.IsSealRequired            
   ,ia.SealRequiredText       
   ,ia.IsConfidential            
   ,ia.ConfidentialText   
  
      ,ia.CurrentApprover              
      ,ia.CurrentLevel              
              
      ,ia.Reviewer1Checked              
      ,ia.Reviewer1EmployeeId              
      ,ia.Reviewer1EmployeeName              
      ,ia.Reviewer1PositionName              
      ,ia.Reviewer1EmailAddress              
      ,ia.Reviewer1Action              
      ,ia.Reviewer1ApproveTime              
      ,ia.Reviewer1Comment              
   ,ia.Reviewer1Sign              
              
      ,ia.Reviewer2Checked              
      ,ia.Reviewer2EmployeeId              
      ,ia.Reviewer2EmployeeName              
      ,ia.Reviewer2PositionName              
      ,ia.Reviewer2EmailAddress              
      ,ia.Reviewer2Action              
      ,ia.Reviewer2ApproveTime              
      ,ia.Reviewer2Comment              
   ,ia.Reviewer2Sign              
              
      ,ia.Reviewer3Checked              
      ,ia.Reviewer3EmployeeId              
      ,ia.Reviewer3EmployeeName              
      ,ia.Reviewer3PositionName              
      ,ia.Reviewer3EmailAddress              
      ,ia.Reviewer3Action              
      ,ia.Reviewer3ApproveTime              
      ,ia.Reviewer3Comment              
   ,ia.Reviewer3Sign              
        
     ,ia.ConfirmChecked      
      ,ia.ConfirmEmployeeId      
      ,ia.ConfirmEmployeeName      
      ,ia.ConfirmPositionName      
      ,ia.ConfirmEmailAddress      
      ,ia.ConfirmAction      
      ,ia.ConfirmApproveTime      
      ,ia.ConfirmComment      
   ,ia.ConfirmSign      
    
   ,ia.Reviewer4Checked              
      ,ia.Reviewer4EmployeeId              
      ,ia.Reviewer4EmployeeName              
      ,ia.Reviewer4PositionName              
      ,ia.Reviewer4EmailAddress              
      ,ia.Reviewer4Action              
      ,ia.Reviewer4ApproveTime              
      ,ia.Reviewer4Comment              
   ,ia.Reviewer4Sign              
              
   ,ia.Verifier1Checked              
      ,ia.Verifier1EmployeeId              
      ,ia.Verifier1EmployeeName              
      ,ia.Verifier1PositionName              
      ,ia.Verifier1EmailAddress              
      ,ia.Verifier1Action              
      ,ia.Verifier1ApproveTime              
      ,ia.Verifier1Comment              
   ,ia.Verifier1Sign              
              
   ,ia.ApproverChecked              
      ,ia.ApproverEmployeeId              
      ,ia.ApproverEmployeeName              
      ,ia.ApproverPositionName              
      ,ia.ApproverEmailAddress              
      ,ia.ApproverAction              
      ,ia.ApproverApproveTime              
      ,ia.ApproverComment              
   ,ia.ApproverSign              
              
   ,ia.CreatedBy              
   ,ia.CreatedByEmployeeCode              
   ,ia.CreatedByName              
   ,ia.CreatedByDeptName              
   ,ia.CreatedByPositionName              
   ,ia.CreatedByJobTitleName              
   ,ia.CreatedBySignPath             
FROM  vP01InternalApproval ia              
LEFT JOIN vP01InternalApprovalListReportTo lrp ON lrp.IAId = ia.IAId 
GO
/****** Object:  Table [dbo].[P00EmailProfile]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00EmailProfile](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[ParentId] [int] NOT NULL,
	[IsGroup] [bit] NOT NULL,
	[Code] [nvarchar](30) NOT NULL,
	[Name] [nvarchar](192) NOT NULL,
	[Name2] [nvarchar](192) NOT NULL,
	[EmailServerName] [nvarchar](192) NOT NULL,
	[EmailServerType] [nvarchar](192) NOT NULL,
	[EmailServerPort] [int] NOT NULL,
	[EmailServerEnable_SSL] [bit] NOT NULL,
	[EmailAccountName] [nvarchar](192) NOT NULL,
	[EmailAddress] [nvarchar](192) NOT NULL,
	[EmailPassword] [nvarchar](192) NULL,
	[SiteURL] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
	[timestamp] [timestamp] NOT NULL,
 CONSTRAINT [PK_P00EmailProfile] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00FixedExchangeRate]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00FixedExchangeRate](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[CurrencyCode] [nvarchar](500) NOT NULL,
	[FixedExchangeRate] [numeric](18, 2) NOT NULL,
	[ApplyTime] [datetime] NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00FormList]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00FormList](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[GroupName] [nvarchar](50) NULL,
	[FormName] [nvarchar](100) NOT NULL,
	[Controller] [nvarchar](100) NOT NULL,
	[Action] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00Holiday]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00Holiday](
	[HLId] [int] IDENTITY(1,1) NOT NULL,
	[HLYear] [nvarchar](50) NOT NULL,
	[HLDate] [smalldatetime] NOT NULL,
	[HLName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P00Holiday_IdSD] PRIMARY KEY CLUSTERED 
(
	[HLId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00UserLog]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00UserLog](
	[LogId] [int] IDENTITY(1,1) NOT NULL,
	[UserId] [int] NOT NULL,
	[Last_Seen] [nvarchar](100) NOT NULL,
	[Last_Seen_Url] [nvarchar](100) NOT NULL,
	[ApplicationName] [nvarchar](30) NOT NULL,
	[ApplicationVerion] [nvarchar](30) NOT NULL,
	[WorkstationName] [nvarchar](30) NOT NULL,
	[WorkstationUser] [nvarchar](30) NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P00UserLog] PRIMARY KEY CLUSTERED 
(
	[LogId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P00WorkYear]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P00WorkYear](
	[WorkYearId] [int] IDENTITY(1,1) NOT NULL,
	[WorkYear] [int] NULL,
	[StartDate] [datetime] NOT NULL,
	[EndDate] [datetime] NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P00WorkYear] PRIMARY KEY CLUSTERED 
(
	[WorkYearId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P00WorkY__2404B77335E9A685] UNIQUE NONCLUSTERED 
(
	[WorkYear] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproveAction]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproveAction](
	[ApproveActionId] [nvarchar](50) NOT NULL,
	[ApproveActionName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproveAction] PRIMARY KEY CLUSTERED 
(
	[ApproveActionId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ApproverListInternalApproval]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ApproverListInternalApproval](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[DeptId] [int] NOT NULL,
	[LevelId] [int] NOT NULL,
	[EmployeeId] [int] NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ApproverListInternalApproval] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[DeptId] ASC,
	[LevelId] ASC,
	[EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01BusinessTravelAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[BTId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01BusinessTravelAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01BusinessTravelClaimAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelClaimAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[BTCId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01BusinessTravelClaimAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01BusinessTravelDestination]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01BusinessTravelDestination](
	[DestinationId] [int] IDENTITY(1,1) NOT NULL,
	[TravelTypeId] [int] NULL,
	[CitiesTypeId] [int] NULL,
	[DestinationName] [nvarchar](64) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01BusinessTravelDestination_IdDestination] PRIMARY KEY CLUSTERED 
(
	[DestinationId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01CarArrangementAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CarArrangementAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[CAId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01CarArrangementAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01CarArrangementDestination]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01CarArrangementDestination](
	[DestinationId] [int] IDENTITY(1,1) NOT NULL,
	[DestinationName] [nvarchar](200) NOT NULL,
	[Remark] [nvarchar](200) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01DailyReportAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01DailyReportAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[DRId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01DailyReportAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ExpenseApprovalAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseApprovalAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[EAId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ExpenseApprovalAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ExpenseApprovalBudgetType]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseApprovalBudgetType](
	[BudgetTypeId] [int] IDENTITY(1,1) NOT NULL,
	[BudgetTypeName] [nvarchar](200) NOT NULL,
	[BudgetTypeName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01ExpenseApprovalBudgetType_BudgetTypeId] PRIMARY KEY CLUSTERED 
(
	[BudgetTypeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ExpenseApprovalClassification]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseApprovalClassification](
	[ClassificationId] [int] IDENTITY(1,1) NOT NULL,
	[ClassificationName] [nvarchar](200) NOT NULL,
	[ClassificationName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01ExpenseApprovalClassification_ClassificationId] PRIMARY KEY CLUSTERED 
(
	[ClassificationId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ExpenseApprovalProcurementMode]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseApprovalProcurementMode](
	[ProcurementModeId] [int] IDENTITY(1,1) NOT NULL,
	[ProcurementModeName] [nvarchar](200) NOT NULL,
	[ProcurementModeName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01ExpenseApprovalProcurementCode_ProcurementCodeId] PRIMARY KEY CLUSTERED 
(
	[ProcurementModeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ExpenseSettlementAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ExpenseSettlementAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[ESId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ExpenseSettlementAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01FlexibleWorkingApplicantRequest]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FlexibleWorkingApplicantRequest](
	[FWARId] [int] IDENTITY(1,1) NOT NULL,
	[FWARName] [nvarchar](200) NOT NULL,
	[FWARName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01FlexibleWorkingApplicantRequest_FWARId] PRIMARY KEY CLUSTERED 
(
	[FWARId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01FlexibleWorkingAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FlexibleWorkingAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[FWId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01FlexibleWorkingAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01FlexibleWorkingPurpose]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FlexibleWorkingPurpose](
	[FWPId] [int] IDENTITY(1,1) NOT NULL,
	[FWPName] [nvarchar](200) NOT NULL,
	[FWPName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01FlexibleWorkingPurpose_FWPId] PRIMARY KEY CLUSTERED 
(
	[FWPId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01FormList]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01FormList](
	[FormId] [int] IDENTITY(1,1) NOT NULL,
	[FormName] [nvarchar](200) NULL,
	[FormName2] [nvarchar](200) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01HandoverMinutesAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01HandoverMinutesAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[HMId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01HandoverMinutesAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01InternalApprovalAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalApprovalAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[IAId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalApprovalAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01InternalMemorandumAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01InternalMemorandumAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[IMId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01InternalMemorandumAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ITRequestAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ITRequestAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[ITRId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ITRequestAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01LeaveStatus]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01LeaveStatus](
	[LeaveStatusId] [int] IDENTITY(1,1) NOT NULL,
	[LeaveStatusName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01LeaveStatus] PRIMARY KEY CLUSTERED 
(
	[LeaveStatusId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01MealByShift]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealByShift](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[WorkShiftId] [int] NOT NULL,
	[AllowEBR] [bit] NOT NULL,
	[AllowBR] [bit] NOT NULL,
	[AllowLU] [bit] NOT NULL,
	[AllowDI] [bit] NOT NULL,
	[AllowEX] [bit] NOT NULL,
	[AllowNBR] [bit] NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealTypeByShift_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__P01MealB__593DF9E882C9C9B2] UNIQUE NONCLUSTERED 
(
	[WorkShiftId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01MealByTime]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01MealByTime](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[WorkShiftId] [int] NOT NULL,
	[LeaveTimeId] [int] NOT NULL,
	[AllowEBR] [bit] NOT NULL,
	[AllowBR] [bit] NOT NULL,
	[AllowLU] [bit] NOT NULL,
	[AllowDI] [bit] NOT NULL,
	[AllowEX] [bit] NOT NULL,
	[AllowNBR] [bit] NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01MealByTime_Id] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[WorkShiftId] ASC,
	[LeaveTimeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01OfficialTripAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OfficialTripAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[OFTId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OfficialTripAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01OfficialTripDestination]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OfficialTripDestination](
	[DestinationId] [int] IDENTITY(1,1) NOT NULL,
	[DestinationName] [nvarchar](64) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01OfficialTripDestination_IdDestination] PRIMARY KEY CLUSTERED 
(
	[DestinationId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01OvertimeApplicantRequest]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeApplicantRequest](
	[OARId] [int] IDENTITY(1,1) NOT NULL,
	[OARName] [nvarchar](200) NOT NULL,
	[OARName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
 CONSTRAINT [PK_P01OvertimeApplicantRequest_OARId] PRIMARY KEY CLUSTERED 
(
	[OARId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01OvertimeAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[OTId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01OvertimeConfirmationAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01OvertimeConfirmationAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[OTCId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01OvertimeAttachmentsConfirmation] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01PaymentCurrency]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PaymentCurrency](
	[PCId] [int] IDENTITY(1,1) NOT NULL,
	[PCName] [nvarchar](200) NOT NULL,
	[PCName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01PaymentMethod]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PaymentMethod](
	[PMId] [int] IDENTITY(1,1) NOT NULL,
	[PMName] [nvarchar](200) NOT NULL,
	[PMName2] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01PurchaseRequisitionAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01PurchaseRequisitionAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[PRId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01PurchaseRequisitionAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01ReceiveAction]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01ReceiveAction](
	[ReceiveActionId] [nvarchar](50) NOT NULL,
	[ReceiveActionName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01ReceiveAction] PRIMARY KEY CLUSTERED 
(
	[ReceiveActionId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01RequestStatus]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01RequestStatus](
	[RequestStatusId] [int] IDENTITY(1,1) NOT NULL,
	[RequestStatusName] [nvarchar](200) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P01RequestStatus_Id] PRIMARY KEY CLUSTERED 
(
	[RequestStatusId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01WFHAttendanceAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01WFHAttendanceAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[ATDId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01WFHAttendanceAttachments] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P01WFHDailyReportAttachments]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P01WFHDailyReportAttachments](
	[FileId] [int] IDENTITY(1,1) NOT NULL,
	[WDId] [int] NOT NULL,
	[FileName] [nvarchar](200) NULL,
	[FilePath] [nvarchar](255) NOT NULL,
	[IsActive] [bit] NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
 CONSTRAINT [PK_P01WFHDailyReportAttachments_FileId] PRIMARY KEY CLUSTERED 
(
	[FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P02CarWorkShift]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P02CarWorkShift](
	[WorkShiftId] [int] IDENTITY(1,1) NOT NULL,
	[WorkShiftName] [nvarchar](255) NOT NULL,
	[WorkShiftName2] [nvarchar](255) NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[Remark] [nvarchar](500) NULL,
	[OrderNo] [int] NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P02CarWorkShift_IdWorkShift] PRIMARY KEY CLUSTERED 
(
	[WorkShiftId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P03PEListCriteria]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P03PEListCriteria](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[Criteria] [nvarchar](500) NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P03PEListCriteria] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[P03PEListScore]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[P03PEListScore](
	[ScoreId] [int] IDENTITY(1,1) NOT NULL,
	[Score] [float] NOT NULL,
	[Remark] [nvarchar](500) NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NULL,
	[CreatedAt] [datetime] NULL,
	[ModifiedBy] [int] NULL,
	[ModifiedAt] [datetime] NULL,
 CONSTRAINT [PK_P03Score] PRIMARY KEY CLUSTERED 
(
	[ScoreId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[tblTempOTCode]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[tblTempOTCode](
	[OTCId] [int] NULL,
	[OTCDId] [int] NULL,
	[WorkerId] [int] NULL,
	[OldOTCode] [nvarchar](50) NULL,
	[NewOTCode] [nvarchar](50) NULL,
	[LeaveDayDetailId] [int] NULL,
	[EmployeeId] [int] NULL,
	[WorkDate] [smalldatetime] NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[tempUploadAL]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[tempUploadAL](
	[EmployeeCode] [nvarchar](50) NULL,
	[EmployeeName] [nvarchar](50) NULL,
	[RemainedAL] [numeric](18, 2) NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[tempUploadEmployee]    Script Date: 5/30/2025 11:33:14 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[tempUploadEmployee](
	[EmployeeCode] [nvarchar](30) NOT NULL,
	[EmployeeName] [nvarchar](100) NOT NULL,
	[DeptId] [int] NOT NULL,
	[PositionId] [int] NULL,
	[JobTitleId] [int] NULL,
	[BirthDate] [datetime] NULL,
	[GenderId] [int] NULL,
	[EmailAddress] [nvarchar](100) NOT NULL,
	[PhoneNumber] [nvarchar](50) NULL,
	[Address] [nvarchar](50) NULL,
	[FirstWorkingDate] [datetime] NULL,
	[EndWorkingDate] [datetime] NULL,
	[AnnualLeave] [numeric](18, 2) NOT NULL,
	[EmployeeNo] [int] NULL,
	[IsActive] [bit] NOT NULL,
	[CreatedBy] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedBy] [int] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[P00Department] ADD  CONSTRAINT [DF_DeptList_Name]  DEFAULT ('') FOR [DeptName]
GO
ALTER TABLE [dbo].[P00Department] ADD  CONSTRAINT [DF_DeptList_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Department] ADD  CONSTRAINT [DF_DeptList_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Department] ADD  CONSTRAINT [DF_DeptList_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Department] ADD  CONSTRAINT [DF_DeptList_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Department] ADD  CONSTRAINT [DF_DeptList_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_ParentId]  DEFAULT ((-1)) FOR [ParentId]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_IsGroup]  DEFAULT ((0)) FOR [IsGroup]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_Name2]  DEFAULT ('') FOR [Name2]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_EmailServerType]  DEFAULT ('SMTP') FOR [EmailServerType]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_EmailServerPort]  DEFAULT ((25)) FOR [EmailServerPort]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_EmailServerEnable_SSL]  DEFAULT ((0)) FOR [EmailServerEnable_SSL]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00EmailProfile] ADD  CONSTRAINT [DF_P00EmailProfile_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_Name]  DEFAULT ('') FOR [EmployeeName]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_DeptCode]  DEFAULT ('') FOR [DeptId]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_EmailAddress]  DEFAULT ('pc1@fcc-vn.com.vn') FOR [EmailAddress]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_PhoneNumber]  DEFAULT ('') FOR [PhoneNumber]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_TongPhep]  DEFAULT ((0)) FOR [AnnualLeave]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_EmployeeTypeId]  DEFAULT ((1)) FOR [EmployeeTypeId]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_SignPath]  DEFAULT ('') FOR [SignPath]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Employee] ADD  CONSTRAINT [DF_P00Employee_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00EmployeeType] ADD  CONSTRAINT [DF_P00EmployeeType_Name]  DEFAULT ('') FOR [EmployeeTypeName]
GO
ALTER TABLE [dbo].[P00EmployeeType] ADD  CONSTRAINT [DF_P00EmployeeType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00EmployeeType] ADD  CONSTRAINT [DF_P00EmployeeType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00EmployeeType] ADD  CONSTRAINT [DF_P00EmployeeType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00EmployeeType] ADD  CONSTRAINT [DF_P00EmployeeType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00EmployeeType] ADD  CONSTRAINT [DF_P00EmployeeType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00ExchangeRate] ADD  CONSTRAINT [DF_P00ExchangeRate_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00ExchangeRate] ADD  CONSTRAINT [DF_P00ExchangeRate_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00ExchangeRate] ADD  CONSTRAINT [DF_P00ExchangeRate_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00ExchangeRate] ADD  CONSTRAINT [DF_P00ExchangeRate_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00ExchangeRate] ADD  CONSTRAINT [DF_P00ExchangeRate_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00FixedExchangeRate] ADD  CONSTRAINT [DF_P00FixedExchangeRate_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00FixedExchangeRate] ADD  CONSTRAINT [DF_P00FixedExchangeRate_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00FixedExchangeRate] ADD  CONSTRAINT [DF_P00FixedExchangeRate_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00FixedExchangeRate] ADD  CONSTRAINT [DF_P00FixedExchangeRate_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00FixedExchangeRate] ADD  CONSTRAINT [DF_P00FixedExchangeRate_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_Group]  DEFAULT ('') FOR [GroupName]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_FormName]  DEFAULT ('') FOR [FormName]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_Controller]  DEFAULT ('') FOR [Controller]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_P00FormList_Action]  DEFAULT ('') FOR [Action]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00FormList] ADD  CONSTRAINT [DF_F00FormList_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Gender] ADD  CONSTRAINT [DF_P00Gender_Name]  DEFAULT ('') FOR [GenderName]
GO
ALTER TABLE [dbo].[P00Gender] ADD  CONSTRAINT [DF_P00Gender_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Gender] ADD  CONSTRAINT [DF_P00Gender_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Gender] ADD  CONSTRAINT [DF_P00Gender_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Gender] ADD  CONSTRAINT [DF_P00Gender_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Gender] ADD  CONSTRAINT [DF_P00Gender_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Holiday] ADD  CONSTRAINT [DF_P00Holiday_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P00Holiday] ADD  CONSTRAINT [DF_P00Holiday_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Holiday] ADD  CONSTRAINT [DF_P00Holiday_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Holiday] ADD  CONSTRAINT [DF_P00Holiday_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Holiday] ADD  CONSTRAINT [DF_P00Holiday_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Holiday] ADD  CONSTRAINT [DF_P00Holiday_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00JobTitle] ADD  CONSTRAINT [DF_P00JobTitle_Name]  DEFAULT ('') FOR [JobTitleName]
GO
ALTER TABLE [dbo].[P00JobTitle] ADD  CONSTRAINT [DF_P00JobTitle_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00JobTitle] ADD  CONSTRAINT [DF_P00JobTitle_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00JobTitle] ADD  CONSTRAINT [DF_P00JobTitle_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00JobTitle] ADD  CONSTRAINT [DF_P00JobTitle_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00JobTitle] ADD  CONSTRAINT [DF_P00JobTitle_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Permissions] ADD  CONSTRAINT [DF_P00Permissions_timestamps]  DEFAULT (getdate()) FOR [timestamps]
GO
ALTER TABLE [dbo].[P00Permissions] ADD  CONSTRAINT [DF_P00Permissions_Detai]  DEFAULT ('') FOR [Detail]
GO
ALTER TABLE [dbo].[P00Permissions] ADD  CONSTRAINT [DF_P00Permissions_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Position] ADD  CONSTRAINT [DF_P00Position_Name]  DEFAULT ('') FOR [PositionName]
GO
ALTER TABLE [dbo].[P00Position] ADD  CONSTRAINT [DF_P00Position_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Position] ADD  CONSTRAINT [DF_P00Position_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Position] ADD  CONSTRAINT [DF_P00Position_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Position] ADD  CONSTRAINT [DF_P00Position_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Position] ADD  CONSTRAINT [DF_P00Position_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Site] ADD  CONSTRAINT [DF_Site_Name]  DEFAULT ('') FOR [SiteName]
GO
ALTER TABLE [dbo].[P00Site] ADD  CONSTRAINT [DF_Site_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Site] ADD  CONSTRAINT [DF_Site_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Site] ADD  CONSTRAINT [DF_Site_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Site] ADD  CONSTRAINT [DF_Site_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Site] ADD  CONSTRAINT [DF_Site_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Team] ADD  CONSTRAINT [DF_Team_Name]  DEFAULT ('') FOR [TeamName]
GO
ALTER TABLE [dbo].[P00Team] ADD  CONSTRAINT [DF_Team_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Team] ADD  CONSTRAINT [DF_Team_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Team] ADD  CONSTRAINT [DF_Team_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Team] ADD  CONSTRAINT [DF_Team_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Team] ADD  CONSTRAINT [DF_Team_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_P00UserFunction_FunctionCode]  DEFAULT ((0)) FOR [FunctionCode]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_UserFunction_timestamps]  DEFAULT (getdate()) FOR [timestamps]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF__P00UserFu__Detai__2C3393D0]  DEFAULT ('') FOR [Detail]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_P00UserFunction_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_P00UserFunction_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_P00UserFunction_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_P00UserFunction_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00UserFunction] ADD  CONSTRAINT [DF_P00UserFunction_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00UserLog] ADD  CONSTRAINT [DF_P00UserLog_ApplicationName]  DEFAULT ('') FOR [ApplicationName]
GO
ALTER TABLE [dbo].[P00UserLog] ADD  CONSTRAINT [DF_P00UserLog_ApplicationVerion]  DEFAULT ('') FOR [ApplicationVerion]
GO
ALTER TABLE [dbo].[P00UserLog] ADD  CONSTRAINT [DF_P00UserLog_WorkstationName]  DEFAULT ('') FOR [WorkstationName]
GO
ALTER TABLE [dbo].[P00UserLog] ADD  CONSTRAINT [DF_P00UserLog_WorkstationUser]  DEFAULT ('') FOR [WorkstationUser]
GO
ALTER TABLE [dbo].[P00UserLog] ADD  CONSTRAINT [DF_P00UserLog_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_Avatar]  DEFAULT ('/Content/images/avatar/avatar-default.jpg') FOR [Avatar]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_Id_Permission]  DEFAULT ((-1)) FOR [PermissionId]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_LockoutEnable]  DEFAULT ((0)) FOR [LockoutEnable]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_LockoutEndDate]  DEFAULT (getdate()) FOR [LockoutEndDate]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_NumLoginFaild]  DEFAULT ((0)) FOR [NumLoginFailed]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00Users] ADD  CONSTRAINT [DF_P00Users_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00WorkShift] ADD  CONSTRAINT [DF_P00WorkShift_Name]  DEFAULT ('') FOR [WorkShiftName]
GO
ALTER TABLE [dbo].[P00WorkShift] ADD  CONSTRAINT [DF_P00WorkShift_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00WorkShift] ADD  CONSTRAINT [DF_P00WorkShift_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00WorkShift] ADD  CONSTRAINT [DF_P00WorkShift_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00WorkShift] ADD  CONSTRAINT [DF_P00WorkShift_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00WorkShift] ADD  CONSTRAINT [DF_P00WorkShift_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00WorkType] ADD  CONSTRAINT [DF_P00WorkType_Name]  DEFAULT ('') FOR [WorkTypeName]
GO
ALTER TABLE [dbo].[P00WorkType] ADD  CONSTRAINT [DF_P00WorkType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00WorkType] ADD  CONSTRAINT [DF_P00WorkType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00WorkType] ADD  CONSTRAINT [DF_P00WorkType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00WorkType] ADD  CONSTRAINT [DF_P00WorkType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00WorkType] ADD  CONSTRAINT [DF_P00WorkType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00WorkYear] ADD  CONSTRAINT [DF_P00WorkYear_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P00WorkYear] ADD  CONSTRAINT [DF_P00WorkYear_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P00WorkYear] ADD  CONSTRAINT [DF_P00WorkYear_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P00WorkYear] ADD  CONSTRAINT [DF_P00WorkYear_CreatedAt]  DEFAULT (getutcdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P00WorkYear] ADD  CONSTRAINT [DF_P00WorkYear_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P00WorkYear] ADD  CONSTRAINT [DF_P00WorkYear_ModifiedAt]  DEFAULT (getutcdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01AnnualLeave_EntitledAL]  DEFAULT ((0)) FOR [EntitledAL]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01AnnualLeave_RemainLastYear_1]  DEFAULT ((0)) FOR [RemainLastYear]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01AnnualLeave_ReviseALdays]  DEFAULT ((0)) FOR [ReviseALdays]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01TongPhep_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01TongPhep_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01TongPhep_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01TongPhep_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01AnnualLeave] ADD  CONSTRAINT [DF_P01TongPhep_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproveAction] ADD  CONSTRAINT [P01ApproveAction_Name]  DEFAULT ('') FOR [ApproveActionName]
GO
ALTER TABLE [dbo].[P01ApproveAction] ADD  CONSTRAINT [P01ApproveAction_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproveAction] ADD  CONSTRAINT [P01ApproveAction_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproveAction] ADD  CONSTRAINT [P01ApproveAction_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproveAction] ADD  CONSTRAINT [P01ApproveAction_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproveAction] ADD  CONSTRAINT [P01ApproveAction_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListAL] ADD  CONSTRAINT [DF_P01ApproverListAL_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListAL] ADD  CONSTRAINT [DF_P01ApproverListAL_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListAL] ADD  CONSTRAINT [DF_P01ApproverListAL_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListAL] ADD  CONSTRAINT [DF_P01ApproverListAL_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListAL] ADD  CONSTRAINT [DF_P01ApproverListAL_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListAL] ADD  CONSTRAINT [DF_P01ApproverListAL_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListBT] ADD  CONSTRAINT [DF_P01ApproverListBT_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListBT] ADD  CONSTRAINT [DF_P01ApproverListBT_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListBT] ADD  CONSTRAINT [DF_P01ApproverListBT_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListBT] ADD  CONSTRAINT [DF_P01ApproverListBT_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListBT] ADD  CONSTRAINT [DF_P01ApproverListBT_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListBT] ADD  CONSTRAINT [DF_P01ApproverListBT_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListBTC] ADD  CONSTRAINT [DF_P01ApproverListBTC_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListBTC] ADD  CONSTRAINT [DF_P01ApproverListBTC_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListBTC] ADD  CONSTRAINT [DF_P01ApproverListBTC_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListBTC] ADD  CONSTRAINT [DF_P01ApproverListBTC_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListBTC] ADD  CONSTRAINT [DF_P01ApproverListBTC_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListBTC] ADD  CONSTRAINT [DF_P01ApproverListBTC_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListCA] ADD  CONSTRAINT [DF_P01ApproverListCA_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListCA] ADD  CONSTRAINT [DF_P01ApproverListCA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListCA] ADD  CONSTRAINT [DF_P01ApproverListCA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListCA] ADD  CONSTRAINT [DF_P01ApproverListCA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListCA] ADD  CONSTRAINT [DF_P01ApproverListCA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListCA] ADD  CONSTRAINT [DF_P01ApproverListCA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_CId]  DEFAULT ((0)) FOR [CId]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_DeptId]  DEFAULT ((0)) FOR [DeptId]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListDR] ADD  CONSTRAINT [DF_P01ApproverListDR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListEA] ADD  CONSTRAINT [DF_P01ApproverListEA_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListEA] ADD  CONSTRAINT [DF_P01ApproverListEA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListEA] ADD  CONSTRAINT [DF_P01ApproverListEA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListEA] ADD  CONSTRAINT [DF_P01ApproverListEA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListEA] ADD  CONSTRAINT [DF_P01ApproverListEA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListEA] ADD  CONSTRAINT [DF_P01ApproverListEA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListES] ADD  CONSTRAINT [DF_P01ApproverListES_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListES] ADD  CONSTRAINT [DF_P01ApproverListES_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListES] ADD  CONSTRAINT [DF_P01ApproverListES_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListES] ADD  CONSTRAINT [DF_P01ApproverListES_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListES] ADD  CONSTRAINT [DF_P01ApproverListES_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListES] ADD  CONSTRAINT [DF_P01ApproverListES_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListFW] ADD  CONSTRAINT [DF_P01ApproverListFW_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListFW] ADD  CONSTRAINT [DF_P01ApproverListFW_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListFW] ADD  CONSTRAINT [DF_P01ApproverListFW_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListFW] ADD  CONSTRAINT [DF_P01ApproverListFW_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListFW] ADD  CONSTRAINT [DF_P01ApproverListFW_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListFW] ADD  CONSTRAINT [DF_P01ApproverListFW_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListHM] ADD  CONSTRAINT [DF_P01ApproverListHM_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListHM] ADD  CONSTRAINT [DF_P01ApproverListHM_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListHM] ADD  CONSTRAINT [DF_P01ApproverListHM_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListHM] ADD  CONSTRAINT [DF_P01ApproverListHM_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListHM] ADD  CONSTRAINT [DF_P01ApproverListHM_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListHM] ADD  CONSTRAINT [DF_P01ApproverListHM_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListIA] ADD  CONSTRAINT [DF_P01ApproverListIA_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListIA] ADD  CONSTRAINT [DF_P01ApproverListIA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListIA] ADD  CONSTRAINT [DF_P01ApproverListIA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListIA] ADD  CONSTRAINT [DF_P01ApproverListIA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListIA] ADD  CONSTRAINT [DF_P01ApproverListIA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListIA] ADD  CONSTRAINT [DF_P01ApproverListIA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListIM] ADD  CONSTRAINT [DF_P01ApproverListIM_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListIM] ADD  CONSTRAINT [DF_P01ApproverListIM_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListIM] ADD  CONSTRAINT [DF_P01ApproverListIM_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListIM] ADD  CONSTRAINT [DF_P01ApproverListIM_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListIM] ADD  CONSTRAINT [DF_P01ApproverListIM_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListIM] ADD  CONSTRAINT [DF_P01ApproverListIM_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListInternalApproval] ADD  CONSTRAINT [DF_P01ApproverListInternalApproval_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListInternalApproval] ADD  CONSTRAINT [DF_P01ApproverListInternalApproval_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListInternalApproval] ADD  CONSTRAINT [DF_P01ApproverListInternalApproval_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListInternalApproval] ADD  CONSTRAINT [DF_P01ApproverListInternalApproval_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListInternalApproval] ADD  CONSTRAINT [DF_P01ApproverListInternalApproval_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListInternalApproval] ADD  CONSTRAINT [DF_P01ApproverListInternalApproval_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_DeptId]  DEFAULT ((0)) FOR [DeptId]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListITR] ADD  CONSTRAINT [DF_P01ApproverListITR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListOFT] ADD  CONSTRAINT [DF_P01ApproverListOFT_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListOFT] ADD  CONSTRAINT [DF_P01ApproverListOFT_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListOFT] ADD  CONSTRAINT [DF_P01ApproverListOFT_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListOFT] ADD  CONSTRAINT [DF_P01ApproverListOFT_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListOFT] ADD  CONSTRAINT [DF_P01ApproverListOFT_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListOFT] ADD  CONSTRAINT [DF_P01ApproverListOFT_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListOT] ADD  CONSTRAINT [DF_P01ApproverListOT_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListOT] ADD  CONSTRAINT [DF_P01ApproverListOT_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListOT] ADD  CONSTRAINT [DF_P01ApproverListOT_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListOT] ADD  CONSTRAINT [DF_P01ApproverListOT_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListOT] ADD  CONSTRAINT [DF_P01ApproverListOT_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListOT] ADD  CONSTRAINT [DF_P01ApproverListOT_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListOTC] ADD  CONSTRAINT [DF_P01ApproverListOTC_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListOTC] ADD  CONSTRAINT [DF_P01ApproverListOTC_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListOTC] ADD  CONSTRAINT [DF_P01ApproverListOTC_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListOTC] ADD  CONSTRAINT [DF_P01ApproverListOTC_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListOTC] ADD  CONSTRAINT [DF_P01ApproverListOTC_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListOTC] ADD  CONSTRAINT [DF_P01ApproverListOTC_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListPR] ADD  CONSTRAINT [DF_P01ApproverListPR_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListPR] ADD  CONSTRAINT [DF_P01ApproverListPR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListPR] ADD  CONSTRAINT [DF_P01ApproverListPR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListPR] ADD  CONSTRAINT [DF_P01ApproverListPR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListPR] ADD  CONSTRAINT [DF_P01ApproverListPR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListPR] ADD  CONSTRAINT [DF_P01ApproverListPR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListWA] ADD  CONSTRAINT [DF_P01ApproverListWA_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListWA] ADD  CONSTRAINT [DF_P01ApproverListWA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListWA] ADD  CONSTRAINT [DF_P01ApproverListWA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListWA] ADD  CONSTRAINT [DF_P01ApproverListWA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListWA] ADD  CONSTRAINT [DF_P01ApproverListWA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListWA] ADD  CONSTRAINT [DF_P01ApproverListWA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ApproverListWD] ADD  CONSTRAINT [DF_P01ApproverListWD_ApproveLevel1Name]  DEFAULT ('') FOR [EmployeeId]
GO
ALTER TABLE [dbo].[P01ApproverListWD] ADD  CONSTRAINT [DF_P01ApproverListWD_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ApproverListWD] ADD  CONSTRAINT [DF_P01ApproverListWD_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ApproverListWD] ADD  CONSTRAINT [DF_P01ApproverListWD_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ApproverListWD] ADD  CONSTRAINT [DF_P01ApproverListWD_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ApproverListWD] ADD  CONSTRAINT [DF_P01ApproverListWD_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_CarSupport]  DEFAULT ((0)) FOR [CarSupport]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Level1Checked]  DEFAULT ((0)) FOR [Review1Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Level2Checked]  DEFAULT ((0)) FOR [Review2Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Review3Checked]  DEFAULT ((0)) FOR [Review3Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Review4Checked]  DEFAULT ((0)) FOR [Review4Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Level3Checked]  DEFAULT ((0)) FOR [VerifierChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_EndorsementChecked]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Level3Checked1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Level1Checked1]  DEFAULT ((0)) FOR [Review1CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Level1CancelChecked1]  DEFAULT ((0)) FOR [Review2CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Review1CancelChecked1]  DEFAULT ((0)) FOR [Review3CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Review2CancelChecked1]  DEFAULT ((0)) FOR [Review4CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Review3CancelChecked11]  DEFAULT ((0)) FOR [VerifierCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_EndorsementCancelChecked]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_Review4CancelChecked11]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravel] ADD  CONSTRAINT [DF_P01BusinessTravel_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelAttachments] ADD  CONSTRAINT [DF_P01BusinessTravelAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelAttachments] ADD  CONSTRAINT [DF_P01BusinessTravelAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelAttachments] ADD  CONSTRAINT [DF_P01BusinessTravelAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level1Checked]  DEFAULT ((0)) FOR [Review1Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level2Checked]  DEFAULT ((0)) FOR [Review2Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level1Checked1_1]  DEFAULT ((0)) FOR [Review3Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level2Checked1]  DEFAULT ((0)) FOR [Review4Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Review3Checked1]  DEFAULT ((0)) FOR [Review5Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Review4Checked1]  DEFAULT ((0)) FOR [Review6Checked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level3Checked]  DEFAULT ((0)) FOR [VerifierChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level3Checked1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level1Checked1]  DEFAULT ((0)) FOR [Review1CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Level1CancelChecked1]  DEFAULT ((0)) FOR [Review2CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Review3CancelChecked]  DEFAULT ((0)) FOR [Review3CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Review4CancelChecked]  DEFAULT ((0)) FOR [Review4CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Review3CancelChecked1]  DEFAULT ((0)) FOR [Review5CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_Review4CancelChecked1]  DEFAULT ((0)) FOR [Review6CancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_VerifierCancelChecked]  DEFAULT ((0)) FOR [VerifierCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ApproverCancelChecked]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ManualApprovalFileName]  DEFAULT ('') FOR [ManualApprovalFileName]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ManualApprovalFilePath]  DEFAULT ('') FOR [ManualApprovalFilePath]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_IsActive1]  DEFAULT ((0)) FOR [Paid]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] ADD  CONSTRAINT [DF_P01BusinessTravelClaim_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimAttachments] ADD  CONSTRAINT [DF_P01BusinessTravelClaimAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimAttachments] ADD  CONSTRAINT [DF_P01BusinessTravelClaimAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimAttachments] ADD  CONSTRAINT [DF_P01BusinessTravelClaimAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_ActualCost]  DEFAULT ((0)) FOR [ActualCost]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_CurrencyCode]  DEFAULT ((0)) FOR [CurrencyCode]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_ExchangeRate]  DEFAULT ((0)) FOR [ExchangeRate]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_ActualCostVND]  DEFAULT ((0)) FOR [ActualCostVND]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_Reimbursement]  DEFAULT ((0)) FOR [Reimbursement]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_IsActive1]  DEFAULT ((0)) FOR [IsNewRow]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimCost] ADD  CONSTRAINT [DF_P01BusinessTravelClaimCost_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01BusinessTravelCost_ActualCost]  DEFAULT ((0)) FOR [ActualCost]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01BusinessTravelCost_CurrencyCode]  DEFAULT ((0)) FOR [CurrencyCode]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01BusinessTravelCost_ExchangeRate]  DEFAULT ((0)) FOR [ExchangeRate]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01BusinessTravelCost_ActualCostVND]  DEFAULT ((0)) FOR [ActualCostVND]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01BusinessTravelCost_Reimbursement]  DEFAULT ((0)) FOR [Reimbursement]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01P01BusinessTravelCost_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01P01BusinessTravelCost_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01P01BusinessTravelCost_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01P01BusinessTravelCost_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] ADD  CONSTRAINT [DF_P01P01BusinessTravelCost_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_P01BusinessTravelDestination_CitiesTypeId]  DEFAULT ((-1)) FOR [CitiesTypeId]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_Destination_Name]  DEFAULT ('') FOR [DestinationName]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_Destination_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_Destination_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_Destination_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_Destination_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelDestination] ADD  CONSTRAINT [DF_Destination_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] ADD  CONSTRAINT [DF_P01P01BusinessTravelTraveler_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] ADD  CONSTRAINT [DF_P01P01BusinessTravelTraveler_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] ADD  CONSTRAINT [DF_P01P01BusinessTravelTraveler_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] ADD  CONSTRAINT [DF_P01P01BusinessTravelTraveler_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] ADD  CONSTRAINT [DF_P01P01BusinessTravelTraveler_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_EndorsementChecked_1]  DEFAULT ((0)) FOR [VerifyChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_RemainingAnnualLeave]  DEFAULT ((0)) FOR [RemainingAnnualLeave]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [VerifyCancelChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_UploadAttach]  DEFAULT ((0)) FOR [UploadAttach]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01CarArrangement] ADD  CONSTRAINT [DF_P01CarArrangement_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementAttachments] ADD  CONSTRAINT [DF_P01CarArrangementAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CarArrangementAttachments] ADD  CONSTRAINT [DF_P01CarArrangementAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementAttachments] ADD  CONSTRAINT [DF_P01CarArrangementAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_CarArrangementDestination_Name]  DEFAULT ('') FOR [DestinationName]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_P01CarArrangementDestination_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_CarArrangementDestination_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_CarArrangementDestination_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_CarArrangementDestination_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_CarArrangementDestination_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementDestination] ADD  CONSTRAINT [DF_CarArrangementDestination_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_FromTime]  DEFAULT ('') FOR [FromTime]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_ToTime]  DEFAULT ('') FOR [ToTime]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_Departure]  DEFAULT ('') FOR [Departure]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] ADD  CONSTRAINT [DF_P01CarArrangementDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_Name]  DEFAULT ('') FOR [CarTypeName]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_RVTypeName2]  DEFAULT ('') FOR [CarTypeName2]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01CarArrangementType_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01CarArrangementType] ADD  CONSTRAINT [DF_P01RecommendedVehicleType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P01CitiesType_TravelTypeId]  DEFAULT ((-1)) FOR [TravelTypeId]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P00CitiesType_Name]  DEFAULT ('') FOR [CitiesTypeName]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P00CitiesType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P00CitiesType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P00CitiesType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P00CitiesType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01CitiesType] ADD  CONSTRAINT [DF_P00CitiesType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P01CostType_TravelerGroupId]  DEFAULT ((-1)) FOR [TravelerGroupId]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P01CostType_CitiesTypeId]  DEFAULT ((-1)) FOR [CitiesTypeId]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P00CostType_Name]  DEFAULT ('') FOR [CostTypeName]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P00CostType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P00CostType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P00CostType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P00CostType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01CostType] ADD  CONSTRAINT [DF_P00CostType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_CurrentLevel1]  DEFAULT ((0)) FOR [CId]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_CurrentLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer1Checked]  DEFAULT ((0)) FOR [Reviewer1Checked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer2Checked]  DEFAULT ((0)) FOR [Reviewer2Checked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer3Checked]  DEFAULT ((0)) FOR [Reviewer3Checked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer4Checked]  DEFAULT ((0)) FOR [Reviewer4Checked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_ApproverChecked]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer1CancelChecked]  DEFAULT ((0)) FOR [Reviewer1CancelChecked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer2CancelChecked]  DEFAULT ((0)) FOR [Reviewer2CancelChecked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer3CancelChecked]  DEFAULT ((0)) FOR [Reviewer3CancelChecked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_Reviewer4CancelChecked]  DEFAULT ((0)) FOR [Reviewer4CancelChecked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_ApproverCancelChecked]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01DailyReport] ADD  CONSTRAINT [DF_P01DailyReport_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01DailyReportAttachments] ADD  CONSTRAINT [DF_P01DailyReportAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01DailyReportAttachments] ADD  CONSTRAINT [DF_P01DailyReportAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01DailyReportAttachments] ADD  CONSTRAINT [DF_P01DailyReportAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P00DailyCategories_Name]  DEFAULT ('') FOR [CategoriesName]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P01DailyReportCategories_Priority]  DEFAULT ((0)) FOR [PriorityNo]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P00DailyCategories_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P00DailyCategories_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P00DailyCategories_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P00DailyCategories_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01DailyReportCategories] ADD  CONSTRAINT [DF_P00DailyCategories_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01DailyReportListTo] ADD  CONSTRAINT [DF_P01DailyReportListTo_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01DailyReportListTo] ADD  CONSTRAINT [DF_P01DailyReportListTo_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01DailyReportListTo] ADD  CONSTRAINT [DF_P01DailyReportListTo_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01DailyReportListTo] ADD  CONSTRAINT [DF_P01DailyReportListTo_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01DailyReportListTo] ADD  CONSTRAINT [DF_P01DailyReportListTo_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_BudgetAvailability]  DEFAULT ((0)) FOR [BudgetAvailability]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Level1Checked]  DEFAULT ((0)) FOR [Review1Checked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Level2Checked]  DEFAULT ((0)) FOR [Review2Checked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Review3Checked]  DEFAULT ((0)) FOR [Review3Checked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Review4Checked]  DEFAULT ((0)) FOR [Review4Checked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Level3Checked]  DEFAULT ((0)) FOR [VerifierChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_EndorsementChecked]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Level3Checked1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Level1Checked1]  DEFAULT ((0)) FOR [Review1CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Level1CancelChecked1]  DEFAULT ((0)) FOR [Review2CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Review1CancelChecked1]  DEFAULT ((0)) FOR [Review3CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Review2CancelChecked1]  DEFAULT ((0)) FOR [Review4CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Review3CancelChecked11]  DEFAULT ((0)) FOR [VerifierCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_EndorsementCancelChecked]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Review4CancelChecked11]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ModifiedBy1]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ModifiedAt1_1]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_Sync1]  DEFAULT ((0)) FOR [Paid]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApproval] ADD  CONSTRAINT [DF_P01ExpenseApproval_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalAttachments] ADD  CONSTRAINT [DF_P01ExpenseApprovalAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalAttachments] ADD  CONSTRAINT [DF_P01ExpenseApprovalAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalAttachments] ADD  CONSTRAINT [DF_P01ExpenseApprovalAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalBudgetType] ADD  CONSTRAINT [DF_BudgetType_Name]  DEFAULT ('') FOR [BudgetTypeName]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalBudgetType] ADD  CONSTRAINT [DF_BudgetType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalBudgetType] ADD  CONSTRAINT [DF_BudgetType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalBudgetType] ADD  CONSTRAINT [DF_BudgetType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalBudgetType] ADD  CONSTRAINT [DF_BudgetType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalBudgetType] ADD  CONSTRAINT [DF_BudgetType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalClassification] ADD  CONSTRAINT [DF_Classification_Name]  DEFAULT ('') FOR [ClassificationName]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalClassification] ADD  CONSTRAINT [DF_Classification_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalClassification] ADD  CONSTRAINT [DF_Classification_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalClassification] ADD  CONSTRAINT [DF_Classification_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalClassification] ADD  CONSTRAINT [DF_Classification_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalClassification] ADD  CONSTRAINT [DF_Classification_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01ExpenseApprovalCost_Qty]  DEFAULT ((0)) FOR [Qty]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01ExpenseApprovalCost_UnitPrice]  DEFAULT ((0)) FOR [UnitPrice]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01ExpenseApprovalCost_ExchangeRate]  DEFAULT ((0)) FOR [ExchangeRate]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01P01ExpenseApprovalCost_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01P01ExpenseApprovalCost_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01P01ExpenseApprovalCost_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01P01ExpenseApprovalCost_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalCost] ADD  CONSTRAINT [DF_P01P01ExpenseApprovalCost_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalProcurementMode] ADD  CONSTRAINT [DF_ProcurementCode_Name]  DEFAULT ('') FOR [ProcurementModeName]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalProcurementMode] ADD  CONSTRAINT [DF_ProcurementCode_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalProcurementMode] ADD  CONSTRAINT [DF_ProcurementCode_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalProcurementMode] ADD  CONSTRAINT [DF_ProcurementCode_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalProcurementMode] ADD  CONSTRAINT [DF_ProcurementCode_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalProcurementMode] ADD  CONSTRAINT [DF_ProcurementCode_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Level1Checked]  DEFAULT ((0)) FOR [Review1Checked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Level2Checked]  DEFAULT ((0)) FOR [Review2Checked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Review3Checked]  DEFAULT ((0)) FOR [Review3Checked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Review4Checked]  DEFAULT ((0)) FOR [Review4Checked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Level3Checked]  DEFAULT ((0)) FOR [VerifierChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_EndorsementChecked1]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_EndorsementChecked]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Level3Checked1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Level1Checked1]  DEFAULT ((0)) FOR [Review1CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Level1CancelChecked1]  DEFAULT ((0)) FOR [Review2CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Review1CancelChecked1]  DEFAULT ((0)) FOR [Review3CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Review2CancelChecked1]  DEFAULT ((0)) FOR [Review4CancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Review3CancelChecked11]  DEFAULT ((0)) FOR [VerifierCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_EndorsementCancelChecked1]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_EndorsementCancelChecked]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Review4CancelChecked11]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_ModifiedBy1]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_ModifiedAt1_1]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_Sync1]  DEFAULT ((0)) FOR [Paid]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseSettlement] ADD  CONSTRAINT [DF_P01ExpenseSettlement_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementAttachments] ADD  CONSTRAINT [DF_P01ExpenseSettlementAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementAttachments] ADD  CONSTRAINT [DF_P01ExpenseSettlementAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementAttachments] ADD  CONSTRAINT [DF_P01ExpenseSettlementAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01ExpenseSettlementCost_Qty]  DEFAULT ((0)) FOR [Qty]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01ExpenseSettlementCost_UnitPrice]  DEFAULT ((0)) FOR [UnitPrice]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01ExpenseSettlementCost_ExchangeRate]  DEFAULT ((0)) FOR [ExchangeRate]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01P01ExpenseSettlementCost_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01P01ExpenseSettlementCost_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01P01ExpenseSettlementCost_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01P01ExpenseSettlementCost_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementCost] ADD  CONSTRAINT [DF_P01P01ExpenseSettlementCost_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_CarSupport]  DEFAULT ((0)) FOR [CarSupport]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_MealSupport]  DEFAULT ((0)) FOR [MealSupport]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_RemainingAnnualLeave]  DEFAULT ((0)) FOR [RemainingAnnualLeave]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorking] ADD  CONSTRAINT [DF_P01FlexibleWorking_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingApplicantRequest] ADD  CONSTRAINT [DF_FlexibleWorking_Name]  DEFAULT ('') FOR [FWARName]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingApplicantRequest] ADD  CONSTRAINT [DF_FlexibleWorking_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingApplicantRequest] ADD  CONSTRAINT [DF_FlexibleWorking_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingApplicantRequest] ADD  CONSTRAINT [DF_FlexibleWorking_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingApplicantRequest] ADD  CONSTRAINT [DF_FlexibleWorking_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingApplicantRequest] ADD  CONSTRAINT [DF_FlexibleWorking_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingAttachments] ADD  CONSTRAINT [DF_P01FlexibleWorkingAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingAttachments] ADD  CONSTRAINT [DF_P01FlexibleWorkingAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingAttachments] ADD  CONSTRAINT [DF_P01FlexibleWorkingAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_FromTime]  DEFAULT ('') FOR [StartTime]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_ToTime]  DEFAULT ('') FOR [EndTime]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_BreakTime]  DEFAULT ((0)) FOR [BreakTime]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_WorkingHours]  DEFAULT ((0)) FOR [WorkingHours]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_Departure]  DEFAULT ('') FOR [Reason]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingDetail] ADD  CONSTRAINT [DF_P01FlexibleWorkingDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingListWorker] ADD  CONSTRAINT [DF_P01FlexibleWorkingListWorker_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingListWorker] ADD  CONSTRAINT [DF_P01FlexibleWorkingListWorker_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingListWorker] ADD  CONSTRAINT [DF_P01FlexibleWorkingListWorker_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingListWorker] ADD  CONSTRAINT [DF_P01FlexibleWorkingListWorker_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingListWorker] ADD  CONSTRAINT [DF_P01FlexibleWorkingListWorker_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingPurpose] ADD  CONSTRAINT [DF_P01FlexibleWorkingPurpose_Name]  DEFAULT ('') FOR [FWPName]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingPurpose] ADD  CONSTRAINT [DF_P01FlexibleWorkingPurpose_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingPurpose] ADD  CONSTRAINT [DF_P01FlexibleWorkingPurpose_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingPurpose] ADD  CONSTRAINT [DF_P01FlexibleWorkingPurpose_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingPurpose] ADD  CONSTRAINT [DF_P01FlexibleWorkingPurpose_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01FlexibleWorkingPurpose] ADD  CONSTRAINT [DF_P01FlexibleWorkingPurpose_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01FormList] ADD  CONSTRAINT [DF_P01FormList_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01FormList] ADD  CONSTRAINT [DF_P01FormList_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01FormList] ADD  CONSTRAINT [DF_P01FormList_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01FormList] ADD  CONSTRAINT [DF_P01FormList_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01FormList] ADD  CONSTRAINT [DF_P01FormList_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_HandoverDate]  DEFAULT (getdate()) FOR [HandoverDate]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Level3Checked1]  DEFAULT ((0)) FOR [ReceivedByChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer1Checked_1]  DEFAULT ((0)) FOR [Reviewer1Checked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer2Checked_1]  DEFAULT ((0)) FOR [Reviewer2Checked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer3Checked_1]  DEFAULT ((0)) FOR [Reviewer3Checked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ConfirmChecked_1]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer4Checked_1]  DEFAULT ((0)) FOR [Reviewer4Checked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ApproverChecked_1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer1CancelChecked_1]  DEFAULT ((0)) FOR [Reviewer1CancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer2CancelChecked_1]  DEFAULT ((0)) FOR [Reviewer2CancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer3CancelChecked_1]  DEFAULT ((0)) FOR [Reviewer3CancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ConfirmCancelChecked_1]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Reviewer4CancelChecked_1]  DEFAULT ((0)) FOR [Reviewer4CancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ApproverCancelChecked_1]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_Review4CancelChecked11]  DEFAULT ((0)) FOR [ReceivedByCancelChecked]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ModifiedBy1]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ModifiedAt1_1]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01HandoverMinutes] ADD  CONSTRAINT [DF_P01HandoverMinutes_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01HandoverMinutesAttachments] ADD  CONSTRAINT [DF_P01HandoverMinutesAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01HandoverMinutesAttachments] ADD  CONSTRAINT [DF_P01HandoverMinutesAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01HandoverMinutesAttachments] ADD  CONSTRAINT [DF_P01HandoverMinutesAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01HandoverMinutesItem] ADD  CONSTRAINT [DF_P01P01HandoverMinutesItem_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01HandoverMinutesItem] ADD  CONSTRAINT [DF_P01P01HandoverMinutesItem_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01HandoverMinutesItem] ADD  CONSTRAINT [DF_P01P01HandoverMinutesItem_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01HandoverMinutesItem] ADD  CONSTRAINT [DF_P01P01HandoverMinutesItem_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01HandoverMinutesItem] ADD  CONSTRAINT [DF_P01P01HandoverMinutesItem_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_BudgetRequired]  DEFAULT ((0)) FOR [BudgetRequired]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ReportTitle]  DEFAULT ('') FOR [ReportTitle]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_IsSealRequired]  DEFAULT ((0)) FOR [IsSealRequired]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_IsConfidential]  DEFAULT ((0)) FOR [IsConfidential]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer1Checked]  DEFAULT ((0)) FOR [Reviewer1Checked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer2Checked]  DEFAULT ((0)) FOR [Reviewer2Checked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer3Checked]  DEFAULT ((0)) FOR [Reviewer3Checked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer4Checked]  DEFAULT ((0)) FOR [Reviewer4Checked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ApproverChecked]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Verifier1Checked]  DEFAULT ((0)) FOR [Verifier1Checked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer1CancelChecked]  DEFAULT ((0)) FOR [Reviewer1CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer2CancelChecked]  DEFAULT ((0)) FOR [Reviewer2CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer3CancelChecked]  DEFAULT ((0)) FOR [Reviewer3CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Reviewer4CancelChecked]  DEFAULT ((0)) FOR [Reviewer4CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ApproverCancelChecked]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_Verifier1CancelChecked]  DEFAULT ((0)) FOR [Verifier1CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01InternalApproval] ADD  CONSTRAINT [DF_P01InternalApproval_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01InternalApprovalAttachments] ADD  CONSTRAINT [DF_P01InternalApprovalAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalApprovalAttachments] ADD  CONSTRAINT [DF_P01InternalApprovalAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalApprovalAttachments] ADD  CONSTRAINT [DF_P01InternalApprovalAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalApprovalListReportTo] ADD  CONSTRAINT [DF_P01P01InternalApprovalListReportTo_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalApprovalListReportTo] ADD  CONSTRAINT [DF_P01P01InternalApprovalListReportTo_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalApprovalListReportTo] ADD  CONSTRAINT [DF_P01P01InternalApprovalListReportTo_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalApprovalListReportTo] ADD  CONSTRAINT [DF_P01P01InternalApprovalListReportTo_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01InternalApprovalListReportTo] ADD  CONSTRAINT [DF_P01P01InternalApprovalListReportTo_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CheckInformation]  DEFAULT ((0)) FOR [CheckInformation]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CheckInformation1]  DEFAULT ((0)) FOR [CheckReply]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CheckInformation2]  DEFAULT ((0)) FOR [CheckReview]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CheckInformation3]  DEFAULT ((0)) FOR [CheckAction]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CheckInformation4]  DEFAULT ((0)) FOR [CheckApproval]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CurrentLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer1Checked]  DEFAULT ((0)) FOR [Reviewer1Checked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer2Checked]  DEFAULT ((0)) FOR [Reviewer2Checked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer3Checked]  DEFAULT ((0)) FOR [Reviewer3Checked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer4Checked]  DEFAULT ((0)) FOR [Reviewer4Checked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ApproverChecked]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer1CancelChecked]  DEFAULT ((0)) FOR [Reviewer1CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer2CancelChecked]  DEFAULT ((0)) FOR [Reviewer2CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer3CancelChecked]  DEFAULT ((0)) FOR [Reviewer3CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_Reviewer4CancelChecked]  DEFAULT ((0)) FOR [Reviewer4CancelChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ApproverCancelChecked]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandum] ADD  CONSTRAINT [DF_P01InternalMemorandum_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandumAttachments] ADD  CONSTRAINT [DF_P01InternalMemorandumAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalMemorandumAttachments] ADD  CONSTRAINT [DF_P01InternalMemorandumAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandumAttachments] ADD  CONSTRAINT [DF_P01InternalMemorandumAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListCc] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListCc_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListCc] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListCc_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListCc] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListCc_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListCc] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListCc_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListCc] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListCc_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListTo] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListTo_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListTo] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListTo_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListTo] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListTo_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListTo] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListTo_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01InternalMemorandumListTo] ADD  CONSTRAINT [DF_P01P01InternalMemorandumListTo_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_CurrentLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer1Checked]  DEFAULT ((0)) FOR [Reviewer1Checked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer2Checked]  DEFAULT ((0)) FOR [Reviewer2Checked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer3Checked]  DEFAULT ((0)) FOR [Reviewer3Checked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer4Checked]  DEFAULT ((0)) FOR [Reviewer4Checked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_ApproverChecked]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer1CancelChecked]  DEFAULT ((0)) FOR [Reviewer1CancelChecked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer2CancelChecked]  DEFAULT ((0)) FOR [Reviewer2CancelChecked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer3CancelChecked]  DEFAULT ((0)) FOR [Reviewer3CancelChecked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_Reviewer4CancelChecked]  DEFAULT ((0)) FOR [Reviewer4CancelChecked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_ApproverCancelChecked]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ITRequest] ADD  CONSTRAINT [DF_P01ITRequest_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ITRequestAttachments] ADD  CONSTRAINT [DF_P01ITRequestAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ITRequestAttachments] ADD  CONSTRAINT [DF_P01ITRequestAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ITRequestAttachments] ADD  CONSTRAINT [DF_P01ITRequestAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_CarSupport]  DEFAULT ((0)) FOR [CarSupport]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level3Checked1_1]  DEFAULT ((0)) FOR [CheckByChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_RemainingAnnualLeave]  DEFAULT ((0)) FOR [RemainingAnnualLeave]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level3CancelChecked1]  DEFAULT ((0)) FOR [CheckByCancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_UploadAttach]  DEFAULT ((0)) FOR [UploadAttach]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LeaveDays] ADD  CONSTRAINT [DF_P01LeaveDays_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LeaveDaysAttachments] ADD  CONSTRAINT [DF_P01LeaveDaysAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LeaveDaysAttachments] ADD  CONSTRAINT [DF_P01LeaveDaysAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LeaveDaysAttachments] ADD  CONSTRAINT [DF_P01LeaveDaysAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_WorkShiftId]  DEFAULT ((0)) FOR [WorkShiftId]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_OTCId]  DEFAULT ('') FOR [OTCode]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] ADD  CONSTRAINT [DF_P01LeaveDaysDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LeaveStatus] ADD  CONSTRAINT [P01LeaveStatus_Name]  DEFAULT ('') FOR [LeaveStatusName]
GO
ALTER TABLE [dbo].[P01LeaveStatus] ADD  CONSTRAINT [P01LeaveStatus_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LeaveStatus] ADD  CONSTRAINT [P01LeaveStatus_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LeaveStatus] ADD  CONSTRAINT [P01LeaveStatus_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveStatus] ADD  CONSTRAINT [P01LeaveStatus_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LeaveStatus] ADD  CONSTRAINT [P01LeaveStatus_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LeaveTimeType] ADD  CONSTRAINT [DF_P01LeaveTimeType_Name]  DEFAULT ('') FOR [LeaveTimeName]
GO
ALTER TABLE [dbo].[P01LeaveTimeType] ADD  CONSTRAINT [DF_P01LeaveTimeType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LeaveTimeType] ADD  CONSTRAINT [DF_P01LeaveTimeType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LeaveTimeType] ADD  CONSTRAINT [DF_P01LeaveTimeType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveTimeType] ADD  CONSTRAINT [DF_P01LeaveTimeType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LeaveTimeType] ADD  CONSTRAINT [DF_P01LeaveTimeType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_Name]  DEFAULT ('') FOR [LeaveTypeName]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P01LeaveType_LeaveTypeName1]  DEFAULT ('') FOR [LeaveTypeName2]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_TinhPhep]  DEFAULT ((0)) FOR [IsAnnualLeave]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P01LeaveType_IsAnnualLeave1]  DEFAULT ((0)) FOR [IsAttachRequired]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P01LeaveType_IsAttachRequired1]  DEFAULT ((0)) FOR [IsHRVerify]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LeaveType] ADD  CONSTRAINT [DF_P00LeaveType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveAL] ADD  CONSTRAINT [DF_P01LevelApproveAL_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveAL] ADD  CONSTRAINT [DF_P01LevelApproveAL_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveAL] ADD  CONSTRAINT [DF_P01LevelApproveAL_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveAL] ADD  CONSTRAINT [DF_P01LevelApproveAL_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveAL] ADD  CONSTRAINT [DF_P01LevelApproveAL_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveAL] ADD  CONSTRAINT [DF_P01LevelApproveAL_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveBT] ADD  CONSTRAINT [DF_P01LevelApproveBT_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveBT] ADD  CONSTRAINT [DF_P01LevelApproveBT_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveBT] ADD  CONSTRAINT [DF_P01LevelApproveBT_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveBT] ADD  CONSTRAINT [DF_P01LevelApproveBT_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveBT] ADD  CONSTRAINT [DF_P01LevelApproveBT_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveBT] ADD  CONSTRAINT [DF_P01LevelApproveBT_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveBTC] ADD  CONSTRAINT [DF_P01LevelApproveBTC_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveBTC] ADD  CONSTRAINT [DF_P01LevelApproveBTC_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveBTC] ADD  CONSTRAINT [DF_P01LevelApproveBTC_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveBTC] ADD  CONSTRAINT [DF_P01LevelApproveBTC_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveBTC] ADD  CONSTRAINT [DF_P01LevelApproveBTC_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveBTC] ADD  CONSTRAINT [DF_P01LevelApproveBTC_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveCA] ADD  CONSTRAINT [DF_P01LevelApproveCA_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveCA] ADD  CONSTRAINT [DF_P01LevelApproveCA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveCA] ADD  CONSTRAINT [DF_P01LevelApproveCA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveCA] ADD  CONSTRAINT [DF_P01LevelApproveCA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveCA] ADD  CONSTRAINT [DF_P01LevelApproveCA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveCA] ADD  CONSTRAINT [DF_P01LevelApproveCA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveDR] ADD  CONSTRAINT [DF_P01LevelApproveDR_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveDR] ADD  CONSTRAINT [DF_P01LevelApproveDR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveDR] ADD  CONSTRAINT [DF_P01LevelApproveDR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveDR] ADD  CONSTRAINT [DF_P01LevelApproveDR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveDR] ADD  CONSTRAINT [DF_P01LevelApproveDR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveDR] ADD  CONSTRAINT [DF_P01LevelApproveDR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveEA] ADD  CONSTRAINT [DF_P01LevelApproveEA_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveEA] ADD  CONSTRAINT [DF_P01LevelApproveEA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveEA] ADD  CONSTRAINT [DF_P01LevelApproveEA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveEA] ADD  CONSTRAINT [DF_P01LevelApproveEA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveEA] ADD  CONSTRAINT [DF_P01LevelApproveEA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveEA] ADD  CONSTRAINT [DF_P01LevelApproveEA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveES] ADD  CONSTRAINT [DF_P01LevelApproveES_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveES] ADD  CONSTRAINT [DF_P01LevelApproveES_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveES] ADD  CONSTRAINT [DF_P01LevelApproveES_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveES] ADD  CONSTRAINT [DF_P01LevelApproveES_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveES] ADD  CONSTRAINT [DF_P01LevelApproveES_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveES] ADD  CONSTRAINT [DF_P01LevelApproveES_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveFW] ADD  CONSTRAINT [DF_P01LevelApproveFW_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveFW] ADD  CONSTRAINT [DF_P01LevelApproveFW_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveFW] ADD  CONSTRAINT [DF_P01LevelApproveFW_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveFW] ADD  CONSTRAINT [DF_P01LevelApproveFW_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveFW] ADD  CONSTRAINT [DF_P01LevelApproveFW_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveFW] ADD  CONSTRAINT [DF_P01LevelApproveFW_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveHM] ADD  CONSTRAINT [DF_P01LevelApproveHM_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveHM] ADD  CONSTRAINT [DF_P01LevelApproveHM_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveHM] ADD  CONSTRAINT [DF_P01LevelApproveHM_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveHM] ADD  CONSTRAINT [DF_P01LevelApproveHM_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveHM] ADD  CONSTRAINT [DF_P01LevelApproveHM_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveHM] ADD  CONSTRAINT [DF_P01LevelApproveHM_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveIA] ADD  CONSTRAINT [DF_P01LevelApproveIA_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveIA] ADD  CONSTRAINT [DF_P01LevelApproveIA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveIA] ADD  CONSTRAINT [DF_P01LevelApproveIA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveIA] ADD  CONSTRAINT [DF_P01LevelApproveIA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveIA] ADD  CONSTRAINT [DF_P01LevelApproveIA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveIA] ADD  CONSTRAINT [DF_P01LevelApproveIA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveIM] ADD  CONSTRAINT [DF_P01LevelApproveIM_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveIM] ADD  CONSTRAINT [DF_P01LevelApproveIM_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveIM] ADD  CONSTRAINT [DF_P01LevelApproveIM_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveIM] ADD  CONSTRAINT [DF_P01LevelApproveIM_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveIM] ADD  CONSTRAINT [DF_P01LevelApproveIM_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveIM] ADD  CONSTRAINT [DF_P01LevelApproveIM_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveITR] ADD  CONSTRAINT [DF_P01LevelApproveITR_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveITR] ADD  CONSTRAINT [DF_P01LevelApproveITR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveITR] ADD  CONSTRAINT [DF_P01LevelApproveITR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveITR] ADD  CONSTRAINT [DF_P01LevelApproveITR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveITR] ADD  CONSTRAINT [DF_P01LevelApproveITR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveITR] ADD  CONSTRAINT [DF_P01LevelApproveITR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveOFT] ADD  CONSTRAINT [DF_P01LevelApproveOFT_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveOFT] ADD  CONSTRAINT [DF_P01LevelApproveOFT_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveOFT] ADD  CONSTRAINT [DF_P01LevelApproveOFT_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveOFT] ADD  CONSTRAINT [DF_P01LevelApproveOFT_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveOFT] ADD  CONSTRAINT [DF_P01LevelApproveOFT_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveOFT] ADD  CONSTRAINT [DF_P01LevelApproveOFT_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveOT] ADD  CONSTRAINT [DF_P01LevelApproveOT_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveOT] ADD  CONSTRAINT [DF_P01LevelApproveOT_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveOT] ADD  CONSTRAINT [DF_P01LevelApproveOT_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveOT] ADD  CONSTRAINT [DF_P01LevelApproveOT_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveOT] ADD  CONSTRAINT [DF_P01LevelApproveOT_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveOT] ADD  CONSTRAINT [DF_P01LevelApproveOT_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveOTC] ADD  CONSTRAINT [DF_P01LevelApproveOTC_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveOTC] ADD  CONSTRAINT [DF_P01LevelApproveOTC_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveOTC] ADD  CONSTRAINT [DF_P01LevelApproveOTC_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveOTC] ADD  CONSTRAINT [DF_P01LevelApproveOTC_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveOTC] ADD  CONSTRAINT [DF_P01LevelApproveOTC_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveOTC] ADD  CONSTRAINT [DF_P01LevelApproveOTC_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApprovePR] ADD  CONSTRAINT [DF_P01LevelApprovePR_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApprovePR] ADD  CONSTRAINT [DF_P01LevelApprovePR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApprovePR] ADD  CONSTRAINT [DF_P01LevelApprovePR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApprovePR] ADD  CONSTRAINT [DF_P01LevelApprovePR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApprovePR] ADD  CONSTRAINT [DF_P01LevelApprovePR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApprovePR] ADD  CONSTRAINT [DF_P01LevelApprovePR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveWA] ADD  CONSTRAINT [DF_P01LevelApproveWA_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveWA] ADD  CONSTRAINT [DF_P01LevelApproveWA_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveWA] ADD  CONSTRAINT [DF_P01LevelApproveWA_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveWA] ADD  CONSTRAINT [DF_P01LevelApproveWA_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveWA] ADD  CONSTRAINT [DF_P01LevelApproveWA_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveWA] ADD  CONSTRAINT [DF_P01LevelApproveWA_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveWD] ADD  CONSTRAINT [DF_P01LevelApproveWD_Name]  DEFAULT ('') FOR [LevelName]
GO
ALTER TABLE [dbo].[P01LevelApproveWD] ADD  CONSTRAINT [DF_P01LevelApproveWD_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01LevelApproveWD] ADD  CONSTRAINT [DF_P01LevelApproveWD_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveWD] ADD  CONSTRAINT [DF_P01LevelApproveWD_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01LevelApproveWD] ADD  CONSTRAINT [DF_P01LevelApproveWD_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01LevelApproveWD] ADD  CONSTRAINT [DF_P01LevelApproveWD_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealByShift_AllowBR1]  DEFAULT ((0)) FOR [AllowEBR]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealByShift_IsActive3]  DEFAULT ((0)) FOR [AllowBR]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealByShift_IsActive2]  DEFAULT ((0)) FOR [AllowLU]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealByShift_IsActive1]  DEFAULT ((0)) FOR [AllowDI]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealByShift_AllowDI1]  DEFAULT ((0)) FOR [AllowEX]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealByShift_AllowBR1_1]  DEFAULT ((0)) FOR [AllowNBR]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealTypeByShift_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealTypeByShift_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealTypeByShift_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealTypeByShift_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealByShift] ADD  CONSTRAINT [DF_P01MealTypeByShift_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_AllowEBR]  DEFAULT ((0)) FOR [AllowEBR]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_AllowBR]  DEFAULT ((0)) FOR [AllowBR]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_AllowLU]  DEFAULT ((0)) FOR [AllowLU]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_AllowDI]  DEFAULT ((0)) FOR [AllowDI]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_AllowEX]  DEFAULT ((0)) FOR [AllowEX]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_AllowNBR]  DEFAULT ((0)) FOR [AllowNBR]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealByTime] ADD  CONSTRAINT [DF_P01MealByTime_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealMenu] ADD  CONSTRAINT [DF_P01MealMenu_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealMenu] ADD  CONSTRAINT [DF_P01MealMenu_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealMenu] ADD  CONSTRAINT [DF_P01MealMenu_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealMenu] ADD  CONSTRAINT [DF_P01MealMenu_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealMenu] ADD  CONSTRAINT [DF_P01MealMenu_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealMenuDetail] ADD  CONSTRAINT [DF_P01MealMenuDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealMenuDetail] ADD  CONSTRAINT [DF_P01MealMenuDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealMenuDetail] ADD  CONSTRAINT [DF_P01MealMenuDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealMenuDetail] ADD  CONSTRAINT [DF_P01MealMenuDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealMenuDetail] ADD  CONSTRAINT [DF_P01MealMenuDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealPlace] ADD  CONSTRAINT [DF_P01MealPlace_Name]  DEFAULT ('') FOR [MealPlaceName]
GO
ALTER TABLE [dbo].[P01MealPlace] ADD  CONSTRAINT [DF_P01MealPlace_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealPlace] ADD  CONSTRAINT [DF_P01MealPlace_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealPlace] ADD  CONSTRAINT [DF_P01MealPlace_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealPlace] ADD  CONSTRAINT [DF_P01MealPlace_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealPlace] ADD  CONSTRAINT [DF_P01MealPlace_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_MealKind]  DEFAULT ((1)) FOR [MealKindId]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_BRMealQty1]  DEFAULT ((0)) FOR [EBRMealQty]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_BRMealPlaceQty]  DEFAULT ((0)) FOR [BRMealQty]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_DIMealTypeId]  DEFAULT ((0)) FOR [DIMealTypeId]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_DIMealTypeQty]  DEFAULT ((0)) FOR [DIMealQty]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_EXMealTypeQty]  DEFAULT ((0)) FOR [EXMealQty]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealRegistrationAdd] ADD  CONSTRAINT [DF_P01MealRegistrationAdd_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_MealKind]  DEFAULT ((1)) FOR [MealKindId]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealRegistrationDefault] ADD  CONSTRAINT [DF_P01MealRegistrationDefault_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_MealKind]  DEFAULT ((1)) FOR [MealKindId]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_WorkShiftId]  DEFAULT ((0)) FOR [WorkShiftId]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_IsOvertime]  DEFAULT ((0)) FOR [IsOvertime]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealRegistrationDetail] ADD  CONSTRAINT [DF_P01MealRegistrationDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealType] ADD  CONSTRAINT [DF_P01MealType_Name]  DEFAULT ('') FOR [MealTypeName]
GO
ALTER TABLE [dbo].[P01MealType] ADD  CONSTRAINT [DF_P01MealType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealType] ADD  CONSTRAINT [DF_P01MealType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealType] ADD  CONSTRAINT [DF_P01MealType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealType] ADD  CONSTRAINT [DF_P01MealType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealType] ADD  CONSTRAINT [DF_P01MealType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01MealWorkShift] ADD  CONSTRAINT [DF_P01MealWorkShift_Name]  DEFAULT ('') FOR [WorkShiftName]
GO
ALTER TABLE [dbo].[P01MealWorkShift] ADD  CONSTRAINT [DF_P01MealWorkShift_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01MealWorkShift] ADD  CONSTRAINT [DF_P01MealWorkShift_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01MealWorkShift] ADD  CONSTRAINT [DF_P01MealWorkShift_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01MealWorkShift] ADD  CONSTRAINT [DF_P01MealWorkShift_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01MealWorkShift] ADD  CONSTRAINT [DF_P01MealWorkShift_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_CarSupport]  DEFAULT ((0)) FOR [CarSupport]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Level1Checked]  DEFAULT ((0)) FOR [Review1Checked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Level2Checked]  DEFAULT ((0)) FOR [Review2Checked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Review3Checked]  DEFAULT ((0)) FOR [Review3Checked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Review4Checked]  DEFAULT ((0)) FOR [Review4Checked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Level3Checked]  DEFAULT ((0)) FOR [VerifierChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_EndorsementChecked]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Level3Checked1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Level1Checked1]  DEFAULT ((0)) FOR [Review1CancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Level1CancelChecked1]  DEFAULT ((0)) FOR [Review2CancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Review1CancelChecked1]  DEFAULT ((0)) FOR [Review3CancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Review2CancelChecked1]  DEFAULT ((0)) FOR [Review4CancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Review3CancelChecked11]  DEFAULT ((0)) FOR [VerifierCancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_EndorsementCancelChecked]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_Review4CancelChecked11]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OfficialTrip] ADD  CONSTRAINT [DF_P01OfficialTrip_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripAttachments] ADD  CONSTRAINT [DF_P01OfficialTripAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OfficialTripAttachments] ADD  CONSTRAINT [DF_P01OfficialTripAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripAttachments] ADD  CONSTRAINT [DF_P01OfficialTripAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripDestination] ADD  CONSTRAINT [DF_OfficialTripDestination_Name]  DEFAULT ('') FOR [DestinationName]
GO
ALTER TABLE [dbo].[P01OfficialTripDestination] ADD  CONSTRAINT [DF_OfficialTripDestination_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OfficialTripDestination] ADD  CONSTRAINT [DF_OfficialTripDestination_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripDestination] ADD  CONSTRAINT [DF_OfficialTripDestination_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripDestination] ADD  CONSTRAINT [DF_OfficialTripDestination_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripDestination] ADD  CONSTRAINT [DF_OfficialTripDestination_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripDetail] ADD  CONSTRAINT [DF_P01OfficialTripDetail_CarSupport]  DEFAULT ((0)) FOR [CarSupport]
GO
ALTER TABLE [dbo].[P01OfficialTripDetail] ADD  CONSTRAINT [DF_P01P01OfficialTripDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OfficialTripDetail] ADD  CONSTRAINT [DF_P01P01OfficialTripDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripDetail] ADD  CONSTRAINT [DF_P01P01OfficialTripDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripDetail] ADD  CONSTRAINT [DF_P01P01OfficialTripDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripDetail] ADD  CONSTRAINT [DF_P01P01OfficialTripDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] ADD  CONSTRAINT [DF_P01P01OfficialTripTraveler_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] ADD  CONSTRAINT [DF_P01P01OfficialTripTraveler_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] ADD  CONSTRAINT [DF_P01P01OfficialTripTraveler_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] ADD  CONSTRAINT [DF_P01P01OfficialTripTraveler_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] ADD  CONSTRAINT [DF_P01P01OfficialTripTraveler_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_CarSupport]  DEFAULT ((0)) FOR [CarSupport]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_MealSupport]  DEFAULT ((0)) FOR [MealSupport]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_RemainingAnnualLeave]  DEFAULT ((0)) FOR [RemainingAnnualLeave]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01Overtime] ADD  CONSTRAINT [DF_P01Overtime_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OvertimeApplicantRequest] ADD  CONSTRAINT [DF_OAR_Name]  DEFAULT ('') FOR [OARName]
GO
ALTER TABLE [dbo].[P01OvertimeApplicantRequest] ADD  CONSTRAINT [DF_OAR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeApplicantRequest] ADD  CONSTRAINT [DF_OAR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeApplicantRequest] ADD  CONSTRAINT [DF_OAR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeApplicantRequest] ADD  CONSTRAINT [DF_OAR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OvertimeApplicantRequest] ADD  CONSTRAINT [DF_OAR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OvertimeAttachments] ADD  CONSTRAINT [DF_P01OvertimeAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeAttachments] ADD  CONSTRAINT [DF_P01OvertimeAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeAttachments] ADD  CONSTRAINT [DF_P01OvertimeAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_RemainingAnnualLeave]  DEFAULT ((0)) FOR [RemainingAnnualLeave]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmation] ADD  CONSTRAINT [DF_P01OvertimeConfirmation_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationAttachments] ADD  CONSTRAINT [DF_P01OvertimeAttachmentsConfirmation_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationAttachments] ADD  CONSTRAINT [DF_P01OvertimeAttachmentsConfirmation_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationAttachments] ADD  CONSTRAINT [DF_P01OvertimeAttachmentsConfirmation_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeConfirmationDetail_WorkDate]  DEFAULT ((0)) FOR [WorkDate]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_FromTime]  DEFAULT ('') FOR [StartTime]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_ToTime]  DEFAULT ('') FOR [EndTime]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_BreakTime]  DEFAULT ((0)) FOR [BreakTime]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_WorkingHours]  DEFAULT ((0)) FOR [WorkingHours]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_Departure]  DEFAULT ('') FOR [Reason]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeConfirmationDetail_WorkingHoursForCL]  DEFAULT ('') FOR [WorkingHoursForCL]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeConfirmationDetail_NumberOfCL]  DEFAULT ((0)) FOR [NumberOfCL]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeConfirmationDetail_NumberOfCLHours]  DEFAULT ('') FOR [NumberOfCLHours]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationDetail] ADD  CONSTRAINT [DF_P01OvertimeDetailConfirmation_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OvertimeConfirmationListWorker] ADD  CONSTRAINT [DF_P01OvertimeListEmployee_IsConfirm]  DEFAULT ((0)) FOR [IsConfirm]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_FromTime]  DEFAULT ('') FOR [StartTime]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_ToTime]  DEFAULT ('') FOR [EndTime]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_BreakTime]  DEFAULT ((0)) FOR [BreakTime]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_WorkingHours]  DEFAULT ((0)) FOR [WorkingHours]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_Departure]  DEFAULT ('') FOR [Reason]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OvertimeDetail] ADD  CONSTRAINT [DF_P01OvertimeDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01OvertimeListWorker] ADD  CONSTRAINT [DF_P01OvertimeListWorker_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01OvertimeListWorker] ADD  CONSTRAINT [DF_P01OvertimeListWorker_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01OvertimeListWorker] ADD  CONSTRAINT [DF_P01OvertimeListWorker_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01OvertimeListWorker] ADD  CONSTRAINT [DF_P01OvertimeListWorker_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01OvertimeListWorker] ADD  CONSTRAINT [DF_P01OvertimeListWorker_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01PaymentCurrency] ADD  CONSTRAINT [DF_P00PaymentCurrency_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PaymentCurrency] ADD  CONSTRAINT [DF_P00PaymentCurrency_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PaymentCurrency] ADD  CONSTRAINT [DF_P00PaymentCurrency_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PaymentCurrency] ADD  CONSTRAINT [DF_P00PaymentCurrency_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01PaymentCurrency] ADD  CONSTRAINT [DF_P00PaymentCurrency_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01PaymentMethod] ADD  CONSTRAINT [DF_P00PaymentMethod_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PaymentMethod] ADD  CONSTRAINT [DF_P00PaymentMethod_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PaymentMethod] ADD  CONSTRAINT [DF_P00PaymentMethod_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PaymentMethod] ADD  CONSTRAINT [DF_P00PaymentMethod_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01PaymentMethod] ADD  CONSTRAINT [DF_P00PaymentMethod_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_EAId]  DEFAULT ((0)) FOR [EAId]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ListEANumber]  DEFAULT ('') FOR [ListEANumber]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_BudgetAvailability]  DEFAULT ((0)) FOR [BudgetAvailability]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Level1Checked]  DEFAULT ((0)) FOR [Review1Checked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Level2Checked]  DEFAULT ((0)) FOR [Review2Checked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Review3Checked]  DEFAULT ((0)) FOR [Review3Checked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ConfirmChecked]  DEFAULT ((0)) FOR [ConfirmChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Review4Checked]  DEFAULT ((0)) FOR [Review4Checked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Level3Checked]  DEFAULT ((0)) FOR [VerifierChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_EndorsementChecked]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Level3Checked1]  DEFAULT ((0)) FOR [ApproverChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Level1Checked1]  DEFAULT ((0)) FOR [Review1CancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Level1CancelChecked1]  DEFAULT ((0)) FOR [Review2CancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Review1CancelChecked1]  DEFAULT ((0)) FOR [Review3CancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ConfirmCancelChecked]  DEFAULT ((0)) FOR [ConfirmCancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Review2CancelChecked1]  DEFAULT ((0)) FOR [Review4CancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Review3CancelChecked11]  DEFAULT ((0)) FOR [VerifierCancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_EndorsementCancelChecked]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Review4CancelChecked11]  DEFAULT ((0)) FOR [ApproverCancelChecked]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ModifiedBy1]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ModifiedAt1_1]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_Sync1]  DEFAULT ((0)) FOR [Paid]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisition] ADD  CONSTRAINT [DF_P01PurchaseRequisition_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionAttachments] ADD  CONSTRAINT [DF_P01PurchaseRequisitionAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionAttachments] ADD  CONSTRAINT [DF_P01PurchaseRequisitionAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionAttachments] ADD  CONSTRAINT [DF_P01PurchaseRequisitionAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01PurchaseRequisitionCost_EAId]  DEFAULT ((0)) FOR [EAId]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01PurchaseRequisitionCost_Qty]  DEFAULT ((0)) FOR [Qty]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01PurchaseRequisitionCost_UnitPrice]  DEFAULT ((0)) FOR [UnitPrice]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01PurchaseRequisitionCost_ExchangeRate]  DEFAULT ((0)) FOR [ExchangeRate]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionCost_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionCost_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionCost_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionCost_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionCost] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionCost_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01PurchaseRequisitionEvalue_Price]  DEFAULT ((0)) FOR [Price]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01PurchaseRequisitionEvalue_ExchangeRate]  DEFAULT ((0)) FOR [ExchangeRate]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01PurchaseRequisitionEvalue_Percen]  DEFAULT ((0)) FOR [Percen]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01PurchaseRequisitionEvalue_ProcuredAmount]  DEFAULT ((0)) FOR [ProcuredAmount]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01PurchaseRequisitionEvalue_IsChoose]  DEFAULT ((0)) FOR [IsChoose]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionEvalue_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionEvalue_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionEvalue_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionEvalue_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionEvalue] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionEvalue_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionListEAR] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionListEAR_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionListEAR] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionListEAR_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionListEAR] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionListEAR_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionListEAR] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionListEAR_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionListEAR] ADD  CONSTRAINT [DF_P01P01PurchaseRequisitionListEAR_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ReceiveAction] ADD  CONSTRAINT [P01ReceiveAction_Name]  DEFAULT ('') FOR [ReceiveActionName]
GO
ALTER TABLE [dbo].[P01ReceiveAction] ADD  CONSTRAINT [P01ReceiveAction_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ReceiveAction] ADD  CONSTRAINT [P01ReceiveAction_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ReceiveAction] ADD  CONSTRAINT [P01ReceiveAction_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ReceiveAction] ADD  CONSTRAINT [P01ReceiveAction_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ReceiveAction] ADD  CONSTRAINT [P01ReceiveAction_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01RequestStatus] ADD  CONSTRAINT [P01RequestStatus_Name]  DEFAULT ('') FOR [RequestStatusName]
GO
ALTER TABLE [dbo].[P01RequestStatus] ADD  CONSTRAINT [P01RequestStatus_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01RequestStatus] ADD  CONSTRAINT [P01RequestStatus_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01RequestStatus] ADD  CONSTRAINT [P01RequestStatus_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01RequestStatus] ADD  CONSTRAINT [P01RequestStatus_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01RequestStatus] ADD  CONSTRAINT [P01RequestStatus_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P00ScheduleType_Name]  DEFAULT ('') FOR [ScheduleTypeName]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P01ScheduleType_ScheduleTypeName1]  DEFAULT ('') FOR [ScheduleTypeName2]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P00ScheduleType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P00ScheduleType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P00ScheduleType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P00ScheduleType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01ScheduleType] ADD  CONSTRAINT [DF_P00ScheduleType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01TimeType] ADD  CONSTRAINT [DF_P01TimeType_Name]  DEFAULT ('') FOR [TimeName]
GO
ALTER TABLE [dbo].[P01TimeType] ADD  CONSTRAINT [DF_P01TimeType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01TimeType] ADD  CONSTRAINT [DF_P01TimeType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01TimeType] ADD  CONSTRAINT [DF_P01TimeType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01TimeType] ADD  CONSTRAINT [DF_P01TimeType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01TimeType] ADD  CONSTRAINT [DF_P01TimeType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01TravelerGroup] ADD  CONSTRAINT [DF_P00TravelerGroup_Name]  DEFAULT ('') FOR [TravelerGroupName]
GO
ALTER TABLE [dbo].[P01TravelerGroup] ADD  CONSTRAINT [DF_P00TravelerGroup_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01TravelerGroup] ADD  CONSTRAINT [DF_P00TravelerGroup_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01TravelerGroup] ADD  CONSTRAINT [DF_P00TravelerGroup_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01TravelerGroup] ADD  CONSTRAINT [DF_P00TravelerGroup_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01TravelerGroup] ADD  CONSTRAINT [DF_P00TravelerGroup_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01TravelType] ADD  CONSTRAINT [DF_P00TravelType_Name]  DEFAULT ('') FOR [TravelTypeName]
GO
ALTER TABLE [dbo].[P01TravelType] ADD  CONSTRAINT [DF_P00TravelType_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01TravelType] ADD  CONSTRAINT [DF_P00TravelType_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01TravelType] ADD  CONSTRAINT [DF_P00TravelType_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01TravelType] ADD  CONSTRAINT [DF_P00TravelType_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01TravelType] ADD  CONSTRAINT [DF_P00TravelType_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01WFHAttendance] ADD  CONSTRAINT [DF_P01WFHAttendance_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01WFHAttendanceAttachments] ADD  CONSTRAINT [DF_P01WFHAttendanceAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01WFHAttendanceAttachments] ADD  CONSTRAINT [DF_P01WFHAttendanceAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01WFHAttendanceAttachments] ADD  CONSTRAINT [DF_P01WFHAttendanceAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01WFHAttendanceDetail] ADD  CONSTRAINT [DF_P01WFHAttendanceDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01WFHAttendanceDetail] ADD  CONSTRAINT [DF_P01WFHAttendanceDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01WFHAttendanceDetail] ADD  CONSTRAINT [DF_P01WFHAttendanceDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01WFHAttendanceDetail] ADD  CONSTRAINT [DF_P01WFHAttendanceDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01WFHAttendanceDetail] ADD  CONSTRAINT [DF_P01WFHAttendanceDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_WorkDate]  DEFAULT (getdate()) FOR [WorkDate]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_CurrLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level2Checked]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level3Checked]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_EndorsementChecked_1]  DEFAULT ((0)) FOR [EndorsementChecked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level3Checked1]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level1Checked1]  DEFAULT ((0)) FOR [Level1CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level1CancelChecked1]  DEFAULT ((0)) FOR [Level2CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level3CancelChecked]  DEFAULT ((0)) FOR [Level3CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_EndorsementCancelChecked_1]  DEFAULT ((0)) FOR [EndorsementCancelChecked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_Level4CancelChecked]  DEFAULT ((0)) FOR [Level4CancelChecked]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_ManualApprovalBy]  DEFAULT ((-1)) FOR [ManualApprovalBy]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_ManualApprovalAt]  DEFAULT (getdate()) FOR [ManualApprovalAt]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_IsCompleted]  DEFAULT ((0)) FOR [Sync]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_ModifiedAt1]  DEFAULT (getdate()) FOR [LastSync]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P01WFHDailyReport] ADD  CONSTRAINT [DF_P01WFHDailyReport_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P01WFHDailyReportAttachments] ADD  CONSTRAINT [DF_P01WFHDailyReportAttachments_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P01WFHDailyReportAttachments] ADD  CONSTRAINT [DF_P01WFHDailyReportAttachments_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P01WFHDailyReportAttachments] ADD  CONSTRAINT [DF_P01WFHDailyReportAttachments_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02Car] ADD  CONSTRAINT [DF_P02Cars_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02Car] ADD  CONSTRAINT [DF_P02Cars_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02Car] ADD  CONSTRAINT [DF_P02Cars_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02Car] ADD  CONSTRAINT [DF_P02Cars_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02Car] ADD  CONSTRAINT [DF_P02Cars_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_PURTId]  DEFAULT ((0)) FOR [PURTId]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_PUPlaceName]  DEFAULT ('') FOR [PUPlaceName]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_DORTId]  DEFAULT ((0)) FOR [DORTId]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_DOPlaceName]  DEFAULT ('') FOR [DOPlaceName]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02CarRegistrationDefault] ADD  CONSTRAINT [DF_P02CarRegistrationDefault_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_PURTId]  DEFAULT ((0)) FOR [PURTId]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_Remark1]  DEFAULT ('') FOR [PUPlaceName]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_DORTId]  DEFAULT ((0)) FOR [DORTId]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_PlaceName1]  DEFAULT ('') FOR [DOPlaceName]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02CarRegistrationDetail] ADD  CONSTRAINT [DF_P02CarRegistrationDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_Name]  DEFAULT ('') FOR [WorkShiftName]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_OrderNo]  DEFAULT ((0)) FOR [OrderNo]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02CarWorkShift] ADD  CONSTRAINT [DF_P02CarWorkShift_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_Name]  DEFAULT ('') FOR [DriverName]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_EmailAddress]  DEFAULT ('') FOR [EmailAddress]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_PhoneNumber]  DEFAULT ('') FOR [PhoneNumber]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_SignPath]  DEFAULT ('') FOR [SignPath]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02Driver] ADD  CONSTRAINT [DF_P02Driver_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02Place] ADD  CONSTRAINT [DF_P02Places_Name]  DEFAULT ('') FOR [PlaceName]
GO
ALTER TABLE [dbo].[P02Place] ADD  CONSTRAINT [DF_P02Places_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02Place] ADD  CONSTRAINT [DF_P02Places_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02Place] ADD  CONSTRAINT [DF_P02Places_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02Place] ADD  CONSTRAINT [DF_P02Places_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02Place] ADD  CONSTRAINT [DF_P02Places_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02Route] ADD  CONSTRAINT [DF_P02Routes_Name]  DEFAULT ('') FOR [RouteName]
GO
ALTER TABLE [dbo].[P02Route] ADD  CONSTRAINT [DF_P02Routes_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02Route] ADD  CONSTRAINT [DF_P02Routes_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02Route] ADD  CONSTRAINT [DF_P02Routes_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02Route] ADD  CONSTRAINT [DF_P02Routes_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02Route] ADD  CONSTRAINT [DF_P02Routes_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_TotalKm]  DEFAULT ((0)) FOR [TotalKm]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_TotalMinute]  DEFAULT ((0)) FOR [TotalMinute]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_OrderNo]  DEFAULT ((0)) FOR [OrderNo]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P02RouteDetail] ADD  CONSTRAINT [DF_P02RouteDetail_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P03PEListCriteria] ADD  CONSTRAINT [DF_P03PEListCriteria_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P03PEListCriteria] ADD  CONSTRAINT [DF_P03PEListCriteria_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P03PEListCriteria] ADD  CONSTRAINT [DF_P03PEListCriteria_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P03PEListCriteria] ADD  CONSTRAINT [DF_P03PEListCriteria_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P03PEListCriteria] ADD  CONSTRAINT [DF_P03PEListCriteria_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P03PEListScore] ADD  CONSTRAINT [DF_P03Score_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P03PEListScore] ADD  CONSTRAINT [DF_P03Score_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P03PEListScore] ADD  CONSTRAINT [DF_P03Score_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P03PEListScore] ADD  CONSTRAINT [DF_P03Score_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P03PEListScore] ADD  CONSTRAINT [DF_P03Score_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluation] ADD  CONSTRAINT [DF_P03PerformanceEvaluation_Year]  DEFAULT (datepart(year,getdate())) FOR [WorkYear]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluation] ADD  CONSTRAINT [DF_P03PerformanceEvaluation_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluation] ADD  CONSTRAINT [DF_P03PerformanceEvaluation_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluation] ADD  CONSTRAINT [DF_P03PerformanceEvaluation_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluation] ADD  CONSTRAINT [DF_P03PerformanceEvaluation_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluation] ADD  CONSTRAINT [DF_P03PerformanceEvaluation_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationCriteria] ADD  CONSTRAINT [DF_P03PerformanceEvaluationCriteria_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationCriteria] ADD  CONSTRAINT [DF_P03PerformanceEvaluationCriteria_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationCriteria] ADD  CONSTRAINT [DF_P03PerformanceEvaluationCriteria_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationCriteria] ADD  CONSTRAINT [DF_P03PerformanceEvaluationCriteria_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationCriteria] ADD  CONSTRAINT [DF_P03PerformanceEvaluationCriteria_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationCriteria] ADD  CONSTRAINT [DF_P03PerformanceEvaluationCriteria_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_RequestStatus]  DEFAULT ('') FOR [RequestStatus]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_CurrentLevel]  DEFAULT ((0)) FOR [CurrentLevel]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_Level1Checked]  DEFAULT ((0)) FOR [Level1Checked]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_Level1Checked1]  DEFAULT ((0)) FOR [Level2Checked]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_Level1Checked2]  DEFAULT ((0)) FOR [Level3Checked]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_Level1Checked3]  DEFAULT ((0)) FOR [Level4Checked]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationEmployee] ADD  CONSTRAINT [DF_P03PerformanceEvaluationEmployee_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationTask] ADD  CONSTRAINT [DF_P03PerformanceEvaluationTask_Remark]  DEFAULT ('') FOR [Remark]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationTask] ADD  CONSTRAINT [DF_P03PerformanceEvaluationTask_IsActive]  DEFAULT ((1)) FOR [IsActive]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationTask] ADD  CONSTRAINT [DF_P03PerformanceEvaluationTask_CreatedBy]  DEFAULT ((-1)) FOR [CreatedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationTask] ADD  CONSTRAINT [DF_P03PerformanceEvaluationTask_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationTask] ADD  CONSTRAINT [DF_P03PerformanceEvaluationTask_ModifiedBy]  DEFAULT ((-1)) FOR [ModifiedBy]
GO
ALTER TABLE [dbo].[P03PerformanceEvaluationTask] ADD  CONSTRAINT [DF_P03PerformanceEvaluationTask_ModifiedAt]  DEFAULT (getdate()) FOR [ModifiedAt]
GO
ALTER TABLE [dbo].[P00Department]  WITH CHECK ADD  CONSTRAINT [FK_P00Department_P00Site] FOREIGN KEY([SiteId])
REFERENCES [dbo].[P00Site] ([SiteId])
GO
ALTER TABLE [dbo].[P00Department] CHECK CONSTRAINT [FK_P00Department_P00Site]
GO
ALTER TABLE [dbo].[P00Employee]  WITH CHECK ADD  CONSTRAINT [FK_P00Employee_P00Department] FOREIGN KEY([DeptId])
REFERENCES [dbo].[P00Department] ([DeptId])
GO
ALTER TABLE [dbo].[P00Employee] CHECK CONSTRAINT [FK_P00Employee_P00Department]
GO
ALTER TABLE [dbo].[P00Employee]  WITH CHECK ADD  CONSTRAINT [FK_P00Employee_P00Gender] FOREIGN KEY([GenderId])
REFERENCES [dbo].[P00Gender] ([GenderId])
GO
ALTER TABLE [dbo].[P00Employee] CHECK CONSTRAINT [FK_P00Employee_P00Gender]
GO
ALTER TABLE [dbo].[P00Employee]  WITH CHECK ADD  CONSTRAINT [FK_P00Employee_P00JobTitle] FOREIGN KEY([JobTitleId])
REFERENCES [dbo].[P00JobTitle] ([JobTitleId])
GO
ALTER TABLE [dbo].[P00Employee] CHECK CONSTRAINT [FK_P00Employee_P00JobTitle]
GO
ALTER TABLE [dbo].[P00Employee]  WITH CHECK ADD  CONSTRAINT [FK_P00Employee_P00Position] FOREIGN KEY([PositionId])
REFERENCES [dbo].[P00Position] ([PositionId])
GO
ALTER TABLE [dbo].[P00Employee] CHECK CONSTRAINT [FK_P00Employee_P00Position]
GO
ALTER TABLE [dbo].[P00Users]  WITH CHECK ADD  CONSTRAINT [FK_P00Users_P00Employee] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P00Users] CHECK CONSTRAINT [FK_P00Users_P00Employee]
GO
ALTER TABLE [dbo].[P00Users]  WITH CHECK ADD  CONSTRAINT [FK_P00Users_P00Permissions] FOREIGN KEY([PermissionId])
REFERENCES [dbo].[P00Permissions] ([PermissionId])
GO
ALTER TABLE [dbo].[P00Users] CHECK CONSTRAINT [FK_P00Users_P00Permissions]
GO
ALTER TABLE [dbo].[P00Users]  WITH CHECK ADD  CONSTRAINT [FK_P00Users_P00UserFunction] FOREIGN KEY([FunctionId])
REFERENCES [dbo].[P00UserFunction] ([FunctionId])
GO
ALTER TABLE [dbo].[P00Users] CHECK CONSTRAINT [FK_P00Users_P00UserFunction]
GO
ALTER TABLE [dbo].[P01AnnualLeave]  WITH CHECK ADD  CONSTRAINT [FK_P01AnnualLeave_P00Employee] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01AnnualLeave] CHECK CONSTRAINT [FK_P01AnnualLeave_P00Employee]
GO
ALTER TABLE [dbo].[P01BusinessTravel]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravel_P00Employee5] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01BusinessTravel] CHECK CONSTRAINT [FK_P01BusinessTravel_P00Employee5]
GO
ALTER TABLE [dbo].[P01BusinessTravelAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelAttachments_P01BusinessTravel] FOREIGN KEY([BTId])
REFERENCES [dbo].[P01BusinessTravel] ([BTId])
GO
ALTER TABLE [dbo].[P01BusinessTravelAttachments] CHECK CONSTRAINT [FK_P01BusinessTravelAttachments_P01BusinessTravel]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelClaim_P00Employee5] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] CHECK CONSTRAINT [FK_P01BusinessTravelClaim_P00Employee5]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelClaim_P01BusinessTravel] FOREIGN KEY([BTId])
REFERENCES [dbo].[P01BusinessTravel] ([BTId])
GO
ALTER TABLE [dbo].[P01BusinessTravelClaim] CHECK CONSTRAINT [FK_P01BusinessTravelClaim_P01BusinessTravel]
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelClaimAttachments_P01BusinessTravelClaim] FOREIGN KEY([BTCId])
REFERENCES [dbo].[P01BusinessTravelClaim] ([BTCId])
GO
ALTER TABLE [dbo].[P01BusinessTravelClaimAttachments] CHECK CONSTRAINT [FK_P01BusinessTravelClaimAttachments_P01BusinessTravelClaim]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelCost_P01BusinessTravel] FOREIGN KEY([BTId])
REFERENCES [dbo].[P01BusinessTravel] ([BTId])
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] CHECK CONSTRAINT [FK_P01BusinessTravelCost_P01BusinessTravel]
GO
ALTER TABLE [dbo].[P01BusinessTravelCost]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelCost_P01CostType] FOREIGN KEY([CostTypeId])
REFERENCES [dbo].[P01CostType] ([CostTypeId])
GO
ALTER TABLE [dbo].[P01BusinessTravelCost] CHECK CONSTRAINT [FK_P01BusinessTravelCost_P01CostType]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelTraveler_P00Employee] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] CHECK CONSTRAINT [FK_P01BusinessTravelTraveler_P00Employee]
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler]  WITH CHECK ADD  CONSTRAINT [FK_P01BusinessTravelTraveler_P01BusinessTravel] FOREIGN KEY([BTId])
REFERENCES [dbo].[P01BusinessTravel] ([BTId])
GO
ALTER TABLE [dbo].[P01BusinessTravelTraveler] CHECK CONSTRAINT [FK_P01BusinessTravelTraveler_P01BusinessTravel]
GO
ALTER TABLE [dbo].[P01CarArrangementAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01CarArrangementAttachments_P01CarArrangement] FOREIGN KEY([CAId])
REFERENCES [dbo].[P01CarArrangement] ([CAId])
GO
ALTER TABLE [dbo].[P01CarArrangementAttachments] CHECK CONSTRAINT [FK_P01CarArrangementAttachments_P01CarArrangement]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail]  WITH CHECK ADD  CONSTRAINT [FK_P01CarArrangementDetail_P01CarArrangement] FOREIGN KEY([CAId])
REFERENCES [dbo].[P01CarArrangement] ([CAId])
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] CHECK CONSTRAINT [FK_P01CarArrangementDetail_P01CarArrangement]
GO
ALTER TABLE [dbo].[P01CarArrangementDetail]  WITH CHECK ADD  CONSTRAINT [FK_P01CarArrangementDetail_P01CarArrangementType] FOREIGN KEY([CarTypeId])
REFERENCES [dbo].[P01CarArrangementType] ([CarTypeId])
GO
ALTER TABLE [dbo].[P01CarArrangementDetail] CHECK CONSTRAINT [FK_P01CarArrangementDetail_P01CarArrangementType]
GO
ALTER TABLE [dbo].[P01CostType]  WITH CHECK ADD  CONSTRAINT [FK_P01CostType_P01TravelType] FOREIGN KEY([TravelTypeId])
REFERENCES [dbo].[P01TravelType] ([TravelTypeId])
GO
ALTER TABLE [dbo].[P01CostType] CHECK CONSTRAINT [FK_P01CostType_P01TravelType]
GO
ALTER TABLE [dbo].[P01ExpenseApprovalAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01ExpenseApprovalAttachments_P01ExpenseApproval] FOREIGN KEY([EAId])
REFERENCES [dbo].[P01ExpenseApproval] ([EAId])
GO
ALTER TABLE [dbo].[P01ExpenseApprovalAttachments] CHECK CONSTRAINT [FK_P01ExpenseApprovalAttachments_P01ExpenseApproval]
GO
ALTER TABLE [dbo].[P01ExpenseSettlementAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01ExpenseSettlementAttachments_P01ExpenseSettlement] FOREIGN KEY([ESId])
REFERENCES [dbo].[P01ExpenseSettlement] ([ESId])
GO
ALTER TABLE [dbo].[P01ExpenseSettlementAttachments] CHECK CONSTRAINT [FK_P01ExpenseSettlementAttachments_P01ExpenseSettlement]
GO
ALTER TABLE [dbo].[P01HandoverMinutesAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01HandoverMinutesAttachments_P01HandoverMinutes] FOREIGN KEY([HMId])
REFERENCES [dbo].[P01HandoverMinutes] ([HMId])
GO
ALTER TABLE [dbo].[P01HandoverMinutesAttachments] CHECK CONSTRAINT [FK_P01HandoverMinutesAttachments_P01HandoverMinutes]
GO
ALTER TABLE [dbo].[P01LeaveDays]  WITH CHECK ADD  CONSTRAINT [FK_P01LeaveDays_P00Employee5] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01LeaveDays] CHECK CONSTRAINT [FK_P01LeaveDays_P00Employee5]
GO
ALTER TABLE [dbo].[P01LeaveDaysAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01LeaveDaysAttachments_P01LeaveDays] FOREIGN KEY([LeaveDayId])
REFERENCES [dbo].[P01LeaveDays] ([LeaveDayId])
GO
ALTER TABLE [dbo].[P01LeaveDaysAttachments] CHECK CONSTRAINT [FK_P01LeaveDaysAttachments_P01LeaveDays]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail]  WITH CHECK ADD  CONSTRAINT [FK_P01LeaveDaysDetail_P01LeaveDays] FOREIGN KEY([LeaveDayId])
REFERENCES [dbo].[P01LeaveDays] ([LeaveDayId])
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] CHECK CONSTRAINT [FK_P01LeaveDaysDetail_P01LeaveDays]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail]  WITH CHECK ADD  CONSTRAINT [FK_P01LeaveDaysDetail_P01LeaveTimeType] FOREIGN KEY([LeaveTimeId])
REFERENCES [dbo].[P01LeaveTimeType] ([LeaveTimeId])
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] CHECK CONSTRAINT [FK_P01LeaveDaysDetail_P01LeaveTimeType]
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail]  WITH CHECK ADD  CONSTRAINT [FK_P01LeaveDaysDetail_P01LeaveType] FOREIGN KEY([LeaveTypeId])
REFERENCES [dbo].[P01LeaveType] ([LeaveTypeId])
GO
ALTER TABLE [dbo].[P01LeaveDaysDetail] CHECK CONSTRAINT [FK_P01LeaveDaysDetail_P01LeaveType]
GO
ALTER TABLE [dbo].[P01OfficialTrip]  WITH CHECK ADD  CONSTRAINT [FK_P01OfficialTrip_P00Employee5] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01OfficialTrip] CHECK CONSTRAINT [FK_P01OfficialTrip_P00Employee5]
GO
ALTER TABLE [dbo].[P01OfficialTripAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01OfficialTripAttachments_P01OfficialTrip] FOREIGN KEY([OFTId])
REFERENCES [dbo].[P01OfficialTrip] ([OFTId])
GO
ALTER TABLE [dbo].[P01OfficialTripAttachments] CHECK CONSTRAINT [FK_P01OfficialTripAttachments_P01OfficialTrip]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler]  WITH CHECK ADD  CONSTRAINT [FK_P01OfficialTripTraveler_P00Employee] FOREIGN KEY([EmployeeId])
REFERENCES [dbo].[P00Employee] ([EmployeeId])
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] CHECK CONSTRAINT [FK_P01OfficialTripTraveler_P00Employee]
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler]  WITH CHECK ADD  CONSTRAINT [FK_P01OfficialTripTraveler_P01OfficialTrip] FOREIGN KEY([OFTId])
REFERENCES [dbo].[P01OfficialTrip] ([OFTId])
GO
ALTER TABLE [dbo].[P01OfficialTripTraveler] CHECK CONSTRAINT [FK_P01OfficialTripTraveler_P01OfficialTrip]
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionAttachments]  WITH CHECK ADD  CONSTRAINT [FK_P01PurchaseRequisitionAttachments_P01PurchaseRequisition] FOREIGN KEY([PRId])
REFERENCES [dbo].[P01PurchaseRequisition] ([PRId])
GO
ALTER TABLE [dbo].[P01PurchaseRequisitionAttachments] CHECK CONSTRAINT [FK_P01PurchaseRequisitionAttachments_P01PurchaseRequisition]
GO
/****** Object:  StoredProcedure [dbo].[sp_Backup_Database_VAPCODB]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE PROCEDURE [dbo].[sp_Backup_Database_VAPCODB]  
AS  
BEGIN  
DECLARE @dbname VARCHAR(MAX) = '' -- DB NAME TO CREATE BACKUP  
DECLARE @path VARCHAR(256) -- path of backup files  
DECLARE @fileName VARCHAR(256) -- filename for backup  
DECLARE @fileDate VARCHAR(20) -- used for file name  
  
SET @path = 'D:\BACKUP\DB\VAPCODB\'  
SET @dbname = 'VAPCODB'  
SET @fileDate = FORMAT(GETDATE(),'yyyyMMdd_HHmmss')  
  
BEGIN  
SET @fileName = @path + @dbname + '_' + @fileDate + '.BAK'  
BACKUP DATABASE @dbname TO DISK = @fileName  
END  
END  
GO
/****** Object:  StoredProcedure [dbo].[usp_Approval_Get_RequestList]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
                      
CREATE PROCEDURE [dbo].[usp_Approval_Get_RequestList]                    
(                    
 @EmployeeId int,                    
 @RequestStatus nvarchar(50)                    
)                    
AS                    
BEGIN                    
                    
IF(@RequestStatus = 'Pending')                    
BEGIN                    
--Pending                    
 select LeaveDayId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                   
 approvalURL,cancelURL,viewURL,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01LeaveDays                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId                     
-- --bt                    
UNION ALL                    
 select BTId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Purpose as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01BusinessTravel                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId                    
 --AND (CurrentApprover = @EmployeeId OR (VerifierEmployeeId =  @EmployeeId AND VerifierChecked = 0) OR (VerifierCancelEmployeeId = @EmployeeId AND VerifierCancelChecked = 0))                    
 --btc                    
UNION ALL                    
 select BTCId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, BTPurpose as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01BusinessTravelClaim                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                    
 --AND (CurrentApprover = @EmployeeId OR (VerifierEmployeeId =  @EmployeeId AND VerifierChecked = 0) OR (VerifierCancelEmployeeId = @EmployeeId AND VerifierCancelChecked = 0))                    
                    
 --ia                    
UNION ALL                    
 select IAId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01InternalApproval                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND (CurrentApprover = @EmployeeId                     
  OR (Verifier1EmployeeId =  @EmployeeId AND Verifier1Checked = 0) OR (Verifier1CancelEmployeeId = @EmployeeId AND Verifier1CancelChecked = 0)                    
 -- OR (Verifier2EmployeeId =  @EmployeeId AND Verifier2Checked = 0) OR (Verifier2CancelEmployeeId = @EmployeeId AND Verifier2CancelChecked = 0)                    
  )                    
                    
 --im                    
UNION ALL                    
 select IMId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel               ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01InternalMemorandum                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId                     
                    
 --CA                    
UNION ALL                    
 select CAId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Purpose as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01CarArrangement                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId                     
 --WA                    
UNION ALL                    
 select ATDId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus,  Reason as RequestSubject,                   
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01WFHAttendance                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId                     
                    
  --WD                    
UNION ALL                    
 select WDId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, PeriodOfWFH as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01WFHDailyReport                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId                     
                    
--ES                    
UNION ALL                    
 select ESId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, [Description] as RequestSubject,                   
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01ExpenseSettlement                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                    
                    
--EA                    
UNION ALL                    
 select EAId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Title as RequestSubject,              
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01ExpenseApproval                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                
                    
--OT                    
UNION ALL                    
 select OTId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                 
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01Overtime                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                    
                    
--OTC                    
UNION ALL                    
 select OTCId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01OvertimeConfirmation                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                    
                    
--FW                    
UNION ALL                    
 select FWId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,       CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01FlexibleWorking                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                    
                    
                    
--PR                    
UNION ALL                    
 select PRId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Title as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01PurchaseRequisition                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                    
                           
  --HM                    
UNION ALL                    
 select HMId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01HandoverMinutes                    
  where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
  AND CurrentApprover = @EmployeeId                   
          
 --DR                  
UNION ALL                    
 select DRId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01DailyReport                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId           
       
 --ITR                  
UNION ALL                    
 select ITRId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel                    
 ,IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01ITRequest                    
 where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')                    
 AND CurrentApprover = @EmployeeId           
              
END                    
ELSE                    
BEGIN                    
                    
 IF(@RequestStatus = 'PendingApproval') SET @RequestStatus = 'Pending'                    
--Other than Pending                    
 select LeaveDayId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01LeaveDays                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId  OR EndorsementEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                  
   
 --bt                    
UNION ALL                    
 select BTId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Purpose as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01BusinessTravel                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
 Review1EmployeeId =@EmployeeId OR Review2EmployeeId =@EmployeeId OR Review3EmployeeId =@EmployeeId                     
 OR Review4EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId OR EndorsementEmployeeId =@EmployeeId OR VerifierEmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                     
 --btc                    
UNION ALL                    
 select BTCId as FormId,ApplicationName, IssueDate, NumberCode,                    
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, BTPurpose as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01BusinessTravelClaim                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
  Review1EmployeeId =@EmployeeId OR Review2EmployeeId =@EmployeeId OR Review3EmployeeId =@EmployeeId OR Review4EmployeeId =@EmployeeId                     
  OR Review5EmployeeId =@EmployeeId OR Review6EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId OR EndorsementEmployeeId =@EmployeeId OR VerifierEmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)          
           
                     
 --ia                    
UNION ALL                    
 select IAId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                   
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                   
 from vP01InternalApproval                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
 Reviewer1EmployeeId =@EmployeeId OR Reviewer2EmployeeId =@EmployeeId OR Reviewer3EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId                     
  OR Reviewer4EmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR Verifier1EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId) -- OR Verifier2EmployeeId =@EmployeeId                    
                     
  --im                    
UNION ALL                    
 select IMId as FormId,ApplicationName, IssueDate, NumberCode,                   
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01InternalMemorandum                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
 Reviewer1EmployeeId =@EmployeeId OR Reviewer2EmployeeId =@EmployeeId OR Reviewer3EmployeeId =@EmployeeId  OR ConfirmEmployeeId=@EmployeeId                    
  OR Reviewer4EmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                    
                      
  --ca                    
UNION ALL                    
 select CAId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Purpose as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01CarArrangement                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
 Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId  OR ConfirmEmployeeId=@EmployeeId                    
  OR VerifyEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                    
                     
   --WA                    
UNION ALL                    
 select ATDId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Reason as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01WFHAttendance                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
 Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId                    
  OR EndorsementEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                    
                     
    --WD                    
UNION ALL                    
 select WDId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, PeriodOfWFH as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01WFHDailyReport                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                     
 Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId                    
  OR EndorsementEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                    
                     
                    
  --ES                    
UNION ALL                    
 select ESId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, [Description] as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01ExpenseSettlement                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Review1EmployeeId =@EmployeeId OR Review2EmployeeId =@EmployeeId OR Review3EmployeeId =@EmployeeId  OR ConfirmEmployeeId=@EmployeeId                    
  OR Review4EmployeeId =@EmployeeId OR EndorsementEmployeeId =@EmployeeId OR VerifierEmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                     
   --EA                    
UNION ALL                    
 select EAId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Title as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01ExpenseApproval                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Review1EmployeeId =@EmployeeId OR Review2EmployeeId =@EmployeeId OR Review3EmployeeId =@EmployeeId  OR ConfirmEmployeeId=@EmployeeId                    
  OR Review4EmployeeId =@EmployeeId OR EndorsementEmployeeId =@EmployeeId OR VerifierEmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                    
   --OT                    
UNION ALL                    
 select OTId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01Overtime                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId                    
  OR EndorsementEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                    
                      
--OTC                    
UNION ALL                    
 select OTCId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01OvertimeConfirmation                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId                     
  OR EndorsementEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                    
--FW                    
UNION ALL                    
 select FWId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Remark as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01FlexibleWorking                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Level1EmployeeId =@EmployeeId OR Level2EmployeeId =@EmployeeId OR Level3EmployeeId =@EmployeeId OR ConfirmEmployeeId=@EmployeeId                     
  OR EndorsementEmployeeId =@EmployeeId OR Level4EmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                    
                    
   --PR                    
UNION ALL                    
 select PRId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Title as RequestSubject,                    
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01PurchaseRequisition                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId OR                     
  Review1EmployeeId =@EmployeeId OR Review2EmployeeId =@EmployeeId OR Review3EmployeeId =@EmployeeId  OR ConfirmEmployeeId=@EmployeeId                    
  OR Review4EmployeeId =@EmployeeId OR EndorsementEmployeeId =@EmployeeId OR VerifierEmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                               
 --HM                    
UNION ALL                    
 select HMId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus,  Remark as RequestSubject,                   
 approvalURL,cancelURL,viewURL,CurrentApprover,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01HandoverMinutes                    
   Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
  ( EmployeeId = @EmployeeId                    
  OR ReceivedByEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                     
                    
 --DR                    
UNION ALL                    
 select DRId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01DailyReport                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR                Reviewer1EmployeeId =@EmployeeId OR Reviewer2EmployeeId =@EmployeeId OR Reviewer3EmployeeId =@EmployeeId                     
  OR Reviewer4EmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                    
                      
 --ITR                   
UNION ALL                    
 select ITRId as FormId,ApplicationName, IssueDate, NumberCode,                     
 EmployeeName, DeptName,JobTitleName, PositionName, RequestStatus, Subjects as RequestSubject,                    
 approvalURL,cancelURL,viewURL ,CurrentApprover ,CurrentLevel,                    
 IsActive,CreatedBy,CreatedByName,CreatedByEmployeeCode,CreatedByDeptName,CreatedByPositionName,                    
 CreatedByJobTitleName,CreatedAt ,ModifiedBy,ModifiedAt                    
 from vP01ITRequest                    
  Where IsActive = 1 AND RequestStatus = @RequestStatus AND                     
 ( EmployeeId = @EmployeeId OR Reviewer1EmployeeId =@EmployeeId OR Reviewer2EmployeeId =@EmployeeId OR Reviewer3EmployeeId =@EmployeeId                     
  OR Reviewer4EmployeeId =@EmployeeId OR ApproverEmployeeId =@EmployeeId OR ManualApprovalBy =@EmployeeId)                    
          
       
END                    
                    
END 
GO
/****** Object:  StoredProcedure [dbo].[usp_Approval_Get_RequestNumber]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
          
CREATE PROCEDURE [dbo].[usp_Approval_Get_RequestNumber]          
(          
 @EmployeeId int          
)          
AS          
BEGIN          
SET NOCOUNT ON;          
DECLARE @ttRequest int =0          
DECLARE @ttLD int = 0          
DECLARE @ttBT int = 0          
DECLARE @ttBTC int = 0          
DECLARE @ttIA int = 0          
DECLARE @ttIM int = 0          
DECLARE @ttCA int = 0          
DECLARE @ttWA int = 0          
DECLARE @ttWD int = 0          
DECLARE @ttES int = 0          
DECLARE @ttEA int = 0          
DECLARE @ttOT int = 0          
DECLARE @ttOTC int = 0          
DECLARE @ttFW int = 0          
DECLARE @ttPR int = 0          
DECLARE @ttOFT int = 0          
DECLARE @ttHM int = 0          
DECLARE @ttDR int = 0         
DECLARE @ttITR int = 0    
  
SET @ttLD = (select COUNT(LeaveDayId)          
   from P01LeaveDays          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
   AND (CurrentApprover = @EmployeeId           
   --OR (Level3EmployeeId =  @EmployeeId AND Level3Checked = 0) OR (Level3CancelEmployeeId = @EmployeeId AND Level3CancelChecked = 0)          
   ))          
          
SET @ttBT = ( select COUNT(BTId)          
   from P01BusinessTravel          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   --AND (CurrentApprover = @EmployeeId OR (VerifierEmployeeId =  @EmployeeId AND VerifierChecked = 0) OR (VerifierCancelEmployeeId = @EmployeeId AND VerifierCancelChecked = 0))          
   )          
 --btc          
SET @ttBTC = (select COUNT(BTCId )          
   from P01BusinessTravelClaim          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   --AND (CurrentApprover = @EmployeeId OR (VerifierEmployeeId =  @EmployeeId AND VerifierChecked = 0) OR (VerifierCancelEmployeeId = @EmployeeId AND VerifierCancelChecked = 0))          
   )          
 --ia          
SET @ttIA = (          
   select COUNT(IAId)          
   from P01InternalApproval          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
   AND (CurrentApprover = @EmployeeId           
    --OR (Verifier1EmployeeId =  @EmployeeId AND Verifier1Checked = 0) OR (Verifier1CancelEmployeeId = @EmployeeId AND Verifier1CancelChecked = 0)          
    --OR (Verifier2EmployeeId =  @EmployeeId AND Verifier2Checked = 0) OR (Verifier2CancelEmployeeId = @EmployeeId AND Verifier2CancelChecked = 0)          
    )          
  )          
          
  --im          
SET @ttIM = (          
   select COUNT(IMId)          
   from P01InternalMemorandum          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
   AND CurrentApprover = @EmployeeId           
  )          
          
    --im          
SET @ttCA = (          
   select COUNT(CAId)          
   from P01CarArrangement          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
   AND CurrentApprover = @EmployeeId           
  )          
      --im          
SET @ttWA = (          
   select COUNT(ATDId)          
   from P01WFHAttendance          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
   AND CurrentApprover = @EmployeeId           
  )          
          
SET @ttWD = (          
   select COUNT(WDId)          
   from P01WFHDailyReport          
   where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
   AND CurrentApprover = @EmployeeId           
  )          
          
 --ES          
SET @ttES = (select COUNT(ESId )          
   from P01ExpenseSettlement          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )          
          
 --EA          
SET @ttEA = (select COUNT(EAId )          
   from P01ExpenseApproval          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )                  
 --OT          
SET @ttOT = (select COUNT(OTId )          
   from P01Overtime          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )          
--OTC          
SET @ttOTC = (select COUNT(OTCId )          
   from P01OvertimeConfirmation          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )          
          
 --FW          
SET @ttFW = (select COUNT(FWId )          
   from P01FlexibleWorking          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )          
          
 --PR          
SET @ttPR = (select COUNT(EAId )          
   from P01PurchaseRequisition          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )          
          
 --Official trip          
SET @ttOFT = (select COUNT(OFTId )          
   from P01OfficialTrip          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )          
          
--Official trip          
SET @ttHM = (select COUNT(HMId )          
   from P01HandoverMinutes          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )     
       
--Daily report          
SET @ttDR = (select COUNT(DRId )          
   from P01DailyReport          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )       
     
 --IT Request          
SET @ttITR = (select COUNT(ITRId )          
   from P01ITRequest          
    where IsActive = 1 AND (RequestStatus = 'Pending' OR RequestStatus = 'PendingCancel')          
    AND CurrentApprover = @EmployeeId          
   )    
     
SET @ttRequest = @ttLD + @ttBT+ @ttBTC +@ttIA + @ttIM + @ttCA + @ttWA +          
    @ttWD + @ttES + @ttEA + @ttOT + @ttOTC + @ttFW + @ttPR + @ttOFT + @ttHM +   
 @ttDR + @ttITR  
  
SET NOCOUNT OFF;          
          
SELECT CAST(@ttRequest as int) AS PendingRequest          
END 
GO
/****** Object:  StoredProcedure [dbo].[usp_ApproverList_ChangeApprover]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create procedure [dbo].[usp_ApproverList_ChangeApprover]
AS
BEGIN
-- INS Director
DECLARE @_EmployeeId int = 233

INSERT INTO P01ApproverListAL(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListAL where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListBT(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListBT where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListBTC(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListBTC where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListCA(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListCA where EmployeeId = 22 AND DeptId IN (5)


INSERT INTO P01ApproverListEA(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListEA where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListES(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListES where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListFW(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListFW where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListIA(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListIA where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListIM(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListIM where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListInternalApproval(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from P01ApproverListInternalApproval where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListITR(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListITR where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListOFT(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListOFT where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListOT(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListOT where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListOTC(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListOTC where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListPR(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListPR where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListWA(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListWA where EmployeeId = 22 AND DeptId IN (5)

INSERT INTO P01ApproverListWD(DeptId,LevelId,EmployeeId)
select DeptId,LevelId,@_EmployeeId from vP01ApproverListWD where EmployeeId = 22 AND DeptId IN (5)

--INSERT INTO P01ApproverListDR(CId,DeptId,LevelId,EmployeeId)
--select CId,DeptId,LevelId,@_EmployeeId from vP01ApproverListDR where  LevelId = 5 AND DeptId IN (5)


--select * from vP01ApproverListDR where Cid =1 AND LevelId = 5 AND DeptId IN (5)
END
GO
/****** Object:  StoredProcedure [dbo].[usp_ApproverList_InsEmployee]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[usp_ApproverList_InsEmployee]
(
	@_DeptId int,
	@_LevelId int,
	@_EmployeeId int
)
AS
BEGIN
--AL
IF NOT EXISTS(SELECT 1 FROM P01ApproverListAL WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListAL(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--BT
IF NOT EXISTS(SELECT 1 FROM P01ApproverListBT WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListBT(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--BTC
IF NOT EXISTS(SELECT 1 FROM P01ApproverListBTC WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListBTC(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--CA
IF NOT EXISTS(SELECT 1 FROM P01ApproverListCA WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListCA(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--DR
IF NOT EXISTS(SELECT 1 FROM P01ApproverListDR WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListDR(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--EAR
IF NOT EXISTS(SELECT 1 FROM P01ApproverListEA WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListEA(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--ESR
IF NOT EXISTS(SELECT 1 FROM P01ApproverListES WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListES(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--FW
IF NOT EXISTS(SELECT 1 FROM P01ApproverListFW WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListFW(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--IA
IF NOT EXISTS(SELECT 1 FROM P01ApproverListIA WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListIA(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--IM
IF NOT EXISTS(SELECT 1 FROM P01ApproverListIM WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListIM(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--IA
IF NOT EXISTS(SELECT 1 FROM P01ApproverListInternalApproval WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListInternalApproval(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--ITR
IF NOT EXISTS(SELECT 1 FROM P01ApproverListITR WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListITR(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--OFT
IF NOT EXISTS(SELECT 1 FROM P01ApproverListOFT WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListOFT(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--OT
IF NOT EXISTS(SELECT 1 FROM P01ApproverListOT WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListOT(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--OTC
IF NOT EXISTS(SELECT 1 FROM P01ApproverListOTC WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListOTC(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--PR
IF NOT EXISTS(SELECT 1 FROM P01ApproverListPR WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListPR(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--WA
IF NOT EXISTS(SELECT 1 FROM P01ApproverListWA WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListWA(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

--WD
IF NOT EXISTS(SELECT 1 FROM P01ApproverListWD WHERE DeptId= DeptId AND LevelId = @_LevelId AND EmployeeId = @_EmployeeId)
INSERT INTO P01ApproverListWD(DeptId,LevelId,EmployeeId) VALUES (@_DeptId,@_LevelId,@_EmployeeId)

END


GO
/****** Object:  StoredProcedure [dbo].[usp_CarRegistration_InitializeData]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
            
CREATE PROCEDURE [dbo].[usp_CarRegistration_InitializeData]                        
(                        
 @StartDate smalldatetime,                
 @EndDate smalldatetime,                
 @EmployeeId int                
)                        
AS                        
BEGIN                        
SET NOCOUNT ON;                
--check condition                
DECLARE @_IsErr bit =0                
IF(@StartDate is null) SET @_IsErr = 1                
IF(@EndDate is null) SET @_IsErr = 1                
IF(@EndDate < @StartDate) SET @_IsErr = 1                
                
IF(@_IsErr=1) RETURN;                
                
                
DECLARE @cnt INT = 0;                
DECLARE @cnt_total INT = 0;                
DECLARE @WorkDate smalldatetime = @StartDate                
                
SET @cnt_total =  Cast((@EndDate - @StartDate) as int)                
WHILE @cnt <= @cnt_total                
BEGIN                
                 
SET @WorkDate = DATEADD(Day,@cnt,@StartDate)                
DECLARE @_WorkDateName nvarchar(20) = DATENAME(WEEKDAY,@WorkDate)                
               
                
IF(@_WorkDateName IN ('Saturday','Sunday'))               
BEGIN              
DECLARE @_DefaultValue INT = 0;               
DECLARE @_DefaultText nvarchar(20) = '';          
--at the weekend              
IF( @EmployeeId > 0)                
 BEGIN                
  INSERT INTO P02CarRegistrationDetail(EmployeeId,WorkDate,WorkShiftId,PURTId,PUPlaceName,DORTId,DOPlaceName)                
  SELECT EmployeeId,@WorkDate,@_DefaultValue,@_DefaultValue,@_DefaultText,@_DefaultValue,@_DefaultText                 
  FROM vP00Employee                 
  WHERE IsActive = 1 AND SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate                 
  AND EmployeeId NOT IN (SELECT EmployeeId FROM P02CarRegistrationDetail WHERE WorkDate = @WorkDate AND EmployeeId = @EmployeeId GROUP BY EmployeeId)                
  AND EmployeeId = @EmployeeId                
 END                
 ELSE                
 BEGIN                
  INSERT INTO P02CarRegistrationDetail(EmployeeId,WorkDate,WorkShiftId,PURTId,PUPlaceName,DORTId,DOPlaceName)                
  SELECT EmployeeId,@WorkDate,@_DefaultValue,@_DefaultValue,@_DefaultText,@_DefaultValue,@_DefaultText                
  FROM vP00Employee                 
  WHERE IsActive = 1 AND SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate                 
  AND EmployeeId NOT IN (SELECT EmployeeId FROM P02CarRegistrationDetail WHERE WorkDate = @WorkDate GROUP BY EmployeeId)                
 END                
               
END              
ELSE              
BEGIN              
--at the work day               
IF( @EmployeeId > 0)              
BEGIN              
 INSERT INTO P02CarRegistrationDetail(EmployeeId,WorkDate,WorkShiftId,PURTId,PUPlaceName,DORTId,DOPlaceName)              
 SELECT EmployeeId,@WorkDate,WorkShiftId,PURTId,PUPlaceName,DORTId,DOPlaceName              
 FROM vP02CarRegistrationDefault               
 WHERE SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate               
 AND EmployeeId NOT IN (SELECT EmployeeId FROM P02CarRegistrationDetail WHERE WorkDate = @WorkDate AND EmployeeId = @EmployeeId GROUP BY EmployeeId)              
    AND EmployeeId = @EmployeeId              
END              
ELSE              
BEGIN              
 INSERT INTO P02CarRegistrationDetail(EmployeeId,WorkDate,WorkShiftId,PURTId,PUPlaceName,DORTId,DOPlaceName)              
 SELECT EmployeeId,@WorkDate,WorkShiftId,PURTId,PUPlaceName,DORTId,DOPlaceName              
 FROM vP02CarRegistrationDefault               
 WHERE SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate               
 AND EmployeeId NOT IN (SELECT EmployeeId FROM P02CarRegistrationDetail WHERE WorkDate = @WorkDate GROUP BY EmployeeId)              
END              
              
END              
                
SET @cnt = @cnt + 1;                
                
END;                
         
SET NOCOUNT OFF;                
                
END 
GO
/****** Object:  StoredProcedure [dbo].[usp_Get_AnnualLeaveSummaryReport]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
  
    
CREATE PROCEDURE [dbo].[usp_Get_AnnualLeaveSummaryReport]      
(      
 @WorkYear nvarchar(20)      
)      
AS      
BEGIN      
--DECLARE @WorkYear nvarchar(20) = '2023'      
      
SELECT ROW_NUMBER() OVER(ORDER BY emp.SiteId, emp.DeptId, emp.EmployeeNo) as rowIndex,       
emp.EmployeeName, emp.PositionName, emp.SiteName, emp.DeptId, emp.DeptName, emp.FirstWorkingDate,    
ISNULL(ral.RemainLastYear,0) as ActualRemainLastYear, --so phep tieu chuan    
ISNULL(ral.RemainLastYear,0) as RemainALLastYear,      
ISNULL(ral.EntitledAL,0) as EntitledAL, --so phep tieu chuan    
ISNULL(ral.TotalEntitledAL,0) as TotalEntitledAL, -- tong so phep duoc huong    
0 as EntiledCL,  --so ngay nghi bu    
ISNULL(al.M01,0) as M01,      
ISNULL(al.M02,0) as M02,      
ISNULL(al.M03,0) as M03,      
ISNULL(al.M04,0) as M04,      
ISNULL(al.M05,0) as M05,      
ISNULL(al.M06,0) as M06,      
ISNULL(al.M07,0) as M07,      
ISNULL(al.M08,0) as M08,      
ISNULL(al.M09,0) as M09,      
ISNULL(al.M10,0) as M10,      
ISNULL(al.M11,0) as M11,      
ISNULL(al.M12,0) as M12,      
ISNULL(ral.Balance,0)  as RemainAL      
FROM vP00Employee emp      
LEFT JOIN     
(    
SELECT EmployeeId,EntitledAL,RemainLastYear,TotalEntitledAL,TotalAnnualLeave, Balance    
FROM vP01LeaveDaysRemainingAnnual     
WHERE IsActive = 1 AND WorkYear = @WorkYear    
) ral ON emp.EmployeeId = ral.EmployeeId    
LEFT JOIN      
(      
 SELECT EmployeeId,       
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'01'),NumberOfDay,0)) as M01,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'02'),NumberOfDay,0)) as M02,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'03'),NumberOfDay,0)) as M03,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'04'),NumberOfDay,0)) as M04,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'05'),NumberOfDay,0)) as M05,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'06'),NumberOfDay,0)) as M06,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'07'),NumberOfDay,0)) as M07,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'08'),NumberOfDay,0)) as M08,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'09'),NumberOfDay,0)) as M09,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'10'),NumberOfDay,0)) as M10,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'11'),NumberOfDay,0)) as M11,      
 SUM(IIF(FORMAT(LeaveDate,'yyyyMM') = CONCAT(@WorkYear,'12'),NumberOfDay,0)) as M12      
 FROM      
 (      
  SELECT EmployeeId,LeaveDate,NumberOfDay       
  FROM vP01LeaveDaysDetail      
  WHERE FORMAT(LeaveDate,'yyyy') = @WorkYear AND IsActive = 1 AND RequestStatus != 'Rejected' AND RequestStatus != 'Canceled' AND IsAnnualLeave = 1      
 ) lddt      
 GROUP BY EmployeeId      
) al ON emp.EmployeeId = al.EmployeeId      
WHERE emp.IsActive = 1      
ORDER BY emp.SiteId, emp.DeptId, emp.EmployeeNo    
      
END      
GO
/****** Object:  StoredProcedure [dbo].[usp_Get_MonthlyAttendanceReport]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
CREATE PROCEDURE [dbo].[usp_Get_MonthlyAttendanceReport]          
(          
 @YearMonth nvarchar(20)        
)          
AS          
BEGIN          
          
--DECLARE @YearMonth nvarchar(20) = @YearMonth          
DECLARE @WorkYear nvarchar(20) = LEFT(@YearMonth,4)    
DECLARE @tblAttendanceData TABLE    
(  
 EmployeeId int,   
 YearMonth nvarchar(100),  
 LeaveDate smalldatetime,  
 LeaveTypeId int,  
 NumberOfDay decimal (18,2),  
 LeaveTypeCode nvarchar (1000)  
)   
  
--insert data to table  
--Leave day  
INSERT INTO @tblAttendanceData(EmployeeId,YearMonth,LeaveDate,LeaveTypeId,NumberOfDay,LeaveTypeCode)  
select distinct t1.EmployeeId,FORMAT(t1.LeaveDate,'yyyy-MM') as YearMonth,LeaveDate , LeaveTypeId, NumberOfDay,LeaveTypeCode         
from vP01LeaveDaysDetail t1          
where t1.IsActive = 1 and FORMAT(t1.LeaveDate,'yyyy-MM') = @YearMonth and t1.RequestStatus = 'Approved'    
   
--BusinessTravel  
INSERT INTO @tblAttendanceData(EmployeeId,YearMonth,LeaveDate,LeaveTypeId,NumberOfDay,LeaveTypeCode)  
 SELECT btt.EmployeeId,FORMAT(btc.BTDate,'yyyy-MM') as YearMonth,     
 btc.BTDate as LeaveDate,     
 0 as LeaveTypeId,    
 btc.NumberOfDay,     
 IIF(NumberOfDay=1,'BT','BT/2') as LeaveTypeCode    
 FROM P01BusinessTravel bt    
 INNER JOIN P01BusinessTravelTraveler btt ON bt.BTId = btt.BTId    
 INNER JOIN vP01BusinessTravelCost btc ON bt.BTId = btc.BTId    
 WHERE bt.IsActive = 1 AND FORMAT(btc.BTDate,'yyyy-MM') = @YearMonth AND bt.RequestStatus = 'Approved'    
 GROUP BY btt.EmployeeId, btc.BTDate, btc.NumberOfDay    
    
--WFH  
INSERT INTO @tblAttendanceData(EmployeeId,YearMonth,LeaveDate,LeaveTypeId,NumberOfDay,LeaveTypeCode)   
   select distinct t1.EmployeeId,FORMAT(t1.RequestDate,'yyyy-MM') as YearMonth,  
   RequestDate  as LeaveDate, ScheduleTypeId as LeaveTypeId, NumberOfDay,          
    STUFF(          
     (SELECT ', ' + convert(nvarchar(50), t2.ScheduleTypeName, 120)          
      FROM vP01WFHAttendanceDetail t2          
      where t2.IsActive = 1 and FORMAT(t2.RequestDate,'yyyy-MM') = @YearMonth and t2.RequestStatus = 'Approved'           
      AND t1.EmployeeId = t2.EmployeeId AND t1.RequestDate = t2.RequestDate          
      FOR XML PATH (''))          
      , 1, 1, '')  AS LeaveTypeCode         
  from vP01WFHAttendanceDetail t1          
  where t1.IsActive = 1 and FORMAT(t1.RequestDate,'yyyy-MM') = @YearMonth and t1.RequestStatus = 'Approved'   
  
 --Overtime >= current date  
INSERT INTO @tblAttendanceData(EmployeeId,YearMonth,LeaveDate,LeaveTypeId,NumberOfDay,LeaveTypeCode)  
 SELECT btt.EmployeeId,FORMAT(btc.WorkDate,'yyyy-MM') as YearMonth,     
 btc.WorkDate as LeaveDate,     
 0 as LeaveTypeId,    
 0 as NumberOfDay,     
 --IIF(NumberOfDay=1,'BT','BT/2') as LeaveTypeCode    
 'OT' as LeaveTypeCode  
 FROM P01Overtime bt    
 INNER JOIN P01OvertimeListWorker btt ON bt.OTId = btt.OTId    
 INNER JOIN P01OvertimeDetail btc ON bt.OTId = btc.OTId    
 WHERE bt.IsActive = 1 AND FORMAT(btc.WorkDate,'yyyy-MM') = @YearMonth AND bt.RequestStatus = 'Approved'    
 AND bt.OTId NOT IN (SELECT OTId FROM P01OvertimeConfirmation where IsActive = 1 AND RequestStatus = 'Approved')  
 GROUP BY btt.EmployeeId, btc.WorkDate  
   
 --Overtime confirmmation < current date  
 INSERT INTO @tblAttendanceData(EmployeeId,YearMonth,LeaveDate,LeaveTypeId,NumberOfDay,LeaveTypeCode)  
 SELECT btt.EmployeeId,FORMAT(btc.WorkDate,'yyyy-MM') as YearMonth,     
 btc.WorkDate as LeaveDate,     
 0 as LeaveTypeId,    
 0 as NumberOfDay,     
 --IIF(NumberOfDay=1,'BT','BT/2') as LeaveTypeCode    
 'OT' as LeaveTypeCode  
 FROM P01OvertimeConfirmation bt    
 INNER JOIN P01OvertimeConfirmationListWorker btt ON bt.OTCId = btt.OTCId    
 INNER JOIN P01OvertimeConfirmationDetail btc ON bt.OTCId = btc.OTCId    
 WHERE bt.IsActive = 1 AND FORMAT(btc.WorkDate,'yyyy-MM') = @YearMonth AND bt.RequestStatus = 'Approved'    
 GROUP BY btt.EmployeeId, btc.WorkDate  
  
--holiday  
INSERT INTO @tblAttendanceData(EmployeeId,YearMonth,LeaveDate,LeaveTypeId,NumberOfDay,LeaveTypeCode)  
 SELECT  e.EmployeeId,FORMAT(hl.HLDate,'yyyy-MM') as YearMonth,     
 hl.HLDate as LeaveDate,   0 as LeaveTypeId,  1 as NumberOfDay,   'HL' as LeaveTypeCode    
 FROM P00Holiday hl    
 INNER JOIN P00Employee e ON hl.IsActive = e.IsActive   
 WHERE hl.IsActive = 1 AND FORMAT(HLDate,'yyyy-MM') = @YearMonth  
 GROUP BY e.EmployeeId,  hl.HLDate  
  
-- SELECT Data  
SELECT ROW_NUMBER() OVER(ORDER BY emp.SiteId,emp.DeptId,  emp.EmployeeNo) as rowIndex    
,emp.SiteId,emp.SiteName, emp.DeptId, emp.DeptName  
,emp.EmployeeName, emp.EmployeeCode, emp.PositionName, emp.JobTitleName  
,@YearMonth as YearMonth          
,ISNULL(D01,'') as D01          
,ISNULL(D02,'') as D02          
,ISNULL(D03,'') as D03          
,ISNULL(D04,'') as D04          
,ISNULL(D05,'') as D05          
,ISNULL(D06,'') as D06          
,ISNULL(D07,'') as D07          
,ISNULL(D08,'') as D08          
,ISNULL(D09,'') as D09          
,ISNULL(D10,'') as D10          
,ISNULL(D11,'') as D11          
,ISNULL(D12,'') as D12          
,ISNULL(D13,'') as D13          
,ISNULL(D14,'') as D14          
,ISNULL(D15,'') as D15          
,ISNULL(D16,'') as D16          
,ISNULL(D17,'') as D17          
,ISNULL(D18,'') as D18          
,ISNULL(D19,'') as D19          
,ISNULL(D20,'') as D20          
,ISNULL(D21,'') as D21          
,ISNULL(D22,'') as D22          
,ISNULL(D23,'') as D23          
,ISNULL(D24,'') as D24          
,ISNULL(D25,'') as D25          
,ISNULL(D26,'') as D26          
,ISNULL(D27,'') as D27          
,ISNULL(D28,'') as D28          
,ISNULL(D29,'') as D29          
,ISNULL(D30,'') as D30          
,ISNULL(D31,'') as D31     
,ISNULL(ral.TotalEntitledAL,0) as BeginningLeaves    
,ISNULL(ral.Balance,0) + ISNULL(dt.TakenAL,0) as CurrentAnnualLeaves      
,0 as TotalWorkingDays    
,0 as ActualWorkingDays    
,ISNULL(dt.TakenBT,0)  as BT    
,ISNULL(dt.TakenAL,0)  as TakenAL    
,ISNULL(dt.TakenCL,0)  as TakenCL    
,ISNULL(ral.Balance,0)  as RemainedAL    
FROM vP00Employee emp         
LEFT JOIN     
(    
 SELECT EmployeeId,EntitledAL,RemainLastYear,TotalEntitledAL,TotalAnnualLeave, Balance    
 FROM vP01LeaveDaysRemainingAnnual     
 WHERE IsActive = 1 AND WorkYear = @WorkYear    
) ral ON emp.EmployeeId = ral.EmployeeId    
LEFT JOIN (          
 SELECT atd.EmployeeId,atd.YearMonth          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '01',atd.LeaveTypeCode,NULL)) AS D01          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '02',atd.LeaveTypeCode,NULL)) AS D02          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '03',atd.LeaveTypeCode,'')) AS D03          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '04',atd.LeaveTypeCode,'')) AS D04          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '05',atd.LeaveTypeCode,'')) AS D05          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '06',atd.LeaveTypeCode,'')) AS D06          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '07',atd.LeaveTypeCode,'')) AS D07          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '08',atd.LeaveTypeCode,'')) AS D08          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '09',atd.LeaveTypeCode,'')) AS D09          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '10',atd.LeaveTypeCode,'')) AS D10          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '11',atd.LeaveTypeCode,'')) AS D11          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '12',atd.LeaveTypeCode,'')) AS D12          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '13',atd.LeaveTypeCode,'')) AS D13          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '14',atd.LeaveTypeCode,'')) AS D14          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '15',atd.LeaveTypeCode,'')) AS D15          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '16',atd.LeaveTypeCode,'')) AS D16          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '17',atd.LeaveTypeCode,'')) AS D17          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '18',atd.LeaveTypeCode,'')) AS D18          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '19',atd.LeaveTypeCode,'')) AS D19          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '20',atd.LeaveTypeCode,'')) AS D20          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '21',atd.LeaveTypeCode,'')) AS D21          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '22',atd.LeaveTypeCode,'')) AS D22          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '23',atd.LeaveTypeCode,'')) AS D23          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '24',atd.LeaveTypeCode,'')) AS D24          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '25',atd.LeaveTypeCode,'')) AS D25        
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '26',atd.LeaveTypeCode,'')) AS D26          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '27',atd.LeaveTypeCode,'')) AS D27          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '28',atd.LeaveTypeCode,'')) AS D28          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '29',atd.LeaveTypeCode,'')) AS D29          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '30',atd.LeaveTypeCode,'')) AS D30          
 ,MAX(IIF(FORMAT(atd.LeaveDate,'dd') = '31',atd.LeaveTypeCode,'')) AS D31      
 ,SUM(IIF(atd.LeaveTypeId = 1,atd.NumberOfDay,0)) AS TakenAL      
 ,SUM(IIF(atd.LeaveTypeId = 20,atd.NumberOfDay,0)) AS TakenCL      
 ,SUM(IIF(atd.LeaveTypeId = 0,atd.NumberOfDay,0)) AS TakenBT      
  FROM           
 (     
   
  select distinct t1.EmployeeId,FORMAT(t1.LeaveDate,'yyyy-MM') as YearMonth,LeaveDate , LeaveTypeId, NumberOfDay,          
    STUFF(          
     (SELECT ', ' + convert(nvarchar(50), t2.LeaveTypeCode, 120)          
      FROM @tblAttendanceData t2          
      where FORMAT(t2.LeaveDate,'yyyy-MM') = @YearMonth         
      AND t1.EmployeeId = t2.EmployeeId AND t1.LeaveDate = t2.LeaveDate          
      FOR XML PATH (''))          
      , 1, 1, '')  AS LeaveTypeCode         
  from @tblAttendanceData t1          
  where FORMAT(t1.LeaveDate,'yyyy-MM') = @YearMonth  
  
  
  --select distinct t1.EmployeeId,FORMAT(t1.LeaveDate,'yyyy-MM') as YearMonth,LeaveDate , LeaveTypeId, NumberOfDay,          
  --  STUFF(          
  --   (SELECT ', ' + convert(nvarchar(50), t2.LeaveTypeCode, 120)          
  --    FROM vP01LeaveDaysDetail t2          
  --    where t2.IsActive = 1 and FORMAT(t2.LeaveDate,'yyyy-MM') = @YearMonth and t2.RequestStatus = 'Approved'           
  --    AND t1.EmployeeId = t2.EmployeeId AND t1.LeaveDate = t2.LeaveDate          
  --    FOR XML PATH (''))          
  --    , 1, 1, '')  AS LeaveTypeCode         
  --from vP01LeaveDaysDetail t1          
  --where t1.IsActive = 1 and FORMAT(t1.LeaveDate,'yyyy-MM') = @YearMonth and t1.RequestStatus = 'Approved'          
    
--UNION ALL    
    
-- SELECT btt.EmployeeId,FORMAT(btc.BTDate,'yyyy-MM') as YearMonth,     
-- btc.BTDate as LeaveDate,     
-- 0 as LeaveTypeId,    
-- btc.NumberOfDay,     
-- IIF(NumberOfDay=1,'BT','BT/2') as LeaveTypeCode    
-- FROM P01BusinessTravel bt    
-- INNER JOIN P01BusinessTravelTraveler btt ON bt.BTId = btt.BTId    
-- INNER JOIN vP01BusinessTravelCost btc ON bt.BTId = btc.BTId    
-- WHERE bt.IsActive = 1 AND FORMAT(btc.BTDate,'yyyy-MM') = @YearMonth AND bt.RequestStatus = 'Approved'    
-- GROUP BY btt.EmployeeId, btc.BTDate, btc.NumberOfDay    
    
--UNION ALL    
--   select distinct t1.EmployeeId,FORMAT(t1.RequestDate,'yyyy-MM') as YearMonth,  
--   RequestDate  as LeaveDate, ScheduleTypeId as LeaveTypeId, NumberOfDay,          
--    STUFF(          
--     (SELECT ', ' + convert(nvarchar(50), t2.ScheduleTypeName, 120)          
--      FROM vP01WFHAttendanceDetail t2          
--      where t2.IsActive = 1 and FORMAT(t2.RequestDate,'yyyy-MM') = @YearMonth and t2.RequestStatus = 'Approved'           
--      AND t1.EmployeeId = t2.EmployeeId AND t1.RequestDate = t2.RequestDate          
--      FOR XML PATH (''))          
--      , 1, 1, '')  AS LeaveTypeCode         
--  from vP01WFHAttendanceDetail t1          
--  where t1.IsActive = 1 and FORMAT(t1.RequestDate,'yyyy-MM') = @YearMonth and t1.RequestStatus = 'Approved'   
  
----holiday  
--UNION ALL  
-- SELECT  e.EmployeeId,FORMAT(hl.HLDate,'yyyy-MM') as YearMonth,     
-- hl.HLDate as LeaveDate,     
-- 0 as LeaveTypeId,    
-- 1 as NumberOfDay,     
-- 'HL' as LeaveTypeCode    
-- FROM P00Holiday hl    
-- INNER JOIN P00Employee e ON hl.IsActive = e.IsActive   
-- WHERE hl.IsActive = 1 AND FORMAT(HLDate,'yyyy-MM') = '2024-09'  
-- GROUP BY e.EmployeeId,  hl.HLDate  
  
 ) atd          
 GROUP BY atd.EmployeeId,atd.YearMonth          
) dt ON emp.EmployeeId = dt.EmployeeId          
 WHERE emp.IsActive = 1  
 ORDER BY SiteId,DeptId, EmployeeNo  
END          
GO
/****** Object:  StoredProcedure [dbo].[usp_MealManagement_InitializeData]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
    
      
        
CREATE PROCEDURE [dbo].[usp_MealManagement_InitializeData]                
(                
 @StartDate smalldatetime,        
 @EndDate smalldatetime,        
 @EmployeeId int        
)                
AS                
BEGIN                
SET NOCOUNT ON;        
--check condition        
DECLARE @_IsErr bit =0        
IF(@StartDate is null) SET @_IsErr = 1        
IF(@EndDate is null) SET @_IsErr = 1        
IF(@EndDate < @StartDate) SET @_IsErr = 1        
        
IF(@_IsErr=1) RETURN;        
        
        
DECLARE @cnt INT = 0;        
DECLARE @cnt_total INT = 0;        
DECLARE @WorkDate smalldatetime = @StartDate        
        
SET @cnt_total =  Cast((@EndDate - @StartDate) as int)        
WHILE @cnt <= @cnt_total        
BEGIN        
         
SET @WorkDate = DATEADD(Day,@cnt,@StartDate)        
DECLARE @_WorkDateName nvarchar(20) = DATENAME(WEEKDAY,@WorkDate)        
       
        
IF(@_WorkDateName IN ('Saturday','Sunday'))       
BEGIN      
DECLARE @_DefaultValue INT = 0;       
      
IF( @EmployeeId > 0)        
 BEGIN        
  INSERT INTO P01MealRegistrationDetail(EmployeeId,WorkDate,MealKindId,EBRMealTypeId,EBRMealPlaceId,BRMealTypeId,BRMealPlaceId,LUMealTypeId,LUMealPlaceId,DIMealTypeId,DIMealPlaceId,EXMealTypeId,EXMealPlaceId,WorkShiftId)        
  SELECT EmployeeId,@WorkDate,EmployeeTypeId,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue         
  FROM vP00Employee         
  WHERE IsActive = 1 AND SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate         
  AND EmployeeId NOT IN (SELECT EmployeeId FROM P01MealRegistrationDetail WHERE WorkDate = @WorkDate AND EmployeeId = @EmployeeId GROUP BY EmployeeId)        
  AND EmployeeId = @EmployeeId        
 END        
 ELSE        
 BEGIN        
  INSERT INTO P01MealRegistrationDetail(EmployeeId,WorkDate,MealKindId,EBRMealTypeId,EBRMealPlaceId,BRMealTypeId,BRMealPlaceId,LUMealTypeId,LUMealPlaceId,DIMealTypeId,DIMealPlaceId,EXMealTypeId,EXMealPlaceId,WorkShiftId)        
  SELECT EmployeeId,@WorkDate,EmployeeTypeId,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue,@_DefaultValue         
  FROM vP00Employee         
  WHERE IsActive = 1 AND SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate         
  AND EmployeeId NOT IN (SELECT EmployeeId FROM P01MealRegistrationDetail WHERE WorkDate = @WorkDate GROUP BY EmployeeId)        
 END        
       
END      
ELSE      
BEGIN      
      
IF( @EmployeeId > 0)      
BEGIN      
 INSERT INTO P01MealRegistrationDetail(EmployeeId,WorkDate,MealKindId,EBRMealTypeId,EBRMealPlaceId,BRMealTypeId,BRMealPlaceId,LUMealTypeId,LUMealPlaceId,DIMealTypeId,DIMealPlaceId,EXMealTypeId,EXMealPlaceId,WorkShiftId)      
 SELECT EmployeeId,@WorkDate,MealKindId,EBRMealTypeId,EBRMealPlaceId,BRMealTypeId,BRMealPlaceId,LUMealTypeId,LUMealPlaceId,DIMealTypeId,DIMealPlaceId,EXMealTypeId,EXMealPlaceId,WorkShiftId      
 FROM vP01MealRegistrationDefault       
 WHERE SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate       
 AND EmployeeId NOT IN (SELECT EmployeeId FROM P01MealRegistrationDetail WHERE WorkDate = @WorkDate AND EmployeeId = @EmployeeId GROUP BY EmployeeId)      
    AND EmployeeId = @EmployeeId      
END      
ELSE      
BEGIN      
 INSERT INTO P01MealRegistrationDetail(EmployeeId,WorkDate,MealKindId,EBRMealTypeId,EBRMealPlaceId,BRMealTypeId,BRMealPlaceId,LUMealTypeId,LUMealPlaceId,DIMealTypeId,DIMealPlaceId,EXMealTypeId,EXMealPlaceId,WorkShiftId)      
 SELECT EmployeeId,@WorkDate,MealKindId,EBRMealTypeId,EBRMealPlaceId,BRMealTypeId,BRMealPlaceId,LUMealTypeId,LUMealPlaceId,DIMealTypeId,DIMealPlaceId,EXMealTypeId,EXMealPlaceId,WorkShiftId      
 FROM vP01MealRegistrationDefault       
 WHERE SiteId IN (2,3) AND ISNULL(FirstWorkingDate,'2024-01-01') < @WorkDate       
 AND EmployeeId NOT IN (SELECT EmployeeId FROM P01MealRegistrationDetail WHERE WorkDate = @WorkDate GROUP BY EmployeeId)      
END      
      
END      
        
SET @cnt = @cnt + 1;        
        
END;        
        
SET NOCOUNT OFF;        
        
END        
        
GO
/****** Object:  StoredProcedure [dbo].[usp_MealManagement_Summary]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
  
    
CREATE PROCEDURE [dbo].[usp_MealManagement_Summary]               
(                  
  @StartDate smalldatetime,          
  @EndDate smalldatetime,    
  @MealKindId int       
)                  
AS                  
BEGIN                   
 SET NOCOUNT ON;    
    
 DECLARE @tblMealSummaryData TABLE    
(        
 groupIndex int,    
 rowIndex int,    
 SiteId int,    
 SiteName nvarchar(100),     
 DeptId int,     
 DeptName nvarchar(100),          
 EmployeeName nvarchar(100),     
 EmployeeCode nvarchar(100),     
 PositionName nvarchar(100),     
 JobTitleName nvarchar(100),        
 MealKindName nvarchar(100),    
 MealCode nvarchar(100),     
 D01 nvarchar(100),       
 D02 nvarchar(100),       
 D03 nvarchar(100),       
 D04 nvarchar(100),       
 D05 nvarchar(100),       
 D06 nvarchar(100),       
 D07 nvarchar(100),       
 D08 nvarchar(100),       
 D09 nvarchar(100),       
 D10 nvarchar(100),       
 D11 nvarchar(100),       
 D12 nvarchar(100),       
 D13 nvarchar(100),       
 D14 nvarchar(100),       
 D15 nvarchar(100),       
 D16 nvarchar(100),       
 D17 nvarchar(100),       
 D18 nvarchar(100),       
 D19 nvarchar(100),       
 D20 nvarchar(100),       
 D21 nvarchar(100),       
 D22 nvarchar(100),       
 D23 nvarchar(100),       
 D24 nvarchar(100),       
 D25 nvarchar(100),       
 D26 nvarchar(100),       
 D27 nvarchar(100),       
 D28 nvarchar(100),       
 D29 nvarchar(100),       
 D30 nvarchar(100),       
 D31 nvarchar(100)        
)      
    
DECLARE @tblMealSummary1 TABLE    
(    
 EmployeeId int,     
 SiteName nvarchar(100),    
 MealKindName nvarchar(100),    
 DayCode nvarchar(100),     
 MealCode nvarchar(100),    
 EBRMealTypeId int,    
 EBRMealPlaceCode nvarchar(100),    
 BRMealTypeId int,    
 BRMealPlaceCode nvarchar(100), 
 LUMealTypeId int,    
 LUMealPlaceCode nvarchar(100),    
 DIMealTypeId int,    
 DIMealPlaceCode  nvarchar(100),    
 EXMealTypeId int,    
 EXMealPlaceCode  nvarchar(100)    
);    
    
DECLARE @tblMealSummary2 TABLE    
(    
 rowIndex int,    
 SiteName nvarchar(100),    
 EmployeeId int,     
 MealKindName nvarchar(100),    
 DayCode nvarchar(100),     
 MealCode nvarchar(100),    
 MealIndex int,    
 PlaceCode nvarchar(100)     
);    
    
DECLARE @tblMealSummaryEmployee  TABLE    
(    
 EmployeeId int,    
 rowIndex int,    
 SiteId int,    
 SiteName nvarchar(100),    
 DeptId int,     
 DeptName nvarchar(100),     
 EmployeeNo int,      
 EmployeeName  nvarchar(100),     
 EmployeeCode nvarchar(100),     
 PositionName nvarchar(100),    
 JobTitleName nvarchar(100)    
);    
    
    
--select all data    
INSERT INTO @tblMealSummary1    
select EmployeeId,SiteName, MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'' as MealCode,    
EBRMealTypeId,EBRMealPlaceCode,BRMealTypeId,BRMealPlaceCode,LUMealTypeId,LUMealPlaceCode,DIMealTypeId,DIMealPlaceCode,EXMealTypeId,EXMealPlaceCode      
FROM  vP01MealRegistrationDetail        
where IsActive = 1 AND MealKindId = @MealKindId AND WorkDate BETWEEN @StartDate AND @EndDate    

--get EBR    
INSERT INTO @tblMealSummary2 (rowIndex,SiteName, EmployeeId, MealKindName,DayCode,MealCode, MealIndex,PlaceCode )    
select 0 as rowIndex,SiteName, EmployeeId, MealKindName,DayCode, N'EBR' as MealCode, CAST(1 as int) as MealIndex, CAST(EBRMealPlaceCode as nvarchar(50)) as PlaceCode        
FROM @tblMealSummary1   

--get BR    
INSERT INTO @tblMealSummary2 (rowIndex,SiteName, EmployeeId, MealKindName,DayCode,MealCode, MealIndex,PlaceCode )    
select 0 as rowIndex,SiteName, EmployeeId, MealKindName,DayCode, N'BR' as MealCode, CAST(2 as int) as MealIndex, CAST(BRMealPlaceCode as nvarchar(50)) as PlaceCode        
FROM @tblMealSummary1       
--where BRMealTypeId > 0         
        
--get LU    
INSERT INTO @tblMealSummary2 (rowIndex,SiteName, EmployeeId, MealKindName,DayCode,MealCode, MealIndex,PlaceCode )    
select  0 as rowIndex,SiteName,EmployeeId,MealKindName,DayCode, N'LU' as MealCode, CAST(3 as int) as MealIndex, CAST(LUMealPlaceCode as nvarchar(50)) as PlaceCode        
FROM @tblMealSummary1       
--where LUMealTypeId > 0     
    
--get DI    
INSERT INTO @tblMealSummary2 (rowIndex,SiteName, EmployeeId, MealKindName,DayCode,MealCode, MealIndex,PlaceCode )    
select  0 as rowIndex,SiteName,EmployeeId,MealKindName,DayCode, N'DI' as MealCode, CAST(4 as int) as MealIndex, CAST(DIMealPlaceCode as nvarchar(50)) as PlaceCode          
FROM @tblMealSummary1          
--where DIMealTypeId > 0       
    
--get EX    
INSERT INTO @tblMealSummary2 (rowIndex,SiteName, EmployeeId, MealKindName,DayCode,MealCode, MealIndex,PlaceCode )    
select  0 as rowIndex,SiteName,EmployeeId,MealKindName,DayCode, N'EX' as MealCode, CAST(5 as int) as MealIndex, CAST(EXMealPlaceCode as nvarchar(50)) as PlaceCode          
FROM @tblMealSummary1          
--where DIMealTypeId > 0       
    
INSERT INTO @tblMealSummaryEmployee    
SELECT EmployeeId,ROW_NUMBER() OVER(ORDER BY SiteId, DeptId,  EmployeeNo) as rowIndex,    
SiteId,SiteName, DeptId, DeptName, EmployeeNo,      
EmployeeName, EmployeeCode, PositionName, JobTitleName    
FROM vP00Employee    
WHERE IsActive = 1 AND EmployeeId IN (SELECT EmployeeId  FROM @tblMealSummary2 GROUP BY EmployeeId)    
    
    
--get Result    
INSERT INTO @tblMealSummaryData    
(groupIndex,rowIndex,SiteId,SiteName, DeptId, DeptName,          
EmployeeName, EmployeeCode, PositionName, JobTitleName,        
MealKindName,MealCode,          
D01,D02,D03,D04,D05,D06,D07,D08,D09,D10,    
D11,D12,D13,D14,D15,D16,D17,D18,D19,D20,    
D21,D22,D23,D24,D25,D26,D27,D28,D29,D30,D31      
)    
SELECT 1, emp.rowIndex,emp.SiteId,emp.SiteName, emp.DeptId, emp.DeptName,          
emp.EmployeeName, emp.EmployeeCode, emp.PositionName, emp.JobTitleName,        
dt.MealKindName,dt.MealCode,          
dt.D01,dt.D02,dt.D03,dt.D04,dt.D05,dt.D06,dt.D07,dt.D08,dt.D09,dt.D10,    
dt.D11,dt.D12,dt.D13,dt.D14,dt.D15,dt.D16,dt.D17,dt.D18,dt.D19,dt.D20,    
dt.D21,dt.D22,dt.D23,dt.D24,dt.D25,dt.D26,dt.D27,dt.D28,dt.D29,dt.D30,dt.D31        
FROM @tblMealSummaryEmployee emp         
INNER JOIN           
(                  
 SELECT atd.EmployeeId,atd.MealKindName,atd.MealIndex,atd.MealCode                 
  ,MAX(IIF(atd.DayCode = N'01',atd.PlaceCode,N'')) AS D01                  
  ,MAX(IIF(atd.DayCode = N'02',atd.PlaceCode,N'')) AS D02                  
  ,MAX(IIF(atd.DayCode = N'03',atd.PlaceCode,N'')) AS D03                  
  ,MAX(IIF(atd.DayCode = N'04',atd.PlaceCode,N'')) AS D04                  
  ,MAX(IIF(atd.DayCode = N'05',atd.PlaceCode,N'')) AS D05                  
  ,MAX(IIF(atd.DayCode = N'06',atd.PlaceCode,N'')) AS D06                  
  ,MAX(IIF(atd.DayCode = N'07',atd.PlaceCode,N'')) AS D07                  
  ,MAX(IIF(atd.DayCode = N'08',atd.PlaceCode,N'')) AS D08                  
  ,MAX(IIF(atd.DayCode = N'09',atd.PlaceCode,N'')) AS D09                  
  ,MAX(IIF(atd.DayCode = N'10',atd.PlaceCode,N'')) AS D10                  
  ,MAX(IIF(atd.DayCode = N'11',atd.PlaceCode,N'')) AS D11                  
  ,MAX(IIF(atd.DayCode = N'12',atd.PlaceCode,N'')) AS D12                  
  ,MAX(IIF(atd.DayCode = N'13',atd.PlaceCode,N'')) AS D13                  
  ,MAX(IIF(atd.DayCode = N'14',atd.PlaceCode,N'')) AS D14                  
  ,MAX(IIF(atd.DayCode = N'15',atd.PlaceCode,N'')) AS D15                  
  ,MAX(IIF(atd.DayCode = N'16',atd.PlaceCode,N'')) AS D16                  
  ,MAX(IIF(atd.DayCode = N'17',atd.PlaceCode,N'')) AS D17                  
  ,MAX(IIF(atd.DayCode = N'18',atd.PlaceCode,N'')) AS D18                  
  ,MAX(IIF(atd.DayCode = N'19',atd.PlaceCode,N'')) AS D19                  
  ,MAX(IIF(atd.DayCode = N'20',atd.PlaceCode,N'')) AS D20                  
  ,MAX(IIF(atd.DayCode = N'21',atd.PlaceCode,N'')) AS D21                  
  ,MAX(IIF(atd.DayCode = N'22',atd.PlaceCode,N'')) AS D22                  
  ,MAX(IIF(atd.DayCode = N'23',atd.PlaceCode,N'')) AS D23                  
  ,MAX(IIF(atd.DayCode = N'24',atd.PlaceCode,N'')) AS D24                  
  ,MAX(IIF(atd.DayCode = N'25',atd.PlaceCode,N'')) AS D25                
  ,MAX(IIF(atd.DayCode = N'26',atd.PlaceCode,N'')) AS D26                  
  ,MAX(IIF(atd.DayCode = N'27',atd.PlaceCode,N'')) AS D27                  
  ,MAX(IIF(atd.DayCode = N'28',atd.PlaceCode,N'')) AS D28                  
  ,MAX(IIF(atd.DayCode = N'29',atd.PlaceCode,N'')) AS D29                  
  ,MAX(IIF(atd.DayCode = N'30',atd.PlaceCode,N'')) AS D30                  
  ,MAX(IIF(atd.DayCode = N'31',atd.PlaceCode,N'')) AS D31        
   FROM @tblMealSummary2 atd                  
   GROUP BY atd.EmployeeId,atd.MealKindName,atd.MealIndex, atd.MealCode              
          
) dt ON emp.EmployeeId = dt.EmployeeId                  
 ORDER BY emp.SiteId,emp.DeptId,emp.EmployeeNo          
          
    
----get total by Site    
INSERT INTO @tblMealSummaryData    
(groupIndex,rowIndex,SiteId,SiteName, DeptId, DeptName,          
EmployeeName, EmployeeCode, PositionName, JobTitleName,        
MealKindName,MealCode,          
D01,D02,D03,D04,D05,D06,D07,D08,D09,D10,    
D11,D12,D13,D14,D15,D16,D17,D18,D19,D20,    
D21,D22,D23,D24,D25,D26,D27,D28,D29,D30,D31      
)    
SELECT     
2 as groupIndex,0 as rowIndex, 0 as SiteId, SiteName, 0 as DeptId, '' as DeptName,          
'Total' as EmployeeName, '' as EmployeeCode, '' as PositionName, '' as JobTitleName        
,dt.MealKindName,dt.MealCode,          
dt.D01,dt.D02,dt.D03,dt.D04,dt.D05,dt.D06,dt.D07,dt.D08,dt.D09,dt.D10,    
dt.D11,dt.D12,dt.D13,dt.D14,dt.D15,dt.D16,dt.D17,dt.D18,dt.D19,dt.D20,    
dt.D21,dt.D22,dt.D23,dt.D24,dt.D25,dt.D26,dt.D27,dt.D28,dt.D29,dt.D30,dt.D31            
FROM (                  
 SELECT atd.SiteName,atd.MealKindName,atd.MealIndex,atd.MealCode                 
 ,SUM(CASE WHEN atd.DayCode = N'01' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D01                       
  ,SUM(CASE WHEN atd.DayCode = N'02' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D02                  
  ,SUM(CASE WHEN atd.DayCode = N'03' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D03                  
  ,SUM(CASE WHEN atd.DayCode = N'04' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D04                  
  ,SUM(CASE WHEN atd.DayCode = N'05' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D05                  
  ,SUM(CASE WHEN atd.DayCode = N'06' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D06                  
  ,SUM(CASE WHEN atd.DayCode = N'07' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D07                  
  ,SUM(CASE WHEN atd.DayCode = N'08' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D08                  
  ,SUM(CASE WHEN atd.DayCode = N'09' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D09                  
  ,SUM(CASE WHEN atd.DayCode = N'10' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D10                  
  ,SUM(CASE WHEN atd.DayCode = N'11' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D11                  
  ,SUM(CASE WHEN atd.DayCode = N'12' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D12                  
  ,SUM(CASE WHEN atd.DayCode = N'13' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D13                  
  ,SUM(CASE WHEN atd.DayCode = N'14' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D14                  
  ,SUM(CASE WHEN atd.DayCode = N'15' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D15                  
  ,SUM(CASE WHEN atd.DayCode = N'16' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D16                  
  ,SUM(CASE WHEN atd.DayCode = N'17' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D17                  
  ,SUM(CASE WHEN atd.DayCode = N'18' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D18                  
  ,SUM(CASE WHEN atd.DayCode = N'19' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D19                  
  ,SUM(CASE WHEN atd.DayCode = N'20' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D20                  
  ,SUM(CASE WHEN atd.DayCode = N'21' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D21                  
  ,SUM(CASE WHEN atd.DayCode = N'22' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D22                  
  ,SUM(CASE WHEN atd.DayCode = N'23' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D23                  
  ,SUM(CASE WHEN atd.DayCode = N'24' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D24                  
  ,SUM(CASE WHEN atd.DayCode = N'25' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D25                
  ,SUM(CASE WHEN atd.DayCode = N'26' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D26                  
  ,SUM(CASE WHEN atd.DayCode = N'27' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D27                  
  ,SUM(CASE WHEN atd.DayCode = N'28' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D28                  
  ,SUM(CASE WHEN atd.DayCode = N'29' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D29                  
  ,SUM(CASE WHEN atd.DayCode = N'30' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D30                  
  ,SUM(CASE WHEN atd.DayCode = N'31' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D31                
   FROM @tblMealSummary2 atd             
   GROUP BY SiteName,atd.MealKindName,atd.MealIndex, atd.MealCode                 
) dt    
    
    
----get total    
INSERT INTO @tblMealSummaryData    
(groupIndex,rowIndex,SiteId,SiteName, DeptId, DeptName,          
EmployeeName, EmployeeCode, PositionName, JobTitleName,        
MealKindName,MealCode,          
D01,D02,D03,D04,D05,D06,D07,D08,D09,D10,    
D11,D12,D13,D14,D15,D16,D17,D18,D19,D20,    
D21,D22,D23,D24,D25,D26,D27,D28,D29,D30,D31      
)    
SELECT     
3 as groupIndex,0 as rowIndex, 0 as SiteId, 'All' as SiteName, 0 as DeptId, '' as DeptName,          
'Total' as EmployeeName, '' as EmployeeCode, '' as PositionName, '' as JobTitleName        
,dt.MealKindName,dt.MealCode,          
dt.D01,dt.D02,dt.D03,dt.D04,dt.D05,dt.D06,dt.D07,dt.D08,dt.D09,dt.D10,    
dt.D11,dt.D12,dt.D13,dt.D14,dt.D15,dt.D16,dt.D17,dt.D18,dt.D19,dt.D20,    
dt.D21,dt.D22,dt.D23,dt.D24,dt.D25,dt.D26,dt.D27,dt.D28,dt.D29,dt.D30,dt.D31            
FROM (                  
 SELECT atd.MealKindName,atd.MealIndex,atd.MealCode                 
 ,SUM(CASE WHEN atd.DayCode = N'01' AND atd.PlaceCode != ''  THEN 1 ELSE 0 END) AS D01                       
  ,SUM(CASE WHEN atd.DayCode = N'02' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D02                  
  ,SUM(CASE WHEN atd.DayCode = N'03' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D03                  
  ,SUM(CASE WHEN atd.DayCode = N'04' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D04                  
  ,SUM(CASE WHEN atd.DayCode = N'05' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D05                  
  ,SUM(CASE WHEN atd.DayCode = N'06' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D06                  
  ,SUM(CASE WHEN atd.DayCode = N'07' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D07                  
  ,SUM(CASE WHEN atd.DayCode = N'08' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D08                  
  ,SUM(CASE WHEN atd.DayCode = N'09' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D09                  
  ,SUM(CASE WHEN atd.DayCode = N'10' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D10                  
  ,SUM(CASE WHEN atd.DayCode = N'11' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D11                  
  ,SUM(CASE WHEN atd.DayCode = N'12' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D12                  
  ,SUM(CASE WHEN atd.DayCode = N'13' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D13                  
  ,SUM(CASE WHEN atd.DayCode = N'14' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D14                  
  ,SUM(CASE WHEN atd.DayCode = N'15' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D15                  
  ,SUM(CASE WHEN atd.DayCode = N'16' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D16                  
  ,SUM(CASE WHEN atd.DayCode = N'17' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D17                  
  ,SUM(CASE WHEN atd.DayCode = N'18' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D18                  
  ,SUM(CASE WHEN atd.DayCode = N'19' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D19                  
  ,SUM(CASE WHEN atd.DayCode = N'20' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D20                  
  ,SUM(CASE WHEN atd.DayCode = N'21' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D21                  
  ,SUM(CASE WHEN atd.DayCode = N'22' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D22                  
  ,SUM(CASE WHEN atd.DayCode = N'23' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D23                  
  ,SUM(CASE WHEN atd.DayCode = N'24' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D24                  
,SUM(CASE WHEN atd.DayCode = N'25' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D25                
  ,SUM(CASE WHEN atd.DayCode = N'26' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D26                  
  ,SUM(CASE WHEN atd.DayCode = N'27' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D27                  
  ,SUM(CASE WHEN atd.DayCode = N'28' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D28                  
  ,SUM(CASE WHEN atd.DayCode = N'29' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D29                  
  ,SUM(CASE WHEN atd.DayCode = N'30' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D30                  
  ,SUM(CASE WHEN atd.DayCode = N'31' AND atd.PlaceCode != '' THEN 1 ELSE 0 END) AS D31                
   FROM @tblMealSummary2 atd                  
   GROUP BY atd.MealKindName,atd.MealIndex, atd.MealCode                 
) dt    
    
    
    
SET NOCOUNT OFF;    
    
SELECT groupIndex,rowIndex,SiteId,SiteName, DeptId, DeptName,          
 EmployeeName, EmployeeCode, PositionName, JobTitleName,        
 MealKindName,MealCode,          
 D01,D02,D03,D04,D05,D06,D07,D08,D09,D10,    
 D11,D12,D13,D14,D15,D16,D17,D18,D19,D20,    
 D21,D22,D23,D24,D25,D26,D27,D28,D29,D30,D31     
FROM @tblMealSummaryData     
ORDER BY groupIndex,rowIndex    
    
    
    
END     
GO
/****** Object:  StoredProcedure [dbo].[usp_MealManagement_SummaryRemark]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO




CREATE PROCEDURE [dbo].[usp_MealManagement_SummaryRemark]          
(                
  @StartDate smalldatetime,        
  @EndDate smalldatetime,
  @MealKindId int  
)                
AS                
BEGIN       
SET NOCOUNT ON;  


DECLARE @tblMealManagement1 TABLE
(  
	MealKindName nvarchar(50),
	EmployeeId int,
    DayCode int,   
    Remark nvarchar(500)
);  

DECLARE @tblMealManagement2 TABLE
(  
	MealKindName nvarchar(50),
    DayCode int,   
    Remark nvarchar(500)
);

DECLARE @tblMealManagementData TABLE
(  
 MealKindName nvarchar(50),   
 EmployeeId int,
 D01 nvarchar(500),   
 D02 nvarchar(500),   
 D03 nvarchar(500),   
 D04 nvarchar(500),   
 D05 nvarchar(500),   
 D06 nvarchar(500),   
 D07 nvarchar(500),   
 D08 nvarchar(500),   
 D09 nvarchar(500),   
 D10 nvarchar(500),   
 D11 nvarchar(500),   
 D12 nvarchar(500),   
 D13 nvarchar(500),   
 D14 nvarchar(500),   
 D15 nvarchar(500),   
 D16 nvarchar(500),   
 D17 nvarchar(500),   
 D18 nvarchar(500),   
 D19 nvarchar(500),   
 D20 nvarchar(500),   
 D21 nvarchar(500),   
 D22 nvarchar(500),   
 D23 nvarchar(500),   
 D24 nvarchar(500),   
 D25 nvarchar(500),   
 D26 nvarchar(500),   
 D27 nvarchar(500),   
 D28 nvarchar(500),   
 D29 nvarchar(500),   
 D30 nvarchar(500),   
 D31 nvarchar(500)  
)  

DECLARE @tblMealManagementData2 TABLE
(  
 MealKindName nvarchar(50),   
 D01 nvarchar(500),   
 D02 nvarchar(500),   
 D03 nvarchar(500),   
 D04 nvarchar(500),   
 D05 nvarchar(500),   
 D06 nvarchar(500),   
 D07 nvarchar(500),   
 D08 nvarchar(500),   
 D09 nvarchar(500),   
 D10 nvarchar(500),   
 D11 nvarchar(500),   
 D12 nvarchar(500),   
 D13 nvarchar(500),   
 D14 nvarchar(500),   
 D15 nvarchar(500),   
 D16 nvarchar(500),   
 D17 nvarchar(500),   
 D18 nvarchar(500),   
 D19 nvarchar(500),   
 D20 nvarchar(500),   
 D21 nvarchar(500),   
 D22 nvarchar(500),   
 D23 nvarchar(500),   
 D24 nvarchar(500),   
 D25 nvarchar(500),   
 D26 nvarchar(500),   
 D27 nvarchar(500),   
 D28 nvarchar(500),   
 D29 nvarchar(500),   
 D30 nvarchar(500),   
 D31 nvarchar(500)  
)    
  
  insert into @tblMealManagement1(MealKindName,EmployeeId,DayCode,Remark)    
  select MealKindName,EmployeeId, CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, Remark 
  FROM  vP01MealRegistrationDetail      
  where IsActive = 1 AND MealKindId = @MealKindId AND BRMealTypeId > 0 AND BRMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate      
  

  insert into @tblMealManagement2(MealKindName,DayCode,Remark)    
  select MealKindName, CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, Remark 
  FROM  vP01MealRegistrationAdd      
  where IsActive = 1 AND MealKindId = @MealKindId AND BRMealTypeId > 0 AND BRMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate  

  --kim tra iu kin ny
  
INSERT INTO @tblMealManagementData  
 SELECT atd.MealKindName,atd.EmployeeId             
 ,MAX(IIF(atd.DayCode = N'01', atd.Remark,'')) AS D01                
 ,MAX(IIF(atd.DayCode = N'02', atd.Remark,'')) AS D02                
 ,MAX(IIF(atd.DayCode = N'03', atd.Remark,'')) AS D03                
 ,MAX(IIF(atd.DayCode = N'04', atd.Remark,'')) AS D04                
 ,MAX(IIF(atd.DayCode = N'05', atd.Remark,'')) AS D05                
 ,MAX(IIF(atd.DayCode = N'06', atd.Remark,'')) AS D06                
 ,MAX(IIF(atd.DayCode = N'07', atd.Remark,'')) AS D07                
 ,MAX(IIF(atd.DayCode = N'08', atd.Remark,'')) AS D08                
 ,MAX(IIF(atd.DayCode = N'09', atd.Remark,'')) AS D09                
 ,MAX(IIF(atd.DayCode = N'10', atd.Remark,'')) AS D10                
 ,MAX(IIF(atd.DayCode = N'11', atd.Remark,'')) AS D11                
 ,MAX(IIF(atd.DayCode = N'12', atd.Remark,'')) AS D12                
 ,MAX(IIF(atd.DayCode = N'13', atd.Remark,'')) AS D13                
 ,MAX(IIF(atd.DayCode = N'14', atd.Remark,'')) AS D14                
 ,MAX(IIF(atd.DayCode = N'15', atd.Remark,'')) AS D15                
 ,MAX(IIF(atd.DayCode = N'16', atd.Remark,'')) AS D16                
 ,MAX(IIF(atd.DayCode = N'17', atd.Remark,'')) AS D17                
 ,MAX(IIF(atd.DayCode = N'18', atd.Remark,'')) AS D18                
 ,MAX(IIF(atd.DayCode = N'19', atd.Remark,'')) AS D19                
 ,MAX(IIF(atd.DayCode = N'20', atd.Remark,'')) AS D20                
 ,MAX(IIF(atd.DayCode = N'21', atd.Remark,'')) AS D21                
 ,MAX(IIF(atd.DayCode = N'22', atd.Remark,'')) AS D22                
 ,MAX(IIF(atd.DayCode = N'23', atd.Remark,'')) AS D23                
 ,MAX(IIF(atd.DayCode = N'24', atd.Remark,'')) AS D24                
 ,MAX(IIF(atd.DayCode = N'25', atd.Remark,'')) AS D25              
 ,MAX(IIF(atd.DayCode = N'26', atd.Remark,'')) AS D26                
 ,MAX(IIF(atd.DayCode = N'27', atd.Remark,'')) AS D27                
 ,MAX(IIF(atd.DayCode = N'28', atd.Remark,'')) AS D28                
 ,MAX(IIF(atd.DayCode = N'29', atd.Remark,'')) AS D29                
 ,MAX(IIF(atd.DayCode = N'30', atd.Remark,'')) AS D30                
 ,MAX(IIF(atd.DayCode = N'31', atd.Remark,'')) AS D31    
 FROM @tblMealManagement1 atd                
 GROUP BY MealKindName,atd.EmployeeId           
  

  
INSERT INTO @tblMealManagementData2  
 SELECT atd.MealKindName             
 ,MAX(IIF(atd.DayCode = N'01', atd.Remark,'')) AS D01                
 ,MAX(IIF(atd.DayCode = N'02', atd.Remark,'')) AS D02                
 ,MAX(IIF(atd.DayCode = N'03', atd.Remark,'')) AS D03                
 ,MAX(IIF(atd.DayCode = N'04', atd.Remark,'')) AS D04                
 ,MAX(IIF(atd.DayCode = N'05', atd.Remark,'')) AS D05                
 ,MAX(IIF(atd.DayCode = N'06', atd.Remark,'')) AS D06                
 ,MAX(IIF(atd.DayCode = N'07', atd.Remark,'')) AS D07                
 ,MAX(IIF(atd.DayCode = N'08', atd.Remark,'')) AS D08                
 ,MAX(IIF(atd.DayCode = N'09', atd.Remark,'')) AS D09                
 ,MAX(IIF(atd.DayCode = N'10', atd.Remark,'')) AS D10                
 ,MAX(IIF(atd.DayCode = N'11', atd.Remark,'')) AS D11                
 ,MAX(IIF(atd.DayCode = N'12', atd.Remark,'')) AS D12                
 ,MAX(IIF(atd.DayCode = N'13', atd.Remark,'')) AS D13                
 ,MAX(IIF(atd.DayCode = N'14', atd.Remark,'')) AS D14                
 ,MAX(IIF(atd.DayCode = N'15', atd.Remark,'')) AS D15                
 ,MAX(IIF(atd.DayCode = N'16', atd.Remark,'')) AS D16                
 ,MAX(IIF(atd.DayCode = N'17', atd.Remark,'')) AS D17                
 ,MAX(IIF(atd.DayCode = N'18', atd.Remark,'')) AS D18                
 ,MAX(IIF(atd.DayCode = N'19', atd.Remark,'')) AS D19                
 ,MAX(IIF(atd.DayCode = N'20', atd.Remark,'')) AS D20                
 ,MAX(IIF(atd.DayCode = N'21', atd.Remark,'')) AS D21                
 ,MAX(IIF(atd.DayCode = N'22', atd.Remark,'')) AS D22                
 ,MAX(IIF(atd.DayCode = N'23', atd.Remark,'')) AS D23                
 ,MAX(IIF(atd.DayCode = N'24', atd.Remark,'')) AS D24                
 ,MAX(IIF(atd.DayCode = N'25', atd.Remark,'')) AS D25              
 ,MAX(IIF(atd.DayCode = N'26', atd.Remark,'')) AS D26                
 ,MAX(IIF(atd.DayCode = N'27', atd.Remark,'')) AS D27                
 ,MAX(IIF(atd.DayCode = N'28', atd.Remark,'')) AS D28                
 ,MAX(IIF(atd.DayCode = N'29', atd.Remark,'')) AS D29                
 ,MAX(IIF(atd.DayCode = N'30', atd.Remark,'')) AS D30                
 ,MAX(IIF(atd.DayCode = N'31', atd.Remark,'')) AS D31    
 FROM @tblMealManagement2 atd                
 GROUP BY MealKindName    

 SET NOCOUNT OFF;   
  
 SELECT 
 MealKindName, 
 ROW_NUMBER() OVER(ORDER BY emp.SiteId, emp.DeptId,  emp.EmployeeNo) as rowIndex,
emp.SiteId,emp.SiteName, emp.DeptId, emp.DeptName, emp.EmployeeNo,  
emp.EmployeeName, emp.EmployeeCode, emp.PositionName, emp.JobTitleName,
 D01, 
 D02, 
 D03, 
 D04, 
 D05, 
 D06, 
 D07, 
 D08, 
 D09, 
 D10, 
 D11, 
 D12, 
 D13, 
 D14, 
 D15, 
 D16, 
 D17, 
 D18, 
 D19, 
 D20, 
 D21, 
 D22, 
 D23, 
 D24, 
 D25, 
 D26, 
 D27, 
 D28, 
 D29, 
 D30, 
 D31
FROM vP00Employee emp 
INNER JOIN  @tblMealManagementData dt ON emp.EmployeeId = dt.EmployeeId

UNION ALL

SELECT 
 MealKindName, 
 0 rowIndex,
0,N'O&M',0,'', 0,  
'Other','', '', '',
 D01, 
 D02, 
 D03, 
 D04, 
 D05, 
 D06, 
 D07, 
 D08, 
 D09, 
 D10, 
 D11, 
 D12, 
 D13, 
 D14, 
 D15, 
 D16, 
 D17, 
 D18, 
 D19, 
 D20, 
 D21, 
 D22, 
 D23, 
 D24, 
 D25, 
 D26, 
 D27, 
 D28, 
 D29, 
 D30, 
 D31
FROM  @tblMealManagementData2

END
GO
/****** Object:  StoredProcedure [dbo].[usp_MealManagement_SummaryTotal]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
              
CREATE PROCEDURE [dbo].[usp_MealManagement_SummaryTotal]                              
(                                  
  @StartDate smalldatetime,                          
  @EndDate smalldatetime,                  
  @MealKindId int,              
  @SiteId int              
)                                  
AS                                  
BEGIN                         
SET NOCOUNT ON;                    
                  
                  
DECLARE @tblMealManagement1 TABLE                  
(                  
 MealKindName nvarchar(50),                  
    DayCode int,                     
    MealCode nvarchar(100),                   
 MealType nvarchar(100),                  
    IndexNo int,                     
    PlaceCode nvarchar(100),                     
    PlaceName nvarchar(100),                    
    Total int                    
);                    
                    
DECLARE @tblMealManagementData TABLE                  
(                    
 IndexNo int,                    
 MealKindName nvarchar(50),                  
 PlaceName nvarchar(100),                     
 MealCode nvarchar(100),                  
 MealType nvarchar(100),                  
 PlaceCode nvarchar(100),                     
 D01 int,                     
 D02 int,                     
 D03 int,                     
 D04 int,                     
 D05 int,                     
 D06 int,                     
 D07 int,                     
 D08 int,                     
 D09 int,                     
 D10 int,                     
 D11 int,                     
 D12 int,                     
 D13 int,                     
 D14 int,                     
 D15 int,                     
 D16 int,                     
 D17 int,                     
 D18 int,                     
 D19 int,                     
 D20 int,                     
 D21 int,                     
 D22 int,                     
 D23 int,                     
 D24 int,                     
 D25 int,                     
 D26 int,                     
 D27 int,                     
 D28 int,                     
 D29 int,                     
 D30 int,                     
 D31 int                    
)                    
             
-- IF(isnull(@SiteId,0) = 0)            
-- BEGIN            
            
-- END            
-- ELSE            
--BEGIN            
            
--END            
             
 insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                      
   select  MealKindName, CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'EBR (Sng sm)' as MealCode,EBRMealTypeNameVN as MealType, CAST(1 as int) as IndexNo,                     
  CAST(EBRMealPlaceCode as nvarchar(50)) as PlaceCode, CAST(EBRMealPlaceNameVN as nvarchar(50)) as PlaceName,                    
  COUNT(EBRMealPlaceId)  as Total                    
  FROM  vP01MealRegistrationDetail                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND EBRMealTypeId > 0 AND EBRMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                         
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),EBRMealPlaceCode,EBRMealPlaceNameVN ,EBRMealTypeNameVN    
      
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                      
   select  MealKindName, CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'BR (Sng)' as MealCode,BRMealTypeNameVN as MealType, CAST(2 as int) as IndexNo,                     
  CAST(BRMealPlaceCode as nvarchar(50)) as PlaceCode, CAST(BRMealPlaceNameVN as nvarchar(50)) as PlaceName,                    
  COUNT(BRMealPlaceId)  as Total                    
  FROM  vP01MealRegistrationDetail                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND BRMealTypeId > 0 AND BRMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),BRMealPlaceCode,BRMealPlaceNameVN ,BRMealTypeNameVN                   
                      
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                     
   select  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'LU (Tra)' as MealCode,LUMealTypeNameVN as MealType, CAST(3 as int) as IndexNo,                     
   CAST(LUMealPlaceCode as nvarchar(50)) as PlaceCode, CAST(LUMealPlaceNameVN as nvarchar(50)) as PlaceName,                    
   COUNT(LUMealPlaceId)  as Total                     
      FROM  vP01MealRegistrationDetail                        
      where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
   AND IsActive = 1 AND MealKindId = @MealKindId AND LUMealTypeId > 0 AND LUMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                       
   GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),LUMealPlaceCode,LUMealPlaceNameVN,LUMealTypeNameVN            
                        
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                        
  select  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'DI (Ti)' as MealCode,DIMealTypeNameVN as MealType, CAST(4 as int) as IndexNo,                     
  CAST(DIMealPlaceCode as nvarchar(50)) as PlaceCode , CAST(DIMealPlaceNameVN as nvarchar(50)) as PlaceName,                     
  COUNT(DIMealPlaceId)  as Total                     
  FROM  vP01MealRegistrationDetail                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND DIMealTypeId > 0 AND DIMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                     
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),DIMealPlaceCode,DIMealPlaceNameVN,DIMealTypeNameVN                         
                    
  insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                        
  select  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'EX (Khuya)' as MealCode,EXMealTypeNameVN as MealType, CAST(5 as int) as IndexNo,                     
  CAST(EXMealPlaceCode as nvarchar(50)) as PlaceCode , CAST(EXMealPlaceNameVN as nvarchar(50)) as PlaceName,                     
  COUNT(EXMealPlaceId)  as Total                     
  FROM  vP01MealRegistrationDetail                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND EXMealTypeId > 0 AND EXMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                     
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),EXMealPlaceCode,EXMealPlaceNameVN,EXMealTypeNameVN                         
       
    
    
--Addition meal            
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                      
   select  MealKindName, CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'EBR (Sng sm)' as MealCode,EBRMealTypeNameVN as MealType, CAST(1 as int) as IndexNo,                     
  CAST(EBRMealPlaceCode as nvarchar(50)) as PlaceCode, CAST(EBRMealPlaceNameVN as nvarchar(50)) as PlaceName,                    
  SUM(EBRMealQty)  as Total                    
  FROM vP01MealRegistrationAdd                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND EBRMealTypeId > 0 AND EBRMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                         
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),EBRMealPlaceCode,EBRMealPlaceNameVN ,EBRMealTypeNameVN        
    
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                      
   select  MealKindName, CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'BR (Sng)' as MealCode,BRMealTypeNameVN as MealType, CAST(2 as int) as IndexNo,                     
  CAST(BRMealPlaceCode as nvarchar(50)) as PlaceCode, CAST(BRMealPlaceNameVN as nvarchar(50)) as PlaceName,                    
  SUM(BRMealQty)  as Total                    
  FROM vP01MealRegistrationAdd                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND BRMealTypeId > 0 AND BRMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                         
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),BRMealPlaceCode,BRMealPlaceNameVN ,BRMealTypeNameVN                   
                      
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                     
   select  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'LU (Tra)' as MealCode,LUMealTypeNameVN as MealType, CAST(3 as int) as IndexNo,                     
   CAST(LUMealPlaceCode as nvarchar(50)) as PlaceCode, CAST(LUMealPlaceNameVN as nvarchar(50)) as PlaceName,                    
   SUM(LUMealQty)  as Total                     
      FROM  vP01MealRegistrationAdd                        
      where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
   AND IsActive = 1 AND MealKindId = @MealKindId AND LUMealTypeId > 0 AND LUMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                       
   GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),LUMealPlaceCode,LUMealPlaceNameVN,LUMealTypeNameVN                    
                        
insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                        
  select  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'DI (Ti)' as MealCode,DIMealTypeNameVN as MealType, CAST(4 as int) as IndexNo,                     
  CAST(DIMealPlaceCode as nvarchar(50)) as PlaceCode , CAST(DIMealPlaceNameVN as nvarchar(50)) as PlaceName,                     
  SUM(DIMealQty)  as Total                     
  FROM  vP01MealRegistrationAdd                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND DIMealTypeId > 0 AND DIMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                     
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),DIMealPlaceCode,DIMealPlaceNameVN,DIMealTypeNameVN                         
                    
  insert into @tblMealManagement1(MealKindName,DayCode,MealCode,MealType,IndexNo,PlaceCode,PlaceName,Total)                        
  select  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)) as DayCode, N'EX (Khuya)' as MealCode,EXMealTypeNameVN as MealType, CAST(5 as int) as IndexNo,                     
  CAST(EXMealPlaceCode as nvarchar(50)) as PlaceCode , CAST(EXMealPlaceNameVN as nvarchar(50)) as PlaceName,                     
  SUM(EXMealQty)  as Total                     
  FROM  vP01MealRegistrationAdd                        
  where ((@SiteId >0 AND SiteId = @SiteId) OR (@SiteId =0 AND SiteId In (SELECT SiteId FROM P00Site where IsActive = 1)))           
  AND IsActive = 1 AND MealKindId = @MealKindId AND EXMealTypeId > 0 AND EXMealPlaceId > 0 AND WorkDate BETWEEN @StartDate AND @EndDate                     
  GROUP BY  MealKindName,CAST(FORMAT(WorkDate,'dd') AS nvarchar(50)),EXMealPlaceCode,EXMealPlaceNameVN,EXMealTypeNameVN                    
       
    
                 
INSERT INTO @tblMealManagementData                    
 SELECT atd.IndexNo, atd.MealKindName, atd.PlaceName, atd.MealCode,atd.MealType, atd.PlaceCode                                
  ,SUM(CASE WHEN atd.DayCode = N'01'THEN atd.Total ELSE 0 END) AS D01                                  
  ,SUM(CASE WHEN atd.DayCode = N'02'THEN atd.Total ELSE 0 END) AS D02                                  
  ,SUM(CASE WHEN atd.DayCode = N'03'THEN atd.Total ELSE 0 END) AS D03                                  
  ,SUM(CASE WHEN atd.DayCode = N'04'THEN atd.Total ELSE 0 END) AS D04                                  
  ,SUM(CASE WHEN atd.DayCode = N'05'THEN atd.Total ELSE 0 END) AS D05                                  
  ,SUM(CASE WHEN atd.DayCode = N'06'THEN atd.Total ELSE 0 END) AS D06                                  
  ,SUM(CASE WHEN atd.DayCode = N'07'THEN atd.Total ELSE 0 END) AS D07                                  
  ,SUM(CASE WHEN atd.DayCode = N'08'THEN atd.Total ELSE 0 END) AS D08                                  
  ,SUM(CASE WHEN atd.DayCode = N'09'THEN atd.Total ELSE 0 END) AS D09                                  
  ,SUM(CASE WHEN atd.DayCode = N'10'THEN atd.Total ELSE 0 END) AS D10                                  
  ,SUM(CASE WHEN atd.DayCode = N'11'THEN atd.Total ELSE 0 END) AS D11                                  
  ,SUM(CASE WHEN atd.DayCode = N'12'THEN atd.Total ELSE 0 END) AS D12                                  
  ,SUM(CASE WHEN atd.DayCode = N'13'THEN atd.Total ELSE 0 END) AS D13                                  
  ,SUM(CASE WHEN atd.DayCode = N'14'THEN atd.Total ELSE 0 END) AS D14                                  
  ,SUM(CASE WHEN atd.DayCode = N'15'THEN atd.Total ELSE 0 END) AS D15                                  
  ,SUM(CASE WHEN atd.DayCode = N'16'THEN atd.Total ELSE 0 END) AS D16                                  
  ,SUM(CASE WHEN atd.DayCode = N'17'THEN atd.Total ELSE 0 END) AS D17                                  
  ,SUM(CASE WHEN atd.DayCode = N'18'THEN atd.Total ELSE 0 END) AS D18                                  
  ,SUM(CASE WHEN atd.DayCode = N'19'THEN atd.Total ELSE 0 END) AS D19                                  
  ,SUM(CASE WHEN atd.DayCode = N'20'THEN atd.Total ELSE 0 END) AS D20                                  
  ,SUM(CASE WHEN atd.DayCode = N'21'THEN atd.Total ELSE 0 END) AS D21                                  
  ,SUM(CASE WHEN atd.DayCode = N'22'THEN atd.Total ELSE 0 END) AS D22                                  
  ,SUM(CASE WHEN atd.DayCode = N'23'THEN atd.Total ELSE 0 END) AS D23                                  
  ,SUM(CASE WHEN atd.DayCode = N'24'THEN atd.Total ELSE 0 END) AS D24                               
  ,SUM(CASE WHEN atd.DayCode = N'25'THEN atd.Total ELSE 0 END) AS D25                                
  ,SUM(CASE WHEN atd.DayCode = N'26'THEN atd.Total ELSE 0 END) AS D26                                  
  ,SUM(CASE WHEN atd.DayCode = N'27'THEN atd.Total ELSE 0 END) AS D27                                  
  ,SUM(CASE WHEN atd.DayCode = N'28'THEN atd.Total ELSE 0 END) AS D28                                  
  ,SUM(CASE WHEN atd.DayCode = N'29'THEN atd.Total ELSE 0 END) AS D29                                  
  ,SUM(CASE WHEN atd.DayCode = N'30'THEN atd.Total ELSE 0 END) AS D30                                  
  ,SUM(CASE WHEN atd.DayCode = N'31'THEN atd.Total ELSE 0 END) AS D31                      
 FROM @tblMealManagement1 atd                                  
 GROUP BY  atd.MealKindName,atd.PlaceName,atd.IndexNo,atd.MealCode,atd.MealType, atd.PlaceCode                              
                    
                    
                    
 INSERT INTO @tblMealManagementData                    
 SELECT atd.IndexNo, atd.MealKindName, N'Total (Tng)', atd.MealCode, N'All (Tng)', N'All (Tng)'                                
  ,SUM(CASE WHEN atd.DayCode = N'01'THEN atd.Total ELSE 0 END) AS D01                                  
  ,SUM(CASE WHEN atd.DayCode = N'02'THEN atd.Total ELSE 0 END) AS D02                                  
  ,SUM(CASE WHEN atd.DayCode = N'03'THEN atd.Total ELSE 0 END) AS D03                             
  ,SUM(CASE WHEN atd.DayCode = N'04'THEN atd.Total ELSE 0 END) AS D04                                  
  ,SUM(CASE WHEN atd.DayCode = N'05'THEN atd.Total ELSE 0 END) AS D05                                  
  ,SUM(CASE WHEN atd.DayCode = N'06'THEN atd.Total ELSE 0 END) AS D06                                  
  ,SUM(CASE WHEN atd.DayCode = N'07'THEN atd.Total ELSE 0 END) AS D07                                  
  ,SUM(CASE WHEN atd.DayCode = N'08'THEN atd.Total ELSE 0 END) AS D08                                  
  ,SUM(CASE WHEN atd.DayCode = N'09'THEN atd.Total ELSE 0 END) AS D09                                  
  ,SUM(CASE WHEN atd.DayCode = N'10'THEN atd.Total ELSE 0 END) AS D10                                  
  ,SUM(CASE WHEN atd.DayCode = N'11'THEN atd.Total ELSE 0 END) AS D11                                  
  ,SUM(CASE WHEN atd.DayCode = N'12'THEN atd.Total ELSE 0 END) AS D12                                  
  ,SUM(CASE WHEN atd.DayCode = N'13'THEN atd.Total ELSE 0 END) AS D13                                  
  ,SUM(CASE WHEN atd.DayCode = N'14'THEN atd.Total ELSE 0 END) AS D14                                  
  ,SUM(CASE WHEN atd.DayCode = N'15'THEN atd.Total ELSE 0 END) AS D15                                  
  ,SUM(CASE WHEN atd.DayCode = N'16'THEN atd.Total ELSE 0 END) AS D16                                  
  ,SUM(CASE WHEN atd.DayCode = N'17'THEN atd.Total ELSE 0 END) AS D17                                  
  ,SUM(CASE WHEN atd.DayCode = N'18'THEN atd.Total ELSE 0 END) AS D18                                  
  ,SUM(CASE WHEN atd.DayCode = N'19'THEN atd.Total ELSE 0 END) AS D19                                  
  ,SUM(CASE WHEN atd.DayCode = N'20'THEN atd.Total ELSE 0 END) AS D20                                  
  ,SUM(CASE WHEN atd.DayCode = N'21'THEN atd.Total ELSE 0 END) AS D21                                  
  ,SUM(CASE WHEN atd.DayCode = N'22'THEN atd.Total ELSE 0 END) AS D22                                  
  ,SUM(CASE WHEN atd.DayCode = N'23'THEN atd.Total ELSE 0 END) AS D23                                  
  ,SUM(CASE WHEN atd.DayCode = N'24'THEN atd.Total ELSE 0 END) AS D24                                  
  ,SUM(CASE WHEN atd.DayCode = N'25'THEN atd.Total ELSE 0 END) AS D25                                
  ,SUM(CASE WHEN atd.DayCode = N'26'THEN atd.Total ELSE 0 END) AS D26                                 
  ,SUM(CASE WHEN atd.DayCode = N'27'THEN atd.Total ELSE 0 END) AS D27                                  
  ,SUM(CASE WHEN atd.DayCode = N'28'THEN atd.Total ELSE 0 END) AS D28                                  
  ,SUM(CASE WHEN atd.DayCode = N'29'THEN atd.Total ELSE 0 END) AS D29                                  
  ,SUM(CASE WHEN atd.DayCode = N'30'THEN atd.Total ELSE 0 END) AS D30                                  
  ,SUM(CASE WHEN atd.DayCode = N'31'THEN atd.Total ELSE 0 END) AS D31                      
 FROM @tblMealManagement1 atd                                  
 GROUP BY  atd.IndexNo,atd.MealKindName,atd.MealCode                        
                   
 SET NOCOUNT OFF;                     
                    
 SELECT                   
 ROW_NUMBER() OVER(ORDER BY IndexNo,PlaceName) as IndexNo,                   
 MealKindName,                  
 PlaceName,                   
 MealCode,                   
 MealType,                  
 PlaceCode,                   
 D01,                   
 D02,                   
 D03,                   
 D04,                   
 D05,           
 D06,                   
 D07,                   
 D08,                   
 D09,                   
 D10,                   
 D11,                   
 D12,                   
 D13,                   
 D14,                   
 D15,                   
 D16,                   
 D17,                   
 D18,                   
 D19,                   
 D20,                   
 D21,                   
 D22,                   
 D23,                   
 D24,                   
 D25,                   
 D26,                   
 D27,                   
 D28,                   
 D29,                   
 D30,                   
 D31                  
 FROM @tblMealManagementData                   
                    
END     
    
GO
/****** Object:  StoredProcedure [dbo].[usp_MealRegistration_CancelMealOnHoliday]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[usp_MealRegistration_CancelMealOnHoliday]
(
	@_WorkDate smalldatetime
)
AS
BEGIN

IF EXISTS( SELECT 1 FROM P00Holiday WHERE IsActive = 1 AND HLDate = @_WorkDate)
BEGIN
	update P01MealRegistrationDetail set
	EBRMealPlaceId = 0, EBRMealTypeId =0,
	BRMealPlaceId = 0, BRMealTypeId =0,
	LUMealPlaceId = 0, LUMealTypeId =0,
	DIMealPlaceId =0, DIMealTypeId =0,
	EXMealPlaceId =0, EXMealTypeId = 0,
	NBRMealPlaceId =0, NBRMealTypeId =0,
	Remark = 'Holiday',
	ModifiedAt= GETDATE() where WorkDate = @_WorkDate
END

END
GO
/****** Object:  StoredProcedure [dbo].[usp_MealRegistration_CheckDiff]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[usp_MealRegistration_CheckDiff]
AS
BEGIN
SELECT m.EmployeeCode, m.EmployeeName, m.WorkDate, m.WorkShiftName, 
m.EBRMealTypeName, m.BRMealTypeName , m.LUMealTypeName, m.DIMealTypeName, m.EXMealTypeName
FROM
(
	select * from vP01LeaveDaysDetail 
	where LeaveTypeId = 1  --AND LeaveDate > '2024-12-01'
	--AND LeaveTimeId = 1
) l
INNER JOIN 
(
	SELECt * FROM vP01MealRegistrationDetail 
	WHERE IsActive = 1 AND SiteId = 3  --AND  WorkDate > '2024-12-01' 
	AND (BRMealTypeId > 1 OR LUMealTypeId > 1 OR DIMealTypeId > 1)

) m ON l.EmployeeId = m.EmployeeId AND FORMAT(l.LeaveDate,'yyyyMMdd') = FORMAT(m.WorkDate, 'yyyyMMdd')


END



GO
/****** Object:  StoredProcedure [dbo].[usp_P00ExchangeRate_InsUpd]    Script Date: 5/30/2025 11:33:18 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE PROCEDURE [dbo].[usp_P00ExchangeRate_InsUpd]
(
	@WorkDate smalldatetime,
	@CurrencyCode nvarchar(500),
	@CurrencyName nvarchar(500),
	@BankName nvarchar(500),
	@ExchangeRate numeric(18, 2),
	@UpdateTime datetime,
	@Remark nvarchar(500)
)
AS
BEGIN
IF EXISTS(SELECT 1 FROM P00ExchangeRate WHERE WorkDate = @WorkDate AND CurrencyCode = @CurrencyCode)
BEGIN

--check banks
IF (@BankName = 'SMBC')
BEGIN
-- ghi de ty gia cua SMBC
	UPDATE P00ExchangeRate 
	SET BankName=@BankName,
		ExchangeRate=@ExchangeRate,
		UpdateTime=@UpdateTime,
		Remark=@Remark,
		ModifiedAt = GETDATE()
	WHERE WorkDate = @WorkDate AND CurrencyCode = @CurrencyCode
END

END
ELSE
BEGIN
	INSERT INTO P00ExchangeRate (WorkDate,CurrencyCode,CurrencyName,BankName,ExchangeRate,UpdateTime,Remark)
	VALUES (@WorkDate,@CurrencyCode,@CurrencyName,@BankName,@ExchangeRate,@UpdateTime,@Remark)
END

END
GO
USE [master]
GO
ALTER DATABASE [VAPCODB] SET  READ_WRITE 
GO
